var Ef=Object.defineProperty,Pf=Object.defineProperties;var kf=Object.getOwnPropertyDescriptors;var Ts=Object.getOwnPropertySymbols;var El=Object.prototype.hasOwnProperty,Pl=Object.prototype.propertyIsEnumerable;var wl=(e,t,n)=>t in e?Ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))El.call(t,n)&&wl(e,n,t[n]);if(Ts)for(var n of Ts(t))Pl.call(t,n)&&wl(e,n,t[n]);return e},Z=(e,t)=>Pf(e,kf(t));var Ga=(e,t)=>{var n={};for(var a in e)El.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Ts)for(var a of Ts(e))t.indexOf(a)<0&&Pl.call(e,a)&&(n[a]=e[a]);return n};var T=(e,t,n)=>new Promise((a,s)=>{var i=l=>{try{r(n.next(l))}catch(u){s(u)}},o=l=>{try{r(n.throw(l))}catch(u){s(u)}},r=l=>l.done?a(l.value):Promise.resolve(l.value).then(i,o);r((n=n.apply(e,t)).next())});import{E as Sf,_ as xa}from"./vendor-4-87e1e3f9.js";import{l as Af,n as Tf,o as Cf,q as xf,r as If,C as ai,u as gs,v as Ti,w as au,g as Vs,U as mr,x as Ia,y as $f,z as Rf,A as Df,i as oa,B as su,D as En,E as Nf,d as Of,F as Lf,S as Uf,G as iu,H as Mf,I as ou,W as Bf,Q as ru,J as Ff,e as Gf,K as zf,L as Hf,M as qs,N as Yf,O as Wf,P as Vf,R as qf,T as jf,t as kl}from"./vendor-2-e250ed0d.js";import{p as Kf,F as rt,q as h,G as M,H as _t,r as x,I as v,J as $a,c as na,l as lu,K as Ot,L as yr,k as O,w as $e,M as cu,s as b,x as c,y as On,A as _e,N as d,B as _,z as N,O as Ci,P as k,Q as kt,R as K,S as vr,T as Qf,U as ye,b as st,V as Ue,W as Ye,X as Ne,Y as be,Z as he,_ as Q,$ as pn,a0 as ge,E as It,u as ct,v as Kt,a1 as Xf,a2 as Jf,a3 as Zf,a4 as ke,a5 as eh,a6 as th,a7 as uu,a8 as br,a9 as Fn,aa as dt,ab as vt,ac as bt,ad as xi,ae as Ii,af as ut,ag as du,ah as pu,ai as $i,aj as nh,ak as ah,al as ya,am as Jt,an as sh,ao as ih,ap as oh,g as rh,o as lh,aq as fu,ar as mn,as as ch,at as hu,au as _u,av as on,d as uh,aw as Gt,ax as wr,ay as Ri,az as In,aA as ra,aB as dh,aC as Gn,aD as ph,aE as fh,aF as At,aG as gu,aH as va,aI as hh,aJ as _h,aK as Er,aL as Sl,aM as gh,n as fn,aN as si,aO as Wa,aP as ii,aQ as ms,aR as mu,aS as mh,aT as yh,aU as yu,aV as vh,aW as bh,aX as wh,aY as Eh,aZ as Ph,a_ as kh,a$ as vu,b0 as la,b1 as bu,t as Al,b2 as To,b3 as Sh,b4 as Ah,b5 as Th,b6 as Ch,b7 as xh,b8 as Ih,b9 as $h,ba as Rh,bb as Dh}from"./vendor-1-8c77151e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Nh=Af,Oh=Tf,Lh=function(e,t){return Oh(Nh[e].prototype[t])},Uh=Lh;Uh("Array","at");/*! Element Plus v2.3.14 */var Mh={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const oi=Cf(),Bh=e=>{oi.use(xf),e.use(oi)},Fh="0b168d3bb0828b5f6242cb3a9f144a23";let ja="";function Gh(e){const t=If(e);return ja=new ai(Fh).decrypt(t),new ai(ja)}function wu(e){return ja&&(e=new ai(ja).encryptJson(e)),{key:ja,data:e}}const zh=!1,zn={}.VITE_IS_MOBILE==="true",os={}.VITE_IS_BAIDU==="true",Di={}.VITE_IS_GLM==="true",mt=os||Di,Hh="prod",hn=window.__TAURI__!==void 0,en={Text:1,Link:2,Line:4,Square:5,Polygon:7,PolyLine:8,Highlight:9,Underline:10,StrikeOut:12,Stamp:13,Ink:15,Popup:16,Table:27,SelectText:28,Null:29,TextDiff:101},Ke={USER:"ChatDOC_User",CHAT_RECORD:"ChatDOC_Records_v2",LAST_NOTICE_TIME:"ChatDOC_Last_Notice_Time",AUTO_RENEWAL:"ChatDOC_Auto_Renewal",ORDER_ID:"chatdoc_order_id",QUESTION_SETTING_PANEL_EXPAND:"ChatDOC_Question_Setting_Expand_State",DISABLED_SEND_EMAIL_END_TIME:"ChatDOC_Disabled_Send_Email_End_Time",HAS_SHOW_THREAD_BACK_TIPS:"ChatDOC_Has_Show_Thread_Bank_Tips",DISABLED_SEND_SIGN_VER_EMAIL_END_TIME:"ChatDOC_Disabled_Send_Sign_Ver_Email_End_Time",FROM_SIGN_UP:"ChatDOC_From_Sign_Up",FROM_RESET_PASSWORD:"ChatDOC_From_Reset_Password"},je={ELEMENT_PARSED:300,PAGE_LIMIT:-10,TOKENS_LIMIT:-6,SIZE_LIMIT:-5,DOWNLOAD_ERROR:-4,WORD_PARSE_ERROR:-3,PASSWORD_ERROR:-2,TITLE_PARSE_ERROR:-11,DOWNLOADING:15,UN_PARSED:1,PARSING:12,PAGE_PACKAGE_NOT_ENOUGH_ERROR:-9,ENCODE_ERROR:-12,CONTENT_POLICY_ERROR:-14,CONTENT_DECODE_ERROR:-15,HTML_CONVERT_ERROR:-16,HTML_EMPTY_BODY_ERROR:-17,HTML_PARSE_ERROR:-18,WEBSITE_DOWNLOAD_ERROR:-19},Yh={OCR_EXCEED:-13},Wh={ANALYZING:"Analyzing",ANALYSIS_COMPLETED:"Analysis completed"},tn={BLOCK:"pdflux-identification-element-block",MULTI_BLOCK:"pdflux-identification-multiple-element-block",PARAGRAPH:"pdflux-identification-chatdoc-paragraph",PARAGRAPH_BOX:"pdflux-identification-chatdoc-paragraph-box",TABLE:"pdflux-identification-chatdoc-table",TABLE_SELECTED:"pdflux-identification-chatdoc-table-selected",SEARCH_RESULT:"pdflux-identification-search-result"},Vh=[{annotationType:en.Square,config:{customType:tn.BLOCK,classNames:["element-block"],isResizeEnable:!1}},{annotationType:en.Highlight,config:{customType:tn.MULTI_BLOCK,classNames:["multiple-element-block"],isResizeEnable:!1}},{annotationType:en.Square,config:{customType:tn.PARAGRAPH,classNames:["chatdoc-paragraph"],isResizeEnable:!1,isAlwaysShow:!1,locked:!0}},{annotationType:en.Square,config:{customType:tn.PARAGRAPH_BOX,classNames:["chatdoc-paragraph-box"],isResizeEnable:!1,isAlwaysShow:!0,locked:!0}},{annotationType:en.Table,config:{customType:tn.TABLE,classNames:["chatdoc-table"],isResizeEnable:!1,isAlwaysShow:!1,locked:!0}},{annotationType:en.Table,config:{customType:tn.TABLE_SELECTED,classNames:["chatdoc-table-selected"],isResizeEnable:!1,isAlwaysShow:!0,locked:!0}},{annotationType:en.Highlight,config:{customType:tn.SEARCH_RESULT,classNames:["chatdoc-search-result"],isResizeEnable:!1,isAlwaysShow:!0,locked:!0}}],qh=/^[\w\s^$*[\]{}()?"!@#%&/\\,><':;|~=+.-]{8,99}$/,jh=/\.(docx?)$/i,Kh=/\.(md)$/i,Qh=/\.(epub)$/i,Xh=/\.(txt)$/i,Jh=/\.(html)$/i,Zh=/\.(pdf)$/i,qF=typeof SharedArrayBuffer=="function",e_=480,t_=10,n_=280,to=280,jF=700,a_=350,KF=114,QF={SELECT:"select",DOC:"doc"},XF={STICK:"stick_to_doc",FREELY:"go_freely"},no=14,Tt={POLICY:"Policy",TERMS:"Terms",TWITTER:"Twitter",DISCORD:"Discord",WIKI:"Wiki",CHANGELOG:"Changelog",WHITELIST:"whitelist"},ea=window.location.origin,Ka=window.location.host,s_=()=>{if(Di)return"https://glm-chatdoc-api-reference.test.paodingai.com";if(os&&Hh!=="prod")return"https://bohr.cheftin.cn:7082/reference/";let e="com";return Ka.lastIndexOf(".")>=0&&(e=Ka.match(/\.([^.]+)$/)[1]),`${os?"https://api-reference.paodingjiewen.":"https://api-reference.chatdoc."}${e}`},Dt={POLICY:`${ea}/privacy_policy.html`,TERMS:`${ea}/term_of_service.html`,TWITTER:"https://twitter.com/chatdoc_ai",DISCORD:"https://discord.gg/F33mhsAqqg",WIKI:"https://chatdoc.notion.site/ChatDOC-Public-Wiki-ade790bf8f8341ae87a5807d7df586b6",CHANGELOG:`${ea}/log`,OFFICIAL:ea,WHITELIST:`${ea}/URL_Whitelist.html`,API_DEMO:"https://github.com/chatdoc-com/ChatDOC-API-Demo",API_REFERENCE:s_(),PRODUCT_HUNT:"https://www.producthunt.com/posts/chatdoc"},Be={COLLECTION:"collection",SINGLE_DOC:"single_doc",COLLECTION_ITEM_DOC:"doc_of_collection"},Cs={FREE:".pdf",PRO:".pdf,.doc,.docx,.md,.epub,.txt"},Me={ALIPAY:"alipay",WECHAT:"wechat",PAYPAL:"paypal",CARD:"card"},ca={GIFT:"gift",INVITE:"invite_gift",RECALL:"recall_gift",PURCHASE:"purchase"},J={FREE:0,FILE_PACKAGE:2,MONTHLY_PRO:1,ANNUAL_PRO:3,MONTHLY_PRO_PLUS:11,PAGE_PACKAGE:6,OCR_PAGE_PACKAGE:15,API_MONTHLY_BASIC:4,API_ANNUAL_BASIC:5,API_PAGE_PACKAGE:8,API_QUESTION_PACKAGE:9,API_PAGE_AND_QUESTION_PACKAGE:10,API_LITE_PAGE_PACKAGE:11,API_LITE_PAGE_AND_QUESTION_PACKAGE:12,API_BASIC_PAGE_PACKAGE:13,API_BASIC_PAGE_AND_QUESTION_PACKAGE:14},i_={background:!0,layout:"total,sizes,prev,pager,next,jumper"},Mt={SHOW_UPGRADE:"showUpgrade",NOT_ENOUGH_SLOTS:"notHaveEnoughFileSlots",PDF_PAGE_EXCEED:"pdfPageExceed"},Bt={UPGRADE:"upgrade plan",REFER:"refer friend"},tt={PLAN:"upgrade plan",PACKAGE:"extra packages",REFER:"refer friend"},Co={HOVER:"hover",SELECTION:"selection"},ao=Co.HOVER,ri={SIGNED:"signed",NORMAL:"normal",DEDUCT_FAILED:"deduct_failed"},ua={NEARER:"nearer",EARLIER:"earlier",BETWEEN:"between"},Pn={SIGN_UP:{key:"signUp",value:"signUp"},INVITE_SIGN_UP:{key:"invite",value:"inviteSignUp"},ORG_SIGN_UP:{key:"org",value:"orgSignUp"},RECALL_SIGN_IN:[{key:ua.NEARER,value:"recallSignInNearer"},{key:ua.EARLIER,value:"recallSignInEarlier"},{key:ua.BETWEEN,value:"recallSignInBetween"}]},Eu=2e4,Pu={ABORT_UPLOAD:"abortUpload",ABORT_ANSWER_GENERATING:"abortAnswerGenerating",ABORT_EXPORT:"abortExport"},Yt={PROFILE:0,PREFERENCE:1,USAGE:2,SUBSCRIPTION:3},JF={RECOMMEND:0,CUSTOM:1},cn={EMAIL:"email",TWITTER:"twitter"},qe={SOURCE:{SUBSCRIBE_PRO:"subscribe_pro",AUTO_RENEWAL:"auto_renewal",FILE_PACKAGE:"file_package",PAGE_PACKAGE:"page_package",OCR_PAGE_PACKAGE:"ocr_page_package",API_PAGE:"API_Pages",API_QUESTION:"API_Questions",API_PAGE_AND_QUESTION:"API_Pages_and_Questions",API_LITE_PAGE:"API_Lite_Pages",API_LITE_PAGE_AND_QUESTION:"API_Lite_Pages_and_Questions",API_BASIC_PAGE:"API_Basic_Pages",API_BASIC_PAGE_AND_QUESTION:"API_Basic_Pages_and_Questions"},SOURCE_PAGE:{NOTICE:"notice",UPLOAD_PAGE:"upload_page",PROFILE:"profile",INPUT_BOX:"input_box",OTHER:"other"},ACTION_TYPE:{OPEN:"open",CLOSE:"close",TIMEOUT:"timeout"},PAY_METHOD:A({},Me)},Tl={[J.MONTHLY_PRO]:qe.SOURCE.SUBSCRIBE_PRO,[J.ANNUAL_PRO]:qe.SOURCE.SUBSCRIBE_PRO,[J.MONTHLY_PRO_PLUS]:qe.SOURCE.SUBSCRIBE_PRO,[J.FILE_PACKAGE]:qe.SOURCE.FILE_PACKAGE,[J.PAGE_PACKAGE]:qe.SOURCE.PAGE_PACKAGE,[J.OCR_PAGE_PACKAGE]:qe.SOURCE.OCR_PAGE_PACKAGE,[J.API_PAGE_PACKAGE]:qe.SOURCE.API_PAGE,[J.API_QUESTION_PACKAGE]:qe.SOURCE.API_QUESTION,[J.API_PAGE_AND_QUESTION_PACKAGE]:qe.SOURCE.API_PAGE_AND_QUESTION,[J.API_LITE_PAGE_PACKAGE]:qe.SOURCE.API_LITE_PAGE,[J.API_LITE_PAGE_AND_QUESTION_PACKAGE]:qe.SOURCE.API_LITE_PAGE_AND_QUESTION,[J.API_BASIC_PAGE_PACKAGE]:qe.SOURCE.API_BASIC_PAGE,[J.API_BASIC_PAGE_AND_QUESTION_PACKAGE]:qe.SOURCE.API_BASIC_PAGE_AND_QUESTION},o_={[J.MONTHLY_PRO]:"Pro_30days",[J.ANNUAL_PRO]:"Pro_360days"},ku={FREE:"Free",PRO:"Pro",GIFT:"Gift"},ZF={id:"new",name:"New Prompt",content:""},so={SIGN_UP:"sign_up",PASSWORD_RESET:"password_reset"},Pr=30,Su=360,xt={MAIN:"chatdoc_main",API:"chatdoc_api"},Qa={PRO_MONTHLY_BASE:"pro_monthly_base",PRO_MONTHLY_RENEWAL:"pro_monthly_renewal",PRO_ANNUALLY_BASE:"pro_annually_base"},Le={DOCUMENT:"document",PAGE:"interface_document_page",OCR_PAGE:"interface_document_ocr_page"},e8=150,t8=30,n8=1200,nn={PAGE:"page",QUESTION:"question",PAGE_AND_QUESTION:"page_and_question",LITE_PAGE:"lite_page",LITE_PAGE_AND_QUESTION:"lite_page_and_question",BASIC_PAGE:"basic_page",BASIC_PAGE_AND_QUESTION:"basic_page_and_question"},io={size:36,pdfPageTokens:14e3,nonPdfFileTokens:3e5,countPerCollection:30},li={PAID:"paid",APPROVED:"approved",UNPAID:"unpaid",REFUNDING:"refunding",REFUNDED:"refunded"},nt={[Me.CARD.toUpperCase()]:1,[Me.PAYPAL.toUpperCase()]:2,[Me.WECHAT.toUpperCase()]:3,[Me.ALIPAY.toUpperCase()]:4,1:Me.CARD,2:Me.PAYPAL,3:Me.WECHAT,4:Me.ALIPAY},Pe={SELECT_PACKAGE:1,SELECT_PAY_TYPE:2,PAYING:3,FINISH_PAYMENT:4},Au={[Pe.SELECT_PACKAGE]:"step-1",[Pe.SELECT_PAY_TYPE]:"step-2",[Pe.PAYING]:"step-3",[Pe.FINISH_PAYMENT]:"step-4"},Ut={BACK:"back",CANCEL:"cancel",PAY:"pay",CHECK_ORDER:"checkOrder",CONTINUE:"continue"},r_={TABLE_CELL:"TABLE_CELL"},a8={PUBLIC:"public",PERSONAL:"personal"},s8={IS_ENABLE:"isEnable",IS_ENABLE_PASSWORD:"isEnablePassword",IS_ENABLE_EXPIRED:"isEnableExpired",EXPIRE_AT:"expireAt"},i8={SHARE:"shareProvider"},o8="element-block",kr=gs({id:"share",state:()=>({shareInfo:{shareId:"",password:"",uploadId:"",uploadName:"",inviterName:"",inviterEmail:"",inviterAvatar:"",uploadType:"",collectionDocCount:null},isPassValid:!1}),getters:{isCollectionShare(e){return e.shareInfo.uploadType===Be.COLLECTION},shareParams(e){const{shareId:t,password:n}=e.shareInfo;return Ti({share_id:t,password:n})}},actions:{setShareInfo(e){Object.keys(e).forEach(t=>{this.shareInfo[t]=e[t]})},resetShareInfo(){Object.keys(this.shareInfo).forEach(e=>{this.shareInfo[e]=""})},setIsPassValid(e){this.isPassValid=e}}});function Tu(){return kr(oi)}const Ni="./api/v1",l_=`${window.location.origin}${window.location.pathname}`,Cu=`${l_}api/v1`;let xo="";const c_=e=>{if(xo)return Gh(xo).decryptJson(new Uint8Array(e));{let t=ai.fromBytes(new Uint8Array(e));try{t=JSON.parse(t)}catch(n){return Promise.reject(n)}return t}},xu=e=>{const t="[a-zA-Z0-9_-]+";if(["/documents","/summaries","/questions/recommend","/questions/interactions","/questions/interactions/pagination","/questions/export","/questions/export/image",new RegExp(`^/documents/range/${t}$`),new RegExp(`^/documents/${t}/ocr-mark$`),new RegExp(`^/documents/${t}/elements$`),new RegExp(`^/documents/${t}/search$`)].find(s=>typeof s=="string"?e.url===s:s.test(e.url))){const{shareParams:s}=Tu();e.params instanceof URLSearchParams?Object.entries(s).forEach(([i,o])=>{e.params.append(i,o)}):e.params=A(A({},e.params),s)}return e},Iu=12e4,re=au.create({baseURL:Ni,timeout:Iu,responseType:"arraybuffer"}),u_=au.create({baseURL:Ni,timeout:Iu,responseType:"arraybuffer"});u_.interceptors.request.use(e=>xu(e));re.interceptors.request.use(e=>{if(e.data&&!(e.data instanceof FormData)){const{data:t}=wu(e.data);e.headers||(e.headers={}),e.headers["content-type"]="application/json",e.data=t}return xu(e)},e=>Promise.reject(e));re.interceptors.response.use(function(t){if(t.status!==200)return Promise.reject(new Error("Failed to get data"));t.headers["x-binary-key"]&&(xo=t.headers["x-binary-key"]);const n=c_(t.data);if(n.status==="ok")return n.data},function(t){var o,r;const{response:n,message:a}=t;if(t.name==="CanceledError")return Promise.reject({type:"cancel",message:a});if(t.message.includes("timeout"))return Promise.reject({type:"http",message:"request timeout"});if(!n)return Promise.reject({type:"http",message:"unknown error"});if(n.data&&n.data.byteLength>0){let l=a;try{l=new TextDecoder().decode(n.data),n.data=JSON.parse(l)}catch(u){n.data={detail:l||"parse error"}}}const s={type:"http",status:n.status,url:n.config.url,method:n.config.method,reason:((o=n.data.data)==null?void 0:o.reason)||null};let i=Vs(n,"data.detail");switch(Array.isArray(i)&&(i=((r=i[0])==null?void 0:r.msg)||"request error"),n.status){case 401:return Promise.reject(Z(A({},s),{message:"Authorization expired, please sign in again."}));case 403:return Promise.reject(Z(A({},s),{message:i||"no operation permission"}));case 404:return Promise.reject(Z(A({},s),{message:i||"not found"}));case 400:case 422:return Promise.reject(Z(A({},s),{message:i||"request error"}));case 500:case 502:return Promise.reject(Z(A({},s),{message:"service error"}));default:return Promise.reject(Z(A({},s),{message:i||"unknown error"}))}});const d_=()=>re.get("/users/logout"),$u=()=>re.get("/users/me"),Sr=e=>re.post("/users/sign-in",e),p_=e=>re.post("/users/sign-up",e),Ru=e=>re.get("/users/verification-code",{params:e}),Du=e=>re.get("/users/verification-code/check",{params:e}),Ar=()=>re.get("/users/usage"),f_=e=>re.put("/users/password/reset",e),h_=e=>re.put("/users/preference",e),__=e=>re.get("/oauth/google/link",{params:e}),g_=()=>re.get("/goods/plans"),Nu=e=>re.get("/packages/list",{params:e}),m_=()=>re.get("/goods/packages"),y_=e=>re.post("/users/password/reset",e),Cl=({username:e,avatar:t})=>{let n;return t&&(n=new FormData,n.append("avatar",t)),re.post("/users/profile",n,{params:{username:e}})},Tr=e=>T(void 0,null,function*(){return`${Cu}/users/avatar/${e}`}),v_=()=>re.get("/users/invite-url"),b_=e=>re.post("/users/invite/email",null,{params:{email:e}}),w_=()=>re.get("/users/invite/list"),E_=e=>re.post("/users/actions",e),P_=e=>re.get(`/users/invite-user?invite_code=${e}`),k_=e=>re.post("/users/job",e),S_=()=>re.put("/users/product-hunt"),A_=()=>re.get("/notifications/token"),T_=e=>re.get(`/users/activities/${e}`),ci=e=>re.post(`/orders/${e}/capture`),Ou=e=>re.post("/orders/wechat",e),Lu=e=>re.post("/subscriptions/alipay",e),Oi=e=>re.get("/subscriptions",{params:e}),Uu=e=>re.delete(`/subscriptions/${e}`),C_=()=>re.get("/orders/last"),x_=e=>re.get("/orders/list",{params:e}),r8=e=>re.get("/user-api/usage",{params:e}),I_="chatdoc",$_=new mr(window.navigator.userAgent),xl=$_.getOS(),Zt="files",Il="files_preset",R_=new Promise(e=>{const t=indexedDB.open(I_,2);t.onsuccess=()=>{const n=t.result;e(n)},t.onerror=function(n){console.error(n)},t.onupgradeneeded=function(n){const a=n.target.result,{objectStoreNames:s}=a;s.contains(Zt)||a.createObjectStore(Zt,{keyPath:"id"}),s.contains(Il)||a.createObjectStore(Il,{keyPath:"id"})}}),ys=()=>R_,D_=(e=Zt,t,n)=>{if(!(xl.name==="IOS"||xl.name==="Android"))return ys().then(a=>{try{const i=a.transaction(e,"readwrite").objectStore(e).add(Z(A({},n),{file:t}));return new Promise(o=>{i.onsuccess=o,i.onerror=r=>{console.error(r),o()}})}catch(s){console.warn(s.message)}})},l8=(e=Zt,t)=>ys().then(n=>{const s=n.transaction(e,"readwrite").objectStore(e).delete(t);return new Promise(i=>{s.onsuccess=i,s.onerror=o=>{console.error(o)}})}),c8=(e=Zt,t)=>ys().then(n=>{const s=n.transaction(e,"readonly").objectStore(e).get(t);return new Promise((i,o)=>{s.onsuccess=r=>{const{result:l}=r.target||{};l?i(l):o(new Error("file not found"))},s.onerror=r=>{o(r)}})}),N_=()=>ys().then(e=>{const n=e.transaction(Zt,"readwrite").objectStore(Zt).clear();return new Promise((a,s)=>{n.onsuccess=()=>{a(!0)},n.onerror=i=>{s(i)}})}),O_=e=>ys().then(t=>{const a=t.transaction(Zt,"readwrite").objectStore(Zt).delete(e);return new Promise((s,i)=>{a.onsuccess=()=>{s(!0)},a.onerror=o=>{i(o)}})}),L_=e=>[J.MONTHLY_PRO,J.ANNUAL_PRO].includes(e),U_=e=>[J.MONTHLY_PRO_PLUS].includes(e),M_=e=>J.MONTHLY_PRO_PLUS===e,B_=e=>J.MONTHLY_PRO===e,F_=e=>e===J.ANNUAL_PRO,G_=()=>!1,z_=e=>e===J.FREE,H_=e=>e===J.FILE_PACKAGE,Y_=e=>e===J.PAGE_PACKAGE,W_=e=>e===J.OCR_PAGE_PACKAGE,V_=e=>[J.API_MONTHLY_BASIC,J.API_ANNUAL_BASIC,J.API_PAGE_PACKAGE,J.API_QUESTION_PACKAGE,J.API_PAGE_AND_QUESTION_PACKAGE,J.API_LITE_PAGE_PACKAGE,J.API_LITE_PAGE_AND_QUESTION_PACKAGE,J.API_BASIC_PAGE_PACKAGE,J.API_BASIC_PAGE_AND_QUESTION_PACKAGE].includes(e),q_=e=>[J.API_MONTHLY_BASIC,J.API_ANNUAL_BASIC].includes(e),j_=e=>e===J.API_MONTHLY_BASIC,K_=e=>e===J.API_ANNUAL_BASIC,Q_=e=>[J.FILE_PACKAGE,J.PAGE_PACKAGE,J.OCR_PAGE_PACKAGE].includes(e),X_=e=>[J.API_PAGE_PACKAGE,J.API_QUESTION_PACKAGE,J.API_PAGE_AND_QUESTION_PACKAGE,J.API_LITE_PAGE_PACKAGE,J.API_LITE_PAGE_AND_QUESTION_PACKAGE,J.API_BASIC_PAGE_PACKAGE,J.API_BASIC_PAGE_AND_QUESTION_PACKAGE].includes(e),J_=e=>[J.MONTHLY_PRO,J.MONTHLY_PRO_PLUS,J.API_MONTHLY_BASIC].includes(e),Z_=e=>[J.ANNUAL_PRO,J.API_ANNUAL_BASIC].includes(e),eg=e=>[J.API_PAGE_PACKAGE,J.API_LITE_PAGE_PACKAGE,J.API_BASIC_PAGE_PACKAGE].includes(e),tg=e=>[J.API_QUESTION_PACKAGE].includes(e),ng=e=>[J.API_PAGE_AND_QUESTION_PACKAGE,J.API_LITE_PAGE_AND_QUESTION_PACKAGE,J.API_BASIC_PAGE_AND_QUESTION_PACKAGE].includes(e),ag=e=>[J.API_LITE_PAGE_PACKAGE,J.API_LITE_PAGE_AND_QUESTION_PACKAGE].includes(e),sg=e=>[J.API_BASIC_PAGE_PACKAGE,J.API_BASIC_PAGE_AND_QUESTION_PACKAGE].includes(e),ig=e=>[J.API_PAGE_PACKAGE,J.API_PAGE_AND_QUESTION_PACKAGE].includes(e),$l=(e=[])=>e.map(t=>{const{goods_id:n}=t;return Z(A({},t),{isProPkg:L_(n),isProPlusPkg:U_(n),isFreePkg:z_(n),isFilePkg:H_(n),isPagePkg:Y_(n),isOcrPagePkg:W_(n),isMonthlyProPkg:B_(n),isMonthlyProPlusPkg:M_(n),isMonthlyPkg:J_(n),isAnnualProPkg:F_(n),isAnnualProPlusPkg:G_(),isAnnualPkg:Z_(n),isAdditionalPkg:Q_(n)})}),oo=(e=[])=>e.map(t=>{const{goods_id:n}=t;return Z(A({},t),{isApiPkg:V_(n),isApiPlanPkg:q_(n),isMonthlyApiBasicPkg:j_(n),isAnnualApiBasicPkg:K_(n),isApiAdditionalPkg:X_(n),isApiPagePkg:eg(n),isApiQuestionPkg:tg(n),isApiPageAndQuestionPkg:ng(n),isApiLitePkg:ag(n),isApiBasicPkg:sg(n),isApiElitePkg:ig(n)})}),Cr=(e,t)=>(Ia.set(e,t),t),xr=(e,t)=>Ia.get(e,t),aa=e=>{Ia.remove(e)},Io=(e,t)=>(Ia.session.set(e,t),t),Mu=(e,t)=>Ia.session.get(e,t),Bu=e=>{Ia.session.remove(e)};function og(e,t,n,a){var s=new Date;s.setTime(s.getTime()+n*60*60*1e3),a||(a="/"),document.cookie=`${e}=${$f(t)};expires=${s.toGMTString()};path=${a}`}function Fu(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?Rf(t[2]):null}function Ir(e){og(e,"",-1)}const Gu="Auto-detect",ro=[{code:"",text:Gu},{code:"en",text:"English"},{code:"fr",text:"Français"},{code:"es",text:"Español"},{code:"ar",text:"اللغة العربية"},{code:"zh-CN",text:"简体中文"},{code:"de",text:"Deutsch"},{code:"ru",text:"Русский"},{code:"pt",text:"Português"},{code:"sw",text:"Kiswahili"},{code:"sr",text:"Српскохрватски језик"},{code:"it",text:"Italiano"},{code:"id",text:"Bahasa Indonesia"},{code:"nl",text:"Nederlands"},{code:"fa",text:"فارسی"},{code:"",text:"Sepedi"},{code:"ro",text:"limba română"},{code:"sq",text:"Gjuha shqipe"},{code:"tr",text:"Türkçe"},{code:"el",text:"Ελληνικά"},{code:"hi",text:"हिन्दुस्तानी"},{code:"ko",text:"한국어"},{code:"sv",text:"Svenska"},{code:"pl",text:"Polski"},{code:"uk",text:"Українська"},{code:"ur",text:"اردو"},{code:"ja",text:"日本語"}],zu=[{code:"zh-CN",text:"简体中文"},{code:"en",text:"English"}],rg=[{code:"sq",text:"阿尔巴尼亚语 - shqip"},{code:"ak",text:"阿肯语 - Akan"},{code:"ar",text:"阿拉伯语 - العربية"},{code:"an",text:"阿拉贡语 - aragonés"},{code:"am",text:"阿姆哈拉语 - አማርኛ"},{code:"az",text:"阿塞拜疆语 - azərbaycan"},{code:"ast",text:"阿斯图里亚斯语 - asturianu"},{code:"ee",text:"埃维语 - Eʋegbe"},{code:"ga",text:"爱尔兰语 - Gaeilge"},{code:"et",text:"爱沙尼亚语 - eesti"},{code:"oc",text:"奥克语"},{code:"or",text:"奥里亚语"},{code:"om",text:"奥罗莫语 - Oromoo"},{code:"eu",text:"巴斯克语 - euskara"},{code:"be",text:"白俄罗斯语 - беларуская"},{code:"bg",text:"保加利亚语 - български"},{code:"nso",text:"北索托语"},{code:"is",text:"冰岛语 - íslenska"},{code:"pl",text:"波兰语 - polski"},{code:"bs",text:"波斯尼亚语 - bosanski"},{code:"fa",text:"波斯语 - فارسی"},{code:"br",text:"布列塔尼语 - brezhoneg"},{code:"tn",text:"茨瓦纳语"},{code:"tt",text:"鞑靼语 - Татар"},{code:"da",text:"丹麦语 - dansk"},{code:"de",text:"德语 - Deutsch"},{code:"de-AT",text:"德语（奥地利） - Deutsch (Österreich)"},{code:"de-DE",text:"德语（德国） - Deutsch (Deutschland)"},{code:"de-LI",text:"德语（列支敦士登） - Deutsch (Liechtenstein)"},{code:"de-CH",text:"德语（瑞士） - Deutsch (Schweiz)"},{code:"ru",text:"俄语 - русский"},{code:"fo",text:"法罗语 - føroyskt"},{code:"fr",text:"法语 - Français"},{code:"fr-FR",text:"法语（法国） - Français (France)"},{code:"fr-CA",text:"法语（加拿大） - Français (Canada)"},{code:"fr-CH",text:"法语（瑞士） - Français (Suisse)"},{code:"fil",text:"菲律宾语 - Filipino"},{code:"fi",text:"芬兰语 - suomi"},{code:"km",text:"高棉语 - ខ្មែរ"},{code:"ka",text:"格鲁吉亚语 - ქართული"},{code:"gu",text:"古吉拉特语 - ગુજરાતી"},{code:"gn",text:"瓜拉尼语 - guarani"},{code:"ia",text:"国际语"},{code:"kk",text:"哈萨克语 - қазақ тілі"},{code:"ht",text:"海地克里奥尔语 - créole haïtien"},{code:"ko",text:"朝鲜语 - 한국어"},{code:"ko-KR",text:"韩语 - 한국어"},{code:"ha",text:"豪萨语 - Hausa"},{code:"nl",text:"荷兰语 - Nederlands"},{code:"gl",text:"加利西亚语 - galego"},{code:"ca",text:"加泰罗尼亚语 - català"},{code:"cs",text:"捷克语 - čeština"},{code:"kn",text:"卡纳达语 - ಕನ್ನಡ"},{code:"ky",text:"柯尔克孜语 - кыргызча"},{code:"xh",text:"科萨语 - isiXhosa"},{code:"co",text:"科西嘉语 - Corsu"},{code:"hr",text:"克罗地亚语 - hrvatski"},{code:"qu",text:"克丘亚语 - Runasimi"},{code:"ku",text:"库尔德语 - Kurdî"},{code:"la",text:"拉丁语 - Latinus"},{code:"lv",text:"拉脱维亚语 - latviešu"},{code:"lo",text:"老挝语 - ລາວ"},{code:"lt",text:"立陶宛语 - lietuvių"},{code:"ln",text:"林加拉语 - lingála"},{code:"lg",text:"卢干达语 - Luganda"},{code:"lb",text:"卢森堡语 - lëtzebuergesch"},{code:"rw",text:"卢旺达语 - Kinyarwanda"},{code:"ro",text:"罗马尼亚语 - română"},{code:"mo",text:"罗马尼亚语（摩尔多瓦） - română (Republica Moldova)"},{code:"rm",text:"罗曼什语 - rumantsch"},{code:"mt",text:"马耳他语 - Malti"},{code:"mr",text:"马拉地语 - मराठी"},{code:"mg",text:"马拉加斯语 - Malagasy"},{code:"ml",text:"马拉雅拉姆语 - മലയാളം"},{code:"ms",text:"马来语 - Melayu"},{code:"mk",text:"马其顿语 - македонски"},{code:"mi",text:"毛利语 - Maori"},{code:"mn",text:"蒙古语 - монгол"},{code:"bn",text:"孟加拉语 - বাংলা"},{code:"my",text:"缅甸语 - မြန်မာ"},{code:"hmn",text:"苗语 - Hmoob"},{code:"af",text:"南非荷兰语 - Afrikaans"},{code:"st",text:"南索托语"},{code:"ne",text:"尼泊尔语 - नेपाली"},{code:"nn",text:"挪威尼诺斯克语 - norsk nynorsk"},{code:"no",text:"挪威语 - norsk"},{code:"pa",text:"旁遮普语 - ਪੰਜਾਬੀ"},{code:"pt",text:"葡萄牙语 - Português"},{code:"pt-BR",text:"葡萄牙语（巴西） - Português (Brasil)"},{code:"pt-PT",text:"葡萄牙语（葡萄牙） - Português (Portugal)"},{code:"ps",text:"普什图语 - پښتو"},{code:"ny",text:"齐切瓦语 - Chichewa"},{code:"tw",text:"契维语 - Twi"},{code:"chr",text:"切罗基语"},{code:"ja",text:"日语 - 日本語"},{code:"sv",text:"瑞典语 - svenska"},{code:"sm",text:"萨摩亚语 - Samoa"},{code:"sh",text:"塞尔维亚-克罗地亚语 - srpskohrvatski"},{code:"sr",text:"塞尔维亚语 - српски"},{code:"si",text:"僧伽罗语 - සිංහල"},{code:"sn",text:"绍纳语 - chiShona"},{code:"eo",text:"世界语 - esperanto"},{code:"nb",text:"书面挪威语 - norsk bokmål"},{code:"sk",text:"斯洛伐克语 - slovenčina"},{code:"sl",text:"斯洛文尼亚语 - slovenščina"},{code:"sw",text:"斯瓦希里语 - Kiswahili"},{code:"gd",text:"苏格兰盖尔语 - Gàidhlig na h-Alba"},{code:"ceb",text:"宿务语 - Cebuano"},{code:"so",text:"索马里语 - Soomaali"},{code:"tg",text:"塔吉克语 - тоҷикӣ"},{code:"te",text:"泰卢固语 - తెలుగు"},{code:"ta",text:"泰米尔语 - தமிழ்"},{code:"th",text:"泰语 - ไทย"},{code:"to",text:"汤加语 - lea fakatonga"},{code:"ti",text:"提格利尼亚语 - ትግርኛ"},{code:"tr",text:"土耳其语 - Türkçe"},{code:"tk",text:"土库曼语 - Türkmenler"},{code:"wa",text:"瓦隆语 - wa"},{code:"cy",text:"威尔士语 - Cymraeg"},{code:"ug",text:"维吾尔语 - ئۇيغۇر"},{code:"wo",text:"沃洛夫语"},{code:"ur",text:"乌尔都语 - اردو"},{code:"uk",text:"乌克兰语 - українська"},{code:"uz",text:"乌兹别克语 - o‘zbek"},{code:"es",text:"西班牙语 - Español"},{code:"es-AR",text:"西班牙语（阿根廷） - Español (Argentina)"},{code:"es-CO",text:"西班牙语（哥伦比亚） - Español (Colombia)"},{code:"es-CR",text:"西班牙语（哥斯达黎加） - Español (Costa Rica)"},{code:"es-HN",text:"西班牙语（洪都拉斯） - Español (Honduras)"},{code:"es-419",text:"西班牙语（拉丁美洲） - Español (Latinoamérica)"},{code:"es-US",text:"西班牙语（美国） - Español (Estados Unidos)"},{code:"es-PE",text:"西班牙语（秘鲁） - Español (Perú)"},{code:"es-MX",text:"西班牙语（墨西哥） - Español (México)"},{code:"es-VE",text:"西班牙语（委内瑞拉） - Español (Venezuela)"},{code:"es-UY",text:"西班牙语（乌拉圭） - Español (Uruguay)"},{code:"es-ES",text:"西班牙语（西班牙） - Español (España)"},{code:"es-CL",text:"西班牙语（智利） - Español (Chile)"},{code:"fy",text:"西弗里西亚语"},{code:"he",text:"希伯来语 - עִברִית"},{code:"el",text:"希腊语 - Ελληνικά"},{code:"haw",text:"夏威夷语 - ʻŌlelo Hawaiʻi"},{code:"sd",text:"信德语 - سنڌي"},{code:"hu",text:"匈牙利语 - magyar"},{code:"su",text:"巽他语 - basa Sunda"},{code:"hy",text:"亚美尼亚语 - հայերեն"},{code:"ig",text:"伊博语 - Igbo"},{code:"it",text:"意大利语 - Italiano"},{code:"it-CH",text:"意大利语（瑞士） - Italiano (Svizzera)"},{code:"it-IT",text:"意大利语（意大利） - Italiano (Italia)"},{code:"yi",text:"意第绪语 - יידיש"},{code:"hi",text:"印地语 - हिन्दी"},{code:"id",text:"印度尼西亚语 - Indonesia"},{code:"en",text:"英语 - English"},{code:"en-IE",text:"英语（爱尔兰） - English (Ireland)"},{code:"en-AU",text:"英语（澳大利亚） - English (Australia)"},{code:"en-CA",text:"英语（加拿大） - English (Canada)"},{code:"en-US",text:"英语（美国） - English (United States)"},{code:"en-ZA",text:"英语（南非） - English (South Africa)"},{code:"en-NZ",text:"英语（新西兰） - English (New Zealand)"},{code:"en-IN",text:"英语（印度） - English (India)"},{code:"en-GB-oxendict",text:"英语（英国，《牛津英语词典》拼法） - English (United Kingdom, Oxford English Dictionary spelling)"},{code:"en-GB",text:"英语（英国） - English (United Kingdom)"},{code:"yo",text:"约鲁巴语 - Èdè Yorùbá"},{code:"vi",text:"越南语 - Tiếng Việt"},{code:"jv",text:"爪哇语 - basa jawa"},{code:"ckb",text:"中库尔德语 - کوردیی ناوەندی"},{code:"zh",text:"中文 - 简体中文"},{code:"zh-TW",text:"中文（繁体） - 繁體中文"},{code:"zh-CN",text:"中文（简体） - 简体中文"},{code:"zh-HK",text:"中文（香港）- 繁體中文"},{code:"zu",text:"祖鲁语 - isiZulu"}],Hu=()=>{const e=rg.find(i=>i.code===navigator.language);let t="",n="";if(e){n=e.code;const i=e.text.split(" - ");i.length===2&&(t=i[1])}const s=["English","Deutsch","Français","Português","Español","Italiano","한국어"].find(i=>t.startsWith(i));return s&&(t=s),{langText:t,langCode:n}},lo=()=>{if(mt)return zu[0].text;{const{langText:e}=Hu();return e||Gu}},u8=e=>{if(mt)return zu;let t=[];const n=Df(ro),{langText:a,langCode:s}=Hu();if(a&&s){const l=f=>a.includes(f.text),u=ro.find(l),p=ro.findIndex(l);u?(n.splice(p,1),t=[u,...n]):t=[{code:s,text:a},...n]}else t=[...n];const i=l=>l.text===e,o=t.find(i),r=t.findIndex(i);return o?(t.splice(r,1),t=[o,...t]):t=[{code:"",text:e},...t],t},$o=new Map,lg=e=>{const t=new AbortController;return $o.set(e,t),t},cg=e=>{const t=$o.get(e);t&&(t.abort(),$o.delete(e))},Oe=gs({id:"user",state:()=>({userInfoLoaded:!1,userInfo:null,docCount:0,questionCount:0,freeDocCount:0,freeQuestionCount:0,membership:{is_expired:null,id:null,goods_id:null,expired_at:null,max_pdf_pages:0,max_ocr_pages:0,max_docs_of_cycle:0,max_questions_of_cycle:0,name:null,total_docs:0,total_questions:0,total_pdf_pages_limit:0},hasSelectedQuestion:!1,hasQuestion:!1,hasGuides:[],preference:{fontSize:no,language:lo(),followMode:ao,addUrl:!0},membershipPackages:[],subscriptions:[],lastOrderInfo:{id:null,pay_method:null,status:null,remote_order_id:null,order_no:null,created_at:null,goods_id:null},additionPackages:[],package:{[Le.DOCUMENT]:{max_count:0,used_count:0},[Le.PAGE]:{max_count:0,used_count:0},[Le.OCR_PAGE]:{max_count:0,used_count:0}},userAdditionPackages:[],sourcedInviteFilePackageMaxCount:0,usedOcrPagesMonthly:0}),getters:{avatarUrl:e=>{var n;const{avatar:t=""}=((n=e.userInfo)==null?void 0:n.meta)||{};return t},isLogin:e=>!!e.userInfo,currentMembershipGoodsId:e=>{let t=e.membership.goods_id||0;return e.membership.source_type===ca.GIFT?t=J.MONTHLY_PRO:(e.membership.is_expired||oa(e.membership.is_expired))&&(t=J.FREE),t},currentMembershipPackageInfo(e){return e.membershipPackages.find(t=>t.goods_id===this.currentMembershipGoodsId)},currentExpiredMembershipPackageInfo(e){if(this.isExpiredMembership){let t=e.membership.goods_id;return e.membershipPackages.find(n=>n.goods_id===t)}},maxUploads:e=>e.membership.max_docs_of_cycle,maxQuestions:e=>e.membership.max_questions_of_cycle,freeMaxDocCount:e=>e.membership.total_docs||0,freeMaxQuestions:e=>e.membership.total_questions||0,freeRemainingCount(e){return Math.max(this.freeMaxDocCount-e.freeDocCount,0)},remainingUploads(e){return this.isFreeMembership?Math.min(this.freeRemainingCount,Math.max(e.membership.max_docs_of_cycle-e.docCount,0)):Math.max(this.maxUploads-e.docCount,0)},remainingFilePackages:e=>{const t=e.package[Le.DOCUMENT];return t?Math.max(t.max_count-t.used_count,0):0},remainingPagePackages:e=>{const t=e.package[Le.PAGE];return t?Math.max(t.max_count-t.used_count,0):0},remainingOcrPagePackages:e=>{const t=e.package[Le.OCR_PAGE];return t?Math.max(t.max_count-t.used_count,0):0},remainingUploadFileCount:e=>e.remainingUploads+e.remainingFilePackages,maxPdfPages:e=>e.membership.max_pdf_pages,totalPdfLimitPages:e=>e.membership.total_pdf_pages_limit,maxPdfSize:e=>e.membership.size_limit/1024/1024,maxPdfSizeOfExceedMaxPdfPages:e=>e.membership.size_limit_using_package/1024/1024,countPerCollection:()=>io.countPerCollection,nonPdfFileMaxTokens:()=>io.nonPdfFileTokens,pdfPageMaxTokens:()=>io.pdfPageTokens,exceedUploadLimit(e){return e.docCount>=this.maxUploads},exceedFreeUploadLimit(e){return e.freeDocCount>=this.freeMaxDocCount},exceedFilePackagesLimit:e=>{const t=e.package[Le.DOCUMENT];return t?t.used_count>=t.max_count:!0},exceedQuestionLimit(e){return e.questionCount>=this.maxQuestions},exceedFreeQuestionLimit(e){return e.freeQuestionCount>=this.freeMaxQuestions},isEffectMembership:e=>!!e.membership.id&&!e.membership.is_expired,isExpiredMembership:e=>!!e.membership.id&&!!e.membership.is_expired&&e.membership.goods_id!==J.FREE,isFreeMembership(){var e;return(e=this.currentMembershipPackageInfo)==null?void 0:e.isFreePkg},isProMembership(){var e;return(e=this.currentMembershipPackageInfo)==null?void 0:e.isProPkg},isProPlusMembership(){var e;return(e=this.currentMembershipPackageInfo)==null?void 0:e.isProPlusPkg},isMonthlyProMembership(){var e;return(e=this.currentMembershipPackageInfo)==null?void 0:e.isMonthlyProPkg},isMonthlyProPlusMembership(){var e;return(e=this.currentMembershipPackageInfo)==null?void 0:e.isMonthlyProPlusPkg},isAnnualProMembership(){var e;return(e=this.currentMembershipPackageInfo)==null?void 0:e.isAnnualProPkg},isGiftMembership(e){return this.isEffectMembership&&e.membership.source_type===ca.GIFT},crownIcon(){let e="";return this.isGiftMembership?e="crown-gift":this.isEffectMembership&&(e="crown"),e},isInvitedFilePackageAllObtained:e=>e.userAdditionPackages.filter(n=>n.type===Le.DOCUMENT).reduce((n,a)=>a.source_type===ca.INVITE?n+a.total_count:n,0)>=e.sourcedInviteFilePackageMaxCount,usedOcrPages:e=>e.usedOcrPagesMonthly,maxOcrPages:e=>e.membership.max_ocr_pages,isAutoRenewal(e){return!!e.subscriptions.length},higherMembershipPlans(e){if(!e.membershipPackages.length)return[];const t=e.membershipPackages.find(o=>o.days===Pr),n=e.membershipPackages.find(o=>o.days===Su),a=Z(A({},t),{isAutoRenewal:!1,price:t.origin_price,origin_price:null,type:Qa.PRO_MONTHLY_BASE}),s=Z(A({},t),{isAutoRenewal:!0,type:Qa.PRO_MONTHLY_RENEWAL}),i=Z(A({},n),{isAutoRenewal:!1,type:Qa.PRO_ANNUALLY_BASE});return this.isFreeMembership?[s,i,a]:this.isAutoRenewal?[i]:this.isAnnualProMembership?[]:[s,i]},remainingOcrPageCount(){return this.maxOcrPages-this.usedOcrPages+this.remainingOcrPagePackages}},actions:{setUserInfo(e){return T(this,null,function*(){var t;(t=e==null?void 0:e.meta)!=null&&t.avatar&&!/^http[s]?:\/\//.test(e.meta.avatar)&&(e.meta.avatar=yield Tr(e.meta.avatar)),this.userInfo=e})},resetUserState(){this.userInfo=null,this.docCount=0,this.questionCount=0,this.freeDocCount=0,this.freeQuestionCount=0,this.membership={is_expired:null,id:null,goods_id:null,expired_at:null,max_pdf_pages:0,max_ocr_pages:0,max_docs_of_cycle:0,max_questions_of_cycle:0,name:null,total_docs:0,total_questions:0,total_pdf_pages_limit:0},this.hasSelectedQuestion=!1,this.hasQuestion=!1,this.hasGuides=[],this.preference={fontSize:no,language:lo(),followMode:ao,addUrl:!0},this.membershipPackages=[],this.subscriptions=[],this.lastOrderInfo={id:null,pay_method:null,status:null,remote_order_id:null,order_no:null,created_at:null,goods_id:null},this.additionPackages=[],this.package={[Le.DOCUMENT]:{max_count:0,used_count:0},[Le.PAGE]:{max_count:0,used_count:0},[Le.OCR_PAGE]:{max_count:0,used_count:0}},this.userAdditionPackages=[],this.sourcedInviteFilePackageMaxCount=0,this.usedOcrPagesMonthly=0,aa(Ke.LAST_NOTICE_TIME),aa(Ke.AUTO_RENEWAL),aa(Ke.DISABLED_SEND_EMAIL_END_TIME),aa(Ke.DISABLED_SEND_SIGN_VER_EMAIL_END_TIME),Ir(Ke.ORDER_ID)},clearFileCache(){N_()},setPreference(e){const{fontSize:t,language:n,followMode:a,addUrl:s}=e;this.preference={fontSize:t||no,language:n||lo(),followMode:a||ao,addUrl:s!=null?s:!0}},updatePreference(e){return T(this,null,function*(){if(this.setPreference(e),this.isLogin){const{fontSize:t,language:n,followMode:a,addUrl:s}=e;yield h_({font_size:t,language:n,follow_mode:a,add_url:s})}})},fetchUserInfo(){return T(this,null,function*(){try{const e=yield $u();yield Promise.all([this.getDocUsageInfo(),this.getMembershipPackages(),this.getSubscriptions(),this.getLastOrderInfo(),this.getGoodsPackages(),this.getUserAdditionPackages()]).catch(i=>{console.error(i)});const{language:t,font_size:n,follow_mode:a,add_url:s}=e.preference||{};return yield this.setUserInfo(e),this.setPreference({language:t,fontSize:n,followMode:a,addUrl:s}),e}catch(e){return this.clearFileCache(),this.resetUserState(),null}finally{this.userInfoLoaded=!0}})},logout(){return T(this,null,function*(){yield d_(),this.resetUserState(),this.clearFileCache(),cg(Pu.ABORT_UPLOAD)})},getDocUsageInfo(){return T(this,null,function*(){const e=yield Ar(),{docs:t,docs_monthly:n,free_doc_count:a,free_question_count:s,membership:i,question_count:o,has_selected_question:r,has_question:l,max_gift_resource_package:u,ocr_pages_monthly:p}=e;this.docCount=i.id&&!i.is_expired?n:t,this.questionCount=o||0,this.freeDocCount=a||0,this.freeQuestionCount=s||0,this.membership=i,this.hasSelectedQuestion=r,this.hasQuestion=l,e.package&&(this.package=e.package),this.sourcedInviteFilePackageMaxCount=u,this.usedOcrPagesMonthly=p})},getMembershipPackages(){return T(this,null,function*(){const e=yield g_();this.membershipPackages=$l(e)})},getSubscriptions(){return T(this,null,function*(){this.subscriptions=yield Oi({source:xt.MAIN})})},getLastOrderInfo(){return T(this,null,function*(){const e=yield C_();e&&(this.lastOrderInfo=e)})},getGoodsPackages(){return T(this,null,function*(){const e=yield m_();this.additionPackages=$l(e)})},getUserAdditionPackages(){return T(this,null,function*(){const e=yield Nu({source:xt.MAIN});e&&(this.userAdditionPackages=e)})},updateUserMembership(){return T(this,null,function*(){yield Promise.all([this.getDocUsageInfo(),this.getSubscriptions(),this.getLastOrderInfo()]).catch(e=>{console.error(e)})})},setIncrementQuestionCount(){this.isEffectMembership?this.questionCount+=1:this.freeQuestionCount+=1},setMaxLimitQuestionCount(){this.isEffectMembership?this.questionCount=this.maxQuestions:this.freeQuestionCount=this.freeMaxQuestions}},persist:{key:Ke.USER,paths:["preference"],storage:localStorage}}),se=(e,t)=>{const n=e.__vccOpts||e;for(const[a,s]of t)n[a]=s;return n},ug=Kf({name:"Tooltip",components:{ElTooltip:_t},setup(){const e=x(!1),t=x(),n=x(300),a=x(),s=x(0);return{visible:e,virtualRef:t,showAfter:n,content:a,hideAfter:s}},watch:{virtualRef(e){this.visible=!1,clearTimeout(this.showAfterTimer),e&&(e.addEventListener("mouseleave",()=>{this.visible=!1,this.virtualRef=null},{once:!0}),this.showAfterTimer=setTimeout(()=>{this.visible=!0},this.showAfter))}}});function dg(e,t,n,a,s,i){const o=rt("el-tooltip");return h(),M(o,{visible:e.visible,"onUpdate:visible":t[0]||(t[0]=r=>e.visible=r),"virtual-ref":e.virtualRef,"virtual-triggering":"",content:e.content,"show-after":e.showAfter,"hide-after":e.hideAfter,placement:"top"},null,8,["visible","virtual-ref","content","show-after","hide-after"])}const pg=se(ug,[["render",dg]]),Yu=v(pg);$a(Yu,document.body);function fg({content:e,showAfter:t,virtualRef:n}){const a=Yu.component.proxy;return a.virtualRef=n,a.content=e,a.showAfter=t!=null?t:300,a}var Wu={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(na,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},a={};return function(s,i,o){var r,l=function(g,y,w){w===void 0&&(w={});var m=new Date(g),E=function(P,S){S===void 0&&(S={});var D=S.timeZoneName||"short",C=P+"|"+D,$=a[C];return $||($=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:P,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:D}),a[C]=$),$}(y,w);return E.formatToParts(m)},u=function(g,y){for(var w=l(g,y),m=[],E=0;E<w.length;E+=1){var P=w[E],S=P.type,D=P.value,C=n[S];C>=0&&(m[C]=parseInt(D,10))}var $=m[3],G=$===24?0:$,U=m[0]+"-"+m[1]+"-"+m[2]+" "+G+":"+m[4]+":"+m[5]+":000",F=+g;return(o.utc(U).valueOf()-(F-=F%1e3))/6e4},p=i.prototype;p.tz=function(g,y){g===void 0&&(g=r);var w=this.utcOffset(),m=this.toDate(),E=m.toLocaleString("en-US",{timeZone:g}),P=Math.round((m-new Date(E))/1e3/60),S=o(E).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-P,!0);if(y){var D=S.utcOffset();S=S.add(w-D,"minute")}return S.$x.$timezone=g,S},p.offsetName=function(g){var y=this.$x.$timezone||o.tz.guess(),w=l(this.valueOf(),y,{timeZoneName:g}).find(function(m){return m.type.toLowerCase()==="timezonename"});return w&&w.value};var f=p.startOf;p.startOf=function(g,y){if(!this.$x||!this.$x.$timezone)return f.call(this,g,y);var w=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return f.call(w,g,y).tz(this.$x.$timezone,!0)},o.tz=function(g,y,w){var m=w&&y,E=w||y||r,P=u(+o(),E);if(typeof g!="string")return o(g).tz(E);var S=function(G,U,F){var B=G-60*U*1e3,W=u(B,F);if(U===W)return[B,U];var Y=u(B-=60*(W-U)*1e3,F);return W===Y?[B,W]:[G-60*Math.min(W,Y)*1e3,Math.max(W,Y)]}(o.utc(g,m).valueOf(),P,E),D=S[0],C=S[1],$=o(D).utcOffset(C);return $.$x.$timezone=E,$},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(g){r=g}}})})(Wu);var hg=Wu.exports;const _g=lu(hg);var Vu={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(na,function(){var n="minute",a=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(i,o,r){var l=o.prototype;r.utc=function(m){var E={date:m,utc:!0,args:arguments};return new o(E)},l.utc=function(m){var E=r(this.toDate(),{locale:this.$L,utc:!0});return m?E.add(this.utcOffset(),n):E},l.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var u=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),u.call(this,m)};var p=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else p.call(this)};var f=l.utcOffset;l.utcOffset=function(m,E){var P=this.$utils().u;if(P(m))return this.$u?0:P(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function($){$===void 0&&($="");var G=$.match(a);if(!G)return null;var U=(""+G[0]).match(s)||["-",0,0],F=U[0],B=60*+U[1]+ +U[2];return B===0?0:F==="+"?B:-B}(m),m===null))return this;var S=Math.abs(m)<=16?60*m:m,D=this;if(E)return D.$offset=S,D.$u=m===0,D;if(m!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(D=this.local().add(S+C,n)).$offset=S,D.$x.$localOffset=C}else D=this.utc();return D};var g=l.format;l.format=function(m){var E=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,E)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var y=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():y.call(this)};var w=l.diff;l.diff=function(m,E,P){if(m&&this.$u===m.$u)return w.call(this,m,E,P);var S=this.local(),D=r(m).local();return w.call(S,D,E,P)}}})})(Vu);var gg=Vu.exports;const mg=lu(gg);function yg(e){const t=[],n=[];e.forEach(r=>{const[l,u]=r;t.push(l),n.push(u)});const a=Math.max(...t),s=Math.min(...t),i=Math.max(...n),o=Math.min(...n);return[s,a,o,i]}function vg(e,t){const n=e.rows.length+1,a=e.columns.length+1,s={};for(let i=0;i<n;i++)for(let o=0;o<a;o++){const r=`${i}_${o}`;s[r]={cells:r}}return t.forEach(i=>{i=Nf(i,Of);const[o,r,l,u]=yg(i),p=u-l+1,f=r-o+1,g=`${o}_${l}`;i.forEach(y=>{const w=y.join("_");if(w===g){s[w].colspan=p,s[w].rowspan=f;return}delete s[w]})}),s}function Rl(e){const{outline:t,grid:n,merged:a,uuid:s,page:i}=e,o={},r=[],l=vg(n,a);return Object.keys(l).forEach(u=>{var m,E;const[p,f]=u.split("_").map(Number),g=[];g[0]=t[0]+n.columns[f-1],g[1]=t[1]+n.rows[p-1],g[2]=t[0]+n.columns[f],g[3]=t[1]+n.rows[p],f===0&&(g[0]=t[0]),p===0&&(g[1]=t[1]),f===n.columns.length&&(g[2]=t[2]),p===n.rows.length&&(g[3]=t[3]);const y=(m=l[u])==null?void 0:m.colspan,w=(E=l[u])==null?void 0:E.rowspan;if(y&&y!==1){const P=f+y-1;P===n.columns.length?g[2]=t[2]:g[2]=t[0]+n.columns[P]}if(w&&w!==1){const P=p+w-1;P===n.rows.length?g[3]=t[3]:g[3]=t[1]+n.rows[P]}o[u]={index:e.index,outline:g,cell:u,tableId:s,type:r_.TABLE_CELL,row:p,column:f,page:i,table:e},o[u]&&r.push(o[u])}),r}function qu(e){return e?(e=e.toLowerCase(),e.startsWith("paragraph_")?"paragraph":e==="border"||e==="borderless"?"table":e):null}function bg(e){return Object.prototype.hasOwnProperty.call(e,"p")?!!e.p:!0}function js(e){return e=e.replaceAll(/(\w+)(-|\u0002)\n\s*(\w+)/g,"$1$3"),e=e.replaceAll(/([\u4E00-\u9FFF\u3400-\u4DBF\uF900-\uFAFF])\n/g,"$1"),e=e.replaceAll(/\|/g,"&#124;"),e.replaceAll(/\n\s*/g," ")}function d8(e){const t=[];return e.forEach(n=>{let a;const s=qu(n.type);if(s==="paragraph")a={p:js(n.selectedText)};else if(s==="selection")a={p:js(n.text)};else if(n.rows){const i=n.rows.length;if(i===0)return;n.rows.forEach(u=>{u.cols.forEach(p=>{p.text=js(p.text)})});const r=n.rows[0].cols.map(u=>u.text),l=i>1?n.rows.slice(1).map(u=>u.cols.map(p=>p.text)):[];a={table:{headers:r,rows:l}}}else console.warn("Unsupported element.",n);a?bg(a)?t.push(a):console.warn("Invalid markdown element",n,a):console.warn("Invalid element",n)}),t}const p8=e=>{const t=su(e,function(p){return`${qu(p.type)}s`}),{tables:n=[],paragraphs:a=[]}=t,s=[...a].sort((p,f)=>p.index-f.index),i=[];n.forEach(p=>{const f=Rl(p);i.push(...f),p.id=En()}),a.forEach(p=>{p.id=En()}),i.sort((p,f)=>p.cell-f.cell);let o=[...i,...s].sort((p,f)=>p.index-f.index),r=t.column_lines?Rl(t.column_lines):[];r=r.map(p=>Z(A({},p),{type:"PAGE_BLOCK_ITEM"})),o=[...o,...r];const l=o.filter(p=>{var f,g;if(p.table){const y=p.table.cells[p.cell];return((f=y.chars)==null?void 0:f.length)&&y.text}return((g=p.chars)==null?void 0:g.length)&&p.text}).map(p=>{if(p.table){const{chars:f,text:g}=p.table.cells[p.cell];return{chars:f,str:g}}return{chars:p.chars,str:p.text}});let u=0;if(o.length){const p=o[0];u=p.table?-p.table.rotation||0:-p.rotation||0}return{paragraphs:a,tables:n,textBlocks:l,rects:o,rotateAngle:u}};function f8(e,{paragraphs:t,tables:n}){const a=t.map(i=>({annotationType:en.Square,customType:tn.PARAGRAPH,rect:[...wg(i.outline)],id:i.id,pageNumber:e,color:[0,0,0],modificationDate:Date.now(),creationDate:Date.now()}));return{tableAnnots:n.map(i=>({annotationType:en.Table,customType:tn.TABLE,rect:[...i.outline],id:i.id,pageNumber:e,color:[0,0,0],modificationDate:Date.now(),creationDate:Date.now(),hLines:[...i.grid.rows],vLines:[...i.grid.columns],spanCellData:[...i.merged]})),paragraphAnnots:a}}Ot.extend(mg);Ot.extend(_g);const h8=e=>Vh.find(t=>t.config.customType===e).annotationType,_8=e=>{if(!e.length)return[0,0,0,0];const[t,n,a,s]=[[],[],[],[]];e.forEach(u=>{const[p,f,g,y]=u;t.push(p),n.push(f),a.push(g),s.push(y)});const i=Math.min(...t),o=Math.min(...n),r=Math.max(...a),l=Math.max(...s);return[i,o,r,l]},wg=e=>{const[t,n,a,s]=e,i=2;return[t-i,n-i,a+i,s+i]},Eg=e=>({bift:"BIFT",fanbing:"Bing"})[e],g8=e=>{let t="",n=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890";for(var s=0;s<e;s++)n=Math.floor(Math.random()*a.length),t+=a.charAt(n);return t},Li=(e,t,n={})=>{var o,r;let a=!1,s=null;n={leading:(o=n.leading)!=null?o:!0,queue:(r=n.queue)!=null?r:!0};const i=()=>T(void 0,null,function*(){if(!a)try{(n.leading||s)&&(n.queue?yield e():e().catch(console.error))}catch(l){console.error(l)}finally{s=setTimeout(()=>{i()},t)}});return i(),function(){a=!0}},m8=(e,t)=>{const[n,a,s,i]=e,[o,r,l,u]=t;return!(s<o||n>l||i<r||a>u)},$r=e=>new Promise(t=>{setTimeout(()=>{t()},e)}),ju=e=>Zh.test(e),Pg=e=>jh.test(e),kg=e=>Kh.test(e),Sg=e=>Qh.test(e),Ag=e=>Xh.test(e),Tg=e=>Jh.test(e),y8=e=>e===Be.COLLECTION,Rr=Intl.DateTimeFormat().resolvedOptions().timeZone,Cn=(e,t="YYYY-MM-DD HH:mm:ss")=>e?Ot.unix(e).tz(Rr).format(t):"",ui=()=>Ot(new Date).tz(Rr).unix(),v8=(e="")=>e?Ot(e).tz(Rr).unix():0;function b8(e){return T(this,null,function*(){document.body.appendChild(e),window.getSelection().removeAllRanges();const t=document.createRange();t.selectNode(e),window.getSelection().addRange(t);const n=document.execCommand("copy");if(window.getSelection().removeAllRanges(),e.remove(),!n)throw new Error("复制错误")})}function w8(e){const{cells:t,merged:n}=JSON.parse(JSON.stringify(e));n.forEach(i=>{const o=[];let r=null;i.forEach(([l,u])=>{t[`${l}_${u}`]?r=t[`${l}_${u}`]:o.push(`${l}_${u}`)}),r&&o.forEach(l=>{t[l]=A({},r)})});const a={headers:[],rows:[]};let s=0;for(;;){let i=0;if(!t[`${s}_${i}`])break;for(s>0&&(a.rows[s-1]=[]);t[`${s}_${i}`];){const o=js(t[`${s}_${i}`].text);s===0?a.headers[i]=o:a.rows[s-1][i]=o,i++}s++}return Mf([{table:a}])}function Un(e,t){const a=(Un.canvas||(Un.canvas=document.createElement("canvas"))).getContext("2d");return a.font=t,a.measureText(e).width}function E8(e,t){for(var n=e.getBoundingClientRect(),a=[],s=0;s<t.length;s++){var i=t[s],o=i.getBoundingClientRect();o.top<n.bottom&&o.bottom>n.top&&o.left<n.right&&o.right>n.left&&a.push(i)}return a}function P8(e,t,n){t.forEach(a=>{let s=e.findIndex(i=>i[n]>a[n]);s===-1&&(s=e.length),e.splice(s,0,a)})}const Kn=new Lf.Converter;Kn.setOption("tables",!0);Kn.setOption("underline",!0);Kn.setOption("tasklists",!0);Kn.setOption("strikethrough",!0);Kn.setOption("openLinksInNewWindow",!0);const Ku=/(?:\])(\(.*?\))/g,Cg=/\[\s*<span\s+data-index="\d+">[\d\S]+<\/span>\s*\]/g,k8=(e,t,n,a=!0)=>(t&&n&&(e+='<span class="flicker">&nbsp;</span>'),e?(a&&(e=e.replace(Ku,"]")),Kn.makeHtml(e)):""),S8=(e,t,n)=>(t&&n&&(e+='<span class="flicker">&nbsp;</span>'),e?(e=e.replace(Ku,"]"),e=e.replace(Cg,""),Kn.makeHtml(e)):"");function Ks(e){return e/375*100}function Ro(e=""){return Uf(e)}function xg(e=""){const[t,n,a]=iu(e).color;return(t*.2126+n*.7152+a*.0722)/255>.7?"light":"dark"}const A8=(e="")=>{const t=(l=1)=>iu(Ro(e)).alpha(l).toString(),i=t(.1),o=t(.6),r=t(.15);return{bgColor:i,quoteColor:o,activeColor:r}};function di(e=0){return e.toLocaleString()}function kn(e=0){return Number(e).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}function Dr(e="",t={}){if(!e)return;const n=new URL(e);return Object.keys(t).forEach(a=>n.searchParams.append(a,t[a])),n.href}function T8(e,t,n=!1){const a=e.getBoundingClientRect(),s=t.getBoundingClientRect();return n?a.top>=s.top&&a.left>=s.left&&a.bottom<=s.bottom&&a.right<=s.right:a.top<=s.bottom&&a.top+a.height>=s.top&&a.left<=s.right&&a.left+a.width>=s.left}const Ig=e=>e==="signIn"||e==="signUp"||e==="resetPassword",$g=()=>new Promise(e=>{requestAnimationFrame(e)}),Rg=()=>{const e=new mr(window.navigator.userAgent);return e.getOS().is("Android")&&e.getBrowser().is("WeChat")},Dg=e=>{const t=document.createElement("textarea");t.value=e!=null?e:"",t.style.position="absolute",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()},Ng=e=>e.replace(/\s+/g," ");function Og(){const e=Object.create(null);let t=!1;return Object.defineProperty(e,"settled",{get(){return t}}),e.promise=new Promise((n,a)=>{e.resolve=function(i){t=!0,n(i)},e.reject=function(i){t=!0,a(i)}}),e}const Xa=e=>{if(e===100)return"#E6492D"};function C8(e,t){if(e&&e.id)return'id("'+e.id+'")';if(t&&!t.contains(e))return"";const n=[],a=[Node.ELEMENT_NODE,Node.TEXT_NODE];for(;e.parentNode;){let s=e.nodeName.toLowerCase(),i=e.parentNode.querySelectorAll(`:scope > ${s}`).length>1,o=1,r=e.previousSibling;for(;r;)a.includes(r.nodeType)&&r.nodeName===e.nodeName&&o++,r=r.previousSibling;s==="#text"&&(s="text()");let l="";if((o>1||i)&&(l="["+o+"]"),n.unshift(s+l),e=e.parentNode,t&&e===t)break}return n.length?n.join("/"):null}const Lg=["fill","stroke"],Ug=["href"],te={__name:"SvgIcon",props:{prefix:{type:String,default:"icon"},size:{type:[Number,String],default:16},name:{type:String,required:!0},stroke:{type:String},fill:{type:String},title:{type:String,default:null},showAfter:{type:Number,default:1e3},hideAfter:{type:Number,default:0},margin:{type:String,default:"0 5px"},color:{type:String,default:"#6b6c6f"}},setup(e){const t=e;yr(l=>({a4888e8c:o.value}));const n=x(null),a=x(null),s=O(()=>`#${t.prefix}-${t.name}`),i=O(()=>{const{size:l,color:u}=t;let p=zn?`${Ks(l)}`:`${l}`;return p=zn?`${p}vw`:`${p.replace("px","")}px`,{width:p,height:p,"--color":u}}),o=O(()=>t.margin);$e(()=>t.title,l=>{l&&a.value&&(a.value.content=l)});const r=()=>{t.title&&(a.value=fg({content:t.title,showAfter:t.showAfter||0,virtualRef:n.value}))};return cu(()=>{a.value&&(a.value.virtualRef=null)}),(l,u)=>(h(),b("svg",{ref_key:"$triggerRef",ref:n,"aria-hidden":"true",style:On(i.value),fill:e.fill,stroke:e.stroke,class:_e(["svg-icon-base",{"is-has-interactive":l.$attrs.onClick,mobile:d(zn)}]),onMouseenter:r},[c("use",{href:s.value},null,8,Ug)],46,Lg))}},Fe=ou();const Mg={class:"avatar-box"},Bg=["src"],Fg={key:1,class:"avatar-icon"},Gg={key:2,class:"crown-icon"},zg={__name:"UserAvatar",props:{name:{type:[String,Number],default:""},size:{type:Number,default:20},margin:{type:String,default:"0"},showCrown:{type:Boolean,default:!1},crownIcon:{type:String,default:""},avatar:{type:String,default:""}},setup(e){const t=e;yr(f=>({"1e17c54b":r.value,"26eb7f10":l.value,"171217f6":p.value,"9f8400de":u.value}));const n=x(""),a=O(()=>t.name.trim()),s=()=>xg(Ro(a.value))==="dark"?"#fff":"#000",i=O(()=>{let f=zn?`${Ks(t.size)}vw`:`${t.size}px`,g=zn?`${Ks(t.size)/1.8}vw`:`${t.size/1.8}px`;return{backgroundColor:Ro(a.value),color:s(),width:f,height:f,fontSize:g}}),o=O(()=>parseFloat(t.size)*.65),r=O(()=>zn?`${Ks(t.size)}vw`:`${t.size}px`),l=O(()=>t.margin),u=O(()=>`-${o.value*.3}px`),p=O(()=>`-${o.value*.35}px`);return $e(()=>t.avatar,()=>{t.avatar&&!/^http[s]?:\/\//.test(t.avatar)&&!/^blob:/.test(t.avatar)?Tr(t.avatar).then(f=>{n.value=f}).catch(()=>{n.value=""}):n.value=t.avatar},{immediate:!0}),(f,g)=>(h(),b("div",Mg,[n.value?(h(),b("img",{key:0,crossorigin:"anonymous",src:n.value,alt:""},null,8,Bg)):(h(),b("div",Fg,[c("div",{class:"svg-icon-base",style:On(i.value)},_(a.value.slice(0,1)),5)])),e.showCrown?(h(),b("div",Gg,[v(te,{name:`${e.crownIcon}-has-border`,size:o.value,color:"#ffffff",margin:"0"},null,8,["name","size"])])):N("",!0)]))}},Ra=se(zg,[["__scopeId","data-v-04fca8ad"]]);const Qu=e=>{e.key==="Escape"&&e.preventDefault()},Xu=e=>{const t=e.target.closest("input"),n=e.target.closest("textarea");(t||n)&&e.key==="Escape"&&e.stopPropagation()},Ju=()=>{document.addEventListener("keypress",Qu),document.addEventListener("keydown",Xu,!0)},Zu=()=>{setTimeout(()=>{document.removeEventListener("keypress",Qu),document.removeEventListener("keydown",Xu,!0)})};const Hg={class:"dialog-title"},Yg={key:0,class:"dialog-sub-title"},Wg={__name:"CommonDialog",props:{title:{type:String,default:""},subTitle:{type:String,default:""},modelValue:{type:Boolean,default:!1},width:{type:[Number,String],default:700},titleIcon:{type:String,default:""},showFooter:{type:Boolean,default:!0}},emits:["update:modelValue","closed","close","open"],setup(e,{emit:t}){const n={alignCenter:!0,closeOnClickModal:!1,draggable:!0,appendToBody:!0,destroyOnClose:!0},a=()=>{t("update:modelValue",!1),t("close"),Zu()},s=()=>{Ju(),t("open")},i=()=>{t("closed")};return(o,r)=>(h(),M(d(Qf),vr({class:"common-dialog","model-value":e.modelValue},n,{width:e.width,"show-footer":e.showFooter,onClose:a,onOpen:s,onClosed:i}),Ci({header:k(()=>[e.title?(h(),b(K,{key:0},[c("div",Hg,[e.titleIcon?(h(),M(te,{key:0,name:e.titleIcon,size:18},null,8,["name"])):N("",!0),c("span",null,_(e.title),1)]),e.subTitle?(h(),b("div",Yg,_(e.subTitle),1)):N("",!0)],64)):N("",!0),kt(o.$slots,"header",{},void 0,!0)]),default:k(()=>[kt(o.$slots,"default",{},void 0,!0)]),_:2},[e.showFooter?{name:"footer",fn:k(()=>[kt(o.$slots,"footer",{},void 0,!0)]),key:"0"}:void 0]),1040,["model-value","width","show-footer"]))}},Xe=se(Wg,[["__scopeId","data-v-110ea8b9"]]);const Ui=e=>{const{t}=ye(),n=(i,o,r)=>{if(!qh.test(o)){r(new Error(t("passwordValidator.errorMsg")));return}if(e.password&&e.repeatPassword&&e.password!==e.repeatPassword&&i.field!=="password"){r(new Error(t("passwordValidator.noMatchWarn")));return}r()},a={required:!0,message:t("passwordValidator.requiredWarn"),trigger:"blur"},s={min:8,max:99,message:t("passwordValidator.overLimitWarn",{min:8,max:99}),trigger:"blur"};return{oldPassword:[a,s],password:[a,s,{validator:n,trigger:"blur"}],repeatPassword:[{required:!0,message:t("passwordValidator.repwdRequiredWarn"),trigger:"blur"},s,{validator:n,trigger:"blur"}]}};const Vg={__name:"SetPassword",props:{hasPassword:{type:Boolean,default:!1}},emits:["passwordAdded","passwordChanged"],setup(e,{expose:t,emit:n}){const a=e,{t:s}=ye(),i=st({password:"",repeatPassword:"",oldPassword:""}),o=Ui(i),r=st(A({},o)),l=x(),u=x(!1),p=x(""),f=()=>T(this,null,function*(){p.value="",yield l.value.validate();try{u.value=!0;const g={password:i.password};a.hasPassword&&(g.old_password=i.oldPassword),yield y_(g),a.hasPassword?ge.success(s("settings.profile.changePwdTip")):(ge.success(s("settings.profile.setPwdTip")),n("passwordAdded")),n("passwordChanged")}catch(g){if(g.message.toLowerCase().includes("incorrect password"))p.value=s("settings.profile.pwdError");else throw g}finally{u.value=!1}});return t({resetForm:()=>{l.value.resetFields(),l.value.clearValidate()}}),(g,y)=>(h(),M(d(pn),{ref_key:"$passwordFormRef",ref:l,class:"password-form","label-position":"top",size:"large",autocomplete:"off",model:i,rules:r},{default:k(()=>[e.hasPassword?(h(),M(d(Ue),{key:0,label:"Enter your current password",error:p.value,prop:"oldPassword"},{default:k(()=>[v(d(Ye),{modelValue:i.oldPassword,"onUpdate:modelValue":y[0]||(y[0]=w=>i.oldPassword=w),type:"password",placeholder:g.$t("passwordValidator.current"),"show-password":"",onKeydown:y[1]||(y[1]=Ne(be(()=>{},["stop"]),["esc"]))},null,8,["modelValue","placeholder"])]),_:1},8,["error"])):N("",!0),v(d(Ue),{label:"Password",prop:"password"},{default:k(()=>[v(d(Ye),{modelValue:i.password,"onUpdate:modelValue":y[2]||(y[2]=w=>i.password=w),type:"password",autocomplete:"new-password","show-password":"",placeholder:g.$t("passwordValidator.placeholder"),onKeydown:y[3]||(y[3]=Ne(be(()=>{},["stop"]),["esc"]))},null,8,["modelValue","placeholder"])]),_:1}),v(d(Ue),{prop:"repeatPassword"},{default:k(()=>[v(d(Ye),{modelValue:i.repeatPassword,"onUpdate:modelValue":y[4]||(y[4]=w=>i.repeatPassword=w),type:"password","show-password":"",autocomplete:"new-password",placeholder:g.$t("passwordValidator.repwdPlaceholder"),onKeydown:y[5]||(y[5]=Ne(be(()=>{},["stop"]),["esc"]))},null,8,["modelValue","placeholder"])]),_:1}),v(d(Ue),{style:{"margin-bottom":"0"}},{default:k(()=>[v(d(he),{type:"primary",loading:u.value,onClick:f},{default:k(()=>[Q(" Submit ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]))}},ed=se(Vg,[["__scopeId","data-v-b7f8a7ee"]]);const qg={class:"user-settings"},jg={class:"set-user-info"},Kg={class:"set-avatar"},Qg={class:"set-name"},Xg={class:"settings-item"},Jg={class:"settings-title"},Zg={class:"settings-content"},em={class:"item-type"},tm={class:"item-content"},nm={class:"settings-content"},am={class:"item-type"},sm={class:"item-content"},im={class:"cropper-container"},Dl=".png,.jpg,.jpeg,.webp",Nl="png",om={__name:"UserProfile",props:{userInfo:{type:Object,required:!0}},emits:["userInfoChanged"],setup(e,{emit:t}){const n=e,{t:a}=ye(),s=x(1),i=x(""),o=x(""),r=x(),l=x(!1),u=x(!1),p=O(()=>n.userInfo.has_password),f=O(()=>p.value?a("settings.profile.changePwdTitle"):a("settings.profile.setPwdTitle")),g=x(),y=()=>{t("userInfoChanged",Z(A({},n.userInfo),{has_password:!0}))},w=()=>{u.value=!0},m=()=>{g.value.resetForm()},E=x(),P=x(),S=U=>{const F=U.target.files[0];if(F){const B=F.name.split(".").at(-1).toLowerCase();if(!Dl.includes(B)){ge.error(a("avatarTypeTips"));return}E.value=URL.createObjectURL(F),l.value=!0,s.value++}},D=()=>{P.value.getCropBlob(U=>T(this,null,function*(){l.value=!1;const F=`${En()}.${Nl}`,B=new File([U],F);yield Cl({avatar:B}),o.value=URL.createObjectURL(B);const W=yield $u();t("userInfoChanged",W)}))},C=U=>{P.value.changeScale(U)},$=()=>{URL.revokeObjectURL(E.value)},G=()=>T(this,null,function*(){var F;const U=i.value.trim();U?(i.value=U,yield Cl({username:U}),t("userInfoChanged",Z(A({},n.userInfo),{name:U})),ge.success(a("settings.profile.nameSuccess"))):i.value=n.userInfo.name,(F=r.value)==null||F.blur()});return It(()=>T(this,null,function*(){i.value=n.userInfo.name;const{avatar:U}=n.userInfo.meta||{};U&&(o.value=U)})),(U,F)=>(h(),b(K,null,[c("div",qg,[c("div",jg,[c("div",Kg,[v(d(_t),{content:"Replace photo","show-after":2e3},{default:k(()=>[c("label",null,[v(Ra,{avatar:o.value,class:"avatar-handler-icon",name:n.userInfo.name,size:80},null,8,["avatar","name"]),ct((h(),b("input",{key:s.value,type:"file",accept:Dl,onChange:S},null,32)),[[Kt,!1]])])]),_:1})]),c("div",Qg,[c("div",null,_(U.$t("name")),1),v(d(Ye),{ref_key:"$usernameInput",ref:r,modelValue:i.value,"onUpdate:modelValue":F[0]||(F[0]=B=>i.value=B),maxlength:30,onChange:G,onKeydown:F[1]||(F[1]=Ne(be(()=>{},["stop"]),["esc"]))},null,8,["modelValue"])])]),c("div",Xg,[c("div",Jg,_(U.$t("settings.profile.accountSecurity")),1),c("div",Zg,[c("div",em,_(U.$t("email")),1),c("div",tm,_(n.userInfo.email),1)]),c("div",nm,[c("div",am,_(U.$t("password")),1),c("div",sm,[c("span",null,_(U.$t("settings.profile.pwdExpository")),1),v(d(he),{onClick:w},{default:k(()=>[Q(_(f.value),1)]),_:1})])])])]),v(Xe,{modelValue:l.value,"onUpdate:modelValue":F[4]||(F[4]=B=>l.value=B),title:U.$t("settings.profile.setAvatarTitle"),width:"450",onClosed:$},{footer:k(()=>[v(d(he),{type:"primary",onClick:D},{default:k(()=>[Q(_(U.$t("settings.profile.confirmAvatar")),1)]),_:1})]),default:k(()=>[c("div",im,[v(d(Bf),{ref_key:"$cropper",ref:P,"fixed-box":!0,fixed:!0,"auto-crop":!0,high:!1,"can-move-box":!1,"auto-crop-width":200,"auto-crop-height":200,img:E.value,"output-type":Nl},null,8,["img"])]),v(d(Xf),{class:"cropper-operation"},{default:k(()=>[v(d(he),{icon:d(Jf),onClick:F[2]||(F[2]=B=>C(1))},null,8,["icon"]),v(d(he),{icon:d(Zf),onClick:F[3]||(F[3]=B=>C(-1))},null,8,["icon"])]),_:1})]),_:1},8,["modelValue","title"]),v(Xe,{modelValue:u.value,"onUpdate:modelValue":F[6]||(F[6]=B=>u.value=B),title:f.value,width:"624","show-footer":!1,onClosed:m},{default:k(()=>[v(ed,{ref_key:"$passwordFormRef",ref:g,"has-password":p.value,onPasswordAdded:y,onPasswordChanged:F[5]||(F[5]=B=>u.value=!1)},null,8,["has-password"])]),_:1},8,["modelValue","title"])],64))}},rm=se(om,[["__scopeId","data-v-0e6f398b"]]);const at={enableGtag:!mt,hasDiscord:!mt,hasTwitter:!mt,hasGoogleLogin:!mt&&!hn,hasDetailedCitation:!mt,hasInviteUser:!hn,hasProductHunt:!mt,stopAnswerGenerate:!mt,footerLinkList:mt?[Tt.POLICY,Tt.TERMS,Tt.WIKI]:[Tt.POLICY,Tt.TERMS,Tt.TWITTER,Tt.DISCORD,Tt.WIKI,Tt.CHANGELOG],paymentList:{domestic:[Me.ALIPAY,Me.WECHAT],foreign:mt?[]:[Me.CARD,Me.PAYPAL]},inviteWaysList:mt?[cn.EMAIL]:[cn.EMAIL,cn.TWITTER],referrerList:mt?["Weibo","Baidu and other search engines","Zhihu","Friend referral","Other"]:["Twitter","Youtube","Weibo","Tiktok","Google and other search engines","Product Hunt","Zhihu","Instagram","Linkedin","Reddit","AI directory","Friend referral","Other"]};const lm={class:"preference-wrap"},cm={class:"preference-item"},um={class:"preference-item-label"},dm={key:0,class:"preference-item"},pm={class:"preference-item-label"},fm={__name:"UserPreference",props:{userPreference:{type:Object,required:!0}},emits:["onUserPreferenceChanged"],setup(e,{emit:t}){const n=e,{t:a}=ye(),s=[{label:a("chatIconFollowModeSetting.modes.hoverFollow"),value:Co.HOVER},{label:a("chatIconFollowModeSetting.modes.selectionFollow"),value:Co.SELECTION}],i=st({followMode:n.userPreference.followMode,addUrl:n.userPreference.addUrl}),o=l=>{t("onUserPreferenceChanged",Z(A({},n.userPreference),{followMode:l}))},r=l=>{t("onUserPreferenceChanged",Z(A({},n.userPreference),{addUrl:l}))};return(l,u)=>(h(),b("div",lm,[c("div",cm,[c("div",um,_(l.$t("settings.preference.followModeLabel")),1),v(d(th),{modelValue:i.followMode,"onUpdate:modelValue":u[0]||(u[0]=p=>i.followMode=p),placeholder:"请选择",class:"preference-item-config follow-mode-selection",onChange:o},{default:k(()=>[(h(),b(K,null,ke(s,p=>v(d(eh),{key:p.value,label:p.label,value:p.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),d(at).hasDetailedCitation?(h(),b("div",dm,[c("div",pm,[c("span",null,_(l.$t("settings.preference.detailedCitationLabel")),1),v(te,{name:"tip",size:16,"show-after":0,class:"switch-label-icon",title:l.$t("settings.preference.detailedCitationTooltip")},null,8,["title"])]),v(d(uu),{modelValue:i.addUrl,"onUpdate:modelValue":u[1]||(u[1]=p=>i.addUrl=p),onChange:r},null,8,["modelValue"])])):N("",!0)]))}},hm=se(fm,[["__scopeId","data-v-b5ef0aaf"]]);const _m={class:"tab-pane-container"},gm={class:"tab-pane-container"},mm={__name:"UserSettings",props:{visible:{type:Boolean,default:!1},activeTab:{type:Number,default:Yt.PROFILE}},emits:["update:visible","update:activeTab"],setup(e,{emit:t}){const n=Oe(),{t:a}=ye(),s=l=>{n.setUserInfo(l)},i=l=>T(this,null,function*(){n.updatePreference(l),ge.success(a("settings.preference.successText"))}),o=()=>{t("update:visible",!1)},r=l=>{t("update:activeTab",l)};return(l,u)=>(h(),M(Xe,{title:l.$t("settings.title"),"model-value":e.visible,"show-footer":!1,class:"settings-dialog",width:960,height:680,onClosed:o},{default:k(()=>[v(d(br),{"model-value":e.activeTab,"tab-position":"left",class:"settings-tabs",onTabChange:r},{default:k(()=>[v(d(Fn),{name:d(Yt).PROFILE},{label:k(()=>[v(te,{name:"settings-profile",size:16,class:"settings-tab-icon"}),c("span",null,_(l.$t("settings.profile.title")),1)]),default:k(()=>[c("div",_m,[v(rm,{"user-info":d(n).userInfo,onUserInfoChanged:s},null,8,["user-info"])])]),_:1},8,["name"]),v(d(Fn),{name:d(Yt).PREFERENCE},{label:k(()=>[v(te,{name:"settings-preference",size:16,class:"settings-tab-icon"}),c("span",null,_(l.$t("settings.preference.title")),1)]),default:k(()=>[c("div",gm,[v(hm,{"user-preference":d(n).preference,onOnUserPreferenceChanged:i},null,8,["user-preference"])])]),_:1},8,["name"]),kt(l.$slots,"tab-panes",{},void 0,!0)]),_:3},8,["model-value"])]),_:3},8,["title","model-value"]))}},td=se(mm,[["__scopeId","data-v-a4eec07c"]]);const ym={class:"common-tag"},vm={__name:"CommonTag",props:{text:{type:String,default:""},color:{type:String,default:"var(--el-bg-color-tag)"}},setup(e){return yr(t=>({"2d1be775":e.color})),(t,n)=>(h(),b("span",ym,_(e.text),1))}},Wt=se(vm,[["__scopeId","data-v-d06aac32"]]);const bm={class:"add-package-button"},wm={__name:"AddPackageButton",props:{text:{type:String,default:""}},setup(e){return(t,n)=>(h(),b("div",bm,[v(te,{name:"add-package",size:24,color:"#6576db",margin:"0 5px 0 0"}),c("span",null,_(e.text),1)]))}},co=se(wm,[["__scopeId","data-v-991e571b"]]);function Qs(){at.enableGtag&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push(arguments))}function Em(){if(!at.enableGtag)return;const e=document.createElement("script");e.setAttribute("async",""),e.src="https://www.googletagmanager.com/gtag/js?id=AW-11257878356",document.head.appendChild(e),Qs("js",new Date),Qs("config","AW-11257878356"),(window.location.hash==="#/upload"||window.location.hash==="#/")&&Qs("event","conversion",{send_to:"AW-11257878356/kX9ZCIHGxr0YENSulvgp"})}function Nr(){Qs("event","conversion",{send_to:"AW-11257878356/oyvhCMfGwM4YENSulvgp"})}const nd=e=>(vt("data-v-a0e650b3"),e=e(),bt(),e),Pm={key:0,class:"package-header"},km={class:"switch-wrapper"},Sm={class:"text-wrapper"},Am={class:"text-wrapper"},Tm={class:"package-content"},Cm={class:"membership-package"},xm={class:"header"},Im={class:"type"},$m={key:0,class:"text-current"},Rm={class:"type"},Dm={key:0,class:"price-wrapper"},Nm={class:"origin-price"},Om={class:"value"},Lm={class:"unit"},Um={key:1,class:"text-current"},Mm={key:2,class:"text-current"},Bm={key:3,class:"text-current"},Fm={class:"type"},Gm={key:0,class:"price-wrapper"},zm={class:"value"},Hm={class:"unit"},Ym={key:0},Wm={key:1},Vm={key:1,class:"price-wrapper"},qm={class:"value"},jm={key:0,class:"unit"},Km={key:1,class:"unit"},Qm={key:3,class:"type"},Xm={class:"content-desc"},Jm={class:"content-desc option"},Zm={class:"content-desc option"},ey={class:"content-desc"},ty={class:"content-desc option"},ny={class:"content-desc option"},ay={class:"content-desc option"},sy={class:"content-desc"},iy={class:"content-desc option"},oy={class:"content-desc option"},ry={class:"content-item"},ly={class:"label"},cy={class:"content-item"},uy={class:"label"},dy={class:"content-item"},py={class:"label"},fy={key:4,class:"content-item"},hy={class:"label"},_y={class:"content-item"},gy={class:"label"},my={class:"value"},yy={key:0,class:"content-item"},vy={class:"label"},by={class:"value"},wy={key:1,class:"content-item"},Ey={class:"label not-support"},Py={key:2,class:"content-item"},ky={class:"label"},Sy={class:"value"},Ay={key:3,class:"content-item"},Ty={class:"label not-support"},Cy=nd(()=>c("br",null,null,-1)),xy=nd(()=>c("br",null,null,-1)),Iy={class:"content-item"},$y={class:"label"},Ry={class:"value"},Dy={class:"content-item"},Ny={class:"label"},Oy={class:"value"},Ly={class:"label"},Uy={class:"value"},My={class:"content-item"},By={class:"label"},Fy={class:"value"},Gy={class:"content-item"},zy={class:"label"},Hy={class:"value"},Yy={key:0,class:"footer"},Wy={key:0,class:"tips-wrap"},Vy={class:"tips-text"},qy=["href","target"],jy={class:"el-link__inner"},Ky={class:"tips-text"},Qy={__name:"MembershipPackage",props:{currentPackage:{type:Object,default:null},border:{type:Boolean,default:!0},showPrice:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},proBtnText:{type:String,default:""},showAdditionPackages:{type:Boolean,default:!0},showLowerMembership:{type:Boolean,default:!1},payedAdditionalPackageInfo:{type:Object,default:null}},emits:["selectPackage","clickApiLink"],setup(e,{emit:t}){const n=e,a=x(!1),s=dt(),i=Oe(),{t:o}=ye(),r=O(()=>{if(n.currentPackage)return[n.currentPackage];const m=i.currentMembershipPackageInfo.id;let E;return n.showLowerMembership?E=i.membershipPackages:E=i.membershipPackages.filter(S=>S.id>=m),n.showAdditionPackages&&m>0&&E.push(...i.additionPackages),E=E.filter(P=>a.value||i.isAnnualProMembership?!P.isMonthlyPkg:!P.isAnnualPkg),i.isProMembership&&n.showAdditionPackages&&(E=E.filter(P=>!P.isProPlusPkg)),E}),l=O(()=>{const m=i.membershipPackages.find(C=>C.isAnnualProPkg),E=i.membershipPackages.find(C=>C.isMonthlyProPkg),P=(m==null?void 0:m.price)||0,S=E.origin_price*12;return((1-P/S)*100).toFixed(1)}),u=O(()=>{const m=!!i.membershipPackages.find(E=>E.isAnnualProPkg);return!n.currentPackage&&m&&!i.isAnnualProMembership&&!i.isProPlusMembership}),p=m=>n.currentPackage?!1:!(i.isGiftMembership&&m.goods_id===i.currentMembershipGoodsId),f=m=>n.currentPackage||n.showAdditionPackages?!1:(m.isProPkg||m.isProPlusPkg)&&i.isEffectMembership,g=({alias:m})=>{const E=r.value.find(P=>P.alias===m);E.isMonthlyProPkg?t("selectPackage",Z(A({},E),{type:Qa.PRO_MONTHLY_RENEWAL})):E.isAnnualProPkg&&t("selectPackage",Z(A({},E),{type:Qa.PRO_ANNUALLY_BASE})),E.goods_id===J.MONTHLY_PRO&&Nr()},y=m=>{const E=i.additionPackages.find(P=>P.goods_id===m);t("selectPackage",A({},E),tt.PACKAGE)},w=m=>{const{count:E,unit_count:P}=m;return m.isApiPagePkg?[`${E} ${o("chatdocApi.pricing.pageText")}`]:m.isApiQuestionPkg?[`${E} ${o("chatdocApi.pricing.questionText")}`]:m.isApiPageAndQuestionPkg?[`${P*E} ${o("chatdocApi.pricing.pageText")}`,`${P*E} ${o("chatdocApi.pricing.questionText")}`]:[]};return(m,E)=>(h(),b("div",{class:_e(["membership-package-wrap",{"no-border":!e.border,"has-footer":e.showFooter}])},[u.value?(h(),b("div",Pm,[c("div",km,[c("div",Sm,[c("span",{class:_e(["text",{active:!a.value}])},_(m.$t("monthlyText")),3)]),v(d(uu),{modelValue:a.value,"onUpdate:modelValue":E[0]||(E[0]=P=>a.value=P),size:"large"},null,8,["modelValue"]),c("div",Am,[c("span",{class:_e(["text",{active:a.value}])},_(m.$t("annualText")),3),v(Wt,{text:m.$t("tags.saveDiscount",{discount:l.value})},null,8,["text"])])])])):N("",!0),c("div",Tm,[c("div",Cm,[(h(!0),b(K,null,ke(r.value,P=>{var S,D;return h(),b("div",{key:P.id,class:"membership-package-item"},[c("div",null,[c("div",xm,[P.isFreePkg?(h(),b(K,{key:0},[c("div",Im,[c("span",null,_(P.alias),1)]),d(i).isFreeMembership?(h(),b("span",$m,_(m.$t("current")),1)):N("",!0)],64)):N("",!0),P.isProPkg||P.isProPlusPkg?(h(),b(K,{key:1},[c("div",Rm,[c("span",null,[Q(_(P.isMonthlyProPkg&&d(i).isGiftMembership?d(ku).GIFT:P.alias)+" ",1),e.currentPackage?(h(),b(K,{key:0},[Q(_(m.$t(P.isMonthlyPkg?"monthlyText":"annualText")),1)],64)):N("",!0)]),v(te,{name:d(i).isGiftMembership&&P.isMonthlyProPkg?"crown-gift":"crown",size:18},null,8,["name"])]),e.showPrice&&(!d(i).isGiftMembership||!P.isMonthlyProPkg)?(h(),b("div",Dm,[c("i",Nm,"$"+_(P.origin_price),1),c("i",Om," $"+_(P.price),1),c("i",Lm,_(m.$t(P.isMonthlyPkg?"uploadPage.filesMonUnit":"uploadPage.filesAnnualUnit")),1)])):N("",!0),P.isMonthlyProPkg&&d(i).isMonthlyProMembership?(h(),b("span",Um,_(m.$t("current")),1)):N("",!0),P.isMonthlyProPlusPkg&&d(i).isMonthlyProPlusMembership?(h(),b("span",Mm,_(m.$t("current")),1)):N("",!0),P.isAnnualPkg&&d(i).isAnnualProMembership?(h(),b("span",Bm,_(m.$t("current")),1)):N("",!0),p(P)?(h(),M(Wt,{key:4,text:m.$t("tags.popular")},null,8,["text"])):N("",!0)],64)):N("",!0),P.isAdditionalPkg?(h(),b(K,{key:2},[c("div",Fm,[c("span",null,_(P.alias),1)]),e.currentPackage&&e.payedAdditionalPackageInfo?(h(),b("div",Gm,[c("i",zm," $"+_(e.payedAdditionalPackageInfo.price),1),c("i",Hm,[c("span",null,"/"+_(e.payedAdditionalPackageInfo.count),1),P.isFilePkg?(h(),b("span",Ym,_(` ${m.$t("uploadPage.filesText")}`),1)):N("",!0),P.isPagePkg||P.isOcrPagePkg?(h(),b("span",Wm,_(` ${m.$t("uploadPage.pagesText")}`),1)):N("",!0)])])):(h(),b("div",Vm,[c("i",qm," $"+_(P.price),1),P.isFilePkg?(h(),b("i",jm,_(m.$t("uploadPage.sizePerUnit")),1)):N("",!0),P.isPagePkg||P.isOcrPagePkg?(h(),b("i",Km,_(m.$t("uploadPage.pagePerUnit")),1)):N("",!0)]))],64)):P.isApiPkg?(h(),b("div",Qm,[Q(_(P.alias)+" ",1),e.currentPackage?(h(),b(K,{key:0},[P.isApiPlanPkg?(h(),b(K,{key:0},[Q(_(m.$t(P.isMonthlyApiBasicPkg?"monthlyText":"annualText")),1)],64)):P.isApiAdditionalPkg&&((S=P.tagInfo)!=null&&S.text)?(h(),M(Wt,{key:1,style:{left:"0"},text:P.tagInfo.text,color:P.tagInfo.color},null,8,["text","color"])):N("",!0)],64)):N("",!0)])):N("",!0)]),c("div",{class:_e(["content",{"is-paragraph-content":P.isAdditionalPkg}])},[P.isFilePkg?(h(),b(K,{key:0},[c("div",Xm,_(m.$t("upgrade.filePackageContent.content")),1),c("div",Jm,_(m.$t("upgrade.filePackageContent.option.opt1")),1),c("div",Zm,_(m.$t("upgrade.filePackageContent.option.opt2")),1)],64)):P.isPagePkg?(h(),b(K,{key:1},[c("div",ey,_(m.$t("upgrade.pagePackageContent.content")),1),c("div",ty,_(m.$t("upgrade.pagePackageContent.option.opt1",{pageCount:d(i).maxPdfPages})),1),c("div",ny,_(m.$t("upgrade.pagePackageContent.option.opt2")),1),c("div",ay,_(m.$t("upgrade.pagePackageContent.option.opt3")),1)],64)):P.isOcrPagePkg?(h(),b(K,{key:2},[c("div",sy,_(m.$t("upgrade.ocrPagePackageContent.content")),1),c("div",iy,_(m.$t("upgrade.ocrPagePackageContent.option.opt1")),1),c("div",oy,_(m.$t("upgrade.ocrPagePackageContent.option.opt2")),1)],64)):P.isApiPlanPkg?(h(),b(K,{key:3},[c("div",ry,[c("i",ly,[c("span",null,_(P.max_pages_of_cycle),1),Q(" "+_(m.$t("chatdocApi.pricing.pageText")),1)])]),c("div",cy,[c("i",uy,[c("span",null,_(P.max_questions_of_cycle),1),Q(" "+_(m.$t("chatdocApi.pricing.questionText")),1)])]),c("div",dy,[c("i",py,[c("span",null,_((D=P.file_formats)==null?void 0:D.toLowerCase()),1)])])],64)):P.isApiAdditionalPkg?(h(),b("div",fy,[c("i",hy,[(h(!0),b(K,null,ke(w(P),C=>(h(),b("div",{key:C},_(C),1))),128))])])):(h(),b(K,{key:5},[c("div",_y,[c("i",gy,[c("span",{class:_e({highlight:!P.isFreePkg})},_(P.pages),3),Q(" "+_(m.$t("uploadPage.pagesText")),1)]),c("i",my,_(m.$t("uploadPage.pdfUnit")),1),f(P)?(h(),M(co,{key:0,class:"add-package",text:m.$t("uploadPage.addPagesText"),onClick:E[1]||(E[1]=C=>y(d(J).PAGE_PACKAGE))},null,8,["text"])):N("",!0)]),P.isFreePkg?(h(),b("div",wy,[c("i",Ey,_(m.$t("uploadPage.ocrText")),1)])):(h(),b("div",yy,[c("i",vy,[c("span",{class:_e({highlight:!P.isFreePkg})},_(P.ocr_pages_per_month),3),Q(" "+_(m.$t("uploadPage.ocrPagesText")),1)]),c("i",by,_(m.$t("uploadPage.filesMonUnit")),1),f(P)?(h(),M(co,{key:0,class:"add-package",text:m.$t("uploadPage.addOcrPagesText"),onClick:E[2]||(E[2]=C=>y(d(J).OCR_PAGE_PACKAGE))},null,8,["text"])):N("",!0)])),P.isFreePkg?(h(),b("div",Ay,[c("i",Ty,_(m.$t("uploadPage.tokenText")),1),Cy,xy])):(h(),b("div",Py,[c("i",ky,[c("span",{class:_e({highlight:!P.isFreePkg})},_(P.tokens/1e3)+"K ",3),Q(" "+_(m.$t("uploadPage.tokensText")),1)]),c("i",Sy,_(m.$t("uploadPage.tokensUnit")),1)])),c("div",Iy,[c("i",$y,[c("span",{class:_e({highlight:P.isProPlusPkg})},_(P.size/1024/1024),3),Q(" MB ")]),c("i",Ry,_(m.$t("uploadPage.sizeUnit")),1)]),c("div",Dy,[P.isFreePkg?(h(),b(K,{key:1},[c("i",Ly,_(P.files_per_day)+" "+_(m.$t("uploadPage.filesText")),1),c("i",Uy,_(m.$t("uploadPage.filesUnit")),1)],64)):(h(),b(K,{key:0},[c("i",Ny,[c("span",{class:_e({highlight:!P.isFreePkg})},_(P.files_per_month),3),Q(" "+_(m.$t("uploadPage.filesText")),1)]),c("i",Oy,_(m.$t("uploadPage.filesMonUnit")),1),f(P)?(h(),M(co,{key:0,class:"add-package",text:m.$t("uploadPage.addFilesText"),onClick:E[3]||(E[3]=C=>y(d(J).FILE_PACKAGE))},null,8,["text"])):N("",!0)],64))]),c("div",My,[c("i",By,[c("span",{class:_e({highlight:P.isProPlusPkg})},_(P.files_per_collection),3),Q(" "+_(m.$t("uploadPage.filesText")),1)]),c("i",Fy,_(m.$t("uploadPage.collectionUnit")),1)]),c("div",Gy,[c("i",zy,[c("span",{class:_e({highlight:!P.isFreePkg})},_(P.questions_per_day),3),Q(" "+_(m.$t("uploadPage.questionText")),1)]),c("i",Hy,_(m.$t("uploadPage.filesUnit")),1)])],64))],2)]),e.showFooter?(h(),b("div",Yy,[P.isMonthlyProPkg?(h(),b(K,{key:0},[d(i).isProPlusMembership?N("",!0):(h(),M(d(he),{key:0,type:"primary",onClick:C=>g(P)},{default:k(()=>[Q(_(e.proBtnText||m.$t("upgrade.planButton")),1)]),_:2},1032,["onClick"]))],64)):N("",!0),P.isMonthlyProPlusPkg?(h(),b(K,{key:1},[d(i).isProMembership?N("",!0):(h(),M(d(he),{key:0,type:"primary",onClick:C=>g(P)},{default:k(()=>[Q(_(e.proBtnText||m.$t("upgrade.planButton")),1)]),_:2},1032,["onClick"]))],64)):N("",!0),P.isAnnualPkg?(h(),b(K,{key:2},[d(i).isProPlusMembership?N("",!0):(h(),M(d(he),{key:0,type:"primary",onClick:C=>g(P)},{default:k(()=>[e.proBtnText?(h(),b(K,{key:0},[Q(_(e.proBtnText),1)],64)):d(i).isAnnualProMembership?(h(),b(K,{key:1},[Q(_(m.$t("upgrade.planButton")),1)],64)):(h(),b(K,{key:2},[Q(_(m.$t("upgrade.planButton"))+" ("+_(m.$t("annualText"))+") ",1)],64))]),_:2},1032,["onClick"]))],64)):N("",!0),P.isAdditionalPkg?(h(),M(d(he),{key:3,type:"primary",onClick:C=>g(P)},{default:k(()=>[Q(_(m.$t("upgrade.additionPackageButton")),1)]),_:2},1032,["onClick"])):N("",!0)])):N("",!0)])}),128))]),e.showFooter?(h(),b("div",Wy,[c("span",Vy,[c("a",{class:"el-link el-link--primary is-underline",href:d(s).resolve({name:"apiHome"}).href,rel:"noopener noreferrer",target:d(hn)?"_blank":"_self",onClick:E[4]||(E[4]=P=>t("clickApiLink"))},[c("span",jy,_(m.$t("chatdocApi.releasedTip")),1)],8,qy)]),c("span",Ky,_(m.$t("uploadPage.supportTips")),1)])):N("",!0)])],2))}},Or=se(Qy,[["__scopeId","data-v-a0e650b3"]]);const Xy={class:"select-pay-type-panel mode-of-payment"},Jy={class:"explain-wrapper"},Zy={class:"explain"},ev={class:"explain-type"},tv={class:"explain-text"},nv={class:"explain"},av={class:"explain-type"},sv={class:"explain-text"},iv={class:"explain-wrapper"},ov={class:"explain"},rv={class:"explain-type"},lv={class:"price-wrapper explain-text"},cv={class:"explain"},uv={class:"explain-type"},dv={class:"explain-text"},pv={key:0,class:"explain"},fv={class:"explain-type"},hv={class:"file-package-select-option-label trigger"},_v={key:0},gv={key:1},mv={key:2},yv={class:"file-package-select-option-label"},vv={key:0},bv={key:1},wv={key:2},Ev={class:"explain"},Pv={class:"explain-type"},kv=["src","alt"],Sv={key:1,class:"explain auto-renewal-wrapper"},Av={class:"auto-renewal-tip"},Tv={__name:"SelectPayTypePanel",props:{autoRenewalMode:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>({name:"",email:""})},showAdditionalPackageOptions:{type:Boolean,default:!1},additionalPackageSelectedOption:{type:Object,default:()=>({})},additionalPackageDropdownExpand:{type:Boolean,default:!1},currentPackage:{type:Object,default:()=>({})},currentPayMode:{type:[Number,null],default:null},payTypeList:{type:Array,default:()=>[]},radioClassName:{type:Object,default:()=>({})},showAutoRenewalCheckbox:{type:Boolean,default:!1},autoRenewalDisabled:{type:Boolean,default:!1},autoRenewal:{type:Boolean,default:!1}},emits:["update:additionalPackageDropdownExpand","update:additionalPackageSelectedOption","update:currentPayMode","update:autoRenewal"],setup(e,{emit:t}){const n=o=>{t("update:additionalPackageDropdownExpand",o)},a=o=>{t("update:additionalPackageSelectedOption",o)},s=o=>{t("update:currentPayMode",o)},i=o=>{t("update:autoRenewal",o),Cr(Ke.AUTO_RENEWAL,o)};return(o,r)=>(h(),b("div",Xy,[c("div",Jy,[c("div",Zy,[c("div",ev,_(o.$t(e.autoRenewalMode?"subscription.renewalDateLabel":"upgrade.productNameLabel")),1),c("div",tv,[kt(o.$slots,"productName",{},void 0,!0)])]),c("div",nv,[c("div",av,_(o.$t("upgrade.usernameLabel")),1),c("div",sv,_(e.userInfo.name),1)])]),c("div",iv,[c("div",ov,[c("div",rv,_(o.$t("upgrade.priceLabel")),1),c("div",lv,[kt(o.$slots,"price",{},void 0,!0)]),kt(o.$slots,"priceTip",{},void 0,!0)]),c("div",cv,[c("div",uv,_(o.$t("upgrade.emailLabel")),1),c("div",dv,_(e.userInfo.email),1)])]),e.showAdditionalPackageOptions?(h(),b("div",pv,[c("div",fv,_(o.$t("upgrade.filePackageLabel")),1),v(d($i),{trigger:"click",teleported:!1,class:"file-package-dropdown",onVisibleChange:n,onCommand:a},{dropdown:k(()=>[v(d(xi),null,{default:k(()=>[(h(!0),b(K,null,ke(e.currentPackage.options,l=>(h(),M(d(Ii),{key:l.price,command:l,class:_e(["file-package-dropdown-item",{active:l.price===e.additionalPackageSelectedOption.price}])},{default:k(()=>[c("div",yv,[c("div",null,[c("span",null,_(l.count),1),e.currentPackage.isFilePkg?(h(),b("span",vv,_(` ${o.$t("uploadPage.filesText")}`),1)):N("",!0),e.currentPackage.isPagePkg?(h(),b("span",bv,_(` ${o.$t("uploadPage.pagesText")}`),1)):N("",!0),e.currentPackage.isOcrPagePkg?(h(),b("span",wv,_(` ${o.$t("uploadPage.ocrPagesText")}`),1)):N("",!0)]),c("div",null,"$"+_(l.price),1)])]),_:2},1032,["command","class"]))),128))]),_:1})]),default:k(()=>[c("div",hv,[c("div",null,[c("span",null,_(e.additionalPackageSelectedOption.count),1),e.currentPackage.isFilePkg?(h(),b("span",_v,_(` ${o.$t("uploadPage.filesText")}`),1)):N("",!0),e.currentPackage.isPagePkg?(h(),b("span",gv,_(` ${o.$t("uploadPage.pagesText")}`),1)):N("",!0),e.currentPackage.isOcrPagePkg?(h(),b("span",mv,_(` ${o.$t("uploadPage.ocrPagesText")}`),1)):N("",!0)]),c("div",null,[Q(" $"+_(e.additionalPackageSelectedOption.price)+" ",1),v(d(ut),{class:"el-icon--right"},{default:k(()=>[e.additionalPackageDropdownExpand?(h(),M(d(pu),{key:1})):(h(),M(d(du),{key:0}))]),_:1})])])]),_:1})])):N("",!0),c("div",Ev,[c("div",Pv,_(o.$t(e.autoRenewalMode?"subscription.renewalMethodLabel":"upgrade.payMethodLabel")),1),v(d(ah),{"model-value":e.currentPayMode,class:_e(["select",e.radioClassName]),onChange:s},{default:k(()=>[(h(!0),b(K,null,ke(e.payTypeList,(l,u)=>(h(),M(d(nh),{key:u,label:l.value,size:"large",border:""},{default:k(()=>[c("img",{crossorigin:"anonymous",src:l.img,alt:l.name},null,8,kv)]),_:2},1032,["label"]))),128))]),_:1},8,["model-value","class"]),kt(o.$slots,"filePackageTip",{},void 0,!0)]),e.showAutoRenewalCheckbox?(h(),b("div",Sv,[v(d(ya),{"model-value":e.autoRenewal,disabled:e.autoRenewalDisabled,onChange:i},{default:k(()=>[Q(" Auto-renewal ")]),_:1},8,["model-value","disabled"]),c("p",Av,[v(Wt,{text:o.$t("tags.discount"),style:{padding:"0 10px"}},null,8,["text"]),c("span",null,_(o.$t("upgrade.autoRenewalTip",{price:e.currentPackage.price})),1)])])):N("",!0)]))}},Cv=se(Tv,[["__scopeId","data-v-065f0d59"]]);const xv={class:"alipay-qrcode"},Iv=["src"],$v={__name:"AlipayQrcode",props:{value:{type:String,default:""},autoRenewal:{type:Boolean,default:!1}},setup(e){const t=e,n=x(),a=x(!1);return It(()=>{t.value&&!t.autoRenewal&&(a.value=!0,n.value.onload=()=>{a.value=!1})}),(s,i)=>{const o=Jt("loading");return ct((h(),b("div",xv,[e.autoRenewal?(h(),M(ru,{key:1,value:e.value,size:300},null,8,["value"])):(h(),b("iframe",{key:0,ref_key:"$iframe",ref:n,src:e.value},null,8,Iv))])),[[o,a.value]])}}},Rv=se($v,[["__scopeId","data-v-af895068"]]);const Dv={class:"paying-panel pay-container"},Nv={key:0,class:"domestic-pay"},Ov={class:"tips"},Lv={class:"price-wrapper"},Uv={key:2,class:"expired"},Mv={class:"text"},Bv={__name:"PayingPanel",props:{showDomesticPay:{type:Boolean,default:!0},tips:{type:String,default:""},isAlipay:{type:Boolean,default:!1},isWechatPay:{type:Boolean,default:!1},payValue:{type:String,default:""},autoRenewal:{type:Boolean,default:!1},showExpired:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{emit:t}){return(n,a)=>(h(),b("div",Dv,[e.showDomesticPay?(h(),b("div",Nv,[c("div",Ov,_(e.tips),1),c("div",Lv,[kt(n.$slots,"price",{},void 0,!0)]),c("div",{class:_e(["qrcode-wrapper",{"is-alipay":e.isAlipay}])},[e.isWechatPay?(h(),M(ru,{key:0,value:e.payValue,size:200},null,8,["value"])):e.isAlipay?(h(),M(Rv,{key:1,"auto-renewal":e.autoRenewal,value:e.payValue},null,8,["auto-renewal","value"])):N("",!0),e.showExpired?(h(),b("div",Uv,[v(d(ut),{size:30,onClick:a[0]||(a[0]=s=>t("refresh"))},{default:k(()=>[v(d(sh))]),_:1}),c("p",Mv,_(n.$t("upgrade.qrCodeExpiredTip")),1)])):N("",!0)],2)])):N("",!0)]))}},ad=se(Bv,[["__scopeId","data-v-f32fa515"]]);const Fv={class:"finish-payment-panel pay-status"},Gv={key:0},zv={class:"status-header"},Hv={key:0,class:"alipay-subscribe-tip"},Yv={key:1},Wv={class:"status-header"},Vv={class:"pay-error"},qv=["href"],jv={__name:"FinishPaymentPanel",props:{paySuccess:{type:Boolean,default:!1},autoRenewal:{type:Boolean,default:!1},showAlipaySubscribeTip:{type:Boolean,default:!1},currentPackage:{type:Object,default:()=>({})},payedAdditionalPackageInfo:{type:Object,default:null}},setup(e){return(t,n)=>{const a=rt("i18n-t");return h(),b("div",Fv,[e.paySuccess?(h(),b("div",Gv,[c("div",zv,[v(d(ut),{color:"var(--el-color-success)",size:50},{default:k(()=>[v(d(ih))]),_:1}),c("span",null,_(t.$t(e.autoRenewal?"subscription.subscribeSuccess":"upgrade.paySuccessTip")),1)]),e.showAlipaySubscribeTip?(h(),b("div",Hv,_(t.$t("subscription.alipaySubscribeTip")),1)):N("",!0),v(Or,{"current-package":e.currentPackage,border:!1,"show-price":!1,"show-footer":!1,"payed-additional-package-info":e.payedAdditionalPackageInfo},null,8,["current-package","payed-additional-package-info"])])):(h(),b("div",Yv,[c("div",Wv,[v(d(ut),{color:"var(--el-color-error)",size:50},{default:k(()=>[v(d(oh))]),_:1}),c("span",null,_(t.$t("upgrade.payFailedTip")),1)]),c("div",Vv,[c("p",null,_(t.$t("upgrade.payFailedContent.text1")),1),c("p",null,_(t.$t("upgrade.payFailedContent.text2")),1),v(a,{keypath:"upgrade.payFailedContent.text3",tag:"p",scope:"global"},{discord:k(()=>[c("a",{href:d(Dt).DISCORD,target:"_blank",rel:"noopener noreferrer"},_(t.$t("discord")),9,qv)]),_:1})])]))])}}},sd=se(jv,[["__scopeId","data-v-319fa925"]]),Kv={class:"upgrade-operations"},id={__name:"UpgradeOperations",props:{payStep:{type:Number,default:Pe.SELECT_PACKAGE},isForeignPay:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},cancelBtnText:{type:String,default:""}},emits:["operation"],setup(e,{emit:t}){return(n,a)=>(h(),b("div",Kv,[e.payStep===d(Pe).SELECT_PAY_TYPE?(h(),M(d(he),{key:0,onClick:a[0]||(a[0]=s=>t("operation",d(Ut).BACK))},{default:k(()=>[Q(_(n.$t("backBtn")),1)]),_:1})):N("",!0),e.payStep===d(Pe).PAYING?(h(),M(d(he),{key:1,onClick:a[1]||(a[1]=s=>t("operation",d(Ut).CANCEL))},{default:k(()=>[Q(_(e.cancelBtnText||n.$t("cancelBtn")),1)]),_:1})):N("",!0),e.payStep===d(Pe).SELECT_PAY_TYPE?(h(),M(d(he),{key:2,type:"primary",loading:e.loading,onClick:a[2]||(a[2]=s=>t("operation",d(Ut).PAY))},{default:k(()=>[Q(_(n.$t("nextBtn")),1)]),_:1},8,["loading"])):N("",!0),e.payStep===d(Pe).PAYING&&e.isForeignPay?(h(),M(d(he),{key:3,type:"primary",loading:e.loading,onClick:a[3]||(a[3]=s=>t("operation",d(Ut).CHECK_ORDER))},{default:k(()=>[Q(_(n.$t("nextBtn")),1)]),_:1},8,["loading"])):N("",!0),e.payStep===d(Pe).FINISH_PAYMENT?(h(),M(d(he),{key:4,type:"primary",loading:e.loading,onClick:a[4]||(a[4]=s=>t("operation",d(Ut).CONTINUE))},{default:k(()=>[Q(_(n.$t("continueBtn")),1)]),_:1},8,["loading"])):N("",!0)]))}},Lr=e=>{const n=x(!1),a=x(0),s=()=>{const f=i();f&&(u(f),l())},i=()=>{const f=e?xr(e):null,g=ui();return f&&f>g?f-g:null};let o=null;const r=()=>{clearInterval(o),o=null},l=()=>{o&&r(),o=setInterval(()=>{a.value-=1,a.value||(n.value=!1,r(),e&&aa(e))},1e3)},u=f=>{n.value=!0,a.value=f};return{$isCountdownUnfinished:n,$countdownCount:a,initCountdownSeconds:s,startCountdownSeconds:()=>{e&&Cr(e,ui()+60),u(60),l()}}};const Qv={class:"send-email-dialog-content"},Xv={__name:"SendEmailDialog",props:{visible:{type:Boolean,required:!0}},emits:["update:visible"],setup(e,{emit:t}){const{$countdownCount:n,$isCountdownUnfinished:a,initCountdownSeconds:s,startCountdownSeconds:i}=Lr(Ke.DISABLED_SEND_EMAIL_END_TIME),{t:o}=ye(),r=x(null),l=x(!1),u=st({email:""}),p={email:[{required:!0,message:o("emailValidator.requiredWarn"),trigger:"change"},{type:"email",message:o("emailValidator.formatWarn"),trigger:"change"}]},f=O(()=>a.value?`${o("resendBtn")}(${n.value})`:o("sendEmailDialog.sendBtn")),g=()=>T(this,null,function*(){yield r.value.validate(),l.value=!0;try{yield b_(u.email),r.value.resetFields(),i()}catch(E){throw new Error(E.message)}finally{l.value=!1}}),y=()=>{u.email=""},w=()=>T(this,null,function*(){try{yield g(r.value),ge.success({message:o("sendEmailDialog.successTip",{email:u.email}),duration:5e3})}catch(E){E.message&&ge.error({message:E.message})}}),m=()=>{t("update:visible",!1),y()};return(E,P)=>(h(),M(Xe,{"model-value":e.visible,title:E.$t("sendEmailDialog.title"),class:"send-email-dialog",width:"700","show-footer":!1,onOpen:d(s),onClosed:m},{default:k(()=>[c("div",Qv,[v(d(pn),{ref_key:"$sendEmailFormRef",ref:r,model:u,rules:p,onKeydown:P[2]||(P[2]=Ne(be(()=>{},["prevent"]),["enter"]))},{default:k(()=>[v(d(Ue),{prop:"email",class:"send-email-dialog-input-form-item"},{default:k(()=>[v(d(Ye),{modelValue:u.email,"onUpdate:modelValue":P[0]||(P[0]=S=>u.email=S),class:"send-email-dialog-input",placeholder:E.$t("sendEmailDialog.placeholder"),onKeydown:P[1]||(P[1]=Ne(be(()=>{},["stop"]),["esc"]))},{append:k(()=>[v(d(he),{type:"primary",class:_e({"send-email-btn":!0,disabled:d(a)}),disabled:d(a),loading:l.value,onClick:w},{default:k(()=>[Q(_(f.value),1)]),_:1},8,["class","disabled","loading"])]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["model-value","title","onOpen"]))}};function Ur(e){return rh()?(lh(e),!0):!1}function vs(e){return typeof e=="function"?e():d(e)}const Mr=typeof window!="undefined"&&typeof document!="undefined",Jv=Object.prototype.toString,Zv=e=>Jv.call(e)==="[object Object]",eb=()=>{};function tb(e,t){function n(...a){return new Promise((s,i)=>{Promise.resolve(e(()=>t.apply(this,a),{fn:t,thisArg:this,args:a})).then(s).catch(i)})}return n}const od=e=>e();function nb(e=od){const t=x(!0);function n(){t.value=!1}function a(){t.value=!0}const s=(...i)=>{t.value&&e(...i)};return{isActive:fu(t),pause:n,resume:a,eventFilter:s}}function ab(e,t,n={}){const i=n,{eventFilter:a=od}=i,s=Ga(i,["eventFilter"]);return $e(e,tb(a,t),s)}function sb(e,t,n={}){const p=n,{eventFilter:a}=p,s=Ga(p,["eventFilter"]),{eventFilter:i,pause:o,resume:r,isActive:l}=nb(a);return{stop:ab(e,t,Z(A({},s),{eventFilter:i})),pause:o,resume:r,isActive:l}}function ib(e,t,n={}){const{immediate:a=!0}=n,s=x(!1);let i=null;function o(){i&&(clearTimeout(i),i=null)}function r(){s.value=!1,o()}function l(...u){o(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,e(...u)},vs(t))}return a&&(s.value=!0,Mr&&l()),Ur(r),{isPending:fu(s),start:l,stop:r}}function ob(e){var t;const n=vs(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Mi=Mr?window:void 0,rb=Mr?window.navigator:void 0;function pi(...e){let t,n,a,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,a,s]=e,t=Mi):[t,n,a,s]=e,!t)return eb;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const i=[],o=()=>{i.forEach(p=>p()),i.length=0},r=(p,f,g,y)=>(p.addEventListener(f,g,y),()=>p.removeEventListener(f,g,y)),l=$e(()=>[ob(t),vs(s)],([p,f])=>{if(o(),!p)return;const g=Zv(f)?A({},f):f;i.push(...n.flatMap(y=>a.map(w=>r(p,y,w,g))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return Ur(u),u}function lb(){const e=x(!1);return mn()&&It(()=>{e.value=!0}),e}function Br(e){const t=lb();return O(()=>(t.value,!!e()))}function cb(e,t={}){const{window:n=Mi}=t,a=Br(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const i=x(!1),o=u=>{i.value=u.matches},r=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",o):s.removeListener(o))},l=ch(()=>{a.value&&(r(),s=n.matchMedia(vs(e)),"addEventListener"in s?s.addEventListener("change",o):s.addListener(o),i.value=s.matches)});return Ur(()=>{l(),r(),s=void 0}),i}function Fr(e={}){const{navigator:t=rb,read:n=!1,source:a,copiedDuring:s=1500,legacy:i=!1}=e,o=Br(()=>t&&"clipboard"in t),r=O(()=>o.value||i),l=x(""),u=x(!1),p=ib(()=>u.value=!1,s);function f(){o.value?t.clipboard.readText().then(m=>{l.value=m}):l.value=w()}r.value&&n&&pi(["copy","cut"],f);function g(){return T(this,arguments,function*(m=vs(a)){r.value&&m!=null&&(o.value?yield t.clipboard.writeText(m):y(m),l.value=m,u.value=!0,p.start())})}function y(m){const E=document.createElement("textarea");E.value=m!=null?m:"",E.style.position="absolute",E.style.opacity="0",document.body.appendChild(E),E.select(),document.execCommand("copy"),E.remove()}function w(){var m,E,P;return(P=(E=(m=document==null?void 0:document.getSelection)==null?void 0:m.call(document))==null?void 0:E.toString())!=null?P:""}return{isSupported:r,text:l,copied:u,copy:g}}function ub(e){return cb("(prefers-color-scheme: dark)",e)}function x8(e={}){const{window:t=Mi}=e,n=t==null?void 0:t.navigator,a=Br(()=>n&&"language"in n),s=x(n==null?void 0:n.language);return pi(t,"languagechange",()=>{n&&(s.value=n.language)}),{isSupported:a,language:s}}function db(e="history",t={}){const{initialValue:n={},removeNullishValues:a=!0,removeFalsyValues:s=!1,write:i=!0,window:o=Mi}=t;if(!o)return st(n);const r=st({});function l(){if(e==="history")return o.location.search||"";if(e==="hash"){const P=o.location.hash||"",S=P.indexOf("?");return S>0?P.slice(S):""}else return(o.location.hash||"").replace(/^#/,"")}function u(P){const S=P.toString();if(e==="history")return`${S?`?${S}`:""}${o.location.hash||""}`;if(e==="hash-params")return`${o.location.search||""}${S?`#${S}`:""}`;const D=o.location.hash||"#",C=D.indexOf("?");return C>0?`${D.slice(0,C)}${S?`?${S}`:""}`:`${D}${S?`?${S}`:""}`}function p(){return new URLSearchParams(l())}function f(P){const S=new Set(Object.keys(r));for(const D of P.keys()){const C=P.getAll(D);r[D]=C.length>1?C:P.get(D)||"",S.delete(D)}Array.from(S).forEach(D=>delete r[D])}const{pause:g,resume:y}=sb(r,()=>{const P=new URLSearchParams("");Object.keys(r).forEach(S=>{const D=r[S];Array.isArray(D)?D.forEach(C=>P.append(S,C)):a&&D==null||s&&!D?P.delete(S):P.set(S,D)}),w(P)},{deep:!0});function w(P,S){g(),S&&f(P),o.history.replaceState(o.history.state,o.document.title,o.location.pathname+u(P)),y()}function m(){i&&w(p(),!0)}pi(o,"popstate",m,!1),e!=="history"&&pi(o,"hashchange",m,!1);const E=p();return E.keys().next().value?f(E):Object.assign(r,n),r}const pb=()=>{const e=x(""),{copy:t}=Fr({legacy:!0}),{t:n}=ye(),a=O(()=>{const r={[cn.EMAIL]:n("upgrade.referFriend.inviteTexts.email"),[cn.TWITTER]:n("upgrade.referFriend.inviteTexts.twitter")},l={[cn.EMAIL]:"invite-email",[cn.TWITTER]:"invite-twitter"};return at.inviteWaysList.map(u=>({labelText:r[u],svgIconName:l[u],type:u}))}),s=()=>T(void 0,null,function*(){const r=yield v_();e.value=r.link||""}),i=()=>{if(!e.value)return!1;const r=`${n("upgrade.referFriend.shareText")}${e.value}`;return Rg()?Dg(r):t(r),!0},o=()=>{const r=encodeURIComponent(n("upgrade.referFriend.shareText")),l=encodeURIComponent(e.value);return{text:r,link:l}};return It(()=>T(void 0,null,function*(){yield s()})),{$inviteWaysOption:a,$referLink:e,copyReferLink:i,getInviteTwitterInfo:o}},fb=()=>{const e=st({loading:!1,listData:[]}),t=O(()=>e.listData.reduce((s,i)=>i.is_signed?s+i.total_count:s,0));return{state:e,$totalQuotaEarned:t,fetchReferListData:()=>T(void 0,null,function*(){try{e.loading=!0;const s=yield w_();e.listData=s.map(i=>Z(A({},i),{is_signed:!!i.created_at}))}finally{e.loading=!1}}),resetStateData:()=>{e.loading=!1,e.listData=[]}}};const hb={class:"header-wrap"},_b={class:"total-quota-earned-label"},gb={class:"total-quota-earned"},mb={class:"current-page-limit"},yb={key:1,class:"expire-alert"},vb={__name:"ReferListDialog",props:{visible:{type:Boolean,required:!0},membershipInfo:{type:Object,default:()=>({current:{},all:[],isFree:!1})}},emits:["update:visible","upgradeHandlerClicked","copyLinkBtnClicked"],setup(e,{emit:t}){const n=e,{state:a,$totalQuotaEarned:s,resetStateData:i,fetchReferListData:o}=fb(),r=O(()=>n.membershipInfo.all.find(y=>{var w;return y.id>((w=n.membershipInfo.current)==null?void 0:w.id)})||{}),l=O(()=>n.membershipInfo.all.find(y=>y.isFreePkg)||{}),u=()=>{t("copyLinkBtnClicked")},p=()=>{t("upgradeHandlerClicked")},f=()=>T(this,null,function*(){o()}),g=()=>{t("update:visible",!1),i()};return(y,w)=>{const m=Jt("loading");return h(),M(Xe,{"model-value":e.visible,class:"refer-list-dialog",width:"960","show-footer":!1,onOpen:f,onClosed:g},{header:k(()=>{var E;return[c("div",hb,[c("span",_b,_(y.$t("referListDialog.title.totalQuotaEarnedLabel")),1),c("span",gb,_(y.$t("referListDialog.title.totalQuotaEarnedCount",{count:d(s)})),1),v(d(hu),{direction:"vertical",class:"divider"}),c("span",mb,_(y.$t("referListDialog.title.pageLimitText",{count:((E=e.membershipInfo.current)==null?void 0:E.pages)||0})),1),e.membershipInfo.isFree?(h(),b("span",{key:0,class:"upgrade-higher",onClick:p},_(y.$t("referListDialog.title.upgradeToHigherText",{count:r.value.pages||0})),1)):(h(),b("span",yb,_(", ")+" "+_(y.$t("referListDialog.title.expireWarnText",{count:l.value.pages||0})),1))])]}),default:k(()=>[v(d(he),{class:"copy-btn",type:"primary",onClick:w[0]||(w[0]=E=>u(y.row))},{default:k(()=>[Q(_(y.$t("upgrade.referFriend.copyText")),1)]),_:1}),ct((h(),M(d(_u),{data:d(a).listData,height:325,class:"refer-list"},{default:k(()=>[v(d(on),{prop:"email",label:y.$t("referListDialog.listColumnNames.email")},null,8,["label"]),v(d(on),{prop:"created_at",label:y.$t("referListDialog.listColumnNames.registerDate"),width:"190"},{default:k(({row:E})=>[Q(_(E.is_signed?d(Cn)(E.created_at,"YYYY-MM-DD"):"-"),1)]),_:1},8,["label"]),v(d(on),{prop:"total_count",label:y.$t("referListDialog.listColumnNames.quotaEarned"),width:"190"},{default:k(({row:E})=>[Q(_(E.is_signed?`+ ${E.total_count} ${y.$t("referListDialog.title.totalQuotaEarnedCount")}`:"-"),1)]),_:1},8,["label"]),v(d(on),{prop:"expired_at",label:y.$t("referListDialog.listColumnNames.expireDate"),width:"190"},{default:k(({row:E})=>[Q(_(E.is_signed?d(Cn)(E.expired_at,"YYYY-MM-DD"):"-"),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[m,d(a).loading]])]),_:1},8,["model-value"])}}};const rd=e=>(vt("data-v-6f4ece82"),e=e(),bt(),e),bb={class:"refer-friend-wrap"},wb={class:"title"},Eb={class:"text-content"},Pb={class:"refer-link-label"},kb={class:"refer-link"},Sb={class:"separator"},Ab=rd(()=>c("div",{class:"dashed-line"},null,-1)),Tb={class:"text"},Cb=rd(()=>c("div",{class:"dashed-line"},null,-1)),xb={class:"invite-ways-wrap"},Ib=["onClick"],$b={class:"description-wrap"},Rb={class:"description-item"},Db=["href"],Nb={class:"description-item"},Ob={__name:"ReferFriend",props:{membershipInfo:{type:Object,default:()=>({})}},emits:["toggleUpgradeTab"],setup(e,{emit:t}){const{$inviteWaysOption:n,$referLink:a,copyReferLink:s,getInviteTwitterInfo:i}=pb(),o=x(!1),r=x(!1),{t:l}=ye(),u=()=>{r.value=!1,t("toggleUpgradeTab")},p=()=>{s()&&ge.success(l("copiedTip"))},f=y=>{if(y===cn.EMAIL){o.value=!0;return}if(y===cn.TWITTER){const{text:w,link:m}=i();window.open(`https://twitter.com/intent/tweet?url=${m}&text=${w}`,null,"popup=true, width=800, height=500")}},g=()=>{r.value=!0};return(y,w)=>(h(),b(K,null,[c("div",bb,[c("div",wb,_(y.$t("upgrade.referFriend.title")),1),c("div",Eb,[c("div",null,_(y.$t("upgrade.referFriend.textContent1")),1),c("div",null,_(y.$t("upgrade.referFriend.textContent2")),1),c("div",null,[c("span",null,_(y.$t("upgrade.referFriend.textContent3")),1),c("span",{class:"upgrade-link",onClick:u},_(y.$t("upgrade.referFriend.textContent4")),1)])]),c("div",Pb,_(y.$t("upgrade.referFriend.referLinkText")),1),c("div",kb,[v(d(Ye),{modelValue:d(a),"onUpdate:modelValue":w[0]||(w[0]=m=>uh(a)?a.value=m:null),readonly:"",class:"refer-link-input"},{append:k(()=>[v(d(he),{type:"primary",class:"refer-link-copy-btn",onClick:p},{default:k(()=>[Q(_(y.$t("upgrade.referFriend.copyText")),1)]),_:1})]),_:1},8,["modelValue"])]),c("div",Sb,[Ab,c("div",Tb,_(y.$t("upgrade.referFriend.separatorText")),1),Cb]),c("div",xb,[(h(!0),b(K,null,ke(d(n),m=>(h(),b("div",{key:m.labelText,class:"invite-way-item",onClick:E=>f(m.type)},[v(te,{name:m.svgIconName,size:66,color:"#ffffff"},null,8,["name"]),c("div",null,_(m.labelText),1)],8,Ib))),128))]),c("div",$b,[c("div",Rb,[c("span",null,_(y.$t("upgrade.referFriend.descriptions.desc1.text1")),1),c("span",{class:"description-item-link",onClick:g},_(y.$t("upgrade.referFriend.descriptions.desc1.text2")),1),c("span",null,_(y.$t("upgrade.referFriend.descriptions.desc1.text3")),1),c("a",{class:"description-item-link",href:d(Dt).WIKI,target:"_blank",rel:"noopener noreferrer"},_(y.$t("upgrade.referFriend.descriptions.desc1.text4")),9,Db),c("span",null,_(y.$t("upgrade.referFriend.descriptions.desc1.text5")),1)]),c("div",Nb,_(y.$t("upgrade.referFriend.descriptions.desc2")),1)])]),v(Xv,{visible:o.value,"onUpdate:visible":w[1]||(w[1]=m=>o.value=m)},null,8,["visible"]),v(vb,{visible:r.value,"onUpdate:visible":w[2]||(w[2]=m=>r.value=m),"membership-info":e.membershipInfo,onUpgradeHandlerClicked:u,onCopyLinkBtnClicked:p},null,8,["visible","membership-info"])],64))}},ld=se(Ob,[["__scopeId","data-v-6f4ece82"]]),Lb=e=>re.get("/user-api/keys",{params:e}),Ub=e=>re.post("/user-api/keys",null,{params:e}),Mb=(e,t)=>re.post(`/user-api/keys/${e}`,t),Bb=(e,t)=>re.delete(`/user-api/keys/${e}`,{data:t}),Fb=()=>re.get("/user-api/usage/summary"),Gb=()=>re.get("/goods/api-plans"),zb=()=>re.get("/goods/api-packages");function xs({max_count:e,used_count:t}){return oa(e)||oa(t)?0:Math.max(e-t,0)}const yn=gs({id:"apiKey",state:()=>({allApiKeys:[],planList:[],summary:null,packageList:[],subscriptions:[],userFilePackageList:[]}),getters:{isExpired:e=>{var t;return(t=e.summary)==null?void 0:t.is_all_expired},currentApiPlanGoodsId:e=>{var t,n,a;return((a=(n=(t=e.summary)==null?void 0:t.membership)==null?void 0:n.plan)==null?void 0:a.goods_id)||0},currentApiPlanInfo:e=>{var t,n;return(n=(t=e.summary)==null?void 0:t.membership)==null?void 0:n.plan},isEffectApiMembership:e=>{const{membership:t}=e.summary||{};return t?!!t.id&&!!t.is_member:!1},isMonthlyApiBasicMembership(){var e;return(e=this.currentApiPlanInfo)==null?void 0:e.isMonthlyApiBasicPkg},isAnnualApiBasicMembership(){var e;return(e=this.currentApiPlanInfo)==null?void 0:e.isAnnualApiBasicPkg},hasApiKey(e){return!!e.apiKeys.length},planName(e){var t;return((t=e.summary)==null?void 0:t.membership.name)||""},expiredAt(e){var t;return((t=e.summary)==null?void 0:t.membership.expired_at)||0},maxPagesOfCycle(e){var t;return((t=e.summary)==null?void 0:t.membership.max_pages_of_cycle)||0},maxQuestionOfCycle(e){var t;return((t=e.summary)==null?void 0:t.membership.max_questions_of_cycle)||0},questionUsage(e){var t;return((t=e.summary)==null?void 0:t.question_count)||0},pageUsage(e){var t;return((t=e.summary)==null?void 0:t.page_count)||0},apiKeys(e){return e.allApiKeys.filter(t=>!t.deleted_at)},remainingQuestionPkgCount(e){var t,n;return xs(((n=(t=e.summary)==null?void 0:t.package)==null?void 0:n.question)||{})},remainingElitePagePkgCount(e){var t,n;return xs(((n=(t=e.summary)==null?void 0:t.package)==null?void 0:n.elite_page)||{})},remainingLitePagePkgCount(e){var t,n;return xs(((n=(t=e.summary)==null?void 0:t.package)==null?void 0:n.lite_page)||{})},remainingBasicPagePkgCount(e){var t,n;return xs(((n=(t=e.summary)==null?void 0:t.package)==null?void 0:n.basic_page)||{})}},actions:{getApiKeys(){return T(this,null,function*(){this.allApiKeys=yield Lb({include_deleted:!0})})},getApiPlans(){return T(this,null,function*(){const e=yield Gb();this.planList=oo(e)})},getApiPackages(){return T(this,null,function*(){const e=yield zb();this.packageList=oo(e)})},getSummary(){return T(this,null,function*(){this.summary=yield Fb()})},getSubscriptions(){return T(this,null,function*(){this.subscriptions=yield Oi({source:xt.API})})},getApiUserFilePackages(){return T(this,null,function*(){const e=yield Nu({source:xt.API});e&&(this.userFilePackageList=oo(e))})},updateUserApiMembership(){return T(this,null,function*(){yield Promise.all([this.getSummary(),this.getSubscriptions()])})}}});let Xs;const cd={PAYMENT:"payment"},Ol={WINDOW_CREATED_EVENT:"tauri://created",WINDOW_ERROR_EVENT:"tauri://error"},Hb=(e,t,n,a)=>{const{screenLeft:s,screenTop:i}=Vb(),{windowWidth:o,windowHeight:r}=qb();let l=null;typeof n=="number"&&typeof a=="number"&&(l=Ll({width:n,height:a,left:Is(o,n,s),top:Is(r,a,i),scrollbars:!0})),typeof n=="object"&&(l=Ll(Object.assign({},{left:Is(o,n.width,s),top:Is(r,n.height,i)},n)));const u=window.open(e,t,l.toString());return window.focus&&u&&u.focus(),u},Yb=e=>{if(!e)return;const t=window.__TAURI__.window.WebviewWindow,n=new t(cd.PAYMENT,{url:e,title:"",fullscreen:!1,width:1e3,height:800,minWidth:1e3,minHeight:800,center:!0,resizable:!0,skipTaskbar:!1,visible:!1,transparent:!1});n.once(Ol.WINDOW_CREATED_EVENT,()=>{console.log("create payment success"),n.show()}),n.once(Ol.WINDOW_ERROR_EVENT,()=>{console.error("create payment failed")})},ud=e=>{hn?Yb(e):Xs=Hb(e,"",1e3,800)},fi=()=>{if(hn){const t=window.__TAURI__.window.WebviewWindow.getByLabel(cd.PAYMENT);t==null||t.close()}else Xs==null||Xs.close()},Wb=e=>e?"yes":"no";function Ll(e){const t={};return Object.defineProperty(t,"toString",{value(){return Object.keys(this).map(n=>`${n}=${this[n]}`).join(",")},writable:!1,enumerable:!1}),Object.keys(e).reduce((n,a)=>(typeof e[a]=="boolean"?t[a]=Wb(e[a]):t[a]=e[a],t),t)}const Vb=()=>{let e=window.screenLeft!==void 0?window.screenLeft:window.screenX,t=window.screenTop!==void 0?window.screenTop:window.screenY;return{screenLeft:e,screenTop:t}},qb=()=>{let e=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,t=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;return{windowWidth:e,windowHeight:t}},Is=(e,t,n)=>e/2-t/2+n,dd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAA8CAYAAAD/ooGmAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA9nSURBVHgB7V1NcttGFn4N0paSWQyziD27UDegF6mS5D/oBJJPIPoEkhZjZ2d6M2UnC0knEHWCSCcwHGckV3kR+QTCLKbKdjacxSSSTKLzPaAhgWA3CRAARdL8qiiRAAmCwNev3/ve625BBvzjB2l7ktYFkS2JqjQ5OME5u56gw99fiCbNMJUQ8Q2KsHs0WWQ1wbUEPf7wQjg0w1TBir649UQ+A2lf0XSQllHl38O/i2aYKlxa3NtP5QZcgh2aUghJWx9/FFP7+yYBtm1XDbtajuO0KAV84sI9YMt0StONFtyGO3AbXCoQ9uJi1RPilTYuEOLxm6OjJuWEB0tL2/i3Ft+O7956c3x8QClxf3GxTpb1ML4d5/yYMoKvS0cIPceGuC5l/gPSfgldaUUGvvsKFYlyuSo7nSoVDJ8IRJuaXe4wpGUIIWwp5bpmV2bi5g2LrS3+1+kLACyRXW3ICk0BYL02tDuEeE5fAMqeR7VebWF68f8zv2tt0oQDt2xN9m5ulTzPoRHh/tLSK5EwkPf67ZRyG25Psl5fiOYvR0fPy9AVaiRpJICPuaDzMUfpY4uUigkCCrbQia105/y80u+77Xv3bEoB59dfnfg29kUNPvSBc3zs0ojAvycnjb8ik15jKRu4J7vs41ZpNHCLDowS4rs0b/bOz3dwUdcpB8B/fNbpdNLEEy4eCz1bhdCeD6zteLgJsIrkea8pAxDgVqDVbht2V8o0w0RheXkZPaS0NbsOnbdvXX5yD1ZdpGsgPtBAa7rt7BLw/5IQW87R0QkNxus3b982KQOUCmEiLs2IOwBtIXYsz2smfT8ic77524Z9u57nJY74vU6nR9ssEWmDMljzS41atNtVfJlN+cHmP23PG5vAdkbcAThKZmEuAR+W4A5o98Ginfz69q1DQ8K3QlLWNbvc6HHxPa4Q6es0BCy5wXdu8j90310Nyf8ezXEsKVMlE4znE7hKWsyIO0HoKMsXB0jaur+8vCc9b58JrEjsUEogsm+ShrimBAT04sI0ceX2LJj2z4g7QQBBn+kEILgJ7J7UhGVlCogmCamJC0lrJe9qK6U2DKUm3/pBNtFn5RL19wNboyTqgslN8JFCr7Tm5u5E8/dGCawPDFJe6roAE/BbTq+j5LU0N7cws7ijRVK90ukhl0EC64f22VkNVvpVfPu9xcWVLL72OCA1cTuSnt16KlNfRJjT1seXYku3r7IpKzfnjJpdf0h6SCMACHcAEriUI1jX1e4QYj/6UtUl2JQS5fn5EyREuAF0NRbLsmwawgeOg4t58COSKw2BvFXRHGcTgeH/KDlaqYkrhriADBlEiFrizs9TBZmzOo0xVOHKUMUrOnAGzZCMcOOVUh3LegaCUFqw1YYGy6qIHd2uCmkalBFpi3nYTdL1OOW5uUOcq0spMHMVUsJQU5rabzRl0ECq/Z5tUAvwr2u7zgUg/QH3NZpulX9HWrKME2bETQl0vXvU2+u4IMKdpOT16171PZeL7r2n2F3nj8KSUhKU5ucP1Dl3wbu4qFMOVve6kIW4LSEosTgv+4jJDBzLoaTHkn53U6NrQEnKx0hF/kbdXV61c3HB/tvAulWO9L3zc62sxSWJeUX8IZS74FCvuzCS2KAoDE1cJu3HFyIXAVrJYYmPdfuJ3JTieojLwjgs5hYuQLcVQ0brwfKyyyV3/T6vSFvt2YHsVJ6jI2I4pF4Lb3MjytJQ0sphJi8dPcJp0h6EwXKYRZMIQat0jeACElisHoJiWwPkNeq0vE8aRi0UWdmFG93UbQdh6jShGNrioru2bz+Vp1QQRJDocOPbWTqTQyobeQJ+ZwOWtxrXVxV5KW55H9y9u44gq6E5VAvux0pY2VUETO4CwAZg6AGkEyWHxb6wSgVA9KndvTFPa6MqfB8EWN46yEta8i4tVX45PvblP0XapuYQrU67vfLm3TuXCgZUiNeytxwyk7twnXLYuLoKh6YdQl6vmxAHk5d0EhasCKzcqe8e9CHt0bt3qarPhoWpNBNB5RpNIMaSuHATtN2XGtg5dheayavzeYmHtsD6ara7oyQtg10RnMtK/DHKMWp5IpMcRixxhZIYJCoQrqKkqiqlGKcVBctiJjeB057jOq6Tfd67S0stWAIOzszjzoQ4gfV7NAr3II5Jr0+IIhVx2feEDLWPm9McNH6Mh4GfnVFNengIeojP1pL4xCKWIeraN+bzP/z7+HgH7sF3pFcOfHBmrMhAbBrAw5PKUv6s2XUQxg2JiCv8ivp0k8e5Db9a3lEPv+v/9p+yVipRzQv8VJtilkkFZU3d8b79QcKXHH0JXVJw7YHneduqNrYftkHujZIQjxKO3/riwKNOcI10JZmbCCb9JM1g4sLCfjVPm4qImfD7T4JvFD+a/NqfGZKoDkv6kK0xGodRy7QkrY+JmNCFsFgGD9vwFod6ZSgegvPb/eXlJuu3MwvcCxixQ2398/m5jb8H5QEf3kV2rKfbU0GSDTegIq2gVQgPKWCLTkoWtf77L5HIkigLzg/fGn/4Sf+5W0/k2jhot1EkIOwB9NktlWmrq9EL1a53INuG9HHdJ7Bl7evmUPhSIYNKvB7i4npxb20mLnfbH19ekdaftMPDgQRtelKZcEGXeTz4sX7lnYcI6tZT2cJLhydXLpE52Iri95/6kF0MWaubM/w6g4uLDbgDmyCsKQBzWGGIBkJqqHazL4E7nbqfJBBiv8DU78QA2T4Hmb3eHVKyqvTYTFxxVTvAU5CCrDspBtdwdmsNLsAaT70DIvPwmsNPP4rU9aycKcP3vqagsQylVGQBk1WlRlc7QTelQwtk5dlVmv26/ZDA9xYXbRHM/RWX9myeM+E+D+8RwinajVj+/vta+caN4ByE+Dv05lQaOQ/QxPlWk77fFJxz9Vq8VkFL2gAVvn5a4rJ/EVpJnhRZZi9/q+OgdRCYVYnnf5ung6Q+c2vHf1+dn8Pq87irdU4304iAC8jRrW3Y7eBxyLUAabJP4ShcHtnQxm+zkHmL3dRq6EbYy8t3igriSqVS7XIUhrlQ3TXtMA5nTw87zZt5BIeeuCKo9GffEoRrUH6owgrv/fEnPcOxm5ZF+2mmZVKKQzP0sdELsNUaFMXnDYeGIKv2QIE1bfBDWeE6jMbDKBkKnYRDiFa/uQtkkCjZ6nOEQ7bUNGIgsNWrCvPzAXFB4I2CIvkqNwgEd1xYsZP2w4rsTVIkhrFgX3y1iNoJ3Nj3uBDvYZkc9rvyrpcNEZ0Lgbtwtob43lXPsvTfJ2VP7S+CQYdSIOtwJGiqm3RNEJrh3a1PL8U3/ARde5EK1AG+5xHlCFYmYMXZnXhIJkssqPnphRhY8D3DeENXq1CIRYnh5OuvzKMFlCuQGqxMsBKCBnGHpzTlFXfSjKyYYXIwqMjGpfzBpF0xBWffPpXbPFcurP3esARmsDvBPjGP0sD3fcMTmcDaPofe/J5mmHjoXAXiG83Ewr4G5VkfgCzc132ycP6yTr3BYBOk25+tVTZDFNrgjItj8M+5OKOduTlazyPo8ZdremlerslAWkad51yAlswJjf1xWy1SzeO6x88RvD1KG7w9uHt3G/ppDUHgSVhAkvocAq3ZL0pBwmfXSVDgDQ2W64jXdfuEZZ1Ync5uWg0ZWixrwhsIKt2kK/UoNcU3jvHETdcxqXt+Xq2rIJWVZQ0V2bJHIoPLwD4md9P91hjrQ9qrc+KSRkhpcCFOueAmixuRJ0BavrA2P4YZw8WkpWDZ2eFlvbOzyuU5CJFIPlNLCti6B85pk0cy88gNSgERzAvMSZS6mrdsIJio4bmEBNYeE40hqmfriYs3cgEMP+eAR2XRUskmQi1Hyj6mqZvn0kf2ZVNqxb4WDCv8W1Y/OA+I7omWx2p0RlJARlsIH1xcrgxVBQTeSUpArt2I9sxpGnGkCN9mCxxuj070Fx9MagzOeD3fcGklDnRYulIBDtfLajM5ILjLhTm+hX0pFj706dZZukIigucnqNNw4HNjN+IUbsTPYUMbJeI3izfZPNX9hIFdgvDBFtC70ogrSYf2dDwvbp0TN2JOhYe9etTqXj4XoieV3q86rApivQJ5LxWAaDUXI2rt0mTAlGvA4nUuWSGui4B7szZMSjkLwpvF/qkMZEQu0+QbXUiKdlRg8oa1AyJhfKPSvwz20/3una1n0lEXvtUNYgW/8ePa1kzWljFIDvOtoqk7VpJT4tV02Cqyj6pcgyJSmWFKeSRuhFCjZqUQu6QGeOIGbNCEYznSa8gE8Q0HUJckk5JdSoefq1khE0EVIDn8vBMEeIEF11hbRpIREFXfn3wid9LWFvgfhrvx5x9+kc2qN7rimCpdqREHsMb7w1Sm9UPM/3KQJ2/Br/PnDUhjacYBXRP5tdtVr9PZU9Yz2YJ/TLIgyer49cdLS/7MOaoRNygh2OrysqwUWefCNFFK0jFnXFrYABEaYYnijTK5uoJxJurnC6q22xwJ0iqsH69cWVyhyACwG4Hvv3QjktYHD4RlrUZvFj8JJ92ApWF3waEJAU+BpN2hCuH7fVYtqBKWRvrjBbkAaZhGrFwUfq+tjtc0LTg4zChfv0Txc1Aw3rUyCk/2AKJeFZmPFwI1QvjFOZlqFXQ3SyG0NOuwYo2iCnIKgBN9Aav33oKikETHjU44HVrn6Mw50ITXKU0jjkyLypq06W1MXJcyoIiKrILxH8qI6M3i4MUX8/0XeOX5q9aG0XiTJgCZVs+5msXH7cCnxbUIXoVLRqGBoxFvDdWIb940fqZsWqtqWlEW2SN+aVkbQhXOdU2HHy2mC7JSTZpixKb45+L3Pc3bwhEkO5Qjyp/P6ODmHO3RFwL46ZmIq9wEP+oGTXdB4O7jBd0ckzbzNJ7jDk9EBtJq6oPhJmyo4fqZJtfTocxpXa4DGLdRtIVADJ7IZBCi6zGUpezxA0FWngHc7z69iwu+sY1kR6ZauGYudZ3y8DUMI0CYZDjUrd2r5kbwU9p5N2Jfx+XJPmg0dbjXCvzY55QR4mrGw0Nd8KJujuO/kDJNCviy3iD6kNc08/ogdGUNhV5qjM7LqxpxbvBVBbZCt5/I53JMhoEXAa5O+/AyuwxmIZfvP4Fua3oPV4mpwpeBSPNeE7gBwYVZ8F/MzSUyQNbNmzv43iYNi3L5pNRu+99pkqy4EV+eV8LBNLxmBc7LUZ93Te/ristyr78dF0C//fRCNGiGqUGPoMBpWTSOvQmUuXowzJxnM0wGjEoYz2GgJqer0pj6WTpwhRoanQN/djZqYorxF0fmzYPwdE8bAAAAAElFTkSuQmCC",pd="https://cdn.pdppt.com/chatdoc/assets/wechat-zh-7dcb9047.png",fd="https://cdn.pdppt.com/chatdoc/assets/wechat-en-86d94900.png",hd="https://cdn.pdppt.com/chatdoc/assets/card-51386d74.png",_d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALHklEQVR4Xu3dP48jSRnHcb8EXsIJxL87AZ6JEAFaAkKkDRDpzWUkaCcAdAJOu+j4pxt7dgmQENLiOZEcJHMSCRFOiZgAEbd0M2vCeQnGT/W0Xf1U1VPV7rbHO/v9SD+h22m32+6qrqeqe4bRCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4A01fvq50fjs0TB5/pbePfD6kgZ9NL0dHU2Ww+bsanQ8vRyNpyeuAwKvpePpLGzcQ2fVAY8nM0YXvH6OJvOwQe8s1aqTjPUhAIdrJ+WVldX70UnwWhh/NA4b8F5SMS/B4ZNVp7Dx7ifHZ8/04QCH5Xh6GjTc/aXShwMcluPJi0jD3V9Y1cJB2+8KVhgp8YCDtfcVLBU6CA6WrCLpBmvl679ejt7+YLu883Q5+tqHy9E3fns/HcQ9SiN39LvGPTrzZi9Jz64fjWafnXTM4/p11WGtVMoxvbx+FkSOOdBlBeudXy5Hn//RMPnCk+XoKz+rO9y+Gp8sCOjP1CnrJwH2c7yHwjX2m2XPXMUb4D24uKkix1cn0GUF66s/Dxv6ELm4mY1m/3tLH9qguo6UuYynz/VbPFiz68ugIW2faufn2iKjWXhMm2MLdFnB+tJPw8bdN9/61X6+uC4jZWlkNHkTzBbzSGPqk9udnmuLK/mC42ky15t3W8GSskg38L55/Cf/ACM9eCDjyePg8wyRfc2f7pNr0EFj6ptIY9wDs1y8fqE3lw5yFZz0WMYfhY17iLw/bx/ky5tTfYiD6DJSdsv9nOh9sUuSnrmHybt0guA47hJte+EJj0cm07px983xB+FB7urKIr+Toj9TK+fz+pH/1f+6TKpwm1hWE/eHzC5JJLeji1ez0ezVZV2KSYJtErmHSbt5fKvP2tLlIUVZntUNvG/a5ZWXHVxZ7JEyXtrJalVJR3nITwLIVTU4P1ajWpH5hVs21duqyDb75lbTIsfiottdl7p8FytYL/4bOUjJDiZw+vO0Mv1Ub75WMrl/yB3EKkly58paTpXcTwcJj6NOpBKQJ2n1yU5l6BWsk7/qA/Qz7H2G3EhpPVFcsjz8kB/Zny3mkfNjNCrP7OYi8ppN9t1BpF3pY9gkUtpn63IvX/xx2Mi3TXzu4cW4Km0jN1KOnz/WL1nLdhBjDrK5c//87rueu7ibjfLv3shj/cEMX3K7jqNYcj/q/ewVrEij8mTvnyzS37uUbh+/elrPb1bv47LanyvdVFnnGr7MlXRUO3J39vUx3OXP15Eqwq7L29GNfNtI50iWVk10LdhTbqTUjcInP9Pbt3IeNhJprG7CX/CMm+ssrhPOg581aTqw287Yp1wISsjxmftZdV6RW8GKNiqPWe+7hJXCbPFkZHfKJpV7vbWIoI/Pmhf1W8H6TdjQt0lR59jBvZDcSGmVSLk/ZqHLs/Hkidn44pmbr/E7sLVd6ZKzvfBQrUcjq/G5RmWUSHL11ttb57nefh7Zzsrtap7zPPLvdXQHMUc0PZrl6nI/Q6xgfeespHOEH2oI1tVZRtGU8eTdyPbt+M9ljadPg58PEb8Dm6Oh/J6/0dlF7hj9UcgqSaKN6o6MPLkJupRO6+1XnSO3/TbRHXi2mAfbbKJGs2zp4EWexNUNvjRv/2Q5+uGn+mCsnLQPdAD2VffKXTHXkTp8VWLYnWrz2kau4W0dNcfJnTezXJTSKvKaJnIz1WeVJC7SgeTK767+Y/ffMm8oKpHu5hG76hwuqgNbxxXo8pDil98PG74V6RQyYui75EUZeoKeaRR90tTq9f2S8OdBpKNOqzr6Z6mch2WT9XrdyH3Z0kqNPmZJ0iubz1TaOWS70m032YwK9nwqUkUcTS4iX1I8soIlDV5u7KXy3ifL0ek/lqPf/Vu/eZeEjaGv3BV32/gPKtoNb+kaub6y1x03fw5iDT5XZsXkRrjYKlh+kr1NNg8qms9F3W3rRjG1aCOvK+ksrdcY86loWV9WQtTpViL1yYk+zN66jJTl2Vxt63JM/3wTPYnXcs+IHZ+d6pdkO328M4bbbd7jWWv7Rnh+BsiqcTfsRl6Z1YR9T0PSHhWsJwL0XMWx6/JNvv2HcIc7yWo434VcA+yc83mrFDEvNOf5ETF3n0U39ob1vrrB2yNcfNUw3wC75rZ1/yK7AGB0joZ7/ku/bp32d28+EaAXG3Inxc/3P4nscPBURV/INqyG1C3Ves7RyH2Ppb95eDStgteu95FYlTLLrA6LB7HSSmQbcHGkY7wIyiT3S3LBtnX8FS6LWaKpR9dni3m4zXrbR61ts0O0n/f+Htnh0NEHOKDSkbKVu8m03D+RESh1Fbe/x/iVOSbZiRPzCZErm5pVOf3vfmLlWyO7gpVIXTZd1XfApQGrjtEw5zf6ip5gdhCvlHPbGitYwTF2qct/8a/IDgdLe9gdWu4KL//XDKkrdAlz/nGeL68ayU6c2UeyY03qxm+WVpl9Z1ewep63YH+tlI28Ztnkl3PmClbkItSlLv+w16qUlfnOyqqGfYW3r6AlSssci/mcmPGUsTDfP9XpXKpkadWYLeaRc9ak7LNZwn36Kesg5iTfGxWsFSw9V3GsK4/OHyu9wz6REeOy99WnlNn4JukJcClzJC64qy2sq7yebGu5EioVPZeKsUqS6LJoR3qffqLPRSn1M1vha+u0RwVzPhX9NdtpFXxpsXzz95Edmrnd/FaZ5NWlq0VfLk7rXqxrvR0zr7CT9AS4lFliyf6Nv3wi7y33UvRrWq83njJudLnYSUr+0IRdkiSWRTsyr/6ZRZuPb96NvMZPe1Sw5lNBZ8zW5V6+95dwh+lUe+8AOeZDisYEuFTJd6n/jpbrGG7kqYJtdUpWwcxRLEi+tBJ2SbIsnkRbsnMcaU9qki/HZa1+raNXsKz30tVMri7302UFa4irytBkHqA/0zrnkdpzC12v4F1SoqSTNil9HN66qVYn33FzpJOF+x0melQwV8z0RT1Xl/t58s/IDlMZ4KoyNP15/JSUGiW6XHC6pXwiXNJJY4+spJirQzdlHbeEXWb1iBoVgp+vE6kicnW5n24rWP2vKkPKPc7fdwXLV/JMVTTWSlNmBcuXL7OqTvOt2WIeOb9NyjtuTraUS6aK/JsXvywznwiIVBFmXa5y9h+9w3QOTW6k7LuC5avLnHnwHlbkQmUtt+dWsHzb3i1P2fUKlk+ev9PvYecqU56pFSyjE0Y/i1mXq+gdpjPcVWUodgcpm6x2Va9qVZH383I+X3fO5MgjS8SFx5db6u3S0RpW6SMrkkNzv0+ymAfv1U79ZK/b3hgV9Fw43ZkSN6n1F5jKd1/qHaYT7YkHoHncIkiHcmMb0gGk7JERQn5lVxqpdJ7Y+wbH1uH46pGrCs7dJuWPu/jcMm/zi1Aqu+Te47MT18jdoyqruVBzi0BLHWNMdFs9OW+4Oci0yuYHf0sPszq612I/5D5L2Ck2KR2FsAXr5kqQA1zBeujqci7sFE2GXIRAhHlzRScyBGJ36nlHFXSKdc4jqzMYlnlzRSdVz2En7BWz3SxAQAk6QTKHt4L1kGWXdFelF/bAWurzwwR9v6xl+i53y9GTWwqTmyxWEstq2B23DHz2KEzBg40AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4k/0flk10W105hcoAAAAASUVORK5CYII=";const jb={key:0,class:"message"},Kb={key:0,class:"origin-price"},Qb={class:"price"},Xb={class:"price-tip"},Jb={key:0,class:"foreign-tip"},Zb={key:1,class:"wechat-tip"},ew={key:0,class:"origin-price"},tw={class:"price"},nw={__name:"UpgradeDialog",props:{title:{type:String,default:""},messages:{type:Array,default:()=>[]},defaultPackage:{type:Object,default:null},proBtnText:{type:String,default:""},autoRenewalMode:{type:Boolean,default:!1},isChatDocApiMode:{type:Boolean,default:!1},activeTabPaneName:{type:String,default:Bt.UPGRADE},onClosed:{type:Function,default:()=>{}},onOpenPayPage:{type:Function,default:()=>{}},onClosePayPage:{type:Function,default:()=>{}},onPaySuccessAndClosed:{type:Function,default:()=>{}}},setup(e){const t=e,n=dt(),{t:a}=ye(),s=Oe(),i=yn(),o=x(!0),r=x(null),l=x(null),u=x(""),p=x(!1),f=x(!1),g=x(Pe.SELECT_PACKAGE),y=x(!1),w=x([]),m=x(!0),E=x(null),P=x(!1),S=x(Bt.UPGRADE);let D="",C,$;const G=O(()=>g.value<Pe.SELECT_PAY_TYPE?"":g.value===Pe.SELECT_PAY_TYPE?a(t.autoRenewalMode?"subscription.subscribe":"upgrade.selectPayTypeTitle"):g.value===Pe.FINISH_PAYMENT?y.value?a(m.value?"subscription.subscribeSuccessTitle":"upgrade.paySuccessTitle"):a("upgrade.payFailedTitle"):B.value?a("upgrade.wechatTitle"):W.value?a("upgrade.alipayTitle"):a("upgrade.paypalTitle")),U=O(()=>[nt.PAYPAL,nt.CARD].includes(l.value)),F=O(()=>[nt.WECHAT,nt.ALIPAY].includes(l.value)),B=O(()=>l.value===nt.WECHAT),W=O(()=>l.value===nt.ALIPAY),Y=O(()=>B.value&&!r.value.isAdditionalPkg&&!r.value.isAnnualProPkg),I=O(()=>!r.value.isAdditionalPkg&&!r.value.isAnnualProPkg&&!t.autoRenewalMode&&!t.isChatDocApiMode),R=O(()=>r.value.origin_price&&(m.value||r.value.isAnnualProPkg)&&(!B.value||B.value&&r.value.isAnnualProPkg)),V=O(()=>{let le;return r.value.isApiAdditionalPkg?le=r.value.price*r.value.count:r.value.isAdditionalPkg?le=E.value.price:!r.value.isAnnualProPkg&&(B.value||!m.value)?le=r.value.origin_price:le=r.value.price,kn(le)}),q=O(()=>{const le=r.value.isAnnualProPkg||r.value.isAnnualApiBasicPkg?a("annualText"):a("monthlyText");return a("upgrade.productNameText",{alias:r.value.alias,unit:le})}),ne=O(()=>{let le;return t.isChatDocApiMode?le=i.expiredAt:le=s.membership.expired_at,Ot(le*1e3).format("YYYY-MM-DD")}),ae=()=>{const le=()=>{t.autoRenewalMode||t.isChatDocApiMode?m.value=!0:m.value=xr(Ke.AUTO_RENEWAL,!0)};r.value&&(r.value.isAdditionalPkg||r.value.isAnnualProPkg||r.value.isApiAdditionalPkg||l.value===nt.WECHAT)?m.value=!1:le()};$e([l,r],()=>{ae()});const Re=(le=!1)=>{let Ce;const j=(Ze,Ht=!1)=>{const Ln={[Me.ALIPAY]:dd,[Me.WECHAT]:Ht?pd:fd,[Me.CARD]:hd,[Me.PAYPAL]:_d};return{name:Ze,img:Ln[Ze],value:nt[Ze.toUpperCase()]}},ce=["zh-CN","zh"].includes(navigator.language);let me=at.paymentList.domestic.map(Ze=>j(Ze,ce));le&&(me=me.filter(Ze=>Ze.name!==Me.WECHAT));const Ie=at.paymentList.foreign.map(Ze=>j(Ze,ce));return ce?Ce=[...me,...Ie]:Ce=[...Ie,...me],Ce},Ae=()=>{w.value=Re(t.autoRenewalMode||t.isChatDocApiMode),l.value=w.value[0].value};It(()=>{Ae(),t.defaultPackage&&(r.value=t.defaultPackage,g.value=Pe.SELECT_PAY_TYPE),ae(),Je(t.activeTabPaneName),g.value===Pe.SELECT_PAY_TYPE&&z()});const oe=()=>{g.value=Pe.SELECT_PACKAGE,r.value=null,l.value=w.value[0].value,D="",u.value="",p.value=!1,$==null||$()},de=()=>{D||pt(),oe(),t.onClosed()},we=le=>{switch(le){case Ut.BACK:it();break;case Ut.CANCEL:Te();break;case Ut.PAY:ue();break;case Ut.CHECK_ORDER:ee();break;case Ut.CONTINUE:We();break}},it=()=>{t.defaultPackage?o.value=!1:(pt(),oe())},Te=()=>{g.value=Pe.SELECT_PAY_TYPE,u.value="",p.value=!1,$==null||$()},gt=le=>{r.value=le,g.value=Pe.SELECT_PAY_TYPE,le.isAdditionalPkg&&(E.value=r.value.options[0],m.value=!1),z()},pt=()=>{var le;t.onClosePayPage(Z(A({},r.value),{payMethod:nt[l.value],autoRenewal:m.value&&s.isEffectMembership,filePackageSize:((le=E.value)==null?void 0:le.count)||0}))},z=()=>{var le;t.onOpenPayPage(Z(A({},r.value),{payMethod:nt[l.value],autoRenewal:m.value&&s.isEffectMembership,filePackageSize:((le=E.value)==null?void 0:le.count)||0}))},ue=()=>T(this,null,function*(){const le=Ce=>{const{goods_id:j,isAutoRenewal:ce}=r.value,me={goods_id:j,auto_renewal:ce,api_mode:t.isChatDocApiMode,pay_method:l.value,count:Ce};let Ie=window.location.origin;Ie+="/payment/",ud(Dr(Ie,Ti(me)))};try{f.value=!0;const{goods_id:Ce}=r.value,j={goods:Ce};if(r.value.isAdditionalPkg?j.count=E.value.count:r.value.isApiAdditionalPkg?j.count=r.value.count:j.count=1,[nt.WECHAT,nt.ALIPAY].includes(l.value)){p.value=!1,$==null||$();let ce;if(B.value)ce=yield Ou(j),u.value=ce.code_url;else if(W.value)if(m.value)ce=yield Lu(j),u.value=ce.code_url;else{le(j.count),yield Ee();return}D=ce.id,g.value=Pe.PAYING,C=Date.now(),$=Li(()=>T(this,null,function*(){yield ve()}),2e3)}else U.value&&(le(j.count),yield ee())}finally{f.value=!1}}),ve=()=>T(this,null,function*(){let le;if(m.value&&W.value)le=yield L();else{const{status:Ce}=yield ci(D);y.value=Ce===li.PAID}y.value?(yield X(),g.value=Pe.FINISH_PAYMENT,$==null||$(),D=""):(Ot().diff(C,"s")>=60*3&&(p.value=!0,$==null||$()),m.value&&W.value&&(le==null?void 0:le.status)===ri.DEDUCT_FAILED&&(ge.error(a("subscription.alipaySubscribeErrorMessage")),o.value=!1,$==null||$()))}),fe=()=>T(this,null,function*(){const le=Fu(Ke.ORDER_ID);if(le){const{status:Ce}=yield ci(le);y.value=Ce===li.PAID}else y.value=!1;Ir(Ke.ORDER_ID)}),pe=()=>T(this,null,function*(){if(m.value)if(r.value.isApiPlanPkg)yield i.getSummary(),y.value=i.isEffectApiMembership;else{const{membership:le}=yield Ar();y.value=le.expired_at!==s.membership.expired_at}else yield fe();yield X(),g.value=Pe.FINISH_PAYMENT}),ee=()=>T(this,null,function*(){try{f.value=!0,yield Gt.alert("",a("upgrade.payAlert"),{customClass:"payment-message-box",confirmButtonText:`${a("yesBtn")}!`,cancelButtonText:a("noBtn"),showClose:!1,showCancelButton:!0}),yield pe()}catch(le){le==="cancel"&&(yield pe())}finally{fi(),f.value=!1}}),L=()=>T(this,null,function*(){let le;const Ce={source:r.value.isApiPlanPkg?xt.API:xt.MAIN},j=yield Oi(Ce);return j.length&&(le=j[0]),y.value=j.length&&j[0].pay_method===Me.ALIPAY&&j[0].goods_id===r.value.goods_id&&j[0].status===ri.NORMAL,le}),X=()=>T(this,null,function*(){y.value&&(r.value.isApiPkg?yield i.updateUserApiMembership():yield s.updateUserMembership())}),ie=()=>T(this,null,function*(){m.value?yield L():yield fe(),yield X(),g.value=Pe.FINISH_PAYMENT}),Ee=()=>T(this,null,function*(){try{f.value=!0,yield Gt.alert("",a("upgrade.payAlert"),{customClass:"payment-message-box",confirmButtonText:`${a("yesBtn")}!`,cancelButtonText:a("noBtn"),showClose:!1,showCancelButton:!0}),yield ie()}catch(le){le==="cancel"&&(yield ie())}finally{fi(),f.value=!1}}),Je=le=>{S.value=le},We=()=>{o.value=!1,t.isChatDocApiMode&&!t.autoRenewalMode&&y.value&&n.push({name:"apiKeys"}),y.value&&t.onPaySuccessAndClosed(r.value)};return(le,Ce)=>(h(),M(Xe,{"model-value":o.value,"append-to-body":!1,title:G.value||e.title,class:_e(["upgrade-dialog",d(Au)[g.value]]),onClosed:de},{footer:k(()=>[g.value===d(Pe).SELECT_PACKAGE?(h(),M(d(br),{key:0,modelValue:S.value,"onUpdate:modelValue":Ce[6]||(Ce[6]=j=>S.value=j),type:"card",class:_e({"footer-content":!0,"is-content-without-message":!e.messages,"hide-tab-header":!d(at).hasInviteUser})},{default:k(()=>[v(d(Fn),{name:d(Bt).UPGRADE},{label:k(()=>[v(te,{name:"crown",size:18,class:"tabpane-title-icon"}),c("span",null,_(le.$t("upgrade.upgradeTitle")),1)]),default:k(()=>[v(Or,{"pro-btn-text":e.proBtnText,onSelectPackage:gt,onClickApiLink:Ce[4]||(Ce[4]=j=>o.value=!1)},null,8,["pro-btn-text"])]),_:1},8,["name"]),d(at).hasInviteUser?(h(),M(d(Fn),{key:0,label:le.$t("upgrade.referFriend.tabTitle"),name:d(Bt).REFER},{default:k(()=>[v(ld,{"membership-info":{current:d(s).currentMembershipPackageInfo,all:d(s).membershipPackages,isFree:d(s).isFreeMembership},onToggleUpgradeTab:Ce[5]||(Ce[5]=j=>Je(d(Bt).UPGRADE))},null,8,["membership-info"])]),_:1},8,["label","name"])):N("",!0)]),_:1},8,["modelValue","class"])):(h(),M(id,{key:1,"pay-step":g.value,"is-foreign-pay":U.value,loading:f.value,onOperation:we},null,8,["pay-step","is-foreign-pay","loading"]))]),default:k(()=>[c("div",null,[g.value===d(Pe).SELECT_PACKAGE?(h(),b("div",jb,[(h(!0),b(K,null,ke(e.messages||[],j=>(h(),b("div",{key:j},_(j),1))),128))])):g.value===d(Pe).SELECT_PAY_TYPE?(h(),M(Cv,{key:1,"current-pay-mode":l.value,"onUpdate:currentPayMode":Ce[0]||(Ce[0]=j=>l.value=j),"auto-renewal":m.value,"onUpdate:autoRenewal":Ce[1]||(Ce[1]=j=>m.value=j),"additional-package-selected-option":E.value,"onUpdate:additionalPackageSelectedOption":Ce[2]||(Ce[2]=j=>E.value=j),"additional-package-dropdown-expand":P.value,"onUpdate:additionalPackageDropdownExpand":Ce[3]||(Ce[3]=j=>P.value=j),"auto-renewal-mode":e.autoRenewalMode,"user-info":{name:d(s).userInfo.name,email:d(s).userInfo.email},"show-additional-package-options":r.value.isAdditionalPkg,"current-package":r.value,"pay-type-list":w.value,"radio-class-name":{special:e.autoRenewalMode||d(mt)||e.isChatDocApiMode},"show-auto-renewal-checkbox":I.value,"auto-renewal-disabled":B.value},Ci({productName:k(()=>{var j;return[r.value.isAdditionalPkg||r.value.isApiAdditionalPkg?(h(),b(K,{key:0},[Q(_(r.value.alias)+" ",1),r.value.isApiAdditionalPkg&&((j=r.value.tagInfo)!=null&&j.text)?(h(),M(Wt,{key:0,text:r.value.tagInfo.text,color:r.value.tagInfo.color},null,8,["text","color"])):N("",!0)],64)):e.autoRenewalMode?(h(),b(K,{key:1},[Q(_(ne.value),1)],64)):(h(),b(K,{key:2},[Q(_(q.value),1)],64))]}),price:k(()=>[R.value?(h(),b("span",Kb," $"+_(d(kn)(r.value.origin_price)),1)):N("",!0),c("span",Qb,"$"+_(V.value),1),r.value.isApiAdditionalPkg?(h(),M(Wt,{key:1,text:le.$t("tags.price"),style:{height:"16px","line-height":"16px"}},null,8,["text"])):N("",!0)]),filePackageTip:k(()=>[U.value?(h(),b("p",Jb,_(le.$t("upgrade.foreignTip")),1)):Y.value?(h(),b("p",Zb,_(le.$t("upgrade.wechatTip")),1)):N("",!0)]),_:2},[r.value.isApiAdditionalPkg?{name:"priceTip",fn:k(()=>[c("div",Xb,_(le.$t("upgrade.priceTip")),1)]),key:"0"}:void 0]),1032,["current-pay-mode","auto-renewal","additional-package-selected-option","additional-package-dropdown-expand","auto-renewal-mode","user-info","show-additional-package-options","current-package","pay-type-list","radio-class-name","show-auto-renewal-checkbox","auto-renewal-disabled"])):g.value===d(Pe).PAYING?(h(),M(ad,{key:2,"show-domestic-pay":!!(F.value&&u.value),tips:le.$t("upgrade.qrCodeTip",{payType:B.value?"WeChat":"Alipay",scene:W.value&&m.value?"subscribe":"make the payment"}),"is-alipay":W.value,"is-wechat-pay":B.value,"pay-value":u.value,"auto-renewal":m.value,"show-expired":p.value,onRefresh:ue},{price:k(()=>[R.value?(h(),b("span",ew," $"+_(r.value.origin_price),1)):N("",!0),c("span",tw,"$"+_(V.value),1)]),_:1},8,["show-domestic-pay","tips","is-alipay","is-wechat-pay","pay-value","auto-renewal","show-expired"])):(h(),M(sd,{key:3,"pay-success":y.value,"auto-renewal":m.value,"show-alipay-subscribe-tip":m.value&&W.value,"current-package":r.value,"payed-additional-package-info":E.value},null,8,["pay-success","auto-renewal","show-alipay-subscribe-tip","current-package","payed-additional-package-info"]))])]),_:1},8,["model-value","title","class"]))}},aw=se(nw,[["__scopeId","data-v-baa93e65"]]),sw="https://cdn.pdppt.com/chatdoc/assets/upgrade-bg-ebb823de.jpg";const iw={class:"panel-wrapper"},ow={class:"panel-content"},rw=["onClick"],lw={class:"plan-tag-wrap"},cw={key:0,class:"plan-tag auto-renewal-tag"},uw={key:1,class:"plan-tag annual-tag"},dw={class:"plan-title"},pw={class:"plan-price"},fw={class:"panel-footer"},hw={__name:"UpgradePlanPanel",props:{active:{type:Boolean,default:!1},plans:{type:Array,required:!0},modelValue:{type:[Object,null],default:null},defaultActiveGoodsType:{type:String,default:""}},emits:["selectedPlanChange"],setup(e,{emit:t}){const n=e,{t:a}=ye(),s=x(null),i=r=>{s.value=r},o=O(()=>{const r=s.value;if(r){if(r.isAutoRenewal)return[{text:a("upgrade.planAlertText.autoRenewalExplainText1",{days:r.days}),prefix:"dot"},{text:a("upgrade.planAlertText.autoRenewalExplainText2",{days:r.days,money:r.origin_price-r.price}),prefix:"dot"},{text:a("upgrade.planAlertText.priceExplainText"),prefix:"dot"}];if(r.isAnnualPkg)return[{text:a("upgrade.planAlertText.priceExplainText"),prefix:"dot"}]}return[{text:a("upgrade.planAlertText.withoutAutoRenewalText",{days:Pr}),prefix:"asterisk"}]});return $e(s,r=>{r&&n.active&&t("selectedPlanChange",r)}),$e(()=>n.active,r=>{s.value=r?n.plans[0]:null}),$e(()=>n.defaultActiveGoodsType,r=>{n.active&&(s.value=n.plans.find(l=>l.type===r)||n.plans[0])},{immediate:!0}),(r,l)=>(h(),b("div",iw,[c("div",ow,[(h(!0),b(K,null,ke(e.plans,u=>{var p;return h(),b("div",{key:u.type,class:_e({"plan-card":!0,active:((p=s.value)==null?void 0:p.type)===u.type}),onClick:f=>i(u)},[c("div",lw,[u.isAutoRenewal?(h(),b("span",cw,_(r.$t("upgrade.autoRenewalTag")),1)):N("",!0),u.isAnnualPkg?(h(),b("span",uw,_(r.$t("upgrade.AnnuallyTag",{money:u.origin_price-u.price})),1)):N("",!0)]),c("div",dw,_(r.$t("upgrade.planCardTitle",{alias:u.alias,days:u.days})),1),c("div",pw,"$"+_(u.price),1),c("div",{class:_e({"plan-origin-price":!0,"no-strikethrough":!u.origin_price})},_(u.origin_price?`$${u.origin_price}`:r.$t("upgrade.noAnyDeals")),3)],10,rw)}),128))]),c("div",fw,[c("div",null,[(h(!0),b(K,null,ke(o.value,u=>(h(),b("div",{key:u.text,class:_e({"alert-text":!0,"prefix-asterisk":u.prefix==="asterisk","prefix-dot":u.prefix==="dot"})},[c("span",null,_(u.text),1)],2))),128))])])]))}},_w=se(hw,[["__scopeId","data-v-12dd7a35"]]);const gw={class:"panel-wrapper"},mw={class:"panel-content"},yw=["onClick"],vw={class:"pkg-title"},bw={class:"pkg-price"},ww={class:"pkg-unit"},Ew={key:0},Pw={key:1},kw={class:"pkg-quota"},Sw={class:"pkg-quota-label"},Aw={class:"package-select-option-label trigger"},Tw={key:0},Cw={key:1},xw={key:2},Iw={class:"package-select-option-label"},$w={key:0},Rw={key:1},Dw={key:2},Nw={class:"panel-footer"},Ow={__name:"UpgradePackagePanel",props:{active:{type:Boolean,default:!1},packages:{type:Array,required:!0},modelValue:{type:[Object,null],default:null},defaultActiveGoodsType:{type:String,default:""},defaultActivePkgOption:{type:Object,default:null},maxPdfPages:{type:Number,default:0}},emits:["selectedPackageChange"],setup(e,{emit:t}){const n=e,{t:a}=ye(),s=x(null),i=x([]),o=p=>{s.value=p},r=O(()=>{const p=s.value;if(p){if(p.isFilePkg)return[{text:a("upgrade.filePackageContent.content"),prefix:"asterisk"},{text:a("upgrade.filePackageContent.option.opt1"),prefix:"dot"},{text:a("upgrade.filePackageContent.option.opt2"),prefix:"dot"}];if(p.isPagePkg)return[{text:a("upgrade.pagePackageContent.content"),prefix:"asterisk"},{text:a("upgrade.pagePackageContent.option.opt1",{pageCount:n.maxPdfPages}),prefix:"dot"},{text:a("upgrade.pagePackageContent.option.opt2"),prefix:"dot"},{text:a("upgrade.pagePackageContent.option.opt3"),prefix:"dot"}];if(p.isOcrPagePkg)return[{text:a("upgrade.ocrPagePackageContent.content"),prefix:"asterisk"},{text:a("upgrade.ocrPagePackageContent.option.opt1"),prefix:"dot"},{text:a("upgrade.ocrPagePackageContent.option.opt2"),prefix:"dot"}]}return[]}),l=(p,f)=>{p.selectedOption=f,p.type===s.value.type&&n.active&&t("selectedPackageChange",p)},u=(p,f)=>{p.dropdownExpand=f};return $e(s,p=>{p&&n.active&&t("selectedPackageChange",p)}),$e(()=>n.active,p=>{s.value=p?i.value[0]:null}),$e(()=>n.defaultActiveGoodsType,p=>{i.value=n.packages,n.active&&(s.value=i.value.find(f=>f.type===p)||i.value[0],n.defaultActivePkgOption&&(s.value.selectedOption=n.defaultActivePkgOption))},{immediate:!0}),(p,f)=>(h(),b("div",gw,[c("div",mw,[(h(!0),b(K,null,ke(i.value,g=>{var y;return h(),b("div",{key:g.type,class:_e({"pkg-card":!0,active:((y=s.value)==null?void 0:y.type)===g.type}),onClick:w=>o(g)},[c("div",vw,_(g.alias),1),c("div",bw,"$"+_(g.price),1),c("div",ww,[g.isFilePkg?(h(),b("span",Ew,_(p.$t("uploadPage.sizePerUnitWithoutSlash")),1)):N("",!0),g.isPagePkg||g.isOcrPagePkg?(h(),b("span",Pw,_(p.$t("uploadPage.pagePerUnitWithoutSlash")),1)):N("",!0)]),c("div",kw,[c("div",Sw,_(p.$t("upgrade.filePackageLabel")),1),v(d($i),{trigger:"click",teleported:!1,class:"pkg-dropdown",onVisibleChange:w=>u(g,w),onCommand:w=>l(g,w)},{dropdown:k(()=>[v(d(xi),null,{default:k(()=>[(h(!0),b(K,null,ke(g.options,w=>(h(),M(d(Ii),{key:w.price,command:w,class:_e(["pkg-dropdown-item",{active:w.price===g.selectedOption.price}])},{default:k(()=>[c("div",Iw,[c("div",null,[c("span",null,_(w.count),1),g.isFilePkg?(h(),b("span",$w,_(` ${p.$t("uploadPage.filesText")}`),1)):N("",!0),g.isPagePkg?(h(),b("span",Rw,_(` ${p.$t("uploadPage.pagesText")}`),1)):N("",!0),g.isOcrPagePkg?(h(),b("span",Dw,_(` ${p.$t("uploadPage.ocrPagesText")}`),1)):N("",!0)]),c("div",null,"$"+_(w.price),1)])]),_:2},1032,["command","class"]))),128))]),_:2},1024)]),default:k(()=>[c("div",Aw,[c("div",null,[c("span",null,_(g.selectedOption.count),1),g.isFilePkg?(h(),b("span",Tw,_(` ${p.$t("uploadPage.filesText")}`),1)):N("",!0),g.isPagePkg?(h(),b("span",Cw,_(` ${p.$t("uploadPage.pagesText")}`),1)):N("",!0),g.isOcrPagePkg?(h(),b("span",xw,_(` ${p.$t("uploadPage.ocrPagesText")}`),1)):N("",!0)]),c("div",null,[Q(" $"+_(g.selectedOption.price)+" ",1),v(d(ut),{class:"el-icon--right dropdown-arrow"},{default:k(()=>[g.dropdownExpand?(h(),M(d(pu),{key:1})):(h(),M(d(du),{key:0}))]),_:2},1024)])])]),_:2},1032,["onVisibleChange","onCommand"])])],10,yw)}),128))]),c("div",Nw,[(h(!0),b(K,null,ke(r.value,g=>(h(),b("div",{key:g.text,class:_e({"alert-text":!0,"prefix-asterisk":g.prefix==="asterisk","prefix-dot":g.prefix==="dot"})},[c("span",null,_(g.text),1)],2))),128))])]))}},Lw=se(Ow,[["__scopeId","data-v-025dfb27"]]);const Uw={class:"wrapper"},Mw={key:0,class:"total-price-wrapper"},Bw={class:"total-price"},Fw={class:"plan-tag-wrap"},Gw={key:0,class:"plan-tag auto-renewal-tag"},zw={key:1,class:"plan-tag annual-tag"},Hw={class:"divider"},Yw={class:"pay-type-list"},Ww=["onClick"],Vw=["src","alt"],qw={__name:"UpgradePayTypePanel",props:{currentPayMode:{type:[Number,null],default:null},payTypeList:{type:Array,default:()=>[]},currentPackage:{type:[Object,null],default:null},loading:{type:Boolean,default:!1}},emits:["payModeClicked"],setup(e,{emit:t}){const n=e,a=O(()=>{if(n.currentPackage.options){const{price:o}=n.currentPackage.selectedOption;return o}return n.currentPackage.price}),s=O(()=>{var o;return(o=n.currentPackage)!=null&&o.isAutoRenewal?n.payTypeList.filter(r=>r.name!==Me.WECHAT):n.payTypeList}),i=o=>{n.loading||(t("payModeClicked",o),n.currentPackage.goods_id===J.MONTHLY_PRO&&Nr())};return(o,r)=>{const l=Jt("loading");return h(),b("div",Uw,[e.currentPackage?(h(),b("div",Mw,[c("div",Bw,"$"+_(a.value),1),c("div",Fw,[e.currentPackage.isAutoRenewal?(h(),b("span",Gw,_(o.$t("upgrade.autoRenewalTag")),1)):N("",!0),e.currentPackage.isAnnualPkg?(h(),b("span",zw,_(o.$t("upgrade.AnnuallyTag",{money:e.currentPackage.origin_price-e.currentPackage.price})),1)):N("",!0)])])):N("",!0),c("div",Hw,_(o.$t("upgrade.paymentMethodText")),1),c("div",Yw,[(h(!0),b(K,null,ke(s.value,(u,p)=>ct((h(),b("div",{key:p,class:"pay-type-item",border:"",onClick:f=>i(u.value)},[c("img",{crossorigin:"anonymous",class:"pay-type-image",src:u.img,alt:u.name},null,8,Vw),v(d(ut),{class:"arrow-right-icon"},{default:k(()=>[v(d(wr))]),_:1})],8,Ww)),[[l,e.loading&&e.currentPayMode===u.value]])),128))])])}}},jw=se(qw,[["__scopeId","data-v-bed6af3e"]]);const gd=e=>(vt("data-v-5fb6bf8c"),e=e(),bt(),e),Kw={class:"upgrade-dialog-content"},Qw={key:0,class:"origin-price"},Xw={class:"price"},Jw={key:0,class:"membership-content-wrapper"},Zw={class:"tab-title-content"},eE={key:0},tE={key:1},nE={class:"tab-title-content"},aE={class:"tab-title-content"},sE=gd(()=>c("span",{class:"refer-tab-title-arrow"},"→",-1)),iE={key:1,class:"operations-wrap"},oE=gd(()=>c("img",{class:"bg-image",crossorigin:"anonymous",src:sw,alt:""},null,-1)),rE={__name:"UpgradeDialogV2",props:{title:{type:String,default:""},autoRenewalMode:{type:Boolean,default:!1},isChatDocApiMode:{type:Boolean,default:!1},activeTabPaneName:{type:String,default:tt.PLAN},activeGoodsType:{type:String,default:""},activeAdditionPkgOption:{type:Object,default:null},onClosed:{type:Function,default:()=>{}},onOpenPayPage:{type:Function,default:()=>{}},onClosePayPage:{type:Function,default:()=>{}},onPaySuccessAndClosed:{type:Function,default:()=>{}}},setup(e){const t=e,{t:n}=ye(),a=Oe(),s=yn(),i=x(!0),o=x(null),r=x(null),l=x(""),u=x(!1),p=x(!1),f=x(Pe.SELECT_PACKAGE),g=x(!1),y=x([]),w=x(tt.PLAN),m=x("");let E="",P,S;const D=O(()=>f.value===Pe.SELECT_PACKAGE?"":f.value===Pe.FINISH_PAYMENT?g.value?n(o.value.isAutoRenewal?"subscription.subscribeSuccessTitle":"upgrade.paySuccessTitle"):n("upgrade.payFailedTitle"):G.value?n("upgrade.wechatTitle"):U.value?n("upgrade.alipayTitle"):n("upgrade.paypalTitle")),C=O(()=>[nt.PAYPAL,nt.CARD].includes(r.value)),$=O(()=>[nt.WECHAT,nt.ALIPAY].includes(r.value)),G=O(()=>r.value===nt.WECHAT),U=O(()=>r.value===nt.ALIPAY),F=O(()=>o.value.origin_price&&(o.value.isAutoRenewal||o.value.isAnnualProPkg)&&(!G.value||G.value&&o.value.isAnnualProPkg)),B=O(()=>{let L;return o.value.isApiAdditionalPkg?L=o.value.price*o.value.count:o.value.isAdditionalPkg?L=o.value.selectedOption.price:L=o.value.price,kn(L)}),W=O(()=>a.higherMembershipPlans),Y=O(()=>a.additionPackages.map(L=>Z(A({},L),{selectedOption:L.options[0],dropdownExpand:!1}))),I=O(()=>W.value.length),R=()=>{let L;const X=(We,le=!1)=>{const Ce={[Me.ALIPAY]:dd,[Me.WECHAT]:le?pd:fd,[Me.CARD]:hd,[Me.PAYPAL]:_d};return{name:We,img:Ce[We],value:nt[We.toUpperCase()]}},ie=["zh-CN","zh"].includes(navigator.language);let Ee=at.paymentList.domestic.map(We=>X(We,ie));const Je=at.paymentList.foreign.map(We=>X(We,ie));return ie?L=[...Ee,...Je]:L=[...Je,...Ee],L},V=()=>{y.value=R(),r.value=y.value[0].value};It(()=>{V(),ue(t.activeTabPaneName)});const q=()=>{m.value=o.value.type,f.value=Pe.SELECT_PACKAGE,o.value=null,r.value=null,E="",l.value="",u.value=!1,S==null||S()},ne=()=>{E||Re(),q(),t.onClosed()},ae=L=>{switch(L){case Ut.CANCEL:q();break;case Ut.PAY:Ae();break;case Ut.CHECK_ORDER:it();break;case Ut.CONTINUE:ve();break}},Re=()=>{var L;t.onClosePayPage(Z(A({},o.value),{payMethod:nt[r.value],autoRenewal:o.value.isAutoRenewal&&a.isEffectMembership,filePackageSize:((L=o.value.selectedOption)==null?void 0:L.count)||0}))},Ae=()=>T(this,null,function*(){const L=X=>{const{goods_id:ie,isAutoRenewal:Ee}=o.value,Je={goods_id:ie,auto_renewal:Ee,api_mode:t.isChatDocApiMode,pay_method:r.value,count:X};let We=window.location.origin;We+="/payment/",ud(Dr(We,Ti(Je)))};try{p.value=!0;const{goods_id:X,count:ie,selectedOption:Ee,isAutoRenewal:Je}=o.value,We={goods:X};if(o.value.isAdditionalPkg?We.count=Ee.count:o.value.isApiAdditionalPkg?We.count=ie:We.count=1,[nt.WECHAT,nt.ALIPAY].includes(r.value)){u.value=!1,S==null||S();let le;if(G.value)le=yield Ou(We),l.value=le.code_url;else if(U.value)if(Je)le=yield Lu(We),l.value=le.code_url;else{L(We.count),yield z();return}E=le.id,f.value=Pe.PAYING,P=Date.now(),S=Li(()=>T(this,null,function*(){yield oe()}),2e3)}else C.value&&(L(We.count),yield it())}finally{p.value=!1}}),oe=()=>T(this,null,function*(){let L;if(o.value.isAutoRenewal&&U.value)L=yield Te();else{const{status:X}=yield ci(E);g.value=X===li.PAID}g.value?(yield gt(),f.value=Pe.FINISH_PAYMENT,S==null||S(),E=""):(Ot().diff(P,"s")>=60*3&&(u.value=!0,S==null||S()),o.value.isAutoRenewal&&U.value&&(L==null?void 0:L.status)===ri.DEDUCT_FAILED&&(ge.error(n("subscription.alipaySubscribeErrorMessage")),i.value=!1,S==null||S()))}),de=()=>T(this,null,function*(){const L=Fu(Ke.ORDER_ID);if(L){const{status:X}=yield ci(L);g.value=X===li.PAID}else g.value=!1;Ir(Ke.ORDER_ID)}),we=()=>T(this,null,function*(){if(o.value.isAutoRenewal)if(o.value.isApiPlanPkg)yield s.getSummary(),g.value=s.isEffectApiMembership;else{const{membership:L}=yield Ar();g.value=L.expired_at!==a.membership.expired_at}else yield de();yield gt(),f.value=Pe.FINISH_PAYMENT}),it=()=>T(this,null,function*(){try{p.value=!0,yield Gt.alert("",n("upgrade.payAlert"),{customClass:"payment-message-box",confirmButtonText:`${n("yesBtn")}!`,cancelButtonText:n("noBtn"),showClose:!1,showCancelButton:!0}),yield we()}catch(L){L==="cancel"&&(yield we())}finally{fi(),p.value=!1}}),Te=()=>T(this,null,function*(){let L;const X={source:o.value.isApiPlanPkg?xt.API:xt.MAIN},ie=yield Oi(X);return ie.length&&(L=ie[0]),g.value=ie.length&&ie[0].pay_method===Me.ALIPAY&&ie[0].goods_id===o.value.goods_id&&ie[0].status===ri.NORMAL,L}),gt=()=>T(this,null,function*(){g.value&&(o.value.isApiPkg?yield s.updateUserApiMembership():yield a.updateUserMembership())}),pt=()=>T(this,null,function*(){o.value.isAutoRenewal?yield Te():yield de(),yield gt(),f.value=Pe.FINISH_PAYMENT}),z=()=>T(this,null,function*(){try{p.value=!0,yield Gt.alert("",n("upgrade.payAlert"),{customClass:"payment-message-box",confirmButtonText:`${n("yesBtn")}!`,cancelButtonText:n("noBtn"),showClose:!1,showCancelButton:!0}),yield pt()}catch(L){L==="cancel"&&(yield pt())}finally{fi(),p.value=!1}}),ue=L=>{if(L===tt.PLAN&&!I.value){w.value=tt.PACKAGE;return}w.value=L},ve=()=>{g.value?(i.value=!1,t.onPaySuccessAndClosed(o.value)):q()},fe=L=>{o.value=L},pe=L=>{o.value=L},ee=L=>{r.value=L,Ae()};return $e(()=>t.activeGoodsType,L=>{m.value=L},{immediate:!0}),(L,X)=>(h(),M(Xe,{"model-value":i.value,"append-to-body":!1,title:D.value||e.title,class:_e(["upgrade-dialog-wrapper",d(Au)[f.value]]),onClosed:ne},{default:k(()=>[c("div",Kw,[c("div",null,[f.value===d(Pe).PAYING?(h(),M(ad,{key:0,"show-domestic-pay":!!($.value&&l.value),tips:L.$t("upgrade.qrCodeTip",{payType:G.value?"WeChat":"Alipay",scene:U.value&&o.value.isAutoRenewal?"subscribe":"make the payment"}),"is-alipay":U.value,"is-wechat-pay":G.value,"pay-value":l.value,"auto-renewal":o.value.isAutoRenewal,"show-expired":u.value,onRefresh:Ae},{price:k(()=>[F.value?(h(),b("span",Qw," $"+_(o.value.origin_price),1)):N("",!0),c("span",Xw,"$"+_(B.value),1)]),_:1},8,["show-domestic-pay","tips","is-alipay","is-wechat-pay","pay-value","auto-renewal","show-expired"])):f.value===d(Pe).FINISH_PAYMENT?(h(),M(sd,{key:1,"pay-success":g.value,"auto-renewal":o.value.isAutoRenewal,"show-alipay-subscribe-tip":o.value.isAutoRenewal&&U.value,"current-package":o.value,"payed-additional-package-info":o.value.selectedOption},null,8,["pay-success","auto-renewal","show-alipay-subscribe-tip","current-package","payed-additional-package-info"])):N("",!0)]),f.value===d(Pe).SELECT_PACKAGE?(h(),b("div",Jw,[v(d(br),{modelValue:w.value,"onUpdate:modelValue":X[1]||(X[1]=ie=>w.value=ie),type:"border-card",class:_e({"content-tabs":!0,"is-active-first":I.value?w.value===d(tt).PLAN:d(tt).PACKAGE})},{default:k(()=>[I.value?(h(),M(d(Fn),{key:0,name:d(tt).PLAN},{label:k(()=>[c("span",Zw,[v(te,{name:"crown",size:26,class:"tabpane-title-icon"}),d(a).isFreeMembership?(h(),b("span",eE,_(L.$t("upgrade.tabPaneTitle.planForFree")),1)):(h(),b("span",tE,_(L.$t("upgrade.tabPaneTitle.planForPro")),1))]),v(te,{name:"tab-right-fillet",size:50,margin:"0",class:"tab-right-fillet"}),v(te,{name:"tab-right-fillet-bg",size:50,margin:"0",class:"tab-right-fillet tab-right-fillet-bg"})]),default:k(()=>[v(_w,{active:w.value===d(tt).PLAN,plans:W.value,"default-active-goods-type":m.value,onSelectedPlanChange:fe},null,8,["active","plans","default-active-goods-type"])]),_:1},8,["name"])):N("",!0),v(d(Fn),{name:d(tt).PACKAGE},{label:k(()=>[v(te,{name:"tab-left-fillet",size:50,margin:"0",class:"tab-left-fillet"}),v(te,{name:"tab-left-fillet-bg",size:50,margin:"0",class:"tab-left-fillet tab-left-fillet-bg"}),c("span",nE,[c("span",null,_(L.$t("upgrade.tabPaneTitle.package")),1)]),v(te,{name:"tab-right-fillet",size:50,margin:"0",class:"tab-right-fillet"}),v(te,{name:"tab-right-fillet-bg",size:50,margin:"0",class:"tab-right-fillet tab-right-fillet-bg"})]),default:k(()=>[v(Lw,{active:w.value===d(tt).PACKAGE,packages:Y.value,"default-active-goods-type":m.value,"default-active-pkg-option":e.activeAdditionPkgOption,"max-pdf-pages":d(a).maxPdfPages,onSelectedPackageChange:pe},null,8,["active","packages","default-active-goods-type","default-active-pkg-option","max-pdf-pages"])]),_:1},8,["name"]),d(at).hasInviteUser?(h(),M(d(Fn),{key:1,name:d(Bt).REFER},{label:k(()=>[v(te,{name:"tab-left-fillet",size:50,margin:"0",class:"tab-left-fillet"}),v(te,{name:"tab-left-fillet-bg",size:50,margin:"0",class:"tab-left-fillet tab-left-fillet-bg"}),c("span",aE,[c("span",null,_(L.$t("upgrade.tabPaneTitle.refer")),1),sE]),v(te,{name:"tab-right-fillet",size:50,margin:"0",class:"tab-right-fillet"}),v(te,{name:"tab-right-fillet-bg",size:50,margin:"0",class:"tab-right-fillet tab-right-fillet-bg"})]),default:k(()=>[v(ld,{"membership-info":{current:d(a).currentMembershipPackageInfo,all:d(a).membershipPackages,isFree:d(a).isFreeMembership},onToggleUpgradeTab:X[0]||(X[0]=ie=>ue(d(Bt).UPGRADE))},null,8,["membership-info"])]),_:1},8,["name"])):N("",!0)]),_:1},8,["modelValue","class"]),[d(tt).PLAN,d(tt).PACKAGE].includes(w.value)?(h(),M(jw,{key:0,"current-pay-mode":r.value,class:"tabpane-content-pay-type-panel","pay-type-list":y.value,"current-package":o.value,loading:p.value,onPayModeClicked:ee},null,8,["current-pay-mode","pay-type-list","current-package","loading"])):N("",!0)])):(h(),b("div",iE,[f.value!==d(Pe).SELECT_PACKAGE?(h(),M(id,{key:0,"pay-step":f.value,"is-foreign-pay":C.value,loading:p.value,"cancel-btn-text":L.$t("upgrade.returnSelectionBtnText"),onOperation:ae},null,8,["pay-step","is-foreign-pay","loading","cancel-btn-text"])):N("",!0)]))]),oE]),_:1},8,["model-value","title","class"]))}},lE=se(rE,[["__scopeId","data-v-5fb6bf8c"]]),Ul=({actionSource:e="",actionSourcePage:t=qe.SOURCE_PAGE.OTHER,actionType:n,payMethod:a,filePackageSize:s=0,id:i,goodsId:o})=>{const l=new mr(window.navigator.userAgent).getOS();E_({client:l.name,client_version:l.version,action_uuid:i,action_source:e,action_source_page:t,action_type:n,pay_method:a,file_package_size:s,subscribe_type:o_[o]}).catch(()=>{})};function cE(e,{title:t,messages:n,onClosed:a,defaultPackage:s,proBtnText:i,autoRenewalMode:o,activeTabPaneName:r,activeGoodsType:l,activeAdditionPkgOption:u,sourcePage:p,isChatDocApiMode:f,onPaySuccessAndClosed:g},y){let w=null;const E=v(y==="v2"?lE:aw,{title:t,messages:n,defaultPackage:s,proBtnText:i,autoRenewalMode:o,activeTabPaneName:r,activeGoodsType:l,activeAdditionPkgOption:u,isChatDocApiMode:f,onPaySuccessAndClosed:g,onClosed(){P.remove(),a==null||a()},onOpenPayPage(S){w={actionSource:S.autoRenewal?qe.SOURCE.AUTO_RENEWAL:Tl[S.goods_id],actionSourcePage:p,actionType:qe.ACTION_TYPE.OPEN,payMethod:S.payMethod,id:En(),filePackageSize:S.filePackageSize,goodsId:S.goods_id},Ul(w)},onClosePayPage(S){w&&(Ul(Z(A({},w),{actionType:qe.ACTION_TYPE.CLOSE,payMethod:S.payMethod,actionSource:S.autoRenewal?qe.SOURCE.AUTO_RENEWAL:Tl[S.goods_id],filePackageSize:S.filePackageSize,goodsId:S.goods_id})),w=null)}});E.appContext=e;const P=document.createElement("div");$a(E,P),document.body.append(P)}const uE={class:"message-wrap el-message__content"},dE=["onClick"],pE={__name:"MessageWithHandler",props:{textOptions:{type:Array,default:()=>[]}},setup(e){const t=n=>{var a;(a=n.handler)==null||a.call(n)};return(n,a)=>(h(),b("div",uE,[(h(!0),b(K,null,ke(e.textOptions,s=>(h(),b("div",{key:s},[c("span",{class:_e({"text-node":!0,"has-handler":!!s.handler}),onClick:i=>t(s)},_(s.text),11,dE)]))),128))]))}},Ml=se(pE,[["__scopeId","data-v-3ee39c8e"]]),Lt=()=>{const{t:e}=ye(),{appContext:t}=mn(),n=Oe(),a=O(()=>{const g=n.exceedUploadLimit&&n.exceedFilePackagesLimit,y=n.exceedQuestionLimit,w=n.isFreeMembership&&(n.exceedFreeQuestionLimit||n.exceedFreeUploadLimit&&n.exceedFilePackagesLimit);return g||y||w}),s=O(()=>a.value?n.isFreeMembership?e("upgrade.expiredLimitTitle"):e("upgrade.limitTitle"):e("upgrade.upgradeTitle")),i=O(()=>{let g=null;return a.value&&(n.isFreeMembership?g=[e("upgrade.expiredLimitContent")]:g=[e("upgrade.limitContent.text1"),e("upgrade.limitContent.text2"),e("upgrade.limitContent.text3")]),g}),o=O(()=>n.membershipPackages.find(g=>g.isMonthlyProPkg)),r=(g={},y="v2")=>{let{title:w,messages:m,defaultPackage:E,onClosed:P,proBtnText:S,autoRenewalMode:D,activeTabPaneName:C,activeGoodsType:$,activeAdditionPkgOption:G,sourcePage:U,isChatDocApiMode:F,onPaySuccessAndClosed:B}=g;U||(U=qe.SOURCE_PAGE.OTHER),cE(t,{title:w||s.value,messages:m||i.value,defaultPackage:E,proBtnText:S,autoRenewalMode:D,activeTabPaneName:C,activeGoodsType:$,activeAdditionPkgOption:G,isChatDocApiMode:F,onClosed:P,sourcePage:U,onPaySuccessAndClosed:B},y)};return{showUpgradeDialog:r,validateRemainingUploads:g=>n.remainingUploadFileCount===0?(r({activeTabPaneName:n.isFreeMembership?tt.PLAN:tt.PACKAGE}),g.stopPropagation(),g.preventDefault(),!1):!0,freeUserShowUpgradeDialog:()=>{r({title:e("upgrade.freeLimitTitle"),messages:[e("upgrade.freeLimitContent")],proBtnText:e("upgrade.freeProBtnText")})},$proPackage:o,showQuotaLimitAndUpgradeEntry:()=>{let g;const y=[{text:`${e("uploadPage.uploadLimit")} `},{text:e("upgrade.freeProBtnText"),handler:()=>{r({activeTabPaneName:n.isFreeMembership?tt.PLAN:tt.PACKAGE}),g.close()}}];!n.isInvitedFilePackageAllObtained&&at.hasInviteUser&&y.push({text:` ${e("or")} `},{text:e("upgrade.getQuotaBonus"),handler:()=>{r({activeTabPaneName:Bt.REFER}),g.close()}}),g=ge.error({message:v(Ml,{textOptions:y}),duration:8e3})},showQuestionLimitAndUpgradeEntry:()=>{let g;const y=[{text:`${e("exceedQuestionLimit")} `},{text:e("upgrade.toProButton"),handler:()=>{r(),g.close()}}];g=ge.error({message:v(Ml,{textOptions:y}),duration:8e3})}}};const fE={__name:"UpgradeButton",props:{defaultPackage:{type:Object,default:null},underline:{type:Boolean,default:!0},sourcePage:{type:String,default:""},text:{type:String,default:""}},setup(e){const t=e,{t:n}=ye(),{showUpgradeDialog:a}=Lt(),s=Oe(),i=O(()=>s.isEffectMembership?n("upgrade.planButton"):s.isExpiredMembership?n("upgrade.expiredButton"):n("upgrade.toProButton")),o=()=>{a(Z(A({},t.defaultPackage),{sourcePage:t.sourcePage})),s.isEffectMembership&&Nr()};return(r,l)=>(h(),b("div",{class:_e(["upgrade-button",{underline:e.underline}]),onClick:o},[c("span",null,_(e.text||i.value),1),kt(r.$slots,"default",{},void 0,!0)],2))}},md=se(fE,[["__scopeId","data-v-404342d2"]]);const hE={class:"addition-package-item"},_E={class:"top"},gE={class:"name"},mE={class:"content"},yE={class:"label"},vE={class:"value"},bE={key:0,class:"date"},wE={class:"label"},EE={class:"value"},PE={key:1,class:"date"},kE={class:"label"},SE={class:"value"},AE={__name:"AdditionPackageItem",props:{item:{type:Object,default:()=>({})},index:{type:Number,default:0}},setup(e){const t=e,n=O(()=>[ca.GIFT,ca.INVITE,ca.RECALL].includes(t.item.source_type));return(a,s)=>{var i;return h(),b("div",hE,[c("div",_E,[c("span",gE,[(i=e.item.tagInfo)!=null&&i.text?(h(),M(Wt,{key:0,text:e.item.tagInfo.text,color:e.item.tagInfo.color},null,8,["text","color"])):N("",!0),c("span",null,_(e.item.title),1)]),n.value?(h(),M(te,{key:0,name:"gift-tag",margin:"0",class:"gift-icon"})):N("",!0)]),c("div",mE,[c("span",yE,_(a.$t("userMenu.slots")),1),c("span",vE,_(d(di)(e.item.used_count))+"/"+_(d(di)(e.item.total_count)),1)]),e.item.created_at?(h(),b("div",bE,[c("span",wE,_(a.$t("userMenu.createdDate")),1),c("span",EE,_(d(Ot)(e.item.created_at*1e3).format("YYYY-MM-DD")),1)])):N("",!0),e.item.expired_at?(h(),b("div",PE,[c("span",kE,_(a.$t("userMenu.expirationDate")),1),c("span",SE,_(d(Ot)(e.item.expired_at*1e3).format("YYYY-MM-DD")),1)])):N("",!0)])}}},yd=se(AE,[["__scopeId","data-v-d68d938f"]]);const TE={__name:"AdditionPackageDialog",props:{visible:{type:Boolean,default:!0},list:{type:Array,default:()=>[]},title:{type:String,default:""}},emits:["update:visible"],setup(e,{emit:t}){return(n,a)=>(h(),M(Xe,{class:"addition-package-dialog","model-value":e.visible,title:e.title,"show-footer":!1,width:400,onClosed:a[0]||(a[0]=s=>t("update:visible",!1))},{default:k(()=>[v(d(Ri),{"max-height":390,always:""},{default:k(()=>[(h(!0),b(K,null,ke(e.list,s=>(h(),M(yd,{key:s.id,item:s},null,8,["item"]))),128))]),_:1})]),_:1},8,["model-value","title"]))}};const CE={key:0,class:"file-package-panel"},xE={class:"value"},IE={__name:"AdditionPackagePanel",props:{packageInfo:{type:Object,default:()=>({title:"",usedCount:0,maxCount:0,list:[]})}},setup(e){const t=x(!1);return(n,a)=>(h(),b(K,null,[e.packageInfo.list.length?(h(),b("div",CE,[v(d(In),{type:"primary",underline:!1,onClick:a[0]||(a[0]=s=>t.value=!0)},{default:k(()=>[Q(_(e.packageInfo.title),1)]),_:1}),c("span",xE,_(d(di)(e.packageInfo.usedCount))+"/"+_(d(di)(e.packageInfo.maxCount)),1)])):N("",!0),v(TE,{visible:t.value,"onUpdate:visible":a[1]||(a[1]=s=>t.value=s),list:e.packageInfo.list,title:e.packageInfo.title},null,8,["visible","list","title"])],64))}},uo=se(IE,[["__scopeId","data-v-8d88dc77"]]),$E=()=>{const{t:e}=ye(),t=Oe(),n=O(()=>{var P;let g=t.maxUploads,y=t.maxQuestions,w=t.docCount,m=t.questionCount;t.isFreeMembership&&(g=t.freeMaxDocCount,y=t.freeMaxQuestions,w=t.freeDocCount,m=t.freeQuestionCount);let E=((P=t.currentMembershipPackageInfo)==null?void 0:P.alias)||"";return t.isGiftMembership?E=ku.GIFT:t.isExpiredMembership&&(E=t.currentExpiredMembershipPackageInfo.alias),{alias:E,isFreeMembership:t.isFreeMembership,icon:t.crownIcon,expirationDate:Cn(t.membership.expired_at,"YYYY-MM-DD"),maxPdfPages:t.maxPdfPages,nonPdfFileMaxTokens:t.nonPdfFileMaxTokens,maxUploads:g,maxQuestions:y,docCount:w,questionCount:m,maxQuestionsOfCycle:t.maxQuestions,maxUploadsOfCycle:t.maxUploads,maxOcrPages:t.maxOcrPages,usedOcrPages:t.usedOcrPages}}),a=O(()=>{const g=t.package[Le.DOCUMENT];if(!g)return{list:[]};const{used_count:y,max_count:w}=g;return{title:e("userMenu.filePackages"),usedCount:y,maxCount:w,list:t.userAdditionPackages.filter(m=>m.type===Le.DOCUMENT).map((m,E)=>Z(A({},m),{title:`${e("userMenu.filePackageItem")} ${E+1}`}))}}),s=O(()=>{const g=t.package[Le.PAGE];if(!g)return{list:[]};const{used_count:y,max_count:w}=g;return{title:e("userMenu.pagePackages"),usedCount:y,maxCount:w,list:t.userAdditionPackages.filter(m=>m.type===Le.PAGE).map((m,E)=>Z(A({},m),{title:`${e("userMenu.pagePackageItem")} ${E+1}`}))}}),i=O(()=>{const g=t.package[Le.OCR_PAGE];if(!g)return{list:[]};const{used_count:y,max_count:w}=g;return{title:e("userMenu.ocrPagePackages"),usedCount:y,maxCount:w,list:t.userAdditionPackages.filter(m=>m.type===Le.OCR_PAGE).map((m,E)=>Z(A({},m),{title:`${e("userMenu.ocrPagePackageItem")} ${E+1}`}))}}),o=O(()=>e(t.isFreeMembership?"userMenu.free.fileLabel":"userMenu.pro.fileLabel")),r=O(()=>n.value.maxUploads?Math.min(n.value.docCount/n.value.maxUploads*100,100):0),l=O(()=>e(t.isFreeMembership?"userMenu.free.questionLabel":"userMenu.pro.questionLabel")),u=O(()=>n.value.maxQuestions?Math.min(n.value.questionCount/n.value.maxQuestions*100,100):0),p=O(()=>e("userMenu.pro.ocrPagesLabel")),f=O(()=>n.value.maxOcrPages?Math.min(n.value.usedOcrPages/n.value.maxOcrPages*100,100):0);return{$membershipInfo:n,$filePackageInfo:a,$pagePackageInfo:s,$ocrPagePackageInfo:i,$fileLabel:o,$filePercentage:r,$questionLabel:l,$questionPercentage:u,$ocrPagesLabel:p,$ocrPagesPercentage:f}};const RE={class:"user-membership-panel"},DE={class:"top"},NE={class:"item"},OE={class:"alias-wrapper"},LE={class:"alias"},UE={key:0,class:"new-icon"},ME={key:0,class:"item expiration-date-item"},BE={class:"label"},FE={class:"value"},GE={class:"content"},zE={class:"progress-wrapper"},HE={class:"progress-item"},YE={class:"item"},WE={class:"label"},VE={class:"value"},qE={class:"progress-item"},jE={class:"item"},KE={class:"label"},QE={class:"value"},XE={key:0,class:"progress-item"},JE={class:"item"},ZE={class:"label"},eP={class:"value"},tP={class:"membership-wrapper"},nP={class:"membership-item"},aP={class:"label"},sP={class:"value"},iP={key:0,class:"membership-item"},oP={class:"label"},rP={class:"value"},lP={class:"membership-item"},cP={class:"label"},uP={class:"value"},dP={class:"membership-item"},pP={class:"label"},fP={class:"value"},hP={class:"addition-package-wrapper"},_P={__name:"UserMembershipPanel",props:{showExpiredTag:{type:Boolean,default:!1},showNewIcon:{type:Boolean,default:!1},showExpirationDate:{type:Boolean,default:!1},showTokenPanel:{type:Boolean,default:!1},showFreePerPanel:{type:Boolean,default:!1}},setup(e){const{$membershipInfo:t,$fileLabel:n,$filePercentage:a,$questionLabel:s,$questionPercentage:i,$ocrPagesLabel:o,$ocrPagesPercentage:r,$filePackageInfo:l,$pagePackageInfo:u,$ocrPagePackageInfo:p}=$E();return(f,g)=>(h(),b("div",RE,[c("div",DE,[c("div",NE,[c("div",OE,[c("span",LE,_(d(t).alias),1),e.showExpiredTag?(h(),M(Wt,{key:0,class:"expired-tag",text:f.$t("tags.expired")},null,8,["text"])):(h(),M(te,{key:1,name:d(t).icon},null,8,["name"]))]),v(md,{"source-page":d(qe).SOURCE_PAGE.PROFILE,underline:!1},{default:k(()=>[e.showNewIcon?(h(),b("div",UE,[v(te,{name:"new"})])):N("",!0)]),_:1},8,["source-page"])]),e.showExpirationDate?(h(),b("div",ME,[c("span",BE,_(f.$t("userMenu.expirationDate")),1),c("span",FE,_(d(t).expirationDate),1)])):N("",!0)]),c("div",GE,[c("div",zE,[c("div",HE,[v(d(ra),{percentage:d(a),color:d(Xa)},null,8,["percentage","color"]),c("div",YE,[c("span",WE,_(d(n)),1),c("span",VE,_(`${d(t).docCount}/${d(t).maxUploads}`),1)])]),c("div",qE,[v(d(ra),{percentage:d(i),color:d(Xa)},null,8,["percentage","color"]),c("div",jE,[c("span",KE,_(d(s)),1),c("span",QE,_(`${d(t).questionCount}/${d(t).maxQuestions}`),1)])]),d(t).isFreeMembership?N("",!0):(h(),b("div",XE,[v(d(ra),{percentage:d(r),color:d(Xa)},null,8,["percentage","color"]),c("div",JE,[c("span",ZE,_(d(o)),1),c("span",eP,_(`${d(t).usedOcrPages}/${d(t).maxOcrPages}`),1)])]))]),c("div",tP,[c("div",nP,[c("span",aP,_(f.$t("userMenu.pagesPerFile")),1),c("span",sP,_(`${d(t).maxPdfPages} ${f.$t("userMenu.pages")}`),1)]),e.showTokenPanel?(h(),b("div",iP,[c("span",oP,_(f.$t("userMenu.tokensPerFile")),1),c("span",rP,_(`${d(t).nonPdfFileMaxTokens/1e3}K`),1)])):N("",!0),e.showFreePerPanel?(h(),b(K,{key:1},[c("div",lP,[c("span",cP,_(f.$t("userMenu.free.filePer")),1),c("span",uP,_(d(t).maxUploadsOfCycle),1)]),c("div",dP,[c("span",pP,_(f.$t("userMenu.free.questionPer")),1),c("span",fP,_(d(t).maxQuestionsOfCycle),1)])],64)):N("",!0)]),c("div",hP,[v(uo,{"package-info":d(l)},null,8,["package-info"]),v(uo,{"package-info":d(u)},null,8,["package-info"]),v(uo,{"package-info":d(p)},null,8,["package-info"])])])]))}},gP=se(_P,[["__scopeId","data-v-1ed42249"]]),mP=()=>{const e=Oe(),{t}=ye(),{showUpgradeDialog:n,$proPackage:a}=Lt(),s=x(!1),i=x(!1),o=O(()=>e.subscriptions.length===1?e.subscriptions[0]:e.subscriptions.find(g=>g.goods_id===e.currentMembershipGoodsId)),r=O(()=>{var w,m;let g="",y=(w=e.currentMembershipPackageInfo)==null?void 0:w.alias;return e.isEffectMembership?g+=` ${t(e.isAnnualProMembership?"annualText":"monthlyText")}`:e.isExpiredMembership&&(y=(m=e.currentExpiredMembershipPackageInfo)==null?void 0:m.alias,g+=` ${t(e.currentExpiredMembershipPackageInfo.isAnnualProPkg?"annualText":"monthlyText")}`),`${y}${g}`}),l=O(()=>({username:e.userInfo.name,email:e.userInfo.email,planText:r.value,expired_at:e.membership.expired_at,currentSubscriptionInfo:o.value})),u=O(()=>e.isEffectMembership||e.isExpiredMembership||!!e.subscriptions.length),p=O(()=>!o.value&&!e.isAnnualProMembership),f=O(()=>e.isEffectMembership||!!e.subscriptions.length);return{$currentSubscriptionInfo:o,$subscriptionInfo:l,$showExpirationDate:u,$showSubscribeBtn:p,$showAutoSubscription:f,$subscripting:s,$unsubscripting:i,subscribe:g=>{n({defaultPackage:a.value,autoRenewalMode:!0,sourcePage:g,title:t("subscription.subscribe")})},unsubscribe:()=>T(void 0,null,function*(){if(o.value){yield Gt.confirm(t("subscription.unsubscribeTips"),t("subscription.unsubscribe"));try{i.value=!0,yield Uu(o.value.id),yield e.updateUserMembership(),ge.success(t("subscription.unsubscribeSuccess"))}catch(g){ge.error(t("subscription.unsubscribeError"))}finally{i.value=!1}}})}},vd="https://cdn.pdppt.com/chatdoc/assets/chatdoc-a9f149ef.png";const yP=e=>(vt("data-v-dac4aa8f"),e=e(),bt(),e),vP={ref:"$receipt",class:"receipt"},bP={class:"header"},wP=yP(()=>c("img",{crossorigin:"anonymous",src:vd,alt:"logo"},null,-1)),EP={class:"item-label"},PP=["src"],kP={key:0},SP={key:0},AP={key:1},TP={key:2},CP={key:3},xP={class:"footer"},Qn=280,IP={__name:"Receipt",props:{billingItems:{type:Array,default:()=>[]}},setup(e){const t=e,n=O(()=>t.billingItems.some(s=>s.isActual)),a=x([]);return t.billingItems.forEach(s=>{if(s.label==="User name"){const i=document.createElement("canvas");i.width=Qn*2,i.height=24*2;const o=i.getContext("2d");o.font="24px / 48px sans-serif",o.textBaseline="hanging",o.textAlign="left";const r="...";let{width:l}=o.measureText(s.value);const{width:u}=o.measureText(r);let p=s.value;if(l+u>=Qn*2){for(let f=p.length;f>0;f--)if(p=p.substring(0,f-1),l=o.measureText(p).width,l+u<Qn*2){o.fillText(r,Qn*2-u,(48-24)/2);break}}o.fillText(p,Qn*2-l-u,(48-24)/2),s.img=i.toDataURL()}a.value.push(s)}),(s,i)=>(h(),b("div",vP,[c("div",bP,[wP,c("h1",null,_(s.$t("billing.receipt.title")),1)]),c("div",{class:_e(["content",{"has-actual":n.value}])},[(h(!0),b(K,null,ke(a.value,o=>(h(),b("div",{key:o.label,class:_e(["item",{"is-total":o.isTotal,"is-actual":o.isActual,"is-amount":o.isAmount}])},[c("div",EP,_(o.label),1),o.img?(h(),b("img",{key:0,class:"item-value",src:o.img,alt:"img",crossorigin:"anonymous"},null,8,PP)):(h(),b("div",{key:1,class:"item-value",style:On({"--max-width":`${Qn}px`})},[o.isAmount?(h(),b("div",kP,[c("p",null,"$"+_(d(kn)(o.originMoney/100)),1),o.savedMoney?(h(),b("p",SP," -$"+_(d(kn)(Math.abs(o.savedMoney)/100)),1)):N("",!0)])):o.isTotal?(h(),b("div",AP," $"+_(d(kn)(o.value/100)),1)):o.isActual?(h(),b("div",TP,"¥"+_(d(kn)(o.value)),1)):(h(),b("div",CP,_(o.value),1))],4))],2))),128))],2),c("div",xP,[c("p",null,_(s.$t("billing.receipt.thank")),1),c("p",null,_(d(ea)),1)])],512))}},$P=se(IP,[["__scopeId","data-v-dac4aa8f"]]),RP=(e,t)=>new Promise(n=>{new Sf(t).html(e,{html2canvas:{useCORS:!0},callback:function(s){n(s)}})}),Do=[];let po=!1;const DP=()=>T(void 0,null,function*(){if(!po){for(po=!0;Do.length;)try{const[e,t,n]=Do.shift(),a=v($P,{billingItems:t});a.appContext=e;const s=document.createElement("div");$a(a,s),yield $g(),yield(yield RP(s,{unit:"pt"})).save(`receipt-${n}.pdf`)}catch(e){console.warn(e.message)}po=!1}});function NP(e,t,n){return T(this,null,function*(){Do.push([e,t,n]),yield DP()})}const OP={class:"billing-history"},LP={style:{display:"flex","align-items":"center"}},UP={key:0,class:"receipt-downloading"},MP={key:2},BP={__name:"BillingHistory",props:{userInfo:{type:Object,default:()=>({name:"",email:""})},goodsList:{type:Array,default:()=>[]},source:{type:String,default:xt.MAIN}},setup(e){const t=e,{copy:n}=Fr({legacy:!0}),{t:a}=ye(),{appContext:s}=mn(),i=st({page:1,pageSize:10,total:0,items:[],loading:!1}),o=O(()=>[...t.goodsList].map(({alias:f,days:g,goods_id:y,tagInfo:w})=>(g===Pr&&(f+=` ${a("monthlyText")}`),g===Su&&(f+=` ${a("annualText")}`),w!=null&&w.text&&(f+=` (${w.text})`),{text:f,value:y}))),r=()=>T(this,null,function*(){try{i.loading=!0;const{pageSize:f,page:g}=i,{items:y,total:w}=yield x_({page:g,page_size:f,source:t.source});i.items=y,i.total=w}finally{i.loading=!1}}),l=f=>{var g;return((g=o.value.find(y=>y.value===f))==null?void 0:g.text)||""},u=f=>T(this,null,function*(){yield n(f),ge.success("Copy success!")}),p=f=>T(this,null,function*(){try{if(f.receiptDownloading)return;f.receiptDownloading=!0;let g=[{value:f.order_no,label:a("billing.receipt.orderNo")},{value:f.pay_method,label:a("billing.receipt.payMethod")},{value:f.remote_order_id,label:a("billing.receipt.payNo")},{value:t.userInfo.email,label:a("billing.receipt.userEmail")},{value:t.userInfo.name,label:a("billing.receipt.userName")},{value:l(f.goods_id),label:a("billing.receipt.proName")},{value:f.count,label:a("billing.receipt.items")},{value:Cn(f.pay_at),label:a("billing.receipt.date")},{value:Cn(f.expired_at),label:a("billing.receipt.expDate")},{originMoney:f.origin_money,savedMoney:f.saved_money,label:a("billing.receipt.amount"),isAmount:!0},{value:f.order_money,label:a("billing.receipt.total"),isTotal:!0}];f.expired_at||(g=g.filter(y=>y.label!==a("billing.receipt.expDate"))),[Me.ALIPAY,Me.WECHAT].includes(f.pay_method)&&g.push({value:f.actual_cny_payment_amount,label:a("billing.receipt.actualPayment"),isActual:!0}),yield NP(s,g,f.order_no)}finally{f.receiptDownloading=!1}});return $e([()=>i.page,()=>i.pageSize],()=>r()),r(),(f,g)=>{const y=Jt("loading");return ct((h(),b("div",OP,[v(d(_u),{data:i.items,size:"default"},{default:k(()=>[v(d(on),{label:f.$t("billing.productName"),"min-width":e.source===d(xt).MAIN?200:320},{default:k(({row:w})=>[Q(_(l(w.goods_id)),1)]),_:1},8,["label","min-width"]),v(d(on),{"min-width":360,label:f.$t("billing.orderNo")},{default:k(({row:w})=>[c("div",LP,[c("span",null,_(w.order_no),1),v(d(ut),{class:"copy-icon",onClick:m=>u(w.order_no)},{default:k(()=>[v(d(dh))]),_:2},1032,["onClick"])])]),_:1},8,["label"]),v(d(on),{"min-width":210,label:f.$t("billing.date")},{default:k(({row:w})=>[Q(_(d(Cn)(w.pay_at)),1)]),_:1},8,["label"]),v(d(on),{"min-width":130,label:f.$t("billing.status"),prop:"status"},null,8,["label"]),v(d(on),{"min-width":120,label:f.$t("billing.receipt.title"),align:"center"},{default:k(({row:w})=>[w.receiptDownloading?(h(),b("div",UP,[v(d(Gn),{class:"el-icon is-loading"})])):w.status==="paid"&&w.goods_id!==d(J).FREE?(h(),M(te,{key:1,style:{cursor:"pointer"},name:"download",color:"var(--el-text-color-shallow)",margin:"0",size:16,onClick:m=>p(w)},null,8,["onClick"])):(h(),b("span",MP,"-"))]),_:1},8,["label"])]),_:1},8,["data"]),v(d(ph),vr(d(i_),{"current-page":i.page,"onUpdate:currentPage":g[0]||(g[0]=w=>i.page=w),"page-size":i.pageSize,"onUpdate:pageSize":g[1]||(g[1]=w=>i.pageSize=w),total:i.total,small:""}),null,16,["current-page","page-size","total"])])),[[y,i.loading]])}}},bd=se(BP,[["__scopeId","data-v-3d9ea93d"]]);const FP={__name:"BillingDialog",props:{visible:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>({name:"",email:""})},goodsList:{type:Array,default:()=>[]},source:{type:String,default:xt.MAIN},width:{type:Number,default:1100}},emits:["update:visible"],setup(e,{emit:t}){return(n,a)=>(h(),M(Xe,{class:"billing-dialog","model-value":e.visible,width:e.width,"show-footer":!1,title:n.$t("billing.title"),onClosed:a[0]||(a[0]=s=>t("update:visible",!1))},{default:k(()=>[v(bd,{"user-info":e.userInfo,"goods-list":e.goodsList,source:e.source},null,8,["user-info","goods-list","source"])]),_:1},8,["model-value","width","title"]))}};const GP={class:"user-menu-avatar-info-wrap"},zP={class:"avatar-info"},HP={class:"avatar-name"},YP={class:"avatar-email"},wd={__name:"UserMenuUserInfo",props:{avatarUrl:{type:String,default:""},userName:{type:String,default:""},userEmail:{type:String,default:""}},setup(e){return(t,n)=>(h(),b("div",GP,[v(Ra,{avatar:e.avatarUrl,name:e.userName,size:43,margin:"0 10px"},null,8,["avatar","name"]),c("div",zP,[c("div",HP,[v(d(_t),{placement:"top",content:e.userName,"show-after":2e3},{default:k(()=>[c("span",null,_(e.userName),1)]),_:1},8,["content"])]),c("div",YP,_(e.userEmail),1)])]))}};const WP={class:"subscription-info"},VP={class:"subscription-item"},qP={class:"label"},jP={class:"value"},KP={class:"subscription-item"},QP={class:"label"},XP={class:"value"},JP={class:"subscription-item"},ZP={class:"label"},ek={class:"value"},tk={key:0,class:"subscription-item"},nk={class:"label"},ak={class:"value"},sk={key:1,class:"subscription-item"},ik={class:"label"},ok={class:"value"},rk={__name:"SubscriptionInfo",props:{subscriptionInfo:{type:Object,default:()=>({username:"",email:"",planText:"",expired_at:0,currentSubscriptionInfo:{}})},showExpiredTag:{type:Boolean,default:!1},showUpgradeBtn:{type:Boolean,default:!1},showSubscribeBtn:{type:Boolean,default:!1},showExpirationDate:{type:Boolean,default:!1},showAutoSubscription:{type:Boolean,default:!1},unsubscripting:{type:Boolean,default:!1},subscripting:{type:Boolean,default:!1}},emits:["unsubscribe","subscribe"],setup(e,{emit:t}){return(n,a)=>(h(),b("div",WP,[c("div",VP,[c("span",qP,_(n.$t("username"))+":",1),v(d(_t),{content:e.subscriptionInfo.username,placement:"top","show-after":2e3},{default:k(()=>[c("span",jP,_(e.subscriptionInfo.username),1)]),_:1},8,["content"])]),c("div",KP,[c("span",QP,_(n.$t("email"))+":",1),c("span",XP,_(e.subscriptionInfo.email),1)]),c("div",JP,[c("span",ZP,_(n.$t("subscription.plan"))+":",1),c("span",ek,[c("span",null,_(e.subscriptionInfo.planText),1),e.showExpiredTag?(h(),M(Wt,{key:0,class:"expired-tag",text:n.$t("tags.expired")},null,8,["text"])):N("",!0),e.showUpgradeBtn?(h(),M(md,{key:1})):N("",!0)])]),e.showExpirationDate?(h(),b("div",tk,[c("span",nk,_(n.$t("subscription.expiration"))+":",1),c("span",ak,_(d(Ot)(e.subscriptionInfo.expired_at*1e3).format("YYYY-MM-DD")),1)])):N("",!0),e.showAutoSubscription?(h(),b("div",sk,[c("span",ik,_(n.$t("subscription.autoSubscription"))+":",1),c("span",ok,[Q(_(e.subscriptionInfo.currentSubscriptionInfo?"Yes":"No")+" ",1),e.subscriptionInfo.currentSubscriptionInfo?(h(),b(K,{key:0},[e.unsubscripting?(h(),M(d(ut),{key:1},{default:k(()=>[v(d(Gn))]),_:1})):(h(),M(d(In),{key:0,type:"primary",underline:!1,onClick:a[0]||(a[0]=s=>t("unsubscribe"))},{default:k(()=>[Q(_(n.$t("subscription.unsubscribe")),1)]),_:1}))],64)):e.showSubscribeBtn?(h(),b(K,{key:1},[e.subscripting?(h(),M(d(ut),{key:1},{default:k(()=>[v(d(Gn))]),_:1})):(h(),M(d(In),{key:0,type:"primary",underline:!1,onClick:a[1]||(a[1]=s=>t("subscribe"))},{default:k(()=>[Q(_(n.$t("subscription.subscribe")),1)]),_:1}))],64)):N("",!0)])])):N("",!0)]))}},lk=se(rk,[["__scopeId","data-v-eae52288"]]);const ck=e=>(vt("data-v-57c9973b"),e=e(),bt(),e),uk=ck(()=>c("li",{class:"el-dropdown-menu__item--divided"},null,-1)),dk=["href"],pk={__name:"UserMenu",setup(e){const t=x(!1),n=x(!1),a=x(Yt.PROFILE),s=x(!1),i=dt(),{t:o}=ye(),r=Oe(),{subscribe:l,unsubscribe:u,$subscriptionInfo:p,$showExpirationDate:f,$showSubscribeBtn:g,$showAutoSubscription:y,$unsubscripting:w}=mP(),m={BILLING_HISTORY:"billing-history",BILLING_HELP:"billing-help",SUBSCRIPTION:"subscription",SETTINGS:"settings",SIGN_OUT:"sign-out"},E=O(()=>`${window.location.origin}/subscription`),P=O(()=>[{divided:!0,text:o("billing.title"),type:m.BILLING_HISTORY},{text:o("billing.help"),type:m.BILLING_HELP,url:E.value},{text:o("subscription.title"),type:m.SUBSCRIPTION},{text:o("settings.title"),type:m.SETTINGS},{divided:!0,text:o("signOut"),type:m.SIGN_OUT,icon:"logout"}]),S=O(()=>r.isFreeMembership&&!r.isExpiredMembership),D=O(()=>[...r.membershipPackages,...r.additionPackages]),C=O(()=>{let Y=r.maxUploads-r.docCount,I=r.maxQuestions-r.questionCount;return r.isFreeMembership&&(Y=r.freeMaxDocCount-r.freeDocCount,I=r.freeMaxQuestions-r.freeQuestionCount),Y>0&&I>0}),$=Y=>{Y&&(r.getDocUsageInfo(),r.getUserAdditionPackages(),r.getSubscriptions())},G=Y=>{switch(Y){case m.BILLING_HISTORY:W();break;case m.SUBSCRIPTION:F();break;case m.SETTINGS:B(Yt.PREFERENCE);break;case m.SIGN_OUT:U();break}},U=()=>T(this,null,function*(){yield r.logout(),ge.warning(o("signedOut")),Fe.emit("signOut"),i.push({name:"upload"})}),F=()=>{r.getSubscriptions(),r.getLastOrderInfo(),t.value=!0},B=(Y=Yt.PROFILE)=>{a.value=Y,s.value=!0},W=()=>T(this,null,function*(){n.value=!0});return(Y,I)=>(h(),b(K,null,[d(r).userInfo?(h(),M(d($i),{key:0,trigger:"click","popper-class":"user-menu-dropdown",placement:"bottom-end",onCommand:G,onVisibleChange:$},{dropdown:k(()=>[v(d(xi),null,{default:k(()=>[v(wd,{"avatar-url":d(r).avatarUrl,"user-name":d(r).userInfo.name,"user-email":d(r).userInfo.email,onClick:I[0]||(I[0]=R=>B(d(Yt).PROFILE))},null,8,["avatar-url","user-name","user-email"]),uk,v(gP,{"show-expired-tag":d(r).isExpiredMembership,"show-new-icon":S.value,"show-expiration-date":d(f),"show-token-panel":!d(r).isFreeMembership,"show-free-per-panel":d(r).isFreeMembership},null,8,["show-expired-tag","show-new-icon","show-expiration-date","show-token-panel","show-free-per-panel"]),(h(!0),b(K,null,ke(P.value,R=>(h(),M(d(Ii),{key:R.type,divided:R.divided,command:R.type,class:_e({"is-link":!!R.url})},{default:k(()=>[R.url?(h(),b(K,{key:0},[R.url?(h(),b("a",{key:0,href:R.url,target:"_blank",class:"link",rel:"noopener noreferrer"},[R.icon?(h(),M(te,{key:0,name:R.icon,size:20,class:"dropdown-item-icon"},null,8,["name"])):N("",!0),c("span",null,_(R.text),1)],8,dk)):N("",!0)],64)):(h(),b(K,{key:1},[R.icon?(h(),M(te,{key:0,name:R.icon,size:20,class:"dropdown-item-icon"},null,8,["name"])):N("",!0),c("span",null,_(R.text),1)],64))]),_:2},1032,["divided","command","class"]))),128))]),_:1})]),default:k(()=>[v(d(fh),{"is-dot":"",hidden:C.value},{default:k(()=>[v(Ra,{class:"avatar-handler-icon",avatar:d(r).avatarUrl,name:d(r).userInfo.name,size:32,"crown-icon":d(r).crownIcon,"show-crown":d(r).isEffectMembership},null,8,["avatar","name","crown-icon","show-crown"])]),_:1},8,["hidden"])]),_:1})):N("",!0),v(Xe,{modelValue:t.value,"onUpdate:modelValue":I[1]||(I[1]=R=>t.value=R),class:"subscription-dialog",width:558,"show-footer":!1,title:Y.$t("subscription.title")},{default:k(()=>[v(lk,{"subscription-info":d(p),"show-expiration-date":d(f),"show-subscribe-btn":d(g),"show-upgrade-btn":d(r).isFreeMembership,"show-auto-subscription":d(y),"show-expired-tag":d(r).isExpiredMembership,unsubscripting:d(w),onSubscribe:d(l),onUnsubscribe:d(u)},null,8,["subscription-info","show-expiration-date","show-subscribe-btn","show-upgrade-btn","show-auto-subscription","show-expired-tag","unsubscripting","onSubscribe","onUnsubscribe"])]),_:1},8,["modelValue","title"]),v(FP,{visible:n.value,"onUpdate:visible":I[2]||(I[2]=R=>n.value=R),"user-info":{name:d(r).userInfo.name,email:d(r).userInfo.email},"goods-list":D.value},null,8,["visible","user-info","goods-list"]),v(td,{visible:s.value,"onUpdate:visible":I[3]||(I[3]=R=>s.value=R),"active-tab":a.value,"onUpdate:activeTab":I[4]||(I[4]=R=>a.value=R)},Ci({_:2},[void 0]),1032,["visible","active-tab"])],64))}},fk=se(pk,[["__scopeId","data-v-57c9973b"]]);const hk={class:"header-logo"},_k={class:"app-name"},gk={__name:"HeadLogo",props:{iconSize:{type:Number,default:30},title:{type:String,default:"ChatDOC"},to:{type:Object,default:()=>({name:"upload"})}},setup(e){const t=e,n=O(()=>{let a=`${t.iconSize}px`;return{width:a,height:a}});return(a,s)=>{const i=rt("router-link");return h(),M(i,{to:e.to},{default:k(()=>[c("div",hk,[c("img",{style:On(n.value),crossorigin:"anonymous",class:"logo",src:vd,alt:"logo"},null,4),c("h1",_k,_(e.title),1)])]),_:1},8,["to"])}}},Gr=se(gk,[["__scopeId","data-v-1a5cbc41"]]),zr=gs({id:"collectionDoc",state:()=>({collectionInfo:{documents:[]}}),getters:{isHasInteractions:e=>e.collectionInfo.interaction_count,isCollectionEmpty:e=>e.collectionInfo.status===je.UN_PARSED,isCollectionAllDocsError:e=>e.collectionInfo.status<0,isCollectionNormal:e=>e.collectionInfo.status>=je.ELEMENT_PARSED,isCollectionParsing:e=>e.collectionInfo.status===je.PARSING,isEmptyCollection:e=>e.collectionInfo.document_count===0,isCollectionDisabled(){return this.isCollectionEmpty||this.isCollectionParsing||this.isCollectionAllDocsError},collectionFilesFully(e){return e.collectionInfo.documents||[]},collectionFilesFullyMap(){return this.collectionFilesFully.reduce((e,t)=>(e[t.id]=t,e),{})}},actions:{setCollectionInfo(e){const t=[...this.collectionInfo.documents];e.documents.forEach(n=>{var a,s;n.includeChat=(s=(a=t.find(i=>i.id===n.id))==null?void 0:a.includeChat)!=null?s:!0}),this.collectionInfo=e},removeDocFromFilesMap(e){Ff(this.collectionInfo.documents,t=>t.id===e),this.updateCollectionSelfInfo({document_count:this.collectionInfo.document_count-1})},updateDocFromFilesMap(e,t={}){const n=this.collectionInfo.documents.findIndex(a=>a.id===e);this.collectionInfo.documents[n]=A(A({},this.collectionInfo.documents[n]),t)},addDocFromFilesMap(e){this.collectionInfo.documents.unshift(...e),this.updateCollectionSelfInfo({document_count:this.collectionInfo.document_count+e.length})},updateCollectionSelfInfo(e){this.collectionInfo=A(A({},this.collectionInfo),e)},resetCollectionState(){this.collectionInfo={documents:[]}}}});const mk=e=>(vt("data-v-a38a2010"),e=e(),bt(),e),yk={class:"header-view"},vk={class:"title-wrapper"},bk=mk(()=>c("div",{class:"side-list-collapse-handler-wrap"},null,-1)),wk={key:0,class:"share-info-wrap"},Ek={class:"inviter-name"},Pk={class:"inviter-msg"},kk={class:"inviter-filename"},Sk={class:"right-wrapper"},Ak={key:1,class:"discord right-item"},Tk=["href"],Ck={class:"discord-label"},xk={class:"right-item"},Ik=["href","target"],$k={key:2,class:"right-item"},Rk={class:"login-status-wrap right-item"},Dk={__name:"HeaderView",setup(e){const t=dt(),n=At(),a=kr(),s=Oe(),i=zr(),{showUpgradeDialog:o}=Lt(),r=O(()=>a.shareInfo),l=O(()=>{if(a.isCollectionShare){const f=i.collectionInfo.id?i.collectionInfo.document_count:a.shareInfo.collectionDocCount;return`${a.shareInfo.uploadName} (${f} files)`}return a.shareInfo.uploadName}),u=()=>{t.push({name:"upload"})},p=()=>{o({activeTabPaneName:Bt.REFER})};return(f,g)=>{const y=rt("router-link");return h(),b("div",yk,[c("div",vk,[bk,v(Gr)]),r.value.shareId?(h(),b("div",wk,[v(Ra,{name:r.value.inviterName,avatar:r.value.inviterAvatar,size:22,margin:"0 4px 0 0"},null,8,["name","avatar"]),v(d(_t),{placement:"top","show-after":2e3,content:r.value.inviterName},{default:k(()=>[c("span",Ek,_(r.value.inviterName),1)]),_:1},8,["content"]),c("span",Pk,_(f.$t("share.inviteMsg")),1),v(d(_t),{placement:"top","show-after":2e3,content:l.value},{default:k(()=>[c("span",kk,_(l.value),1)]),_:1},8,["content"])])):N("",!0),c("div",Sk,[d(s).isLogin&&d(at).hasInviteUser?(h(),b("div",{key:0,class:"quota-bonus-notice",onClick:p},[c("span",null,_(f.$t("upgrade.referFriend.entryNotice")),1),v(d(ut),null,{default:k(()=>[v(d(wr))]),_:1})])):N("",!0),d(at).hasDiscord?(h(),b("div",Ak,[c("a",{href:d(Dt).DISCORD,target:"_blank",rel:"noopener noreferrer"},[v(te,{size:25,name:"discord"}),c("span",Ck,_(f.$t("joinDiscord")),1)],8,Tk)])):N("",!0),c("div",xk,[c("a",{href:d(t).resolve({name:"apiHome"}).href,rel:"noopener noreferrer",target:d(hn)?"_blank":"_self"},_(f.$t("chatdocApi.api")),9,Ik)]),d(n).name!=="upload"&&d(s).isLogin?(h(),b("div",$k,[v(d(he),{type:"primary",onClick:u},{default:k(()=>[Q(_(f.$t("uploadBtn")),1)]),_:1})])):N("",!0),c("div",Rk,[d(s).userInfo?(h(),M(fk,{key:0})):(h(),M(y,{key:1,to:{name:"signIn",query:{shareId:r.value.shareId||void 0}}},{default:k(()=>[Q(_(f.$t("signIn")),1)]),_:1},8,["to"]))])])])}}},Nk=se(Dk,[["__scopeId","data-v-a38a2010"]]);const Ok={class:"layout-wrapper"},Lk={__name:"MainLayout",setup(e){const t=Oe();return(n,a)=>{const s=rt("router-view");return d(t).userInfoLoaded?(h(),b(K,{key:0},[v(Nk),c("div",Ok,[v(s,null,{default:k(({Component:i})=>[(h(),M(gu,{include:"Home"},[(h(),M(va(i)))],1024))]),_:1})])],64)):N("",!0)}}},Uk="https://cdn.pdppt.com/chatdoc/assets/sign-bg-b8b2cff8.png",Mk="https://cdn.pdppt.com/chatdoc/assets/baidu-sign-bg-4bb01004.png",Bk="https://cdn.pdppt.com/chatdoc/assets/glm-sign-bg-38b99a50.png";const Fk={class:"layout-wrapper"},Gk={class:"container"},zk={key:0,class:"left"},Hk={class:"left-content"},Yk={class:"left-desc-1"},Wk={class:"left-desc-2"},Vk={class:"left-bg"},qk=["src"],jk={class:"right"},Kk={__name:"WhiteLayout",setup(e){const t=At(),n=O(()=>os?Mk:Di?Bk:Uk);return(a,s)=>{const i=rt("router-view");return h(),b("div",Fk,[c("div",Gk,[d(t).meta.showLeftLayout?(h(),b("div",zk,[v(Gr,{"icon-size":48}),c("div",Hk,[c("div",Yk,_(a.$t("signInPage.left.text1")),1),c("div",Wk,_(a.$t("signInPage.left.text2")),1),c("div",Vk,[c("img",{src:n.value,crossorigin:"anonymous",alt:""},null,8,qk)])])])):N("",!0),c("div",jk,[v(i)])])])}}},Qk=se(Kk,[["__scopeId","data-v-e85dcaba"]]),Xk=()=>{const{t:e}=ye(),t=Oe(),n=yn(),{showUpgradeDialog:a}=Lt(),s=x(!1),i=O(()=>Ot().valueOf()>Ot(n.expiredAt*1e3).valueOf()),o=O(()=>n.subscriptions.length===1?n.subscriptions[0]:n.subscriptions.find(g=>g.goods_id===n.currentApiPlanGoodsId)),r=O(()=>{let g="";return n.isEffectApiMembership&&(g+=` ${e(n.isAnnualApiBasicMembership?"annualText":"monthlyText")}`),`${n.planName}${g}`}),l=O(()=>({username:t.userInfo.name,email:t.userInfo.email,planText:r.value,expired_at:n.expiredAt,currentSubscriptionInfo:o.value})),u=O(()=>n.isEffectApiMembership||!!n.subscriptions.length),p=O(()=>!o.value),f=O(()=>n.isEffectApiMembership||!!n.subscriptions.length);return{$planText:r,$apiKeyIsExpired:i,$apiKeySubscriptionInfo:l,$unsubscripting:s,$showExpirationDate:u,$showSubscribeBtn:p,$showAutoSubscription:f,subscribeApiKey:()=>{a({defaultPackage:n.currentApiPlanInfo,autoRenewalMode:!0,isChatDocApiMode:!0})},unsubscribeApiKey:()=>T(void 0,null,function*(){if(o.value){yield Gt.confirm(e("subscription.unsubscribeTips"),e("subscription.unsubscribe"));try{s.value=!0,yield Uu(o.value.id),yield n.updateUserApiMembership(),ge.success(e("subscription.unsubscribeSuccess"))}catch(g){ge.error(e("subscription.unsubscribeError"))}finally{s.value=!1}}})}};const Jk=e=>(vt("data-v-3f0abe6f"),e=e(),bt(),e),Zk={class:"header"},e1={class:"header-navs"},t1={class:"left"},n1=["href"],a1={class:"right"},s1=Jk(()=>c("li",{class:"el-dropdown-menu__item--divided"},null,-1)),i1={class:"api-membership-panel"},o1={class:"progress-wrapper"},r1={class:"common-item"},l1={class:"common-item expired-item"},c1={class:"progress-item"},u1={class:"item-value"},d1={class:"label"},p1={class:"value"},f1={key:0},h1={class:"progress-item"},_1={class:"item-value"},g1={class:"label"},m1={class:"value"},y1={key:0},v1=["href"],b1={key:2};const w1={__name:"ChatdocApiHeader",setup(e){const t=Oe(),n=yn(),{subscribeApiKey:a,unsubscribeApiKey:s,$unsubscripting:i,$apiKeyIsExpired:o,$apiKeySubscriptionInfo:r,$planText:l,$showExpirationDate:u,$showSubscribeBtn:p,$showAutoSubscription:f}=Xk(),{t:g}=ye(),y=dt(),w=At(),m=x(!1),E=x(Yt.PROFILE),P={UPGRADE:"upgrade",BILLING_HELP:"billing-help",SIGN_OUT:"sign-out"},S=O(()=>[{to:"apiHome",text:g("chatdocApi.headerNav.overview")},{href:Dt.API_DEMO,text:g("chatdocApi.headerNav.demo")},{href:Dt.API_REFERENCE,text:g("chatdocApi.headerNav.reference")},{to:"upload",text:g("chatdocApi.headerNav.chatdoc")}]),D=O(()=>`${window.location.origin}/subscription`),C=O(()=>{let V=[{divided:!0,text:g("upgrade.planButton"),type:P.UPGRADE},{text:g("billing.help"),type:P.BILLING_HELP,url:D.value},{divided:!0,text:g("signOut"),type:P.SIGN_OUT,icon:"logout"}];return w.name==="pricing"&&(V=V.filter(q=>q.type!==P.UPGRADE),V.forEach(q=>{q.type===P.BILLING_HELP&&(q.divided=!0)})),V}),$=O(()=>n.maxQuestionOfCycle>0?Math.min(n.questionUsage/n.maxQuestionOfCycle*100,100):0),G=O(()=>n.maxPagesOfCycle>0?Math.min(n.pageUsage/n.maxPagesOfCycle*100,100):0),U=O(()=>n.pageUsage>=1e3?`${n.pageUsage/1e3}k`:n.pageUsage),F=O(()=>n.questionUsage>=1e3?`${n.questionUsage/1e3}k`:n.questionUsage),B=(V=Yt.PROFILE)=>{E.value=V,m.value=!0},W=()=>{y.push({name:"pricing"})},Y=()=>T(this,null,function*(){yield t.logout(),ge.warning(g("signedOut")),Fe.emit("signOut"),y.replace({name:"apiHome"})}),I=V=>{switch(V){case P.UPGRADE:W();break;case P.SIGN_OUT:Y();break}},R=V=>{V&&(n.getSummary(),n.getApiUserFilePackages())};return $e(E,V=>{V===Yt.SUBSCRIPTION&&n.getSubscriptions()}),(V,q)=>{const ne=rt("router-link");return h(),b(K,null,[c("header",Zk,[v(Gr,{"icon-size":30,title:V.$t("chatdocApi.headerTitle"),to:{name:"apiHome"}},null,8,["title"]),c("div",e1,[c("nav",t1,[(h(!0),b(K,null,ke(S.value,(ae,Re)=>(h(),b("span",{key:Re},[ae.href?(h(),b("a",{key:0,href:ae.href,class:"left-nav",target:"_blank",rel:"noopener noreferrer"},_(ae.text),9,n1)):ae.to?(h(),M(ne,{key:1,class:"left-nav",to:{name:ae.to}},{default:k(()=>[Q(_(ae.text),1)]),_:2},1032,["to"])):N("",!0)]))),128))]),c("div",a1,[d(t).isLogin?(h(),M(d($i),{key:0,trigger:"click","popper-class":"user-menu-dropdown chatdoc-api-user-menu-dropdown",placement:"bottom-end",onVisibleChange:R,onCommand:I},{dropdown:k(()=>[v(d(xi),null,{default:k(()=>[v(wd,{"avatar-url":d(t).avatarUrl,"user-email":d(t).userInfo.email,"user-name":d(t).userInfo.name,onClick:q[0]||(q[0]=ae=>B(d(Yt).PROFILE))},null,8,["avatar-url","user-email","user-name"]),d(n).currentApiPlanInfo?(h(),b(K,{key:0},[s1,c("div",i1,[c("div",o1,[c("div",r1,_(d(l)),1),c("div",l1,[c("span",null,_(V.$t("userMenu.expirationDate")),1),c("span",null,_(d(Ot)(d(n).expiredAt*1e3).format("YYYY-MM-DD")),1)]),c("div",c1,[v(d(ra),{percentage:G.value,color:d(Xa),"show-text":!1},null,8,["percentage","color"]),c("div",u1,[c("div",d1,_(V.$t("chatdocApi.pageLimit")),1),c("div",p1,[c("span",null,_(U.value)+"/"+_(d(n).maxPagesOfCycle/1e3)+"k ",1),d(n).isAnnualApiBasicMembership?(h(),b("span",f1," /"+_(V.$t("monthlyText")),1)):N("",!0)])])]),c("div",h1,[v(d(ra),{percentage:$.value,color:d(Xa),"show-text":!1},null,8,["percentage","color"]),c("div",_1,[c("div",g1,_(V.$t("chatdocApi.questionLimit")),1),c("div",m1,[c("span",null,_(F.value)+"/"+_(d(n).maxQuestionOfCycle/1e3)+"k ",1),d(n).isAnnualApiBasicMembership?(h(),b("span",y1," /"+_(V.$t("monthlyText")),1)):N("",!0)])])])])])],64)):N("",!0),(h(!0),b(K,null,ke(C.value,ae=>(h(),M(d(Ii),{key:ae.type,command:ae.type,class:_e({"is-link":!!ae.url}),divided:ae.divided},{default:k(()=>[ae.icon?(h(),M(te,{key:0,name:ae.icon,size:20,class:"dropdown-item-icon"},null,8,["name"])):N("",!0),ae.url?(h(),b("a",{key:1,href:ae.url,target:"_blank",rel:"noopener noreferrer",class:"link"},[c("span",null,_(ae.text),1)],8,v1)):(h(),b("span",b1,_(ae.text),1))]),_:2},1032,["command","class","divided"]))),128))]),_:1})]),default:k(()=>[v(Ra,{size:32,avatar:d(t).avatarUrl,name:d(t).userInfo.name},null,8,["avatar","name"])]),_:1})):(h(),M(ne,{key:1,to:{name:"signIn",query:{redirect:"apiHome"}}},{default:k(()=>[Q(_(V.$t("signIn")),1)]),_:1}))])])]),v(td,{visible:m.value,"onUpdate:visible":q[1]||(q[1]=ae=>m.value=ae),"active-tab":E.value,"onUpdate:activeTab":q[2]||(q[2]=ae=>E.value=ae)},{"tab-panes":k(()=>[N("",!0)]),_:1},8,["visible","active-tab"])],64)}}},E1=se(w1,[["__scopeId","data-v-3f0abe6f"]]);const P1={key:0,class:"container"},k1={__name:"ApiLayout",setup(e){const t=Oe();return(n,a)=>{const s=rt("router-view");return d(t).userInfoLoaded?(h(),b("div",P1,[v(E1),v(s)])):N("",!0)}}},S1=se(k1,[["__scopeId","data-v-46ef1a6b"]]),Bl=["/documents","/shares"],A1=e=>{const t=Oe(),n=At(),a=dt(),s=i=>{const{reason:o,status:r,url:l,method:u}=i;if(e==null||e(i),r===400&&["/documents"].includes(l)&&u==="get"&&o==="no permission"&&a.replace({name:"upload"}),r===401){t.resetUserState();const{name:p}=n;p&&!["upload","share","signIn","signUp","resetPassword"].includes(p)&&a.replace({name:"upload"})}r===403&&(o==="banned"?(t.resetUserState(),t.clearFileCache(),!["/users/sign-up/apply"].includes(l)&&a.replace({name:"signIn"})):Bl.includes(l)&&a.replace({name:"fileNotFound"})),r===404&&Bl.includes(l)&&a.replace({name:"fileNotFound"})};hh(i=>{if(i.type==="http")return s(i),!1;if(i instanceof Error)throw i;return console.warn(i),!1}),window.addEventListener("unhandledrejection",function(i){const{reason:o}=i;(o.name==="UnexpectedResponseException"||!(o instanceof Error)||o.message==="memory access out of bounds")&&i.preventDefault(),o.type==="http"&&(i.preventDefault(),s(o))})};const T1={__name:"App",setup(e){const t=At();A1(a=>{ge.error(a.message)});const n=O(()=>{switch(t.meta.layout){case"main":return Lk;case"white":return Qk;case"api":return S1;default:return null}});return(a,s)=>(h(),M(d(_h),{locale:d(Mh)},{default:k(()=>[(h(),M(va(n.value)))]),_:1},8,["locale"]))}},C1={__name:"Index",setup(e,{expose:t}){const n=Er(()=>xa(()=>import("./ChatDoc-3a16c913.js"),[window.__toAssetUrl("ChatDoc-3a16c913.js"),window.__toAssetUrl("vendor-2-e250ed0d.js"),window.__toAssetUrl("vendor-1-8c77151e.js"),window.__toAssetUrl("vendor-4-87e1e3f9.js"),window.__toAssetUrl("ChatDoc-434bb5c7.css")],import.meta.url)),a=At(),s=x(),i=O(()=>a.params.id);return t({refreshDocInfoIfOpened:(o,r=!1)=>T(this,null,function*(){o.id===i.value&&(yield s.value.setNewDocInfo(o,r))})}),(o,r)=>(h(),M(d(n),{ref_key:"$chatDoc",ref:s,"doc-id":i.value},null,8,["doc-id"]))}},Ed=()=>{const{shareParams:e}=Tu();return e},I8=e=>{const t=Ed(),n=new URLSearchParams;Object.entries(t).forEach(([s,i])=>{n.append(s,i)});let a=n.toString();return a&&(a=`?${a}`),`${Cu}/documents/${e}/download${a}`},$8=`${Ni}/questions/stream`,R8=`${Ni}/questions/element/stream`,D8=(e,t,n,a)=>T(void 0,null,function*(){const s=Ed();t=A(A({},t),s);const i=`${location.origin}${location.pathname}${e.split("./")[1]}`,{data:o,key:r}=wu(n),l=Dr(i,t),u=yield fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:r?o:JSON.stringify(n),signal:a});if(u.status!==200){let p="Network exception, please try again later.",f={};try{const g=yield u.json();p=Vs(g,"data[0].msg")||Vs(g,"detail")||p,f=Vs(g,"data")||{}}catch(g){console.error(g)}return Promise.reject({status:u.status,message:p,info:f,type:"http"})}return u}),N8=(e,t)=>{const n=e.getReader();let a=[];return n.read().then(function s({done:i,value:o}){const r=new TextDecoder().decode(o);if(a.push(r),(a.length>1||i)&&(t(i,a.join("")),a=[]),!i)return n.read().then(s)})},O8=e=>re.get("/questions/recommend",{params:{upload_id:e}}),fo=(e={})=>{const t=new URLSearchParams;return Object.keys(e).forEach(n=>{const a=e[n];Array.isArray(a)?a.forEach(s=>{t.append(n,s)}):t.append(n,a)}),re.get("/documents/list",{params:t})},Pd=e=>re.get("/documents/list-paginate",{params:e}),kd=(e,t={})=>re.get("/documents",{params:A({upload_id:e},t)}),L8=e=>re.get(`/documents/${e}/ocr-mark`),x1=(e,t=null,n)=>{const a=new FormData;return a.append("file",e),re.post("/documents",a,{params:t,signal:n,timeout:0})},I1=e=>re.post("/documents/collection",{name:e}),$1=e=>re.post("/documents/create-from-url",e,{timeout:0}),U8=(e,t)=>{const n=new URLSearchParams;return t.forEach(a=>{n.append("page",a)}),re.get(`/documents/${e}/elements`,{params:n})},M8=e=>re.get("/questions/interactions/pagination",{params:e}),B8=e=>re.get("/questions/export/image",{params:e}),F8=e=>re.delete("/questions/interactions",{params:e}),R1=e=>re.delete("/documents",{params:{upload_id:e}}),D1=(e,t)=>re.put(`/documents/${e}`,t),N1=e=>re.get("/shares",{params:e}),G8=e=>re.post("/shares",e),z8=e=>re.put("/shares",e),H8=(e,t)=>re.post("/questions/feedback",t,{params:e}),Y8=e=>re.delete("/questions/feedback",{params:e}),O1=e=>re.post("/documents/clone",e),W8=(e,t)=>re.post(`/documents/${e}/search`,{keyword:t}),V8=e=>re.get("/summaries",{params:e}),L1=(e,t)=>re.put(`/documents/${e}/re-parse`,{params:t}),U1=(e,t)=>re.post(`/documents/ocr/${e}/re-parse`,{params:t}),q8=e=>re.get(`/documents/range/${e}`),Sd=(e,t)=>re.post("/documents/third-party-url",{url:e},{params:{collection_id:t}}),M1=+"30"||30,Ad=gs("operation",{state:()=>({hasLeft:!1}),getters:{MAX_DURATION_TIME:()=>M1*60*1e3}}),un=Ad(oi);let hi=setTimeout(()=>{un.hasLeft=!0},un.MAX_DURATION_TIME);document.addEventListener("visibilitychange",()=>{un.hasLeft=document.hidden,clearTimeout(hi),un.hasLeft||(hi=setTimeout(()=>{un.hasLeft=!0},un.MAX_DURATION_TIME))});document.addEventListener("mousemove",Gf(()=>{clearTimeout(hi),un.hasLeft=!1,hi=setTimeout(()=>{un.hasLeft=!0},un.MAX_DURATION_TIME)},1e3,{leading:!0}),{capture:!0});const B1={key:0},F1={key:1,"data-highlight":"true",class:"filename-search-highlight"},G1={__name:"DocListName",props:{filename:{type:String,default:""},keyword:{type:String,default:""}},setup(e,{expose:t}){const n=e,a=x([]),s=x(null);function i(r,l){const u=[];if(!l)u.push({content:r,type:"normal"});else{let p=0,f=r.toLowerCase().indexOf(l.toLowerCase());for(;f!==-1;){const g=r.substring(p,f),y=r.substring(f,f+l.length);u.push({content:g,type:"normal"},{content:y,type:"keyword"}),p=f+l.length,f=r.toLowerCase().indexOf(l.toLowerCase(),p)}u.push({content:r.substring(p),type:"normal"})}return u}const o=()=>T(this,null,function*(){const r=s.value;if(!r)return;const l=r.querySelector('[data-highlight="true"]');if(l){const u=i(n.filename,n.keyword),p="...",{font:f}=window.getComputedStyle(l),g=u[0].content,y=u.reduce((U,F,B)=>B>=2?`${U}${F.content}`:U,""),w=Un(g,f),m=Un(y,f),E=Un(l.textContent,f),P=1,S=Un(p,f)+P,D=getComputedStyle(r),C=Number.parseInt(D.maxWidth)||Number.parseInt(D.width)||r.clientWidth,$=C-S<=(l==null?void 0:l.offsetLeft),G=C-w-S<E;if($||G){const U=C-S-E-m;let F="";U>0&&(F=g.split("").reverse().reduce((W,Y)=>{const I=`${Y}${W}`;return Un(I,f)>U?W:I},""));const B=`${p}${F}${l.innerText}${y}`;a.value=i(B,n.keyword)}else a.value=i(n.filename,n.keyword)}});return $e(()=>n.keyword,()=>{a.value=i(n.filename,n.keyword)},{immediate:!0}),t({handleShowHighlightWhenInvisible:o}),(r,l)=>(h(),b("span",{ref_key:"$filenameRef",ref:s,class:"filename-container"},[(h(!0),b(K,null,ke(a.value,(u,p)=>(h(),b("span",{key:`${u.content}_${p}`},[u.type==="normal"?(h(),b("span",B1,_(u.content),1)):N("",!0),u.type==="keyword"?(h(),b("span",F1,_(u.content),1)):N("",!0)]))),128))],512))}},Ja=se(G1,[["__scopeId","data-v-876d3f72"]]);const z1=["textContent"],H1={class:"dialog-footer"},Y1={__name:"ConfirmDialog",props:{title:{type:String,default:"",required:!0},subTitle:{type:String,default:""},header:{type:Object,default:()=>null},message:{type:String,default:""},cancelText:{type:String,default:"Cancel"},confirmText:{type:String,default:"OK"},onCancel:{type:Function,default:()=>{}},onConfirm:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},beforeClose:{type:Function,default:()=>{}},messageStyle:{type:Object,default:()=>null}},setup(e){const t=e,n=x(!0),a=x(!1),s={cancel:"cancel",confirm:"confirm",close:"close"},i=()=>{r(()=>{n.value=!1,t.onCancel(s.cancel)},s.cancel)},o=()=>{r(()=>{n.value=!1,t.onConfirm(s.confirm)},s.confirm)},r=(l,u=s.close)=>{if(t.beforeClose){a.value=!0;const p=t.beforeClose(u,()=>{l(),a.value=!1,u===s.close&&t.onClose(u)});p&&p instanceof Promise&&p.finally(()=>{a.value=!1})}else l(),u===s.close&&t.onClose(u)};return(l,u)=>(h(),M(Xe,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=p=>n.value=p),class:"remove-file-prompt",title:e.title,"sub-title":e.subTitle,"before-close":r,width:"600"},Ci({footer:k(()=>[c("span",H1,[e.cancelText?(h(),M(d(he),{key:0,onClick:i},{default:k(()=>[Q(_(e.cancelText),1)]),_:1})):N("",!0),v(d(he),{type:"primary",loading:a.value,onClick:o},{default:k(()=>[Q(_(e.confirmText),1)]),_:1},8,["loading"])])]),default:k(()=>[c("div",{style:On(e.messageStyle)},[Sl(e.message)?(h(),M(va(e.message),{key:0})):(h(),b("span",{key:1,textContent:_(e.message)},null,8,z1))],4)]),_:2},[e.header&&Sl(e.header)?{name:"header",fn:k(()=>[(h(),M(va(e.header)))]),key:"0"}:void 0]),1032,["modelValue","title","sub-title"]))}};function No(e,t){let n,a,s=new Promise((r,l)=>{n=r,a=l});const i=v(Y1,{title:t.title,subTitle:t.subTitle,header:t.header,message:t.message,cancelText:t.cancelText,confirmText:t.confirmText,messageStyle:t.messageStyle,onCancel(r){o.remove(),a(r)},onClose(r){o.remove(),a(r)},onConfirm(){o.remove(),n()},beforeClose:t.beforeClose});i.appContext=e;const o=document.createElement("div");return $a(i,o),document.body.append(o),s}const W1=["disabled"],V1=["disabled"],q1={__name:"ConfirmButton",props:{disabled:{type:Boolean,default:!1},confirmType:{type:String,default:"",validator:e=>["popconfirm","dialog",""].includes(e)},popconfirmOptions:{type:Object,default:()=>({})},dialogOptions:{type:Object,default:()=>({})}},emits:["confirm","cancel","click","mouseenter","mouseleave"],setup(e,{emit:t}){const n=e,{appContext:a}=mn(),s=r=>T(this,null,function*(){if(r.stopPropagation(),n.confirmType==="dialog"){yield No(a,Z(A({},n.dialogOptions),{beforeClose(l,u){l==="confirm"?t("confirm",u):(t("cancel"),u())}}));return}if(!n.confirmType){t("confirm");return}t("click")}),i=()=>{t("confirm")},o=()=>{t("cancel")};return(r,l)=>e.confirmType==="popconfirm"?(h(),M(d(gh),vr({key:0},e.popconfirmOptions,{onConfirm:i,onCancel:o}),{reference:k(()=>[c("button",{class:"confirm-button",disabled:e.disabled,onClick:s,onMouseenter:l[0]||(l[0]=u=>t("mouseenter",u)),onMouseleave:l[1]||(l[1]=u=>t("mouseleave",u))},[kt(r.$slots,"default",{},void 0,!0)],40,W1)]),_:3},16)):(h(),b("button",{key:1,class:"confirm-button",disabled:e.disabled,onClick:s},[kt(r.$slots,"default",{},void 0,!0)],8,V1))}},j1=se(q1,[["__scopeId","data-v-8e547610"]]);const K1=["data-id"],Q1={class:"item-main-content"},X1={class:"file-item-name-wrap"},J1={key:0,class:"file-item-name-editing"},Z1={key:1,class:"file-item-name"},eS={key:0,class:"search-matched-collection-docs-wrap"},tS={key:1,class:"file-item-info"},nS={key:0,class:"collection-file-count"},aS={key:1,class:"file-item-date"},sS={key:2,class:"file-item-right-handler"},iS={key:0,class:"file-item-handler"},oS=["disabled"],rS=["disabled"],lS={class:"ocr-tip-content"},cS={class:"ocr-tip-text"},uS={class:"ocr-tip-text"},dS={class:"ocr-tip-text"},pS={class:"ocr-tip-text"},fS={__name:"DocListItem",props:{docInfo:{type:Object,default:()=>({type:"",name:"",createdAt:"",errorInfo:null,status:null,docCount:0,id:"",documents:null,editableName:"",iconName:""})},searchedKeyword:{type:String,default:""},canEdit:{type:Boolean,default:!1},maxPdfPages:{type:Number,default:0},totalPdfLimitPages:{type:Number,default:0},maxPdfSize:{type:Number,default:0},active:{type:Boolean,default:!1},isFreeMembership:{type:Boolean,default:!1},remainingOcrPageCount:{type:Number,default:0},tooltipDisabled:{type:Boolean,default:!1},onRemoveDoc:{type:Function,required:!0},onBeforeClickReparse:{type:Function,default:()=>{}}},emits:["confirmRemove","fileNameChanged","upgradeBtnClicked","clickReparsePage","clickReparseOcr"],setup(e,{expose:t,emit:n}){const a=e,{t:s}=ye(),i=x(!1),o=x(),r=x(),l=x(),u=x(!1),p=x(!1),f=O(()=>a.docInfo.type===Be.COLLECTION?s("deleteFileDialog.collectionTitle"):s("deleteFileDialog.title")),g=O(()=>{switch(a.docInfo.type){case Be.COLLECTION:return s("deleteFileDialog.collectionContent");case Be.COLLECTION_ITEM_DOC:return s("deleteFileDialog.collectionDocContent");case Be.SINGLE_DOC:return s("deleteFileDialog.content");default:return s("deleteFileDialog.content")}}),y=O(()=>a.docInfo.status>=je.ELEMENT_PARSED),w=O(()=>{var I;return((I=a.docInfo.errorInfo)==null?void 0:I.error_code)===Yh.OCR_EXCEED}),m=O(()=>({success:y.value&&!a.docInfo.errorInfo,warning:y.value&&w.value,parsing:a.docInfo.status>0&&a.docInfo.status<je.ELEMENT_PARSED&&(a.docInfo.type!==Be.COLLECTION||a.docInfo.status!==je.UN_PARSED),error:a.docInfo.status<0})),E=O(()=>{var V;if(a.isFreeMembership)return!1;const I=[je.PAGE_PACKAGE_NOT_ENOUGH_ERROR,je.PAGE_LIMIT].includes(a.docInfo.status),R=ju(a.docInfo.name);if(I&&R){const q=(V=a.docInfo.errorInfo)==null?void 0:V.page_num;return!(q&&q>a.totalPdfLimitPages)}return!1}),P=O(()=>m.value.warning),S=O(()=>{var I,R;if(y.value)return Wh.ANALYSIS_COMPLETED;if(a.docInfo.status===je.WORD_PARSE_ERROR)return s("doc.tooltip.formatError");if(a.docInfo.status===je.PAGE_LIMIT){let V=((I=a.docInfo.errorInfo)==null?void 0:I.page_limit)||a.maxPdfPages;return((R=a.docInfo.errorInfo)==null?void 0:R.page_num)>a.totalPdfLimitPages&&(V=a.totalPdfLimitPages),s("doc.tooltip.pageLimit",{max:V})}return a.docInfo.status===je.DOWNLOAD_ERROR?s("doc.tooltip.downloadError"):a.docInfo.status===je.SIZE_LIMIT?s("doc.tooltip.sizeLimit",{max:a.maxPdfSize}):a.docInfo.status===je.TOKENS_LIMIT?s("doc.tooltip.tokensLimit"):a.docInfo.status===je.PAGE_PACKAGE_NOT_ENOUGH_ERROR?s("doc.tooltip.pagePackageNotEnoughError"):a.docInfo.status===je.CONTENT_POLICY_ERROR?s("doc.tooltip.llmDetectionContainSensitiveContent"):a.docInfo.status<0?s("doc.tooltip.analysisError"):s("doc.tooltip.analyzing")}),D=O(()=>{var I;return!a.isFreeMembership||a.remainingOcrPageCount>=((I=a.docInfo.errorInfo)==null?void 0:I.ocr_page_num)}),C=st({originFilename:"",inputValue:"",loading:!1}),$=()=>{i.value=!1,C.inputValue="",C.loading=!1},G=()=>T(this,null,function*(){i.value=!0,C.inputValue=a.docInfo.editableName,C.originFilename=a.docInfo.editableName,yield fn();const I=o.value.textarea;I.focus(),I.selectionStart=0,I.selectionEnd=C.inputValue.length}),U=()=>{if(C.loading)return;const I=Ng(C.inputValue),R=!I||I===" ",V=I===C.originFilename;C.inputValue&&!R&&!V?(C.loading=!0,n("fileNameChanged",{name:I,id:a.docInfo.id,type:a.docInfo.type})):$()},F=()=>T(this,null,function*(){try{u.value=!0,yield a.onBeforeClickReparse()}finally{u.value=!1,n("clickReparsePage")}}),B=()=>T(this,null,function*(){if(!D.value){Y();return}try{p.value=!0,yield a.onBeforeClickReparse()}finally{p.value=!1,n("clickReparseOcr")}}),W=()=>{a.searchedKeyword&&(l.value?Array.isArray(l.value)?l.value.forEach(I=>{I.handleShowHighlightWhenInvisible()}):l.value.value.handleShowHighlightWhenInvisible():r.value.handleShowHighlightWhenInvisible())},Y=()=>{n("upgradeBtnClicked")};return t({cancelEditFilename:$,highlightDocName:W,get id(){return a.docInfo.id}}),It(()=>{fn(()=>{W()})}),(I,R)=>{var V;return h(),b("div",{class:_e(["file-list-item",{active:e.active}]),"data-id":e.docInfo.id},[kt(I.$slots,"item-left",{},void 0,!0),c("div",Q1,[c("div",X1,[v(te,{name:e.docInfo.iconName,size:20,class:"file-item-name-icon"},null,8,["name"]),i.value?(h(),b("div",J1,[v(d(Ye),{ref_key:"$input",ref:o,modelValue:C.inputValue,"onUpdate:modelValue":R[0]||(R[0]=q=>C.inputValue=q),maxlength:80,type:"textarea",autosize:{maxRows:3},class:"filename-input",spellcheck:"false",resize:"none",disabled:C.loading,onKeydown:[R[1]||(R[1]=Ne(be(()=>{},["prevent"]),["enter"])),R[2]||(R[2]=Ne(be(()=>{},["prevent"]),["esc"]))],onKeyup:[Ne(U,["enter"]),Ne($,["esc"])],onBlur:U,onClick:R[3]||(R[3]=be(()=>{},["stop"]))},null,8,["modelValue","disabled","onKeyup"]),C.loading?(h(),M(te,{key:0,class:"editing-filename-loading",size:18,name:"doc-ing"})):N("",!0)])):(h(),b("div",Z1,[v(d(_t),{content:e.docInfo.name,placement:"top","show-after":2e3,disabled:e.tooltipDisabled},{default:k(()=>[v(Ja,{ref_key:"$docListName",ref:r,class:"file-item-name-content",filename:e.docInfo.name,keyword:e.searchedKeyword},null,8,["filename","keyword"])]),_:1},8,["content","disabled"]),e.canEdit?(h(),M(te,{key:0,name:"edit-filename",class:"edit-filename-handler",onClick:be(G,["stop"])},null,8,["onClick"])):N("",!0)]))]),e.docInfo.type===d(Be).COLLECTION&&((V=e.docInfo.documents)!=null&&V.length)&&e.searchedKeyword?(h(),b("div",eS,[(h(!0),b(K,null,ke(e.docInfo.documents,q=>(h(),b("div",{key:q.id,class:"search-matched-collection-docs-item"},[v(d(_t),{content:q.name,placement:"top","show-after":2e3},{default:k(()=>[v(Ja,{ref_for:!0,ref_key:"$childDocListName",ref:l,class:"collection-docs-item-name",filename:q.name,keyword:e.searchedKeyword},null,8,["filename","keyword"])]),_:2},1032,["content"])]))),128))])):(h(),b("div",tS,[e.docInfo.type===d(Be).COLLECTION?(h(),b("div",nS,[c("span",null,_(`${e.docInfo.docCount} files`),1)])):(h(),b("div",aS,[v(te,{name:"clock",size:12}),c("span",null,_(d(Cn)(e.docInfo.createdAt)),1)])),i.value?N("",!0):(h(),b("div",sS,[e.canEdit?(h(),b("div",iS,[m.value.parsing?N("",!0):(h(),M(j1,{key:0,class:"file-btn","confirm-type":"dialog","dialog-options":{title:f.value,subTitle:e.docInfo.name,message:g.value,confirmText:I.$t("deleteBtn"),cancelText:I.$t("cancelBtn"),messageStyle:{"white-space":"break-spaces"}},onConfirm:e.onRemoveDoc},{default:k(()=>[v(te,{name:"remove",size:16,color:"var(--el-text-color-shallow)"})]),_:1},8,["dialog-options","onConfirm"])),E.value?(h(),b("button",{key:1,disabled:u.value,class:"file-btn always-show reparse-btn reparse-page-btn"},[v(te,{name:"reparse",color:"var(--el-color-error)",title:I.$t("reparseFileDialog.iconTip"),onClick:F},null,8,["title"])],8,oS)):N("",!0),P.value?(h(),b("button",{key:2,disabled:p.value,class:"file-btn always-show reparse-btn reparse-ocr-btn"},[v(te,{name:"reparse",color:"var(--el-text-color-bulb)",title:I.$t("reparseFileDialog.iconTip"),onClick:B},null,8,["title"])],8,rS)):N("",!0)])):N("",!0),m.value.success?(h(),M(te,{key:1,name:"doc-ok",color:"var(--el-color-success)",title:S.value,"show-after":300},null,8,["title"])):m.value.warning?(h(),M(d(si),{key:2,placement:"top",width:D.value?218:192,trigger:"hover","show-after":300,"popper-class":"doc-has-ocr-popover"},{reference:k(()=>[v(te,{name:"doc-error",class:"doc-error",color:"var(--el-text-color-bulb)"})]),default:k(()=>[c("div",lS,[D.value?(h(),b(K,{key:0},[c("div",cS,_(I.$t("doc.tooltip.ocrExceed")),1),c("div",uS,[c("span",null,_(I.$t("doc.tooltip.reanalyzeLabel")),1),c("span",{class:"ocr-tip-link",onClick:B},_(I.$t("doc.tooltip.reanalyzeText")),1),c("span",null,_(I.$t("fullStopChar")),1)])],64)):(h(),b(K,{key:1},[c("div",dS,_(I.$t("doc.tooltip.needOcr")),1),c("div",pS,[c("span",{class:"ocr-tip-link",onClick:Y},_(I.$t("upgrade.toProButton")),1),c("span",null,_(I.$t("doc.tooltip.needOcrUnlockText")),1)])],64))])]),_:1},8,["width"])):m.value.parsing?(h(),M(te,{key:3,name:"doc-ing",class:"doc-ing-icon",title:S.value,"show-after":300},null,8,["title"])):m.value.error?(h(),M(te,{key:4,name:"doc-error",class:"doc-error",color:"var(--el-color-error)","show-after":300,title:S.value},null,8,["title"])):N("",!0)]))]))])],10,K1)}}},Td=se(fS,[["__scopeId","data-v-6d37faba"]]),Cd=e=>{const{t}=ye(),{appContext:n}=mn();return{removeDoc(s){return T(this,null,function*(){yield R1(s.id),yield O_(s.id);const i=e.value.findIndex(o=>o.id===s.id);e.value.splice(i,1)})},onDocShared(s,i){e.value[s].share=i,Wa(e)},updateDocName(s,i){return T(this,null,function*(){const o=yield D1(s,{name:i}),r=e.value.findIndex(l=>l.id===s);e.value[r].name=o.name,Wa(e)})},reparseDocPage(s,i,o){return T(this,null,function*(){var u;let r=!0;const l=(u=s.error_msg)==null?void 0:u.page_num;if(l&&!oa(i)&&!oa(o)){const f=l-i;r=o>=f}if(!r)throw new Error("pagePackageNotEnough");yield No(n,{title:t("reparseFileDialog.title"),message:`${s.name}
${t("reparseFileDialog.content")}`,confirmText:t("yesBtn"),cancelText:t("noBtn"),messageStyle:{"white-space":"break-spaces"},beforeClose(f,g){return T(this,null,function*(){if(f==="confirm")try{const y=yield L1(s.id),w=e.value.findIndex(m=>m.id===s.id);e.value[w]=y,Wa(e),ge.success(t("reparseFileDialog.reparseCompleteTip")),g()}catch(y){ge.error(y.message)}else g()})}})})},reparseDocOcr(s,i){return T(this,null,function*(){var l;let o=!0;const r=(l=s.error_msg)==null?void 0:l.ocr_page_num;if(r&&!oa(i)&&(o=i>=r),!o)throw new Error("ocrPagePackageNotEnough");yield No(n,{title:t("reparseFileDialog.title"),message:`${s.name}
${t("reparseFileDialog.ocrContent",{count:r,pageUnit:r>1?"pages":"page"})}`,confirmText:t("yesBtn"),cancelText:t("noBtn"),messageStyle:{"white-space":"break-spaces"},beforeClose(p,f){return T(this,null,function*(){if(p==="confirm")try{const g=yield U1(s.id),y=e.value.findIndex(w=>w.id===s.id);e.value[y]=g,Wa(e),ge.success(t("reparseFileDialog.reparseCompleteTip")),f()}catch(g){ge.error(g.message)}else f()})}})})}}};const hS={__name:"GutterHorizontal",emits:["move","moveEnd","moveStart"],setup(e,{emit:t}){const n=x(),a=x(!1),s=o=>{const r=o.clientX-n.value;n.value=o.clientX,t("move",r)},i=o=>{a.value=!0,document.body.style["-webkit-user-select"]="none",n.value=o.clientX,t("moveStart"),document.addEventListener("mousemove",s),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",s),document.body.style["-webkit-user-select"]="unset",t("moveEnd"),a.value=!1},{once:!0})};return(o,r)=>(h(),b("div",{class:_e(["gutter-horizontal",{active:a.value}]),style:On({"--width":`${d(t_)}px`}),onMousedown:i},null,38))}},_S=se(hS,[["__scopeId","data-v-abfe5c81"]]);const gS={class:"left-sidebar"},mS={class:"view-header"},yS={class:"icon-wrapper"},vS={class:"view-content"},za="--left-list-width",bS={__name:"LeftSidebar",setup(e,{expose:t}){const n=At(),a=x(!1),s=x(n_),i=x(0),o=x(0),r=x(!0);let l=s.value;const u=()=>{Fe.emit("fileListResized")},p=()=>{Fe.emit("fileListResized")},f=E=>{s.value+=E,l+=E,l<to?s.value=to:l>o.value&&(s.value=o.value),Fe.emit("fileListResized")},g=()=>{l=s.value},y=()=>{const E=document.querySelector(".chat-view-main");return E?E.getBoundingClientRect().width:a_},w=E=>{i.value=y(),o.value=Math.max(to,document.documentElement.clientWidth-e_-i.value),!(zf(E)&&!E)&&l>o.value&&(s.value=l=o.value)},m=E=>{r.value=E};return $e(()=>n.name,()=>T(this,null,function*(){n.name==="upload"&&(yield w())})),$e(s,()=>{Fe.emit("fileListViewWidthChanged")}),$e([s,r],([E,P])=>{let S=P?E:0;document.documentElement.style.setProperty(za,`${S}px`)},{immediate:!0}),ii(()=>{let E=r.value?s.value:0;document.documentElement.style.setProperty(za,`${E}px`)}),It(()=>T(this,null,function*(){w();let E=r.value?s.value:0;document.documentElement.style.setProperty(za,`${E}px`),window.addEventListener("resize",w),Fe.on("chatViewResized",w)})),ms(()=>{window.removeEventListener("resize",w),Fe.off("chatViewResized",w),document.documentElement.style.removeProperty(za)}),mu(()=>{a.value=!0,document.documentElement.style.removeProperty(za)}),ii(()=>{a.value=!1}),t({toggleFileList:m}),(E,P)=>(h(),b("div",gS,[v(yh,{name:"slide",onAfterLeave:u,onAfterEnter:p},{default:k(()=>[ct(c("div",{class:"sidebar-view",style:On({"--width":`${s.value}px`})},[c("div",mS,[(h(),M(mh,{to:".side-list-collapse-handler-wrap",disabled:a.value},[v(d(_t),{effect:"dark",content:E.$t("toggleFileList"),placement:"top-start","show-after":500},{default:k(()=>[c("div",yS,[r.value?(h(),M(te,{key:0,class:"collapse-icon",name:"side-expand",size:20,onClick:P[0]||(P[0]=()=>m(!1))})):(h(),M(te,{key:1,class:"collapse-icon",name:"side-pack",size:20,onClick:P[1]||(P[1]=()=>m(!0))}))])]),_:1},8,["content"])],8,["disabled"]))]),c("div",vS,[kt(E.$slots,"default",{},void 0,!0)])],4),[[Kt,r.value]])]),_:3}),r.value?(h(),M(_S,{key:0,onMove:f,onMoveEnd:g})):N("",!0)]))}},xd=se(bS,[["__scopeId","data-v-df5272ac"]]);const wS={class:"search-bar"},ES={__name:"SearchBar",emits:["search"],setup(e,{expose:t,emit:n}){const a=x(""),s=()=>T(this,null,function*(){n("search",a.value)}),i=()=>{a.value="",s()},o=()=>{};return t({resetSearch:i}),(r,l)=>(h(),b("div",wS,[c("form",null,[v(d(Ye),{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=u=>a.value=u),placeholder:r.$t("fileListSearchable.placeholder"),class:_e(["search-input",{"has-searched":a.value}]),onKeydown:[l[1]||(l[1]=Ne(be(()=>{},["prevent"]),["enter"])),l[2]||(l[2]=Ne(be(()=>{},["prevent"]),["esc"]))],onKeyup:[Ne(be(s,["prevent"]),["enter"]),Ne(i,["esc"])],onInput:o},{suffix:k(()=>[v(te,{name:"input-clear",size:16,class:_e(["clear-handler",{show:a.value}]),onClick:i},null,8,["class"]),v(te,{name:"search",size:20,class:"search-handler",onClick:s})]),_:1},8,["modelValue","placeholder","class","onKeyup"])])]))}},Id=se(ES,[["__scopeId","data-v-82a8a757"]]),Hr="https://cdn.pdppt.com/chatdoc/assets/404-3ec2fdec.svg";const PS=e=>(vt("data-v-803aafee"),e=e(),bt(),e),kS=PS(()=>c("p",null,[c("img",{crossorigin:"anonymous",src:Hr,alt:""})],-1)),SS={class:"tips"},AS=["textContent"],TS={__name:"NoDoc",props:{isCollectionPage:{type:Boolean,default:!1},tips:{type:String,default:""}},setup(e){return(t,n)=>(h(),b("div",{class:_e(["no-docs",{"is-collection-mode":e.isCollectionPage}])},[kS,c("p",SS,[e.tips?(h(),b("span",{key:0,textContent:_(e.tips)},null,8,AS)):kt(t.$slots,"default",{key:1},void 0,!0)])],2))}},$d=se(TS,[["__scopeId","data-v-803aafee"]]),CS="https://cdn.pdppt.com/chatdoc/assets/pdflux-0726ff6d.wasm";const Fl=()=>yu.service({fullscreen:!0,background:"transparent"});class ot extends Error{constructor(t,n){super(t,n),this.name="UploadError",this.payload=(n==null?void 0:n.payload)||{}}}let da=null;const xS=CS+".gz",IS=()=>T(void 0,null,function*(){({DocManager:da}=yield xa(()=>import("./index.es-9bcc295f.js"),[window.__toAssetUrl("index.es-9bcc295f.js"),window.__toAssetUrl("defineProperty-413f9325.js"),window.__toAssetUrl("vendor-4-87e1e3f9.js"),window.__toAssetUrl("vendor-1-8c77151e.js"),window.__toAssetUrl("vendor-2-e250ed0d.js")],import.meta.url))});let ho=null;const $S=(e,t="")=>T(void 0,null,function*(){return ho||(ho=IS()),yield ho,yield da.preloadWasmModule({locateFile(){return xS},isDesktopEnv:!1,disableExternalFont:!1,maxWasmMemory:3e3*1024*1024,token:"KncbNhJ7SmtoQVAzc3laZAchAGlwEQVqaWNPd1ptQHs3"}),da.loadDocument({data:e,disableExternalFont:!1,enableLoadLinearizedPdf:!0,enableWordSegmentation:!0,isDesktopEnv:!1,isRangeSupported:!1,password:t})}),Rd=()=>{const e=O(()=>t.isEffectMembership?Cs.PRO:Cs.FREE),t=Oe(),{t:n}=ye(),a=t.maxPdfSize*1024*1024,s=t.maxPdfSizeOfExceedMaxPdfPages*1024*1024,i=E=>{for(const P of E){const S=P.name.split(".").at(-1).toLowerCase();if(!Cs.PRO.includes(S)){let D="";throw Cs.PRO.split(",").forEach((C,$,G)=>{C=C.replace(".",""),$>0&&$===G.length-1?D+=` ${n("or")} ${C}`:$>0?D+=`, ${C}`:D=C}),new ot(n("uploadPage.fileTypeValidMsg",{type:D,ext:S}))}}},o=(E,P)=>T(void 0,null,function*(){try{if(!E)throw new ot;if(E.name.split(".").at(-1).toLowerCase()!=="pdf"){if(E.size>a)throw new ot(n("doc.sizeLimit",{max:t.maxPdfSize}));return{file:E,pageCount:"unknown"}}const D=yield E.arrayBuffer(),C=new Uint8Array(D);let $=yield $S(C);if($.lastError.includes("password"))throw new ot(n("needPasswordTip"));if($.lastError!=="success")throw new ot(n("pdfFileError"));const G=yield $.executeCommand({name:"getPageCount",args:[]});for(let U=0;U<G&&U<100;U++){const F=yield $.executeCommand({name:"getPageInfo",args:[U]});if(F){const[B,W,Y,I]=F.view,R=Math.max(Y-B,I-W),V=Math.min(Y-B,I-W);if(R>4096||V>4096||V/R<.3)throw new ot(n("doc.tooltip.tokensLimit"))}}if(G===0)throw new ot(n("PDFNoPage"));if(G>t.maxPdfPages){if(E.size>s)throw new ot(n("doc.sizeLimit",{max:t.maxPdfSizeOfExceedMaxPdfPages}));if(G>t.totalPdfLimitPages)throw new ot(n("PDFPageCount",{type:"PDF",max:t.totalPdfLimitPages,current:G}));{const U=G-t.maxPdfPages;if(!(P>=U))throw new ot("",{cause:Mt.PDF_PAGE_EXCEED,payload:{exceedFiles:[{file:E,lackPageCount:U-P}]}})}}else if(E.size>a)throw new ot(n("doc.sizeLimit",{max:t.maxPdfSize}));return{file:E,pageCount:G}}finally{da==null||da.destroy()}}),r=E=>{const P=S=>new Promise(D=>{S.file(C=>{D(C)})});return Promise.all([...E].filter(S=>S.isFile).map(S=>P(S)))},l=(S,...D)=>T(void 0,[S,...D],function*(E,P={}){const C=yield E.arrayBuffer();E=new File([C],E.name,{type:E.type,lastModified:E.lastModified});const $=E.name.split(".").at(-1).toLowerCase();try{const G=lg(Pu.ABORT_UPLOAD),U=yield x1(E,P,G.signal);return/pdf$/i.test($)&&(yield D_(Zt,E,{id:U.id,created_at:U.created_at})),U}catch(G){throw G.type==="cancel"||G.name==="AbortError"?new ot("",{cause:"cancel upload"}):G}}),u=E=>I1(E),p=E=>{if(!t.isEffectMembership&&Array.from(E).some(S=>!ju(S.name)))throw new ot("",{cause:Mt.SHOW_UPGRADE})},f=E=>{let P=!1,S=0;return E!=="unknown"&&(S=(C=>C>t.maxPdfPages&&t.remainingPagePackages>=C-t.maxPdfPages?C-t.maxPdfPages:0)(E),P=S>0),{isUsePagePackage:P,needUsedPagePackageCount:S}},g=E=>T(void 0,null,function*(){let P=Fl();if(yield t.getDocUsageInfo().finally(()=>{P.close()}),!t.remainingUploadFileCount||E>t.remainingUploadFileCount)throw new ot("",{cause:Mt.NOT_ENOUGH_SLOTS})}),y=(E,P)=>T(void 0,null,function*(){let S=null,D=Fl();try{E?S=yield u(E,!0):P&&(S={id:P})}finally{D.close()}return S}),w=(E,P)=>{const S=new Hf({autoStart:!0,timeConstant:6e3*E}),D=setInterval(()=>{P(S.progress),S.progress===1&&clearInterval(D)},100);return()=>{S.end(),clearInterval(D),P(1)}};return{createCollection:u,$accept:e,uploadMultiple(E,P,S,D,C=0){return T(this,null,function*(){i(E),p(E);const $=[];let G=[],U=t.remainingPagePackages;for(const q of E)try{const ne=yield o(q,U),{isUsePagePackage:ae,needUsedPagePackageCount:Re}=f(ne.pageCount);U-=Re,$.push({file:q,isUsePagePackage:ae})}catch(ne){if(E.length===1)throw ne;ne.cause===Mt.PDF_PAGE_EXCEED&&G.push(...ne.payload.exceedFiles)}if(yield g($.length),(S||D)&&E.length+C>t.countPerCollection)throw new ot(n("uploadPage.collectionFilesCountExceedLimit"));if(!$.length)throw G.length?new ot("",{cause:Mt.PDF_PAGE_EXCEED,payload:{exceedFiles:G}}):new ot(n("uploadPage.allFileInvalid"));const B=[],W=yield y(S,D);let Y=Be.SINGLE_DOC;S?Y=Be.COLLECTION:D&&(Y=Be.COLLECTION_ITEM_DOC);let I=()=>{};P&&(I=w($.length,q=>{P({index:R,percentage:q*100,filename:V.name})}));let R=0,V=null;for(;R<$.length;R++){const{isUsePagePackage:q}=$[R];({file:V}=$[R]);try{const ne=yield l(V,{is_using_page_package:q||null,collection_id:W==null?void 0:W.id});ne&&B.push(ne)}catch(ne){throw I(),ne}}return I(),yield t.getDocUsageInfo().catch(()=>{}),{uploaded:B,collectionData:W,uploadType:Y,isFilteredPageExceedFiles:G}})},uploadByUrl(E){return T(this,null,function*(){try{return{uploaded:[yield $1({url:E})],collectionData:null,uploadType:Be.SINGLE_DOC}}catch(P){if(P.status===451)throw new ot("Not in whitelist");if(P.message)throw P.message.includes("You are not Pro user.")?new ot("",{cause:Mt.SHOW_UPGRADE}):new ot(P.message)}})},readdir(E){return T(this,null,function*(){const P=[],S=()=>new Promise((C,$)=>{E.readEntries(C,$)});for(;;)try{const C=yield S();if(!C.length)break;P.push(...C)}catch(C){console.error(C);break}return yield r(P)})}}};const RS={class:"header-wrapper"},DS={class:"title"},NS={class:"content-wrapper"},OS={class:"content-text-box"},LS={class:"content-text"},US={class:"exceed-files"},MS={key:0,class:"content-text"},BS={class:"lack-pkg-count"},FS={class:"bottom-wrapper"},GS={__name:"FilePageExceedDialog",props:{exceedFiles:{type:Array,default:()=>[]},userPagePackageInfo:{type:Object,default:()=>({maxPageCount:0,pagePackageOptions:[]})},isEffectMembership:{type:Boolean,default:!0},onPayPagePackageCompleted:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}}},setup(e){const t=e,{showUpgradeDialog:n}=Lt(),{t:a}=ye(),s=x(!0),i=O(()=>`"${t.exceedFiles.map(p=>p.file.name).join(", ")}"${a("fullStopChar")}`),o=O(()=>t.exceedFiles.reduce((p,f)=>p+f.lackPageCount,0)),r=O(()=>{const p=t.userPagePackageInfo.pagePackageOptions;return p.find(f=>f.count>=o.value)||p.at(-1)}),l=()=>{t.isEffectMembership?n({activeTabPaneName:tt.PACKAGE,activeGoodsType:Le.PAGE,activeAdditionPkgOption:r.value,onPaySuccessAndClosed:p=>T(this,null,function*(){p.goods_id===J.PAGE_PACKAGE&&(yield t.onPayPagePackageCompleted(t.exceedFiles))})}):n({activeTabPaneName:tt.PLAN}),s.value=!1},u=()=>{s.value=!1,t.onClose()};return(p,f)=>{const g=rt("i18n-t");return h(),M(Xe,{"model-value":s.value,class:"file-page-exceed-dialog",width:830,onClose:u},{header:k(()=>[c("div",RS,[v(te,{class:"tag",name:"tag-attention"}),c("div",DS,_(p.$t("filePageExceedDialog.title",{num:e.userPagePackageInfo.maxPageCount})),1)])]),footer:k(()=>[c("div",FS,[v(d(he),{type:"primary",onClick:l},{default:k(()=>[Q(_(p.$t(e.isEffectMembership?"filePageExceedDialog.confirmBtnText":"upgrade.planButton")),1)]),_:1})])]),default:k(()=>[c("div",NS,[c("div",OS,[c("div",LS,[c("span",null,_(p.$t("filePageExceedDialog.contentText",{fileUnit:e.exceedFiles.length>1?"files":"file",num:e.userPagePackageInfo.maxPageCount})),1),c("span",null,_(p.$t(e.isEffectMembership?"filePageExceedDialog.purchaseText":"filePageExceedDialog.upgradeText")),1),c("div",US,_(i.value),1)]),e.isEffectMembership?(h(),b("div",MS,[v(g,{keypath:"filePageExceedDialog.alertPayCountText",tag:"span",scope:"global"},{count:k(()=>[c("span",BS,_(o.value),1)]),fileUnit:k(()=>[Q(_(e.exceedFiles.length>1?"files":"file"),1)]),pageUnit:k(()=>[Q(_(o.value>1?"pages":"page"),1)]),_:1})])):N("",!0)])])]),_:1},8,["model-value"])}}};const zS={class:"header-wrapper"},HS={class:"title"},YS={class:"content-wrapper"},WS={class:"content-text-box"},VS={class:"content-text"},qS={key:0},jS={key:1},KS={class:"exceed-files"},QS={class:"content-text"},XS={class:"lack-pkg-count"},JS={class:"bottom-wrapper"},ZS={__name:"FileOcrPageExceedDialog",props:{exceedFiles:{type:Array,default:()=>[]},userPackageInfo:{type:Object,default:()=>({remainOcrPageCount:0,ocrPagePackageOptions:[]})},onPayOcrPagePackageCompleted:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}}},setup(e){const t=e,{showUpgradeDialog:n}=Lt(),{t:a}=ye(),s=x(!0),i=O(()=>`"${t.exceedFiles.map(f=>f.file.name).join(", ")}"${a("fullStopChar")}`),o=O(()=>t.exceedFiles.reduce((f,g)=>f+g.ocrPageCount,0)),r=O(()=>o.value-t.userPackageInfo.remainOcrPageCount),l=O(()=>{const f=t.userPackageInfo.ocrPagePackageOptions;return f.find(g=>g.count>=r.value)||f.at(-1)}),u=()=>{n({activeTabPaneName:tt.PACKAGE,activeGoodsType:Le.OCR_PAGE,activeAdditionPkgOption:l.value,onPaySuccessAndClosed:f=>T(this,null,function*(){f.goods_id===J.OCR_PAGE_PACKAGE&&(yield t.onPayOcrPagePackageCompleted(t.exceedFiles))})}),s.value=!1},p=()=>{s.value=!1,t.onClose()};return(f,g)=>{const y=rt("i18n-t");return h(),M(Xe,{"model-value":s.value,class:"file-page-exceed-dialog",width:830,onClose:p},{header:k(()=>[c("div",zS,[v(te,{class:"tag",name:"tag-attention"}),c("div",HS,_(f.$t("fileOcrPageExceedDialog.title")),1)])]),footer:k(()=>[c("div",JS,[v(d(he),{type:"primary",onClick:u},{default:k(()=>[Q(_(f.$t("fileOcrPageExceedDialog.confirmBtnText")),1)]),_:1})])]),default:k(()=>[c("div",YS,[c("div",WS,[c("div",VS,[e.exceedFiles.length>1?(h(),b("span",qS,_(f.$t("fileOcrPageExceedDialog.contentTextComplex",{num:o.value})),1)):(h(),b("span",jS,_(f.$t("fileOcrPageExceedDialog.contentTextSingular",{num:o.value})),1)),c("div",KS,_(i.value),1)]),c("div",QS,[v(y,{keypath:"fileOcrPageExceedDialog.alertPayCountText",tag:"span",scope:"global"},{count:k(()=>[c("span",XS,_(r.value),1)]),pageUnit:k(()=>[Q(_(r.value>1?"pages":"page"),1)]),_:1})])])])]),_:1},8,["model-value"])}}},Hn=(n,...a)=>T(void 0,[n,...a],function*(e,t={}){const s=v(GS,Z(A({},t),{onClose(){var o;i.remove(),(o=t.onClose)==null||o.call(t)}}));s.appContext=e;const i=document.createElement("div");$a(s,i),document.body.append(i)}),Dd=(n,...a)=>T(void 0,[n,...a],function*(e,t={}){const s=v(ZS,Z(A({},t),{onClose(){var o;i.remove(),(o=t.onClose)==null||o.call(t)}}));s.appContext=e;const i=document.createElement("div");$a(s,i),document.body.append(i)});const eA={style:{padding:"20px 0 10px"}},tA={class:"progress-footer"},nA={class:"tips"},aA={__name:"UploadProgressDialog",props:{visible:{type:Boolean,default:!1},filename:{type:String,default:""},percentage:{type:Number,default:0}},emits:["update:visible"],setup(e,{emit:t}){const n=()=>{t("update:visible",!1)};return(a,s)=>(h(),M(Xe,{"model-value":e.visible,class:"upload-progress",title:a.$t("uploadPage.uploadingTitle"),"sub-title":e.filename,"show-close":!1,onClose:n},{footer:k(()=>[c("div",tA,[c("div",nA,_(a.$t("uploadPage.uploadingText")),1)])]),default:k(()=>[c("div",eA,[v(d(ra),{"show-text":!1,percentage:e.percentage},null,8,["percentage"])])]),_:1},8,["model-value","title","sub-title"]))}},Nd=se(aA,[["__scopeId","data-v-85a061a1"]]),sA=["accept"],Oo={__name:"FileListUpload",props:{collectionId:{type:String,default:""}},emits:["uploaded"],setup(e,{emit:t}){const n=e,{appContext:a}=mn(),s=dt(),i=Oe(),o=zr(),{validateRemainingUploads:r,freeUserShowUpgradeDialog:l,showQuotaLimitAndUpgradeEntry:u}=Lt(),{t:p}=ye(),{$accept:f,uploadMultiple:g}=Rd(),y=x(null),w=x(!1),m=x(""),E=x(0),P=C=>{w.value=!0,E.value=C.percentage,m.value=C.filename},S=C=>T(this,null,function*(){const $=C.target.files;if(n.collectionId&&$.length>i.countPerCollection){ge.error(p("uploadPage.countPerCollection",{max:i.countPerCollection}));return}if($.length)try{const G=n.collectionId?o.collectionInfo.document_count:0,U=yield g($,P,null,n.collectionId||null,G);$.length!==U.uploaded.length&&ge.warning(p("uploadPage.ignoreNonCompliantFilesWarn"));let F=!0;U.isFilteredPageExceedFiles.length&&(Hn(a,{exceedFiles:U.isFilteredPageExceedFiles,userPagePackageInfo:{maxPageCount:i.maxPdfPages,pagePackageOptions:i.additionPackages.find(B=>B.type===Le.PAGE).options},isEffectMembership:i.isEffectMembership}),F=!1),t("uploaded",{uploadInfo:U,isActiveNewestFile:F})}catch(G){G.message&&ge.error(G.message),G.cause&&(G.cause===Mt.SHOW_UPGRADE?l():G.cause===Mt.NOT_ENOUGH_SLOTS?u():G.cause===Mt.PDF_PAGE_EXCEED&&Hn(a,{exceedFiles:G.payload.exceedFiles,userPagePackageInfo:{maxPageCount:i.maxPdfPages,pagePackageOptions:i.additionPackages.find(U=>U.type===Le.PAGE).options},isEffectMembership:i.isEffectMembership}))}finally{w.value=!1,y.value&&(y.value.value=null)}}),D=C=>{if(!i.isLogin)return C.stopPropagation(),C.preventDefault(),s.push({name:"signIn"}),!1;r(C)};return(C,$)=>(h(),b(K,null,[c("label",{ref:"$emptyFilesUploadRef",onClickCapture:D},[kt(C.$slots,"default"),ct(c("input",{ref_key:"$fileRef",ref:y,type:"file",multiple:"",accept:d(f),onChange:S},null,40,sA),[[Kt,!1]])],544),v(Nd,{visible:w.value,"onUpdate:visible":$[0]||($[0]=G=>w.value=G),filename:m.value,percentage:E.value},null,8,["visible","filename","percentage"])],64))}};function Od(e){if(e.type===Be.COLLECTION)return e.name;const n=e.name.lastIndexOf(".");return e.name.slice(0,n)}function pa(e,t=!1){return t?"folder":Pg(e)?"doc":kg(e)?"md":Sg(e)?"epub":Ag(e)?"txt":Tg(e)?"website":"pdf"}const Gl=1e4,zl=1e3;class iA{constructor(){this._emitter=ou(),this._loading=!1,this._reconnectTimer=null,this.token="",window.addEventListener("offline",()=>{this.close("offline")}),window.addEventListener("online",()=>{this.connect()})}connect(){return T(this,null,function*(){try{if(this.socket||this._loading)return;this._loading=!0;const{token:t}=yield A_();this.token=t;const n=zh?"bohr.cheftin.cn:8081":location.host;this.socket=new WebSocket(`wss://${n}/paitify/api/v1/sub?token=${t}`),this.socket.addEventListener("open",()=>{this._reconnectCount=0,this._loading=!1}),this.socket.addEventListener("message",a=>{let{data:s}=a;try{s=JSON.parse(s),s.action==="document_status_changed"&&this._emitter.emit("docStatusChanged",s.id)}catch(i){console.error(i)}}),this.socket.addEventListener("error",a=>{this._emitter.emit("error",a)}),this.socket.addEventListener("close",a=>T(this,null,function*(){this._loading=!1,this._emitter.emit("close",a),this._reset(),a.code!==zl&&(this._reconnectTimer=setTimeout(()=>{this.connect()},Gl))}))}catch(t){console.error(t),this._reset(),this._reconnectTimer=setTimeout(()=>{this.connect()},Gl)}})}close(t){var n;(n=this.socket)==null||n.close(zl,t)}_reset(){this.token="",this.socket=null,this._loading=!1,clearTimeout(this._reconnectTimer)}on(t,n){this._emitter.on(t,n)}off(t,n){this._emitter.off(t,n)}clear(){this._emitter.all.clear()}}const rn=new iA;const Ld=e=>(vt("data-v-b8cdfaf7"),e=e(),bt(),e),oA={class:"file-list-content"},rA={key:0,class:"skeleton"},lA=Ld(()=>c("div",{class:"name-skeleton skeleton-animation"},null,-1)),cA=Ld(()=>c("div",{class:"date-skeleton skeleton-animation"},null,-1)),uA=[lA,cA],dA={class:"pagination-top-loading-wrap"},pA={key:0},fA={class:"pagination-loading-wrap"},hA={key:0},_A={key:1},gA=["textContent"],mA=["textContent"],yA={class:"main-wrapper"},vA=64,bA={__name:"Home",setup(e){const{appContext:t}=mn(),n={UP:"up",DOWN:"down"},a=dt(),s=At(),{t:i}=ye(),o=Oe(),r=Ad(),l=x(),u=x(),p=x(),f=x(),g=x(""),y=x(!1),w=x(),m=x([]),E=x(!1),P=x(!0),S=x(20),D=Cd(m),{showUpgradeDialog:C}=Lt(),$=st({topLoading:!1}),G=O(()=>s.params.id),U=O(()=>g.value?{keyword:g.value}:{}),F=O(()=>s.query.question&&!o.isLogin?m.value.filter(z=>z.id===G.value):m.value),B=z=>T(this,null,function*(){g.value=z,yield W({isResetPage:!0,direction:n.DOWN}),f.value.forEach(ue=>{ue.highlightDocName()})}),W=(...ue)=>T(this,[...ue],function*(z={fromId:"",direction:n.DOWN,isResetPage:!1}){var L;const ve=Date.now(),fe=z.direction===n.UP,pe=z.direction===n.DOWN;pe&&($.bottomLoading=!0),fe&&($.topLoading=!0);const ee=Ti(Z(A({},U.value),{page_size:S.value,from_id:z.fromId,direction:z.direction}),X=>X);try{const X=yield Pd(ee);z.isResetPage?(m.value=qs(X,"id"),(L=w.value)==null||L.setScrollTop(0),$.bottomLoading=!1,$.bottomNoMore=X.length<S.value,$.topNoMore=!0):(pe&&(m.value=qs([...m.value,...X],"id"),$.bottomLoading=!1,$.bottomNoMore=X.length<S.value),fe&&(X.reverse(),m.value=qs([...X,...m.value],"id"),$.topLoading=!1,$.topNoMore=X.length<S.value))}finally{if(P.value){const X=Date.now()-ve;X<1500&&(yield $r(1500-X)),P.value=!1}}}),Y=z=>T(this,null,function*(){var fe,pe;const ue=m.value.findIndex(ee=>ee.id===z),ve=yield fo(A({upload_ids:[z]},U.value));m.value[ue]=ve[0],(pe=(fe=p.value).refreshDocInfoIfOpened)==null||pe.call(fe,ve[0],!0)});let I=null;const R=()=>{o.isLogin&&(rn.connect(),rn.off("docStatusChanged",Y),rn.on("docStatusChanged",Y)),I==null||I(),I=Li(()=>T(this,null,function*(){const z=m.value.filter(ue=>ue.type===Be.COLLECTION&&ue.status===je.UN_PARSED?!1:ue.status<je.ELEMENT_PARSED&&ue.status>0);if(z.length){const ue=z.map(fe=>fe.id);(yield fo(A({upload_ids:ue},U.value))).forEach(fe=>{var ee,L;const pe=m.value.findIndex(X=>X.id===fe.id);m.value[pe]=fe,(L=(ee=p.value).refreshDocInfoIfOpened)==null||L.call(ee,fe,!0)}),Wa(m)}else I()}),Eu,{leading:!1})},V=z=>z===n.DOWN?$.bottomLoading||$.bottomNoMore:z===n.UP?$.topLoading||$.topNoMore:!1,q=z=>T(this,null,function*(){if(V(z))return;E.value=!0;let ue;if(z===n.DOWN&&(ue=m.value[m.value.length-1].id),z===n.UP&&(ue=m.value[0].id),yield W({fromId:ue,direction:z}),yield fn(),z===n.UP){const ve=document.querySelector(`.file-list-item[data-id="${ue}"]`);ve==null||ve.scrollIntoView({block:"start"})}E.value=!1}),ne=()=>T(this,null,function*(){E.value=!0,s.params.id&&(yield W({fromId:s.params.id,direction:n.UP})),yield W({fromId:s.params.id,direction:n.DOWN}),E.value=!1,s.params.id&&(yield fn(),document.querySelector(".file-list-item.active").scrollIntoView({block:"center"})),R()}),ae=z=>{a.push({name:z.type===Be.COLLECTION?"collectionChat":"chat",params:{id:z.id}})},Re=(z,ue)=>T(this,null,function*(){yield D.removeDoc(z),G.value===z.id&&a.replace({name:"upload"}),z.type===Be.COLLECTION?ge.success(i("deleteFileDialog.deletedCollectionTip")):ge.success(i("deleteFileDialog.deletedTip")),ue()}),Ae=z=>T(this,null,function*(){var ve,fe,pe;const ue=m.value.findIndex(ee=>ee.id===z.id);try{yield D.reparseDocPage(z,o.maxPdfPages,o.remainingPagePackages),(fe=(ve=p.value).refreshDocInfoIfOpened)==null||fe.call(ve,m.value[ue])}catch(ee){if(ee.message==="pagePackageNotEnough"){const L=((pe=z.error_msg)==null?void 0:pe.page_num)||0;yield Hn(t,{exceedFiles:[{file:z,lackPageCount:L-o.maxPdfPages-o.remainingPagePackages}],userPagePackageInfo:{maxPageCount:o.maxPdfPages,pagePackageOptions:o.additionPackages.find(X=>X.type===Le.PAGE).options},isEffectMembership:o.isEffectMembership,onPayPagePackageCompleted:X=>T(this,null,function*(){var Ee,Je;const ie=X[0];yield D.reparseDocPage(ie.file),(Je=(Ee=p.value).refreshDocInfoIfOpened)==null||Je.call(Ee,m.value[ue])})})}}}),oe=z=>T(this,null,function*(){var ve,fe,pe;const ue=m.value.findIndex(ee=>ee.id===z.id);try{yield D.reparseDocOcr(z,o.remainingOcrPageCount),(fe=(ve=p.value).refreshDocInfoIfOpened)==null||fe.call(ve,m.value[ue])}catch(ee){ee.message==="ocrPagePackageNotEnough"&&(yield Dd(t,{exceedFiles:[{file:z,ocrPageCount:((pe=z.error_msg)==null?void 0:pe.ocr_page_num)||0}],userPackageInfo:{remainOcrPageCount:o.remainingOcrPageCount,ocrPagePackageOptions:o.additionPackages.find(L=>L.type===Le.OCR_PAGE).options},onPayPagePackageCompleted:L=>T(this,null,function*(){var ie,Ee;const X=L[0];yield D.reparseDocOcr(X.file),(Ee=(ie=p.value).refreshDocInfoIfOpened)==null||Ee.call(ie,m.value[ue])})}))}}),de=({fileId:z,updateInfo:ue,isCollection:ve})=>{var ee,L;if(ve)return;const fe=m.value.findIndex(X=>X.id===z),pe=A(A({},m.value[fe].share),ue);D.onDocShared(fe,pe),(L=(ee=p.value).refreshDocInfoIfOpened)==null||L.call(ee,m.value[fe])},we=fe=>T(this,[fe],function*({id:z,name:ue,type:ve}){var L,X;const pe=m.value.findIndex(ie=>ie.id===z),ee=f.value[pe];try{yield D.updateDocName(z,ue),ve===Be.COLLECTION?ge.success(i("editFilename.collectionSuccessTip")):ge.success(i("editFilename.successTip")),(X=(L=p.value).refreshDocInfoIfOpened)==null||X.call(L,m.value[pe])}finally{ee.cancelEditFilename()}}),it=ve=>T(this,[ve],function*({uploadInfo:z,isActiveNewestFile:ue}){var ie;u.value.resetSearch();const{uploaded:fe,collectionData:pe,uploadType:ee}=z;if(yield W({direction:n.DOWN,isResetPage:!0}),ee===Be.COLLECTION){a.push({name:"collectionChat",params:{id:pe.id}});return}R();const L=fe.map(Ee=>Ee.id),X=((ie=m.value.find(Ee=>L.includes(Ee.id)))==null?void 0:ie.id)||L[0];ue&&a.push({name:"chat",params:{id:X}})}),Te=()=>{C()},gt=z=>T(this,null,function*(){l.value.toggleFileList(z),z&&(m.value=[],yield ne())}),pt=z=>T(this,null,function*(){yield o.getDocUsageInfo(),oe(z)});return Fe.on("toggleFileList",gt),Fe.on("shareChanged",de),Fe.on("reparseOcrHandlerClicked",pt),It(()=>T(this,null,function*(){const z=document.documentElement.clientHeight,ue=parseInt(z/vA)+10;S.value=ue,yield ne()})),ii(()=>{y.value=!1,R()}),mu(()=>{y.value=!0,I==null||I(),rn.off("docStatusChanged",Y)}),cu(()=>{Fe.off("toggleFileList",gt),Fe.off("shareChanged",de),Fe.off("reparseOcrHandlerClicked",pt),I==null||I(),rn.off("docStatusChanged",Y)}),$e(()=>r.hasLeft,z=>{z?I==null||I():R()}),$e(()=>o.isLogin,z=>{z||(m.value=[],W({isResetPage:!0,direction:n.DOWN}))}),$e(()=>[s.name,s.params],(z,ue)=>T(this,null,function*(){const[ve]=z||[],[fe,pe]=ue||[];if(ve==="upload"&&fe==="collectionChat"&&(pe!=null&&pe.id)){const ee=m.value.findIndex(L=>L.id===(pe==null?void 0:pe.id));if(ee>-1){const L=yield fo(A({upload_ids:[pe==null?void 0:pe.id]},U.value));L[0]&&m.value.splice(ee,1,L[0])}}})),(z,ue)=>{const ve=rt("router-view"),fe=Jt("infinite-scroll"),pe=Jt("infinite-scroll-top");return h(),b(K,null,[v(xd,{ref_key:"$leftSidebarRef",ref:l,class:"list-layout"},{default:k(()=>[v(Id,{ref_key:"$searchBarRef",ref:u,onSearch:B},null,512),c("div",oA,[P.value?(h(),b("div",rA,[(h(),b(K,null,ke(4,ee=>c("div",{key:ee,class:"list-item-skeleton"},uA)),64))])):m.value.length?(h(),M(d(Ri),{key:1,ref_key:"$fileListRef",ref:w,class:"file-list"},{default:k(()=>[c("div",dA,[$.topLoading?(h(),b("span",pA,[v(te,{name:"doc-ing",class:"loading-icon"})])):N("",!0)]),ct((h(),b("div",null,[(h(!0),b(K,null,ke(F.value,ee=>(h(),M(Td,{ref_for:!0,ref_key:"$docListItem",ref:f,key:ee.id,"doc-info":{id:ee.id,name:ee.name,type:ee.type,status:ee.status,createdAt:ee.created_at,docCount:ee.document_count,errorInfo:ee.error_msg,documents:ee.documents,editableName:d(Od)(ee),iconName:d(pa)(ee.name,ee.type===d(Be).COLLECTION)},active:ee.id===G.value,"can-edit":d(o).isLogin,"max-pdf-pages":d(o).maxPdfPages,"total-pdf-limit-pages":d(o).totalPdfLimitPages,"max-pdf-size":d(o).maxPdfSize,"searched-keyword":g.value,"tooltip-disabled":y.value,"is-free-membership":d(o).isFreeMembership,"remaining-ocr-page-count":d(o).remainingOcrPageCount,"on-remove-doc":L=>Re(ee,L),"on-before-click-reparse":d(o).getDocUsageInfo,onClick:L=>ae(ee),onFileNameChanged:we,onUpgradeBtnClicked:Te,onClickReparsePage:L=>Ae(ee),onClickReparseOcr:L=>oe(ee)},null,8,["doc-info","active","can-edit","max-pdf-pages","total-pdf-limit-pages","max-pdf-size","searched-keyword","tooltip-disabled","is-free-membership","remaining-ocr-page-count","on-remove-doc","on-before-click-reparse","onClick","onClickReparsePage","onClickReparseOcr"]))),128))])),[[fe,()=>q(n.DOWN)],[pe,()=>q(n.UP)]]),c("div",fA,[$.bottomLoading?(h(),b("span",hA,[v(te,{name:"doc-ing",class:"loading-icon"})])):N("",!0),$.bottomNoMore?(h(),b("span",_A,_(z.$t("fileListPagination.noMore")),1)):N("",!0)])]),_:1},512)):(h(),M($d,{key:2},{default:k(()=>[g.value?(h(),b("span",{key:0,textContent:_(z.$t("fileListSearchable.noSearchResult"))},null,8,gA)):(h(),b(K,{key:1},[c("span",{textContent:_(z.$t("fileListUpload.contentText"))},null,8,mA),v(Oo,{onUploaded:it},{default:k(()=>[v(d(In),{type:"primary"},{default:k(()=>[Q(_(z.$t("fileListUpload.handlerText")),1)]),_:1})]),_:1})],64))]),_:1}))])]),_:1},512),c("div",yA,[v(ve,null,{default:k(({Component:ee})=>[(h(),M(va(ee),{ref_key:"$childPage",ref:p,onUploaded:it},null,544))]),_:1})])],64)}}},wA=se(bA,[["__scopeId","data-v-b8cdfaf7"]]);const EA=e=>(vt("data-v-7b29f650"),e=e(),bt(),e),PA={class:"copy-docs-to-collection"},kA={class:"select-docs"},SA={class:"left"},AA={class:"header"},TA={class:"top"},CA={key:0,class:"no-docs"},xA=EA(()=>c("p",null,[c("img",{crossorigin:"anonymous",src:Hr,alt:""})],-1)),IA={class:"tips"},$A=["textContent"],RA=["infinite-scroll-disabled"],DA=["onClick"],NA={class:"docs-in-collection"},OA={class:"files-count"},LA={class:"loading-bar"},UA={key:1},MA={class:"right"},BA={class:"top"},FA=["textContent"],GA={class:"bottom"},zA={__name:"CopyDocsToCollection",props:{disabled:{type:Boolean,default:!1},remainder:{type:Number,default:0},collectionId:{type:String,default:""}},emits:["saved"],setup(e,{emit:t}){const n=e,{showUpgradeDialog:a}=Lt(),s=dt(),i=Oe(),o=x(!1),r=x(!1),l=x(!1),u=x(!1),p=x([]),f=x(""),g=x(""),y=x(new Map),w=x(),m=x(),E=O(()=>Math.min(n.remainder,i.remainingUploadFileCount));let P="";const S=()=>T(this,null,function*(){var I;if(l.value=!1,P!==f.value){y.value.clear();const R=yield D();y.value=new Map(R),g.value=f.value,yield fn(),Fe.emit("needOptimizeSearchedFilename"),(I=m.value)==null||I.scrollTo(0,0)}P=f.value}),D=I=>T(this,null,function*(){var V,q;try{if(o.value)return[];o.value=!0;const ne=de=>Pd({keyword:f.value,page_size:20,from_id:de,direction:"down",status:je.ELEMENT_PARSED}),ae=de=>de.filter(we=>{if(we.status<je.ELEMENT_PARSED)return!1;if(we.type===Be.COLLECTION){if(we.id===n.collectionId)return!1;we.documents=we.documents||[],we.documents=we.documents.filter(it=>it.status>=je.ELEMENT_PARSED),we.count=we.documents.length,we.showCollection=!!f.value,we.collectionLoading=!1}return we.type!==Be.COLLECTION||we.type===Be.COLLECTION&&we.document_count>0}),Re=yield ne(I);l.value=Re.length<20;const Ae=ae(Re);let oe=(V=Re.at(-1))==null?void 0:V.id;for(;!l.value&&oe&&Ae.length+y.value.size<20;)if(oe){const de=yield ne(oe);oe=(q=de.at(-1))==null?void 0:q.id,l.value=de.length<20,Ae.push(...ae(de))}return Ae.map(de=>[de.id,de])}finally{o.value=!1}}),C=I=>T(this,null,function*(){if(!I.documents){if(I.collectionLoading)return;try{I.collectionLoading=!0;const R=yield kd(I.id);I.documents=R.documents}finally{I.collectionLoading=!1}}I.showCollection=!I.showCollection}),$=I=>{const R=p.value.indexOf(I);R>-1&&p.value.splice(R,1)},G=()=>T(this,null,function*(){if(!y.value.size){const I=yield D();y.value=new Map(I)}}),U=()=>{p.value=[],f.value&&(f.value="",g.value="",P="",y.value=new Map)},F=()=>T(this,null,function*(){try{r.value=!0;const I=p.value.map(R=>R.id);yield O1({collection_id:n.collectionId,upload_ids:I.join()}),yield i.getDocUsageInfo(),u.value=!1,t("saved")}finally{r.value=!1}}),B=()=>T(this,null,function*(){var I;(I=w.value)==null||I.scrollTo(0,Number.MAX_SAFE_INTEGER)}),W=()=>T(this,null,function*(){var R;const I=(R=[...y.value.values()].at(-1))==null?void 0:R.id;if(I){const V=yield D(I);for(const[q,ne]of V)y.value.set(q,ne);g.value&&(yield fn(),Fe.emit("needOptimizeSearchedFilename"))}}),Y=()=>{i.isLogin?i.remainingUploadFileCount===0?a({activeTabPaneName:i.isFreeMembership?tt.PLAN:tt.PACKAGE}):u.value=!0:s.push({name:"signIn"})};return(I,R)=>{const V=Jt("infinite-scroll");return h(),b("div",PA,[v(d(_t),{placement:"top",content:I.$t("collectionCopy.copyDocTooltip"),"show-after":1e3},{default:k(()=>[v(d(he),{disabled:e.disabled,plain:"",type:"primary",onClick:Y},{default:k(()=>[Q(_(I.$t("copyBtn")),1)]),_:1},8,["disabled"])]),_:1},8,["content"]),v(Xe,{modelValue:u.value,"onUpdate:modelValue":R[9]||(R[9]=q=>u.value=q),width:"60vw",class:"copy-docs-to-collection-dialog","show-footer":!1,title:I.$t("collectionCopy.copyDocTitle"),onOpen:G,onClosed:U},{default:k(()=>[c("div",kA,[c("div",SA,[c("div",AA,[c("div",TA,[c("span",null,_(I.$t("collectionCopy.existingFiles")),1),c("span",null,_(I.$t("collectionCopy.availableFileSlots"))+" : "+_(p.value.length)+"/"+_(E.value),1)]),c("form",{autocomplete:"off",onSubmit:R[5]||(R[5]=be(()=>{},["prevent"]))},[v(d(Ye),{modelValue:f.value,"onUpdate:modelValue":R[1]||(R[1]=q=>f.value=q),clearable:"",placeholder:"Search file name",onClear:R[2]||(R[2]=q=>S(!0)),onKeyup:R[3]||(R[3]=Ne(q=>S(!1),["enter"])),onKeydown:R[4]||(R[4]=Ne(be(()=>{},["stop"]),["esc"]))},{suffix:k(()=>[ct(v(d(ut),{class:"icon-loading",size:18},{default:k(()=>[v(d(Gn))]),_:1},512),[[Kt,o.value]]),ct(v(te,{margin:"0",class:"search-btn",name:"search",onClick:R[0]||(R[0]=q=>S(!1))},null,512),[[Kt,!o.value]])]),_:1},8,["modelValue"])],32)]),!y.value.size&&!o.value?(h(),b("div",CA,[xA,c("p",IA,[c("span",{textContent:_(I.$t("fileListSearchable.noSearchResult"))},null,8,$A)])])):ct((h(),b("div",{key:1,ref_key:"$docListContainer",ref:m,class:"doc-list","infinite-scroll-disabled":o.value||l.value,"infinite-scroll-distance":20},[v(d(vh),{modelValue:p.value,"onUpdate:modelValue":R[6]||(R[6]=q=>p.value=q),class:"content",onChange:B},{default:k(()=>[(h(!0),b(K,null,ke(y.value,([q,ne])=>(h(),b(K,{key:q},[ne.type===d(Be).COLLECTION?(h(),b("div",{key:0,class:_e([{"show-docs":ne.showCollection},"in-collection"])},[c("div",{class:"collection-info",onClick:ae=>C(ne)},[ct(v(d(ut),null,{default:k(()=>[v(d(bh))]),_:2},1536),[[Kt,!ne.collectionLoading]]),ct(v(d(ut),{class:"icon-loading"},{default:k(()=>[v(d(Gn))]),_:2},1536),[[Kt,ne.collectionLoading]]),v(te,{name:"folder",size:20,color:"var(--el-text-color-regular)"}),v(d(_t),{placement:"top","append-to":"body",content:ne.name,"show-after":2e3},{default:k(()=>[v(Ja,{class:"collection-name",keyword:g.value,filename:ne.name},null,8,["keyword","filename"])]),_:2},1032,["content"])],8,DA),c("div",NA,[c("div",OA,_(ne.count)+" files",1),c("div",{class:"child-docs",style:On({"--height":`${ne.count*22+(ne.count-1)*20}px`})},[(h(!0),b(K,null,ke(ne.documents||[],ae=>(h(),M(d(ya),{key:ae.id,label:ae,disabled:p.value.length>=E.value&&!p.value.some(Re=>Re.id===ae.id)},{default:k(()=>[v(te,{name:d(pa)(ae.name),size:20,color:"var(--el-text-color-regular)",class:"file-item-name-icon"},null,8,["name"]),v(d(_t),{placement:"top","append-to":"body",content:ae.name,"show-after":2e3},{default:k(()=>[v(Ja,{class:"doc-name",filename:ae.name,keyword:g.value},null,8,["filename","keyword"])]),_:2},1032,["content"])]),_:2},1032,["label","disabled"]))),128))],4)])],2)):(h(),M(d(ya),{key:1,label:ne,disabled:p.value.length>=E.value&&!p.value.some(ae=>ae.id===ne.id)},{default:k(()=>[v(te,{name:d(pa)(ne.name),size:20,color:"var(--el-text-color-regular)",class:"file-item-name-icon"},null,8,["name"]),v(d(_t),{placement:"top","append-to":"body",content:ne.name,"show-after":2e3},{default:k(()=>[v(Ja,{class:"doc-name",filename:ne.name,keyword:g.value},null,8,["filename","keyword"])]),_:2},1032,["content"])]),_:2},1032,["label","disabled"]))],64))),128))]),_:1},8,["modelValue"]),c("div",LA,[l.value?(h(),b("span",UA,_(I.$t("fileListPagination.noMore")),1)):ct((h(),M(d(ut),{key:0},{default:k(()=>[v(d(Gn),{class:"rotate"})]),_:1},512)),[[Kt,o.value]])])],8,RA)),[[V,W]])]),c("div",MA,[c("div",BA,[c("span",null,_(I.$t("collectionCopy.selectedFiles"))+": "+_(p.value.length),1),v(d(In),{type:"primary",underline:!1,onClick:R[7]||(R[7]=q=>p.value=[])},{default:k(()=>[Q(_(I.$t("collectionCopy.removeAll")),1)]),_:1})]),c("div",{ref_key:"$selectedDocList",ref:w,class:"selected-doc-list"},[(h(!0),b(K,null,ke(p.value,q=>(h(),b("div",{key:q.id,class:"selected-doc"},[v(te,{name:d(pa)(q.name),size:20,color:"var(--el-text-color-regular)",class:"file-item-name-icon"},null,8,["name"]),v(d(_t),{placement:"top","append-to":"body",content:q.name,"show-after":2e3},{default:k(()=>[c("span",{class:"doc-name",textContent:_(q.name)},null,8,FA)]),_:2},1032,["content"]),v(d(ut),{size:18,color:"var(--el-text-color-regular)",onClick:ne=>$(q)},{default:k(()=>[v(d(wh))]),_:2},1032,["onClick"])]))),128))],512),c("div",GA,[v(d(he),{onClick:R[8]||(R[8]=q=>u.value=!1)},{default:k(()=>[Q(_(I.$t("cancelBtn")),1)]),_:1}),v(d(he),{type:"primary",disabled:!p.value.length,loading:r.value,onClick:F},{default:k(()=>[Q(_(I.$t("saveBtn")),1)]),_:1},8,["disabled","loading"])])])])]),_:1},8,["modelValue","title"])])}}},HA=se(zA,[["__scopeId","data-v-7b29f650"]]);const YA={class:"chat-with-website"},WA={__name:"UploadWebsiteInCollection",props:{uploadHandler:{type:Function,default:()=>{}}},emits:["click"],setup(e,{emit:t}){const n=e,{t:a}=ye(),s=x(""),i=x(!1),o=x(!1),r=p=>{t("click",p)},l=()=>{s.value=""},u=()=>T(this,null,function*(){try{const p=s.value.trim();if(!p){ge.warning(a("uploadPage.validUrlMsg"));return}o.value=!0,yield n.uploadHandler(p),i.value=!1,l()}finally{o.value=!1}});return(p,f)=>(h(),M(d(si),{visible:i.value,"onUpdate:visible":f[3]||(f[3]=g=>i.value=g),trigger:"click",width:390,"show-after":0,placement:"right","popper-class":"collection-website","hide-after":0,onHide:l},{reference:k(()=>[c("div",YA,[v(d(he),{type:"primary",plain:"",onClick:r},{default:k(()=>[Q(_(p.$t("website.entry")),1)]),_:1})])]),default:k(()=>[v(d(Ye),{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=g=>s.value=g),size:"large",disabled:o.value,placeholder:p.$t("website.placeholder"),onClick:f[1]||(f[1]=be(()=>{},["stop"])),onKeyup:Ne(u,["enter"]),onKeydown:f[2]||(f[2]=Ne(be(()=>{},["stop"]),["esc"]))},{append:k(()=>[v(d(he),{loading:o.value,type:"primary",class:"website-button",onClick:u},{default:k(()=>[Q(_(p.$t("website.button")),1)]),_:1},8,["loading"])]),_:1},8,["modelValue","disabled","placeholder","onKeyup"])]),_:1},8,["visible"]))}},VA=se(WA,[["__scopeId","data-v-b363201a"]]);const qA=e=>(vt("data-v-f3087578"),e=e(),bt(),e),jA={class:"file-list-content"},KA={class:"header-wrap"},QA={key:1,class:"collection-name skeleton-animation"},XA={class:"collection-name"},JA={key:0,class:"upload-wrap"},ZA={class:"upload-text"},eT={class:"button-wrapper"},tT={class:"check-all"},nT={key:1,style:{"margin-left":"16px"}},aT=["textContent"],sT=["textContent"],iT={class:"main-wrapper"},oT={key:0,class:"collection-empty-view"},rT=qA(()=>c("p",null,[c("img",{crossorigin:"anonymous",src:Hr,alt:""})],-1)),lT={class:"tips"},cT={__name:"Collection",props:{id:{type:String,default:""},shareId:{type:String,default:""},isSharePage:{type:Boolean,default:!1}},setup(e){const t=e,{appContext:n}=mn(),a=Er(()=>xa(()=>import("./ChatDoc-3a16c913.js"),[window.__toAssetUrl("ChatDoc-3a16c913.js"),window.__toAssetUrl("vendor-2-e250ed0d.js"),window.__toAssetUrl("vendor-1-8c77151e.js"),window.__toAssetUrl("vendor-4-87e1e3f9.js"),window.__toAssetUrl("ChatDoc-434bb5c7.css")],import.meta.url)),s=At(),i=dt(),{t:o}=ye(),r=zr(),l=Oe(),{showUpgradeDialog:u,freeUserShowUpgradeDialog:p}=Lt(),f=x(),g=x(),y=x(""),w=O(()=>s.params.docId),m=O(()=>t.isSharePage?t.id:s.params.id),E=L=>{t.isSharePage?i.replace({name:"share",params:{id:t.shareId,docId:L}}):i.replace({name:"collectionChat",params:{id:m.value,docId:L}})},P=O(()=>qs(r.collectionFilesFully.filter(L=>{const X=L.name.toLowerCase(),ie=y.value.toLowerCase();return X.indexOf(ie)!==-1}),"id")),S=O(()=>r.collectionFilesFully.filter(L=>L.status>=je.ELEMENT_PARSED&&L.pure_ocr===!1)),D=O(()=>r.collectionFilesFully.filter(L=>L.pure_ocr===!0)),C=O(()=>U.value.length>0&&U.value.length!==S.value.length),$=O(()=>G.value.length===0&&U.value.length>0),G=O(()=>S.value.filter(L=>!L.includeChat)),U=O(()=>S.value.filter(L=>L.includeChat&&L.status>=je.ELEMENT_PARSED)),F=O(()=>Z(A({},r.collectionInfo),{includes:U.value,excludes:[...G.value,...D.value],docListOcrExceed:D.value})),B=O(()=>{var L;return(L=r.collectionInfo)!=null&&L.id?r.isCollectionNormal?!0:!!((r.isCollectionAllDocsError||r.isCollectionParsing)&&r.isHasInteractions):!1}),W=Cd(P),Y=L=>{S.value.forEach(X=>{X.includeChat=L})},I=(L,X)=>T(this,null,function*(){yield W.removeDoc(L),yield Ae(),r.isCollectionEmpty?E(null):w.value===L.id&&z(!0),ge.success(o("deleteFileDialog.deletedTip")),X()}),R=({fileId:L,updateInfo:X,isCollection:ie})=>{F.value.id===L&&ie&&r.updateCollectionSelfInfo({share:A(A({},r.collectionInfo.share),X)})},V=ie=>T(this,[ie],function*({id:L,name:X}){const Ee=g.value.find(Je=>Je.id===L);try{yield W.updateDocName(L,X),ge.success(o("editFilename.collectionSuccessTip"))}finally{Ee.cancelEditFilename()}}),q=L=>T(this,null,function*(){var X;try{yield W.reparseDocPage(L,l.maxPdfPages,l.remainingPagePackages)}catch(ie){if(ie.message==="pagePackageNotEnough"){const Ee=((X=L.error_msg)==null?void 0:X.page_num)||0;yield Hn(n,{exceedFiles:[{file:L,lackPageCount:Ee-l.maxPdfPages-l.remainingPagePackages}],userPagePackageInfo:{maxPageCount:l.maxPdfPages,pagePackageOptions:l.additionPackages.find(Je=>Je.type===Le.PAGE).options},isEffectMembership:l.isEffectMembership,onPayPagePackageCompleted:Je=>T(this,null,function*(){const We=Je[0];yield W.reparseDocPage(We.file)})})}}}),ne=L=>T(this,null,function*(){var X;try{yield W.reparseDocOcr(L,l.remainingOcrPageCount)}catch(ie){ie.message==="ocrPagePackageNotEnough"&&(yield Dd(n,{exceedFiles:[{file:L,ocrPageCount:((X=L.error_msg)==null?void 0:X.ocr_page_num)||0}],userPackageInfo:{remainOcrPageCount:l.remainingOcrPageCount,ocrPagePackageOptions:l.additionPackages.find(Ee=>Ee.type===Le.OCR_PAGE).options},onPayPagePackageCompleted:Ee=>T(this,null,function*(){const Je=Ee[0];yield W.reparseDocOcr(Je.file)})}))}});let ae;const Re=()=>{l.isLogin&&(rn.connect(),rn.off("docStatusChanged",Ae),rn.on("docStatusChanged",Ae)),ae==null||ae(),ae=Li(()=>T(this,null,function*(){r.collectionFilesFully.some(X=>X.status<je.ELEMENT_PARSED&&X.status>0)?yield Ae():ae==null||ae()}),Eu,{leading:!1})},Ae=()=>T(this,null,function*(){const L=yield kd(m.value);r.setCollectionInfo(L)}),oe=O(()=>F.value?Math.max(l.countPerCollection-F.value.documents.length,0):0),de=()=>{i.push({name:"upload"})},we=L=>T(this,null,function*(){y.value=L,yield fn(),g.value&&g.value.forEach(X=>{X.highlightDocName()})}),it=L=>{E(L.id)},Te=L=>{f.value.resetSearch(),E(L)},gt=()=>T(this,null,function*(){f.value.resetSearch(),yield Ae(),z(),Re()}),pt=X=>T(this,[X],function*({isActiveNewestFile:L}){f.value.resetSearch(),yield Ae(),L&&z(!0),Re()}),z=(L=!1)=>{var X;if(!w.value||L){const{documents:ie}=F.value;E((X=ie[0])==null?void 0:X.id)}},ue=()=>{u()},ve=L=>{L.sources.forEach(X=>{const ie=G.value.find(Ee=>Ee.id===X.docId);ie&&(ie.includeChat=!0)})},fe=()=>{if(g.value){const L=g.value.find(X=>X.id===w.value);L&&L.$el.scrollIntoView({block:"center"})}},pe=L=>{if(!l.isLogin){i.push({name:"signIn"});return}l.isEffectMembership||(L.stopPropagation(),p())},ee=L=>T(this,null,function*(){yield Sd(L,m.value),yield pt({isActiveNewestFile:!0})});return It(()=>T(this,null,function*(){yield Ae(),z(),Re(),Fe.on("clickMaterialChatdoc",ve),Fe.on("toggleCollectionFileByAbstract",Te),Fe.on("shareChanged",R),fe()})),ms(()=>{Fe.off("clickMaterialChatdoc",ve),Fe.off("toggleCollectionFileByAbstract",Te),Fe.off("shareChanged",R),rn.off("docStatusChanged",Ae),r.resetCollectionState()}),$e(w,()=>{fe()}),(L,X)=>(h(),b(K,null,[v(xd,null,{default:k(()=>[c("div",jA,[c("div",KA,[e.isSharePage?N("",!0):(h(),M(te,{key:0,name:"arrow-left",size:20,class:"back-icon",onClick:de})),F.value?(h(),M(d(_t),{key:2,content:F.value.name,"show-after":1e3},{default:k(()=>[c("div",XA,_(F.value.name),1)]),_:1},8,["content"])):(h(),b("div",QA))]),v(Id,{ref_key:"$searchBarRef",ref:f,onSearch:we},null,512),e.isSharePage?N("",!0):(h(),b("div",JA,[c("span",ZA,_(L.$t("collectionFileList.uploadAlertText")),1),c("div",eT,[v(Oo,{"collection-id":m.value,onUploaded:pt},{default:k(()=>[v(d(_t),{placement:"top",content:L.$t("collectionFileList.uploadBtnTooltip"),"show-after":1e3},{default:k(()=>[c("span",{class:_e(["el-button el-button--primary is-plain",{"is-disabled":!F.value}])},_(L.$t("collectionFileList.uploadBtnText")),3)]),_:1},8,["content"])]),_:1},8,["collection-id"]),v(HA,{disabled:!F.value,"collection-id":m.value,remainder:oe.value,onSaved:gt},null,8,["disabled","collection-id","remainder"])]),v(VA,{"upload-handler":ee,onClick:pe})])),c("div",tT,[c("div",{onClick:X[0]||(X[0]=ie=>Y(G.value.length>0))},[v(d(ya),{size:"large","model-value":$.value,indeterminate:C.value},null,8,["model-value","indeterminate"])]),c("span",null,_(G.value.length>0?L.$t("collection.selectAllDocs"):L.$t("collection.unselectAllDocs")),1)]),P.value.length?(h(),M(d(Ri),{key:1,class:"file-list"},{default:k(()=>[(h(!0),b(K,null,ke(P.value,ie=>(h(),M(Td,{ref_for:!0,ref_key:"$docListItem",ref:g,key:ie.id,"doc-info":{id:ie.id,name:ie.name,type:ie.type,status:ie.status,createdAt:ie.created_at,docCount:ie.document_count,errorInfo:ie.error_msg,editableName:d(Od)(ie),iconName:d(pa)(ie.name)},active:ie.id===w.value,"can-edit":d(l).isLogin&&!e.isSharePage,"max-pdf-pages":d(l).maxPdfPages,"total-pdf-limit-pages":d(l).totalPdfLimitPages,"max-pdf-size":d(l).maxPdfSize,"searched-keyword":y.value,"is-free-membership":d(l).isFreeMembership,"remaining-ocr-page-count":d(l).remainingOcrPageCount,"on-remove-doc":Ee=>I(ie,Ee),"on-before-click-reparse":d(l).getDocUsageInfo,onFileNameChanged:V,onClick:Ee=>it(ie),onUpgradeBtnClicked:ue,onClickReparsePage:Ee=>q(ie),onClickReparseOcr:Ee=>ne(ie)},{"item-left":k(()=>[ie.status>=d(je).ELEMENT_PARSED&&ie.pure_ocr===!1?(h(),M(d(ya),{key:0,modelValue:ie.includeChat,"onUpdate:modelValue":Ee=>ie.includeChat=Ee,size:"large",onClick:X[1]||(X[1]=be(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])):(h(),b("div",nT))]),_:2},1032,["doc-info","active","can-edit","max-pdf-pages","total-pdf-limit-pages","max-pdf-size","searched-keyword","is-free-membership","remaining-ocr-page-count","on-remove-doc","on-before-click-reparse","onClick","onClickReparsePage","onClickReparseOcr"]))),128))]),_:1})):(h(),M($d,{key:2},{default:k(()=>[y.value?(h(),b("span",{key:0,textContent:_(L.$t("fileListSearchable.noSearchResult"))},null,8,aT)):(h(),b(K,{key:1},[c("span",{textContent:_(L.$t("fileListUpload.contentText"))},null,8,sT),v(Oo,{"collection-id":m.value,onUploaded:pt},{default:k(()=>[v(d(In),{type:"primary"},{default:k(()=>[Q(_(L.$t("fileListUpload.handlerText")),1)]),_:1})]),_:1},8,["collection-id"])],64))]),_:1}))])]),_:1}),c("div",iT,[d(r).isEmptyCollection?(h(),b("div",oT,[rT,c("p",lT,[c("span",null,_(L.$t("fileListUpload.contentTextWithoutHandler")),1)])])):(h(),M(d(a),{key:1,"collection-info":F.value,"show-collection-chat-view":B.value,"doc-id":w.value,"is-share-page":e.isSharePage,onChangeDoc:Te},null,8,["collection-info","show-collection-chat-view","doc-id","is-share-page"]))])],64))}},Ud=se(cT,[["__scopeId","data-v-f3087578"]]),uT="https://cdn.pdppt.com/chatdoc/assets/notice-video-e1b2e8ee.mp4";const dT={class:"dialog-wrap"},pT={class:"main"},fT={class:"main-header"},hT={class:"main-content"},_T={class:"content"},gT={class:"sub-content common"},mT={class:"extra common"},yT=c("video",{autoplay:"",loop:"",muted:"",crossorigin:"anonymous",class:"show-content video-content",controls:""},[c("source",{src:uT,type:"video/mp4"})],-1),vT={class:"main-footer"},bT=!0,wT={__name:"NoticeDialog",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(e,{expose:t,emit:n}){const a=e,{t:s}=ye(),i=Oe(),{showUpgradeDialog:o,$proPackage:r}=Lt(),l=O(()=>s("notice.msg")),u=x(!1),p=()=>{n("update:visible",!1)},f=()=>{i.isFreeMembership&&o({defaultPackage:r.value,sourcePage:qe.SOURCE_PAGE.NOTICE}),p()},g=()=>xr(Ke.LAST_NOTICE_TIME),y=()=>{Cr(Ke.LAST_NOTICE_TIME,ui())},w=()=>{aa(Ke.LAST_NOTICE_TIME)};return t({$noticeMsg:l,enableNotice:bT,initial:()=>{if(!i.isLogin){w();return}const E=g();if(E){const P=ui(),S=7*24*60*60;P-E>=S&&n("update:visible",!0);return}n("update:visible",!0)}}),$e(()=>a.visible,()=>{a.visible&&y()}),(E,P)=>(h(),M(Xe,{"model-value":e.visible,width:740,class:"notice-dialog","show-footer":!1,onClosed:p},{default:k(()=>[c("div",dT,[c("div",pT,[c("div",fT,[v(te,{name:"notice-icon",size:40,class:"notice-icon"}),v(d(ut),{class:"notice-close",onClick:p},{default:k(()=>[v(d(Eh))]),_:1})]),c("div",hT,[c("p",_T,_(E.$t("notice.content")),1),c("p",gT,_(d(i).isFreeMembership?E.$t("notice.free.subContent"):E.$t("notice.pro.subContent",{count:d(i).maxOcrPages})),1),c("p",mT,_(E.$t("notice.extra")),1),yT]),c("div",vT,[v(d(he),{type:"primary",loading:u.value,onClick:f},{default:k(()=>[Q(_(d(i).isFreeMembership?E.$t("notice.free.confirmBtnText"):E.$t("notice.pro.confirmBtnText")),1)]),_:1},8,["loading"])])])])]),_:1},8,["model-value"]))}};const ET={class:"footer-view"},PT=["href"],kT={key:0,class:"dot"},ST={__name:"FooterView",props:{source:{type:String,default:xt.MAIN}},setup(e){const t=e,n=O(()=>{let a=at.footerLinkList.map(s=>({url:Dt[s.toUpperCase()],name:s}));return t.source===xt.API&&(a=a.filter(s=>![Tt.WIKI,Tt.CHANGELOG].includes(s.name))),a});return(a,s)=>(h(),b("footer",ET,[(h(!0),b(K,null,ke(n.value,(i,o)=>(h(),b("div",{key:o,class:"link-wrapper"},[c("a",{href:i.url,rel:"noopener noreferrer",class:"link",target:"_blank"},_(i.name),9,PT),o!==n.value.length-1?(h(),b("span",kT,"·")):N("",!0)]))),128))]))}},Yr=se(ST,[["__scopeId","data-v-85d9f776"]]),AT="https://cdn.pdppt.com/chatdoc/assets/spread-65b11a17.png";const TT={class:"user-collect-list"},CT=["onClick"],xT={key:0},IT={key:1,class:"edit-content"},$T=["onUpdate:modelValue","onKeyup"],RT={__name:"UserCollectList",props:{list:{type:Array,default:()=>[]}},emits:["itemClicked","save"],setup(e,{emit:t}){const n=s=>{t("itemClicked",s)},a=s=>{t("save",s)};return(s,i)=>(h(),b("div",TT,[(h(!0),b(K,null,ke(e.list,o=>(h(),b("div",{key:o.value,class:_e(["item",{active:o.active}])},[o.isEdit?(h(),b("div",IT,[ct(c("input",{"onUpdate:modelValue":r=>o.inputValue=r,type:"text",maxlength:50,onKeyup:Ne(r=>a(o),["enter"])},null,40,$T),[[Ph,o.inputValue]]),v(te,{name:"collect-save",class:"save-icon",onClick:r=>a(o)},null,8,["onClick"])])):(h(),b("div",{key:0,class:"item-content",onClick:r=>n(o)},[c("span",null,_(o.text),1),o.value===e.list.length-1?(h(),b("span",xT,_(s.$t("userCollect.specifyText")),1)):N("",!0)],8,CT))],2))),128))]))}},_o=se(RT,[["__scopeId","data-v-ba5d832a"]]),DT="https://cdn.pdppt.com/chatdoc/assets/product-hunt-light-afe44c69.svg",NT="https://cdn.pdppt.com/chatdoc/assets/product-hunt-dark-632a6850.svg",OT=["href"],LT=["src"],UT=["src"],Hl="ChatDOC - Chat with documents. Get GPT responses with cited sources | Product Hunt",MT={__name:"ProductHunt",setup(e){const t=ub(),n=x(!0),a=O(()=>`https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=384893&theme=${t.value?"dark":"light"}`),s=O(()=>t.value?NT:DT),i=()=>{n.value=!1};return(o,r)=>(h(),b("a",{href:d(Dt).PRODUCT_HUNT,target:"_blank",rel:"noopener noreferrer"},[n.value?(h(),b("img",{key:0,src:a.value,alt:Hl,class:"product-hunt",onError:i},null,40,LT)):(h(),b("img",{key:1,src:s.value,alt:Hl,class:"product-hunt",crossorigin:"anonymous"},null,8,UT))],8,OT))}};const BT={class:"collect-header"},FT={class:"text"},GT={class:"step-content"},zT={class:"text"},HT={class:"collect-content"},YT={key:0,class:"step-1 step-item"},WT={class:"title"},VT={class:"tip"},qT={key:0,class:"next-btn-wrapper"},jT={key:0,class:"next-btn-wrapper"},KT={key:1,class:"step-2 step-item"},QT={class:"title"},XT={class:"tip"},JT={key:0,class:"next-btn-wrapper"},ZT={key:2,class:"step-3 step-item"},e0={class:"title"},t0={class:"tip"},n0=c("img",{crossorigin:"anonymous",src:AT,alt:"spread",class:"spread"},null,-1),a0={__name:"UserCollectDialog",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(e,{emit:t}){const n={SELECT_PROFESSION:0,SELECT_CHANNEL:1,SPREAD:2},a={PROFESSION:"profession",BUSINESS:"business",CHANNEL:"channel"},{t:s}=ye(),i=x(n.SELECT_PROFESSION),o=x(!1),r=["Business","Student","Educator","Other"],l=["Finance","IT/Engineering","Sales/Account Manager","Media/Marketer/PR","Medical/Health Care","Other"],u=at.referrerList,p=(Y=[])=>Y.map((I,R)=>({active:!1,value:R,text:I,isEdit:!1,inputValue:""})),f=x(p(r)),g=x(p(l)),y=x(p(u)),w=x({job:{primaryJob:null,secondaryJob:null,threeJob:null},referrer:{primaryReferrer:null,secondaryReferrer:null}}),m=O(()=>!(i.value===n.SELECT_PROFESSION&&!o.value)),E=O(()=>i.value===n.SELECT_PROFESSION?o.value?a.BUSINESS:a.PROFESSION:i.value===n.SELECT_CHANNEL?a.CHANNEL:null),P=()=>{t("update:visible",!1)},S=()=>{i.value===n.SPREAD?i.value=n.SELECT_CHANNEL:i.value===n.SELECT_CHANNEL?i.value=n.SELECT_PROFESSION:o.value&&(o.value=!1)},D=()=>{P()},C=(Y=[])=>Y.find(I=>I.text==="Other"),$=Y=>{let I;switch(Y){case a.PROFESSION:I=f.value;break;case a.BUSINESS:I=g.value;break;case a.CHANNEL:I=y.value;break}return I},G=Y=>{const I=Y.value,R=E.value,V=$(R);if(V.forEach(q=>{q.active=!1}),V[I].active=!0,I===V.length-1){V[I].isEdit=!0;return}if(V[V.length-1].isEdit=!1,V[V.length-1].inputValue="",R===a.PROFESSION&&I===0){o.value=!0,B({item:Y,type:R,action:"click"});return}[a.PROFESSION,a.BUSINESS].includes(R)?i.value=n.SELECT_CHANNEL:i.value=n.SPREAD,B({item:Y,type:R,action:"click"})},U=()=>{const Y=$(E.value),I=C(Y);F(I)},F=Y=>{const I=E.value;Y.inputValue.trim()?([a.PROFESSION,a.BUSINESS].includes(I)?i.value=n.SELECT_CHANNEL:i.value=n.SPREAD,B({item:Y,type:I,action:"other"})):ge.error(s("userCollect.emptyTip"))},B=V=>T(this,[V],function*({item:Y,type:I,action:R}){const{text:q,inputValue:ne}=Y;if(R==="click")switch(I){case a.PROFESSION:w.value.job.primaryJob=q,w.value.job.secondaryJob=null,w.value.job.threeJob=null;break;case a.BUSINESS:w.value.job.secondaryJob=q,w.value.job.threeJob=null;break;case a.CHANNEL:w.value.referrer.primaryReferrer=q,w.value.referrer.secondaryReferrer=null}else switch(I){case a.PROFESSION:w.value.job.primaryJob=q,w.value.job.secondaryJob=ne;break;case a.BUSINESS:w.value.job.secondaryJob=q,w.value.job.threeJob=ne;break;case a.CHANNEL:w.value.referrer.primaryReferrer=q,w.value.referrer.secondaryReferrer=ne}const{job:ae,referrer:Re}=w.value,Ae=(de={})=>Yf(de,(we,it)=>Wf(it)),oe={job:Ae(ae),referrer:Ae(Re)};yield k_(oe)}),W=()=>{S_()};return(Y,I)=>(h(),M(Xe,{"model-value":e.visible,class:"user-info-collect-dialog",width:872,"show-footer":!1,onClosed:P},{default:k(()=>[c("div",BT,[m.value?(h(),b("div",{key:0,class:"back",onClick:S},[v(d(ut),null,{default:k(()=>[v(d(kh))]),_:1}),c("span",FT,_(Y.$t("backBtn")),1)])):N("",!0),c("div",GT,[v(d(vu),{active:i.value,"finish-status":"success"},{default:k(()=>[v(d(la)),v(d(la)),v(d(la))]),_:1},8,["active"])]),c("div",{class:"skip",onClick:D},[c("span",zT,_(Y.$t(i.value===n.SPREAD?"closeBtn":"skipBtn")),1),i.value!==n.SPREAD?(h(),M(d(ut),{key:0},{default:k(()=>[v(d(wr))]),_:1})):N("",!0)])]),c("div",HT,[i.value===n.SELECT_PROFESSION?(h(),b("div",YT,[c("p",WT,_(Y.$t("userCollect.title")),1),c("p",VT,_(Y.$t("userCollect.tip1")),1),o.value?(h(),b(K,{key:1},[v(_o,{list:g.value,class:_e(`${a.BUSINESS}-list`),onItemClicked:G,onSave:F},null,8,["list","class"]),C(g.value).isEdit?(h(),b("div",jT,[v(d(he),{type:"primary",size:"large",onClick:U},{default:k(()=>[Q(_(Y.$t("nextBtn")),1)]),_:1})])):N("",!0)],64)):(h(),b(K,{key:0},[v(_o,{list:f.value,class:_e(`${a.PROFESSION}-list`),onItemClicked:G,onSave:F},null,8,["list","class"]),C(f.value).isEdit?(h(),b("div",qT,[v(d(he),{type:"primary",size:"large",onClick:U},{default:k(()=>[Q(_(Y.$t("nextBtn")),1)]),_:1})])):N("",!0)],64))])):i.value===n.SELECT_CHANNEL?(h(),b("div",KT,[c("p",QT,_(Y.$t("userCollect.title")),1),c("p",XT,_(Y.$t("userCollect.tip2")),1),v(_o,{list:y.value,class:_e(`${a.CHANNEL}-list`),onItemClicked:G,onSave:F},null,8,["list","class"]),C(y.value).isEdit?(h(),b("div",JT,[v(d(he),{type:"primary",size:"large",onClick:U},{default:k(()=>[Q(_(Y.$t("nextBtn")),1)]),_:1})])):N("",!0)])):(h(),b("div",ZT,[c("p",e0,_(Y.$t("userCollect.spreadTitle")),1),c("p",t0,_(Y.$t("userCollect.tip3")),1),d(at).hasProductHunt?(h(),M(MT,{key:0,class:"product-hunt-link",onClick:W})):N("",!0),n0]))])]),_:1},8,["model-value"]))}},Wr="https://cdn.pdppt.com/chatdoc/assets/gift-box-756b7a31.png";const s0={class:"header-container"},i0={class:"title"},o0=["src"],r0={class:"content-wrap"},l0={class:"welcome-text"},c0={class:"common-content"},u0={class:"common-content"},d0={class:"common-content"},p0={class:"common-content"},f0=["href"],h0={class:"common-content"},_0={class:"common-content"},g0={__name:"WelcomeDialog",props:{visible:{type:Boolean,default:!1},username:{type:String,default:""},maxInviteFilePackageCount:{type:Number,default:0}},emits:["update:visible"],setup(e,{emit:t}){const{showUpgradeDialog:n}=Lt(),a=()=>{n({activeTabPaneName:Bt.REFER})},s=()=>{n({activeTabPaneName:Bt.UPGRADE})},i=()=>{t("update:visible",!1)};return(o,r)=>(h(),M(Xe,{"model-value":e.visible,width:677,"show-footer":!1,class:"welcome-notice-dialog",onClosed:i},{header:k(()=>[c("div",s0,[v(te,{class:"tag",name:"tag-new"}),c("div",i0,_(o.$t("welcomeDialog.title")),1),c("img",{class:"gift-img",crossorigin:"anonymous",src:d(Wr),alt:"gift"},null,8,o0)])]),default:k(()=>[c("div",r0,[c("div",l0,_(o.$t("welcomeDialog.welcomeUser",{username:e.username})),1),c("div",c0,_(o.$t("welcomeDialog.welcomeText")),1),c("div",u0,[c("span",null,_(o.$t("welcomeDialog.inviteFriendQuotaText",{count:e.maxInviteFilePackageCount})),1),c("span",{class:"link",onClick:a},_(o.$t("welcomeDialog.inviteFriendText")),1)]),c("div",d0,[c("span",null,_(o.$t("welcomeDialog.quotaValidityPeriodTextFront")),1),c("span",{class:"link",onClick:s},_(o.$t("welcomeDialog.toUpgradeText")),1),c("span",null,_(o.$t("welcomeDialog.quotaValidityPeriodTextBehind")),1)]),c("div",p0,[c("span",null,_(o.$t("welcomeDialog.helpText")),1),c("a",{class:"link",href:d(Dt).WIKI,target:"_blank",rel:"noopener noreferrer"},_(o.$t("welcomeDialog.helpLinkText")),9,f0)]),c("div",h0,[c("div",null,_(o.$t("welcomeDialog.happyText")),1)]),c("div",_0,[c("div",null,_(o.$t("welcomeDialog.teamText")),1)])])]),_:1},8,["model-value"]))}};const m0={class:"header-container"},y0={class:"title"},v0=["src"],b0={class:"content-wrap"},w0={class:"welcome-text"},E0={class:"common-content"},P0={class:"common-content"},k0={class:"common-content"},S0={class:"common-content"},A0={__name:"OrgDialog",props:{visible:{type:Boolean,default:!1},username:{type:String,default:""},maxInviteFilePackageCount:{type:Number,default:0},orgName:{type:String,default:""}},emits:["update:visible"],setup(e,{emit:t}){const n=e,a=O(()=>Eg(n.orgName)),{showUpgradeDialog:s}=Lt(),i=()=>{s({activeTabPaneName:Bt.REFER})},o=()=>{s({activeTabPaneName:Bt.UPGRADE})},r=()=>{t("update:visible",!1)};return(l,u)=>(h(),M(Xe,{"model-value":e.visible,width:677,"show-footer":!1,class:"welcome-notice-dialog",onClosed:r},{header:k(()=>[c("div",m0,[v(te,{class:"tag",name:"tag-new"}),c("div",y0,_(l.$t("orgDialog.title",{getOrgName:a.value})),1),c("img",{class:"gift-img",crossorigin:"anonymous",src:d(Wr),alt:"gift"},null,8,v0)])]),default:k(()=>[c("div",b0,[c("div",w0,_(l.$t("orgDialog.welcomeUser",{username:e.username})),1),c("div",E0,[c("span",null,_(l.$t("orgDialog.welcomeText")),1),c("span",null,_(l.$t(`orgDialog.${e.orgName}`)),1)]),c("div",P0,[c("span",null,_(l.$t("orgDialog.inviteFriendQuotaText")),1),c("span",{class:"link",onClick:i},_(l.$t("orgDialog.inviteFriendText")),1),c("span",null,_(l.$t("or")),1),c("span",{class:"link",onClick:o},_(l.$t("orgDialog.toUpgradeText")),1),c("span",null,_(l.$t("orgDialog.upgradeTextQuotaText")),1)]),c("div",k0,[c("div",null,_(l.$t("welcomeDialog.happyText")),1)]),c("div",S0,[c("div",null,_(l.$t("welcomeDialog.teamText")),1)])])]),_:1},8,["model-value"]))}};const T0=["href"],C0=["href"],x0={__name:"NotWhitelistUrlAlert",setup(e){const t=O(()=>at.hasDiscord?"uploadPage.whitelist.withDiscordMsg":"uploadPage.whitelist.withoutDiscordMsg");return(n,a)=>{const s=rt("i18n-t");return h(),M(s,{keypath:t.value,tag:"div",scope:"global",class:"not-whitelist-url-alert-wrap"},{whitelist:k(()=>[c("a",{class:"has-link",href:d(Dt).WHITELIST,target:"_blank",rel:"noopener noreferrer"},_(d(Tt).WHITELIST),9,T0)]),discord:k(()=>[c("a",{class:"has-link",href:d(Dt).DISCORD,target:"_blank",rel:"noopener noreferrer"},_(n.$t("uploadPage.whitelist.messageUsMsg")),9,C0)]),_:1},8,["keypath"])}}},I0=se(x0,[["__scopeId","data-v-9523b944"]]);const $0={class:"header-container"},R0={class:"title"},D0=["src"],N0={class:"content-wrap"},O0={class:"common-content"},L0={class:"common-content"},U0={class:"feature-list"},M0={class:"common-content"},B0={__name:"RecallDialog",props:{visible:{type:Boolean,default:!1},recallType:{type:String,default:""}},emits:["update:visible"],setup(e,{emit:t}){const{t:n}=ye(),a=st({visible:!1,recallType:""}),s={[ua.EARLIER]:[n("recallDialog.features.share"),n("recallDialog.features.thread"),n("recallDialog.features.multiChat")],[ua.BETWEEN]:[n("recallDialog.features.thread"),n("recallDialog.features.multiChat"),n("recallDialog.features.citations")],[ua.NEARER]:[n("recallDialog.features.citations"),n("recallDialog.features.docSupport"),n("recallDialog.features.mobile")]},i=()=>{t("update:visible",!1)};return(o,r)=>(h(),M(Xe,{"model-value":e.visible,width:677,"show-footer":!1,class:"recall-notice-dialog",onClosed:i},{header:k(()=>[c("div",$0,[v(te,{class:"tag",name:"tag-new"}),c("div",R0,_(o.$t("recallDialog.title")),1),c("img",{class:"gift-img",crossorigin:"anonymous",src:d(Wr)},null,8,D0)])]),default:k(()=>[c("div",N0,[c("div",O0,_(o.$t("recallDialog.giftText",{quotaCount:5})),1),c("div",L0,[c("div",null,_(o.$t("recallDialog.featureTitle")),1),c("div",U0,[(h(!0),b(K,null,ke(s[a.recallType],l=>(h(),b("div",{key:l,class:"feature-item"},_(l),1))),128))])]),c("div",M0,[c("div",null,_(o.$t("recallDialog.footerText")),1)])])]),_:1},8,["model-value"]))}};const F0={class:"support-doc-types"},G0={class:"label"},z0={class:"support-wrapper"},H0={class:"un-support-wrapper"},Y0={__name:"SupportDocTypes",props:{isFreeMembership:{type:Boolean,default:!1}},emits:["upgrade"],setup(e,{emit:t}){const n=e,a=["pdf","doc","docx","markdown","epub","txt","website","OCR"],s=O(()=>n.isFreeMembership?["pdf"]:a),i=O(()=>Vf(a,s.value));return(o,r)=>{const l=rt("i18n-t");return h(),b("div",F0,[c("span",G0,_(o.$t("uploadPage.supportText"))+": ",1),c("div",z0,[(h(!0),b(K,null,ke(s.value,(u,p)=>(h(),b("span",{key:p,class:"type"},_(u),1))),128))]),i.value.length?(h(),M(d(hu),{key:0,direction:"vertical"})):N("",!0),v(d(_t),{placement:"top","popper-class":"un-support-popper"},{content:k(()=>[v(l,{class:"tip-text",keypath:"uploadPage.unSupportTips",tag:"span",scope:"global"},{upgrade:k(()=>[v(d(In),{underline:"",onClick:r[0]||(r[0]=u=>t("upgrade"))},{default:k(()=>[Q(_(o.$t("upgrade.toProButton")),1)]),_:1})]),_:1})]),default:k(()=>[c("div",H0,[(h(!0),b(K,null,ke(i.value,(u,p)=>(h(),b("span",{key:p,class:"type"},_(u),1))),128))])]),_:1})])}}},W0=se(Y0,[["__scopeId","data-v-51fd9f8f"]]);const V0={class:"website-help"},q0={class:"url-list"},j0=["href"],K0={__name:"WebsiteHelp",props:{isBaidu:{type:Boolean,default:!1}},setup(e){const t=e,n=O(()=>t.isBaidu?["https://paodingjiewen.com/term_of_service.html","https://api-reference.paodingjiewen.com"]:["https://chatdoc.com/term_of_service.html","https://api-reference.chatdoc.com"]);return(a,s)=>(h(),b("div",V0,[c("h1",null,_(a.$t("website.title")),1),c("div",null,[c("span",null,_(a.$t("website.tips")),1),c("ul",q0,[(h(!0),b(K,null,ke(n.value,i=>(h(),b("li",{key:i},[c("a",{href:i,target:"_blank",rel:"noopener noreferrer"},_(i),9,j0)]))),128))])])]))}},Q0=se(K0,[["__scopeId","data-v-4b23af78"]]);const X0=e=>(vt("data-v-3d21e9c0"),e=e(),bt(),e),J0={class:"container"},Z0={class:"upload-wrap"},eC=["onDragover","onDrop"],tC={key:0,class:"upload-text"},nC={key:1,class:"upload-text"},aC={key:2,class:"upload-tips"},sC=["disabled","accept"],iC={class:"url-upload-text"},oC=["onClick"],rC=X0(()=>c("div",{class:"separator"},null,-1)),lC=["onClick"],cC=["onDragover"],uC={class:"upload-text"},dC={class:"upload-tips"},pC=["disabled","accept"],fC={__name:"UploadPage",emits:["uploaded"],setup(e,{emit:t}){const{appContext:n}=mn(),{t:a}=ye(),s=db("hash"),i=Oe(),o=dt(),r=At(),{uploadByUrl:l,$accept:u,uploadMultiple:p,readdir:f,createCollection:g}=Rd(),{showUpgradeDialog:y,validateRemainingUploads:w,$proPackage:m,freeUserShowUpgradeDialog:E,showQuotaLimitAndUpgradeEntry:P}=Lt(),S=x(!1),D=x(null),C=x(null),$=x(decodeURIComponent(r.query.file_url||"")),G=x(!1),U=x(!1),F=x(null),B=x(!1),W=x(""),Y=x(!1),I=x(0),R=x(""),V=x(!1),q=x(!1),ne=x(!1),ae=x(!1),Re=x(""),Ae=x(!1),oe=x(!1),de=x(!1),we=O(()=>i.isLogin?oe.value?a("website.placeholder"):a("uploadPage.urlPlaceholder.isLogin"):a("uploadPage.urlPlaceholder.notLogin")),it=()=>{var j;return((j=F.value)==null?void 0:j.enableNotice)&&i.isLogin},Te=j=>S.value?!1:i.isLogin?!0:(j.stopPropagation(),j.preventDefault(),o.push({name:"signIn"}),!1),gt=j=>{Y.value=!0,I.value=j.percentage,R.value=j.filename},pt=j=>{if(j instanceof ot)j.message&&ge.error(j.message),j.cause&&(j.cause===Mt.SHOW_UPGRADE?E():j.cause===Mt.NOT_ENOUGH_SLOTS?P():j.cause===Mt.PDF_PAGE_EXCEED&&Hn(n,{exceedFiles:j.payload.exceedFiles,userPagePackageInfo:{maxPageCount:i.maxPdfPages,pagePackageOptions:i.additionPackages.find(ce=>ce.type===Le.PAGE).options},isEffectMembership:i.isEffectMembership}));else throw j},z=(j,ce=!1)=>T(this,null,function*(){if(S.value||V.value||!Te(j)||!w(j))return;let me=null,Ie=[];try{const Ze=j.dataTransfer.items[0].webkitGetAsEntry();if(ce||Ze.isDirectory){if(V.value=!0,Ze.isDirectory){const wf=Ze.createReader();Ie=yield f(wf)}else Ie=[...j.dataTransfer.files],document.body.focus(),yield Gt.confirm(a("uploadPage.beforeUploadMultiple"));const Ln=Ze.isDirectory?Ze.name:`Collection_${Ot().format("YYYYMMDD")}`;me=yield p(Ie,gt,Ln)}else S.value=!0,Ie=j.dataTransfer.files,me=yield p(Ie,gt);Ie.length!==me.uploaded.length&&ge.warning(a("uploadPage.ignoreNonCompliantFilesWarn"));let Ht=!0;me.isFilteredPageExceedFiles.length&&(Hn(n,{exceedFiles:me.isFilteredPageExceedFiles,userPagePackageInfo:{maxPageCount:i.maxPdfPages,pagePackageOptions:i.additionPackages.find(Ln=>Ln.type===Le.PAGE).options},isEffectMembership:i.isEffectMembership}),Ht=!1),t("uploaded",{uploadInfo:me,isActiveNewestFile:Ht})}catch(Ze){pt(Ze)}finally{Y.value=!1,S.value=!1,V.value=!1}}),ue=(j,ce=!1)=>T(this,null,function*(){let me=j.target.files;try{let Ie=null;if(ce){if(me=[...me].filter(Ln=>Ln.webkitRelativePath.split("/").length===2),!me.length)return;const Ht=me[0].webkitRelativePath.split("/")[0];V.value=!0,Ie=yield p(me,gt,Ht)}else S.value=!0,Ie=yield p(me,gt);me.length!==Ie.uploaded.length&&ge.warning(a("uploadPage.ignoreNonCompliantFilesWarn"));let Ze=!0;Ie.isFilteredPageExceedFiles.length&&(Hn(n,{exceedFiles:Ie.isFilteredPageExceedFiles,userPagePackageInfo:{maxPageCount:i.maxPdfPages,pagePackageOptions:i.additionPackages.find(Ht=>Ht.type===Le.PAGE).options},isEffectMembership:i.isEffectMembership}),Ze=!1),t("uploaded",{uploadInfo:Ie,isActiveNewestFile:Ze})}catch(Ie){pt(Ie)}finally{Y.value=!1,V.value=!1,S.value=!1;let Ie=D.value;ce&&(Ie=C.value),Ie&&(Ie.value=null)}}),ve=()=>{$.value="",U.value=!1},fe=()=>{if(!i.isEffectMembership){E();return}de.value&&oe.value?de.value=!1:de.value=!0,oe.value=!0},pe=()=>{de.value&&!oe.value?de.value=!1:de.value=!0,oe.value=!1},ee=()=>T(this,null,function*(){const j=$.value.trim();if(!i.isLogin){o.push({name:"signIn",query:{file_url:encodeURIComponent(j)}});return}if(!j){ge.warning(a("uploadPage.validUrlMsg"));return}try{G.value=!0;let ce=null;oe.value?ce={uploaded:[yield Sd(j)],collectionData:null,uploadType:Be.SINGLE_DOC}:ce=yield l(j),t("uploaded",{uploadInfo:ce,isActiveNewestFile:!0}),de.value=!1,$.value=""}catch(ce){ce.message==="Not in whitelist"?U.value=!0:ce.cause&&ce.cause===Mt.SHOW_UPGRADE?E():ce.message&&ge.error(ce.message)}finally{G.value=!1}}),L=j=>{j||(U.value=!1)},X=(j,ce)=>{y({defaultPackage:j,sourcePage:qe.SOURCE_PAGE.UPLOAD_PAGE,activeGoodsType:j.type,activeTabPaneName:ce})},ie=()=>{$.value="",U.value=!1};Fe.on("signOut",ie);const Ee=()=>{const j=qf(r.query,ce=>ce!=="from");o.replace({name:r.name,query:j,params:r.params})},Je=()=>T(this,null,function*(){const j=Pn.RECALL_SIGN_IN.find(Ht=>r.query.from===Ht.value);if(!!j){B.value=!0,W.value=j.key,Ee();return}if(r.query.from===Pn.INVITE_SIGN_UP.value){ne.value=!0,Fe.emit("toggleFileList",!1),Ee();return}if(r.query.from===Pn.ORG_SIGN_UP.value&&r.query.orgCode){Fe.emit("toggleFileList",!1),(yield T_(r.query.orgCode).catch()).is_participant&&(Re.value=r.query.orgCode,ae.value=!0,Ee());return}if(r.query.from===Pn.SIGN_UP.value){Ee(),Ae.value=!0;return}F.value.initial()}),We=()=>{$.value.trim()||(de.value=!1,$.value="")};It(()=>T(this,null,function*(){const{package_type:j,origin_from:ce}=s;j==="pro"&&(i.isLogin&&i.isFreeMembership?y(ce==="email"?{defaultPackage:m.value,sourcePage:qe.SOURCE_PAGE.UPLOAD_PAGE}:{sourcePage:qe.SOURCE_PAGE.UPLOAD_PAGE}):i.isLogin||o.replace({name:"signIn"})),Je(),document.addEventListener("click",We)})),ms(()=>{Fe.off("signOut",ie),document.removeEventListener("click",We)});const le=()=>{q.value=!0},Ce=()=>T(this,null,function*(){const{value:j}=yield Gt.prompt("",a("uploadPage.createCollection.title"),{inputPlaceholder:a("uploadPage.createCollection.placeholder"),inputValidator(Ie){return Ie?Ie.length<1||Ie.length>80?a("uploadPage.createCollection.sizeLimitValid"):/^[\u4e00-\u9fa5_a-zA-Z0-9()-]+$/.test(Ie)?!0:a("uploadPage.createCollection.regValid"):a("uploadPage.createCollection.requiredValid")}}),ce=yield g(j),me={uploaded:[],collectionData:ce,uploadType:Be.COLLECTION};t("uploaded",{uploadInfo:me,isActiveNewestFile:!1})});return $e(Ae,j=>{Fe.emit("toggleFileList",!j),j||F.value.initial()}),$e(B,j=>{j||F.value.initial()}),$e(ne,j=>{j||(Ae.value=!0)}),$e(ae,j=>{j||(Ae.value=!0)}),$e(oe,()=>{U.value=!1,$.value=""}),(j,ce)=>(h(),b(K,null,[c("div",{class:_e(["upload-page",d(i).isLogin?"is-login":""])},[c("div",J0,[it()?(h(),b("div",{key:0,class:"notice-warp",onClick:le},[v(te,{name:"notice-icon",size:40,class:"notice-icon"}),c("span",null,_(F.value.$noticeMsg),1),v(te,{name:"arrow-right-thin",size:20})])):N("",!0),c("div",Z0,[c("div",{class:"left",onDragover:be(()=>{},["prevent"]),onClickCapture:Te,onDrop:be(z,["prevent"])},[c("label",{class:_e(["upload-box",{disabled:S.value,"is-login":d(i).isLogin}]),onClickCapture:ce[0]||(ce[0]=(...me)=>d(w)&&d(w)(...me))},[v(te,{name:"upload",size:60,fill:"var(--el-color-primary)"}),d(i).isLogin?(h(),b("div",tC,_(j.$t("uploadTextByHasLogin")),1)):(h(),b("div",nC,_(j.$t("uploadTextByNotLogin")),1)),d(i).isLogin?(h(),b("div",aC,_(j.$t("uploadPage.ocrTips")),1)):N("",!0),ct(c("input",{ref_key:"$fileInputRef",ref:D,disabled:S.value||V.value,type:"file",accept:d(u),multiple:"",onChange:ue},null,40,sC),[[Kt,!1]])],34),v(d(si),{teleported:!1,visible:de.value,placement:"top",trigger:"click",width:390,"show-after":0,"hide-after":0,"popper-style":{padding:"10px"},onHide:ve},{reference:k(()=>[c("div",iC,[c("div",{onClick:be(pe,["stop"])},[v(te,{name:"upload-url",size:20,margin:"0 10px 0 0",class:"upload-link-icon"}),c("span",null,_(j.$t("uploadPage.urlText")),1)],8,oC),rC,c("div",{onClick:be(fe,["stop"])},[v(te,{name:"upload-link",size:20,margin:"0 10px 0 0",class:"upload-link-icon"}),c("span",null,_(j.$t("uploadPage.websiteText")),1),v(d(si),{placement:"right",width:"480px","show-after":500},{reference:k(()=>[c("span",{class:"website-help",onClick:ce[1]||(ce[1]=be(()=>{},["stop"]))},[v(te,{name:"question",size:20,margin:"0",class:"upload-link-icon"})])]),default:k(()=>[v(Q0,{"is-baidu":d(os)},null,8,["is-baidu"])]),_:1})],8,lC)])]),default:k(()=>[v(d(Ye),{modelValue:$.value,"onUpdate:modelValue":ce[2]||(ce[2]=me=>$.value=me),placeholder:we.value,class:"url-upload-input",onClick:ce[3]||(ce[3]=be(()=>{},["stop"])),onClickCapture:d(w),onKeyup:Ne(ee,["enter"]),onInput:L,onKeydown:ce[4]||(ce[4]=Ne(be(()=>{},["stop"]),["esc"]))},{append:k(()=>[v(d(he),{class:"upload-btn",type:"primary",loading:G.value,onClick:be(ee,["stop"])},{default:k(()=>[Q(_(oe.value?j.$t("website.button"):j.$t("uploadBtn")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["modelValue","placeholder","onClickCapture","onKeyup"])]),_:1},8,["visible"])],40,eC),d(i).isLogin?(h(),b("div",{key:0,class:"right",onDragover:be(()=>{},["prevent"]),onClickCapture:Te,onDrop:ce[7]||(ce[7]=be(me=>z(me,!0),["prevent"]))},[c("label",{class:"upload-box",onClickCapture:ce[6]||(ce[6]=(...me)=>d(w)&&d(w)(...me))},[V.value?(h(),M(d(ut),{key:0,color:"var(--el-color-primary)",size:50,class:"el-icon--loading"},{default:k(()=>[v(d(Gn))]),_:1})):(h(),M(te,{key:1,name:"folder",size:50,color:"var(--el-color-primary)"})),c("div",uC,_(j.$t("uploadPage.collection")),1),c("div",dC,_(j.$t("uploadPage.collectionTips")),1),ct(c("input",{ref_key:"$collectionInputRef",ref:C,disabled:S.value||V.value,type:"file",accept:d(u),webkitdirectory:"",onChange:ce[5]||(ce[5]=me=>ue(me,!0))},null,40,pC),[[Kt,!1]])],32),c("div",{class:"new-collection",onClick:Ce},[v(te,{name:"new-collection",size:20}),c("span",null,_(j.$t("uploadPage.newCollection")),1)])],40,cC)):N("",!0)]),U.value?(h(),M(I0,{key:1})):N("",!0),d(i).isLogin?(h(),M(W0,{key:2,"is-free-membership":d(i).isFreeMembership,onUpgrade:d(y)},null,8,["is-free-membership","onUpgrade"])):N("",!0),d(i).isLogin?(h(),M(Or,{key:3,"show-addition-packages":!1,"show-lower-membership":"",onSelectPackage:X})):N("",!0)]),v(Yr),v(wT,{ref_key:"$noticeDialogRef",ref:F,visible:q.value,"onUpdate:visible":ce[8]||(ce[8]=me=>q.value=me)},null,8,["visible"]),d(i).isLogin?(h(),M(g0,{key:0,visible:ne.value,"onUpdate:visible":ce[9]||(ce[9]=me=>ne.value=me),username:d(i).userInfo.name,"max-invite-file-package-count":d(i).sourcedInviteFilePackageMaxCount},null,8,["visible","username","max-invite-file-package-count"])):N("",!0),d(i).isLogin?(h(),M(A0,{key:1,visible:ae.value,"onUpdate:visible":ce[10]||(ce[10]=me=>ae.value=me),username:d(i).userInfo.name,"org-name":Re.value},null,8,["visible","username","org-name"])):N("",!0),v(B0,{visible:B.value,"onUpdate:visible":ce[11]||(ce[11]=me=>B.value=me),"recall-type":W.value},null,8,["visible","recall-type"]),d(i).isLogin?(h(),M(a0,{key:2,visible:Ae.value,"onUpdate:visible":ce[12]||(ce[12]=me=>Ae.value=me)},null,8,["visible"])):N("",!0)],2),v(Nd,{visible:Y.value,"onUpdate:visible":ce[13]||(ce[13]=me=>Y.value=me),filename:R.value,percentage:I.value},null,8,["visible","filename","percentage"])],64))}},hC=se(fC,[["__scopeId","data-v-3d21e9c0"]]);const _C=e=>(vt("data-v-d6b5e4cc"),e=e(),bt(),e),gC={key:1,class:"main-wrapper"},mC={key:1,class:"share-pwd-valid-wrapper"},yC={class:"valid-panel"},vC={class:"valid-header"},bC={class:"invite-info"},wC={class:"invite-name-area"},EC={class:"invite-name"},PC={class:"invite-message"},kC={class:"valid-content"},SC={class:"file-info"},AC={class:"filename"},TC={class:"valid-input-area"},CC={class:"valid-input-label"},xC={class:"share-alert"},IC={key:0,class:"expire-alert"},$C={class:"expire-date-text"},RC=_C(()=>c("span",null,".",-1)),DC={class:"valid-footer"},NC={__name:"SharePage",setup(e){const t=Er(()=>xa(()=>import("./ChatDoc-3a16c913.js"),[window.__toAssetUrl("ChatDoc-3a16c913.js"),window.__toAssetUrl("vendor-2-e250ed0d.js"),window.__toAssetUrl("vendor-1-8c77151e.js"),window.__toAssetUrl("vendor-4-87e1e3f9.js"),window.__toAssetUrl("ChatDoc-434bb5c7.css")],import.meta.url)),{t:n}=ye(),a=At(),s=kr(),i=x(!1),o=x({}),r=x(null),l=x(!1),u=st({password:""}),p={password:[{required:!0,message:n("share.pwdInputPlaceholder"),trigger:"blur"}]},f=O(()=>({id:o.value.upload_id||"",name:o.value.name||"",isCollection:o.value.type===Be.COLLECTION})),g=O(()=>{const D=o.value.expire_at;return Cn(D,"YYYY-MM-DD")}),y=O(()=>o.value.is_expired),w=O(()=>a.params.id),m=O(()=>s.isCollectionShare?`${s.shareInfo.uploadName} (${s.shareInfo.collectionDocCount} files)`:s.shareInfo.uploadName),E=D=>T(this,null,function*(){try{return yield N1(D)}catch(C){throw C.status===404&&C.reason==="share not found"?Z(A({},C),{message:n("share.shareExpired")}):C}}),P=()=>T(this,null,function*(){try{l.value=!0,yield r.value.validate(),s.setShareInfo({password:u.password});const D={share_id:w.value,password:u.password};yield E(D),i.value=!0,s.setIsPassValid(!0)}finally{l.value=!1}}),S=()=>T(this,null,function*(){var $,G;const D=yield E({share_id:w.value});let C="";($=D.user.meta)!=null&&$.avatar&&(C=yield Tr((G=D.user.meta)==null?void 0:G.avatar)),o.value=D,y.value||(s.setShareInfo({shareId:D.id,uploadId:D.upload_id,uploadName:D.name,inviterName:D.user.name,inviterEmail:D.user.email,inviterAvatar:C,uploadType:D.type,collectionDocCount:D.document_count}),i.value=!o.value.is_enable_password,s.setIsPassValid(i.value))});return bu(()=>{s.resetShareInfo()}),It(()=>T(this,null,function*(){yield S()})),(D,C)=>(h(),b(K,null,[f.value.id&&i.value?(h(),b(K,{key:0},[f.value.isCollection?(h(),M(Ud,{key:0,id:f.value.id,"share-id":w.value,"is-share-page":""},null,8,["id","share-id"])):i.value?(h(),b("div",gC,[v(d(t),{"is-share-page":"","doc-id":f.value.id},null,8,["doc-id"])])):N("",!0)],64)):N("",!0),o.value.is_enable_password&&!i.value?(h(),b("div",mC,[c("div",yC,[c("div",vC,[v(Ra,{name:d(s).shareInfo.inviterName,avatar:d(s).shareInfo.inviterAvatar,size:44},null,8,["name","avatar"]),c("div",bC,[c("div",wC,[c("span",EC,_(d(s).shareInfo.inviterName),1)]),c("div",PC,_(D.$t("share.inviteMsg")),1)])]),c("div",kC,[c("div",SC,[v(te,{name:d(pa)(f.value.name,f.value.isCollection),size:20,color:"var(--el-color-primary)"},null,8,["name"]),v(d(_t),{content:f.value.name},{default:k(()=>[c("span",AC,_(m.value),1)]),_:1},8,["content"])]),c("div",TC,[c("div",CC,_(D.$t("share.pwdInputLabel")),1),v(d(pn),{ref_key:"$formRef",ref:r,model:u,rules:p,onSubmit:C[1]||(C[1]=be(()=>{},["prevent"]))},{default:k(()=>[v(d(Ue),{prop:"password"},{default:k(()=>[v(d(Ye),{modelValue:u.password,"onUpdate:modelValue":C[0]||(C[0]=$=>u.password=$),size:"large",maxlength:6,placeholder:D.$t("share.pwdInputPlaceholder"),onKeypress:Ne(P,["enter"])},null,8,["modelValue","placeholder","onKeypress"])]),_:1})]),_:1},8,["model"])]),c("div",xC,[g.value?(h(),b("div",IC,[v(te,{name:"alert",class:"expire-alert-icon"}),c("span",null,_(D.$t("share.expiredOnText")),1),c("span",$C," "+_(g.value),1),RC])):N("",!0)])]),c("div",DC,[v(d(he),{class:"valid-submit-handler",loading:l.value,onClick:P},{default:k(()=>[Q(_(D.$t("submitBtn")),1)]),_:1},8,["loading"])])])])):N("",!0)],64))}},OC=se(NC,[["__scopeId","data-v-d6b5e4cc"]]),LC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAAABCAYAAACyuB5lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEpSURBVHgBTVLtboNADItzMA1V06T96+Py1BXlLpmdK2oPoXyc7TgIZCbMDPu++/1+x3Ec3nv32+2Gbdtwnr/efw4f5+lfjwfW9Q9j6z6I+R7Dn88FEcNba4zB6LjyzOGK67pKE7Hwfjjcnffpg3HJeEc46IcAAL031byqXvV5Wjbm4Xyqz0BMY2BtyXnEOLExeYFZ57DKFxjIcqM3JDCIMQmbNdUpbCTqcLylEUcOzO2lD81KUYybTo1JyJdXeUL5hOZxoLhMyyNRvIQ2gCUm1+jv0pEGJhZlhR6JKxcpH3xJC+qrKJx5M4pk7SPPHEGScgI0Wh+39sjUxnMf6UvNgv3SJY7/g7QnNdr0bdWv2VeUevkRJ9VnaW3O+8CZ1ovCmTwZLg+feu0f6Q2/5MkmKD0AAAAASUVORK5CYII=",UC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAAABCAYAAACyuB5lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE+SURBVHgBPVFLbsJADLU9JIEFC6SeodfkJlU3PUhPAzsWrSgosd33PCEjjcaf5+dnj358fkXiiGqoCGxJVQmRumUzJsSIRsIHLplXVZYCp/D5dgyyIdox0rlY4bLWEaydf+PactABSuR1xcCXVcGrNzmzbtnElg7DDHipy8GiRgziCX2m3Uau0Ohj4PeI6sOaYIxE5OAcONYkAFln1L4rEdfXXBVz0LXoOwCOFWpssekn32uXfd+le9u9bH9QM1DA9hemttZEIFs1Zog18XAvf7Axg9MYR8McVEU+7nNGbFCqypbkWry1lgw4d6YWtEe+u0hbtPxZF7i7ZB79YrY5dj6ku7N/teY7jp7PZwPmEcs05d/jEW/7fd7v9zgcDvk7DLH7meJ4fObtdovT6ZTX6zWmaYrL5R37/I7z+Zz/BxxHD9p+VSAAAAAASUVORK5CYII=";const Md=e=>(vt("data-v-9f49015a"),e=e(),bt(),e),MC={key:0,class:"other-login-methods"},BC={class:"divider"},FC=Md(()=>c("img",{crossorigin:"anonymous",class:"line",src:LC,alt:"line"},null,-1)),GC={class:"text"},zC=Md(()=>c("img",{crossorigin:"anonymous",class:"line",src:UC,alt:"line"},null,-1)),HC={class:"google-login"},YC={class:"text"},WC={__name:"OtherLoginMethods",props:{inviteCode:{type:String,default:""},orgCode:{type:String,default:""}},setup(e){const t=e,n=st({googleLoading:!1}),a=()=>T(this,null,function*(){try{n.googleLoading=!0;const s=zn?{platform:"mobile"}:{};t.inviteCode&&(s.invite_code=t.inviteCode),t.orgCode&&(s.org_code=t.orgCode);const{link:i}=yield __(s);window.location.href=i}finally{n.googleLoading=!1}});return(s,i)=>d(at).hasGoogleLogin?(h(),b("div",MC,[c("div",BC,[FC,c("span",GC,_(s.$t("or")),1),zC]),c("div",HC,[v(d(he),{size:"large",loading:n.googleLoading,onClick:a},{default:k(()=>[v(te,{name:"google",size:24}),c("span",YC,_(s.$t("signInPage.googleLogin")),1)]),_:1},8,["loading"])])])):N("",!0)}},Bd=se(WC,[["__scopeId","data-v-9f49015a"]]),Vr=()=>{const e=At(),t=dt();return{redirectAfterSignIn:(...a)=>T(void 0,[...a],function*(n={}){const s=e.query.redirect||"upload";delete e.query.redirect,s!=="upload"&&(n={}),yield t.replace({name:s,query:n}).catch(()=>t.replace({name:"upload",query:n}))})}};const Fd=e=>(vt("data-v-85440807"),e=e(),bt(),e),VC={class:"sign-up sign-container"},qC={class:"header"},jC={class:"main"},KC={class:"step-content"},QC={key:0,class:"invite-info"},XC={class:"invite-user-name"},JC={key:1,class:"top-content"},ZC={type:"primary"},ex={class:"desc"},tx={class:"desc"},nx=["href"],ax=["href"],sx={key:3,class:"email-tips"},ix={class:"bold-text"},ox={style:{"list-style":"disc"}},rx=Fd(()=>c("span",{class:"bold-text"},"7 days",-1)),lx=["href"],cx=["href"],ux=Fd(()=>c("a",{href:"mailto:chatdocai@gmail.com",target:"_blank",rel:"noopener noreferrer"}," chatdocai@gmail.com ",-1)),dx={__name:"SignUp",setup(e){const{t}=ye(),n=At(),a=dt(),s=Oe(),{redirectAfterSignIn:i}=Vr(),o=x(!1),r=x(null),l=x(null),u=x(!1),p=x(!0),f=x(""),g=x(""),y=x(""),w=x(""),m=x(!1),{$countdownCount:E,$isCountdownUnfinished:P,initCountdownSeconds:S,startCountdownSeconds:D}=Lr(Ke.DISABLED_SEND_SIGN_VER_EMAIL_END_TIME),C=x(0),$=O(()=>C.value===0),G=O(()=>C.value===1),U=O(()=>C.value===2),F=O(()=>!at.hasDiscord&&!at.hasTwitter?"signUpPage.emailTipsContent.text9":"signUpPage.emailTipsContent.text8"),B=st({email:"",name:"",password:"",repeatPassword:""}),W=st({emailVerCode:""}),Y=oe=>{C.value=oe-1};bu(()=>T(this,null,function*(){if(B.email&&!o.value&&!window.confirm(t("signUpPage.leavePageWarn")))return!1}));const I=Ui(B),R=st(A({email:[{required:!0,message:t("emailValidator.requiredWarn"),trigger:"blur"},{type:"email",message:t("emailValidator.formatWarn"),trigger:"blur"}],name:[{required:!0,message:t("usernameValidator.requiredWarn"),trigger:"blur"},{min:1,max:30,message:t("usernameValidator.overLimitWarn",{min:1,max:30}),trigger:"blur"}]},I)),V={emailVerCode:[{required:!0,len:6,message:t("signUpPage.emailVerificationCodeInvalidText"),trigger:"blur"}]},q=O(()=>P.value?`${t("resendBtn")}(${E.value})`:t("signUpPage.emailRegainBtnTextWhenUsable"));It(()=>T(this,null,function*(){if(g.value=n.query.invite_code||"",w.value=n.params.org||"",g.value)try{const we=yield P_(g.value);y.value=we.name}catch(we){throw g.value="",we}const{email:oe,emailVerCode:de}=Mu(Ke.FROM_SIGN_UP,{});B.email=oe||"",de?(W.emailVerCode=de,yield Re(!1).then(()=>{Y(3)}).catch(()=>{Y(2)})):Y(oe?2:1)})),ms(()=>{ge.closeAll(),Bu(Ke.FROM_SIGN_UP)});const ne=()=>T(this,null,function*(){const oe={email:B.email};yield Ru(oe),ge.success(t("signUpPage.emailRegainSuccessText")),D(),Y(2)}),ae=()=>T(this,null,function*(){yield r.value.validate();try{if(f.value="",u.value=!0,$.value){yield ne(),Io(Ke.FROM_SIGN_UP,{email:B.email});return}if(s.isLogin&&(yield s.logout().catch(()=>{})),yield p_({org_code:w.value,invite_code:g.value,code:W.emailVerCode,email:B.email,name:B.name,password:B.password,source:"web"}),yield Sr({email:B.email,password:B.password}),yield s.fetchUserInfo(),o.value=!0,g.value)yield a.replace({name:"upload",query:{from:Pn.INVITE_SIGN_UP.value}});else if(w.value)yield a.replace({name:"upload",query:{from:Pn.ORG_SIGN_UP.value,orgCode:w.value}});else{const oe={from:Pn.SIGN_UP.value};yield i(oe)}}catch(oe){if($.value)f.value=oe.message;else throw oe}finally{u.value=!1}}),Re=(oe=!0)=>T(this,null,function*(){oe&&(yield l.value.validate());try{u.value=!0,yield Du({code:W.emailVerCode,email:B.email}),Y(3),Io(Ke.FROM_SIGN_UP,{email:B.email,emailVerCode:W.emailVerCode})}finally{u.value=!1}}),Ae=()=>T(this,null,function*(){try{m.value=!0,yield ne()}finally{m.value=!1}});return $e(G,oe=>{oe&&S()}),(oe,de)=>{const we=rt("i18n-t"),it=rt("router-link");return h(),b("div",VC,[c("div",qC,[v(d(he),{type:"primary",plain:"",onClick:de[0]||(de[0]=Te=>d(a).push({name:"signIn",query:A({},d(n).query)}))},{default:k(()=>[Q(_(oe.$t("signIn")),1)]),_:1})]),c("div",jC,[c("div",KC,[v(d(vu),{active:C.value,"finish-status":"success"},{default:k(()=>[v(d(la)),v(d(la)),v(d(la))]),_:1},8,["active"])]),$.value&&g.value?(h(),b("div",QC,[c("p",null,_(oe.$t("signUpPage.invite.text1")),1),v(we,{keypath:"signUpPage.invite.text2",tag:"p",scope:"global"},{userName:k(()=>[v(d(_t),{content:y.value,placement:"top","show-after":2e3},{default:k(()=>[c("b",XC,_(y.value),1)]),_:1},8,["content"])]),_:1}),c("p",null,_(oe.$t("signUpPage.invite.text3")),1)])):(h(),b("div",JC,[G.value?(h(),b(K,{key:0},[c("p",null,_(oe.$t("signUpPage.emailTipsContent.text1")),1),v(we,{class:"desc",keypath:"signUpPage.emailTipsContent.text2",tag:"p",scope:"global"},{email:k(()=>[c("i",ZC,_(B.email.toLowerCase()),1)]),_:1}),v(d(pn),{ref_key:"$step2FormRef",ref:l,class:"form step-two-form","label-position":"top",size:"large",model:W,rules:V,onKeydown:de[2]||(de[2]=Ne(be(()=>{},["prevent"]),["enter"]))},{default:k(()=>[v(d(Ue),{prop:"emailVerCode",label:oe.$t("signUpPage.emailVerificationCodeLabel")},{default:k(()=>[v(d(Ye),{modelValue:W.emailVerCode,"onUpdate:modelValue":de[1]||(de[1]=Te=>W.emailVerCode=Te),maxlength:6,class:"email-ver-code-input",placeholder:oe.$t("signUpPage.emailVerificationCodePlaceholder")},{append:k(()=>[v(d(he),{class:"email-ver-regain-btn",type:"primary",disabled:d(P),loading:m.value,onClick:be(Ae,["stop"])},{default:k(()=>[Q(_(q.value),1)]),_:1},8,["disabled","loading","onClick"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),v(d(Ue),null,{default:k(()=>[v(d(he),{class:"step-two-continue-btn",type:"primary",loading:u.value,onClick:Re},{default:k(()=>[Q(_(oe.$t("continueBtn")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])],64)):(h(),b(K,{key:1},[U.value?(h(),b(K,{key:0},[c("p",null,_(oe.$t("signUpPage.title2")),1),c("p",ex,[v(it,{to:{name:"signIn",query:A({},d(n).query)}},{default:k(()=>[Q(" or "+_(oe.$t("signIn")),1)]),_:1},8,["to"])])],64)):(h(),b(K,{key:1},[c("p",null,_(oe.$t("signUpPage.title")),1),c("p",tx,[Q(_(oe.$t("signUpPage.subtitle"))+" ",1),v(it,{to:{name:"signIn",query:A({},d(n).query)}},{default:k(()=>[Q(_(oe.$t("signIn")),1)]),_:1},8,["to"])])],64))],64))])),$.value||U.value?(h(),M(d(pn),{key:2,ref_key:"$formRef",ref:r,class:_e(["form",U.value?"password-form":""]),"label-position":"top",size:"large",model:B,rules:R},{default:k(()=>[v(d(Ue),{label:oe.$t("email"),prop:"email",error:f.value},{default:k(()=>[v(d(Ye),{modelValue:B.email,"onUpdate:modelValue":de[3]||(de[3]=Te=>B.email=Te),name:"email",autocomplete:"new-email",disabled:U.value,placeholder:oe.$t("emailValidator.placeholder"),onKeypress:Ne(be(ae,["prevent"]),["enter"])},null,8,["modelValue","disabled","placeholder","onKeypress"])]),_:1},8,["label","error"]),U.value?(h(),b(K,{key:0},[v(d(Ue),{label:oe.$t("username"),prop:"name"},{default:k(()=>[v(d(Ye),{modelValue:B.name,"onUpdate:modelValue":de[4]||(de[4]=Te=>B.name=Te),name:"name",autocomplete:"new-name",placeholder:oe.$t("usernameValidator.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),v(d(Ue),{label:oe.$t("password"),prop:"password",class:"password-item"},{default:k(()=>[v(d(Ye),{modelValue:B.password,"onUpdate:modelValue":de[5]||(de[5]=Te=>B.password=Te),type:"password","show-password":"",name:"password",autocomplete:"new-password",placeholder:oe.$t("passwordValidator.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),v(d(Ue),{prop:"repeatPassword"},{default:k(()=>[v(d(Ye),{modelValue:B.repeatPassword,"onUpdate:modelValue":de[6]||(de[6]=Te=>B.repeatPassword=Te),type:"password","show-password":"",name:"password",autocomplete:"new-password",placeholder:oe.$t("passwordValidator.repwdPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),v(d(Ue),{class:"agree-item"},{default:k(()=>[v(d(ya),{modelValue:p.value,"onUpdate:modelValue":de[7]||(de[7]=Te=>p.value=Te),class:"agree-checkbox"},{default:k(()=>[v(we,{keypath:"signUpPage.agreeTip",tag:"div",class:"agree-content",scope:"global"},{policy:k(()=>[c("a",{href:d(Dt).POLICY,rel:"noopener noreferrer",target:"_blank",class:"link"},_(d(Tt).POLICY),9,nx)]),terms:k(()=>[c("a",{href:d(Dt).TERMS,rel:"noopener noreferrer",target:"_blank",class:"link"},_(d(Tt).TERMS),9,ax)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):N("",!0),v(d(Ue),null,{default:k(()=>[v(d(he),{disabled:!p.value,loading:u.value,type:"primary",onClick:be(ae,["prevent"])},{default:k(()=>[Q(_(U.value?oe.$t("signUpPage.agreeAndSignUpMsg"):oe.$t("continueBtn")),1)]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1},8,["class","model","rules"])):N("",!0),G.value?(h(),b("div",sx,[v(we,{keypath:"signUpPage.emailTipsContent.text3",tag:"p",scope:"global"},{email:k(()=>[c("b",null,_(B.email.toLowerCase()),1)]),_:1}),c("p",ix,_(oe.$t("signUpPage.emailTipsContent.text5")),1),c("ul",ox,[v(we,{keypath:"signUpPage.emailTipsContent.text6",tag:"li",scope:"global"},{days:k(()=>[rx]),_:1}),c("li",null,_(oe.$t("signUpPage.emailTipsContent.text7")),1),v(we,{keypath:F.value,tag:"li",scope:"global"},{discord:k(()=>[c("a",{href:d(Dt).DISCORD,target:"_blank",rel:"noopener noreferrer"},_(d(Tt).DISCORD),9,lx)]),twitter:k(()=>[c("a",{href:d(Dt).TWITTER,target:"_blank",rel:"noopener noreferrer"},_(d(Tt).TWITTER),9,cx)]),email:k(()=>[ux]),_:1},8,["keypath"])])])):N("",!0),C.value===0?(h(),M(Bd,{key:4,"invite-code":g.value,"org-code":w.value},null,8,["invite-code","org-code"])):N("",!0)])])}}},px=se(dx,[["__scopeId","data-v-85440807"]]);function Gd(){const e=x([]);It(function(){hn&&window.__invokeCommand__("load_password").then(function(n){n&&n.length&&(e.value=n)}).catch(function(n){console.warn(n)})});function t(n){return T(this,null,function*(){return window.__invokeCommand__("save_password",n)})}return{$rememberedUser:e,savePassword:t}}const fx={class:"sign-in sign-container"},hx={class:"header"},_x={class:"main"},gx={class:"top-content"},mx={class:"desc"},yx={class:"reset-password"},vx={__name:"SignIn",setup(e){const{t}=ye(),n=dt(),a=At(),s=Oe(),{$rememberedUser:i,savePassword:o}=Gd(),{redirectAfterSignIn:r}=Vr(),l=x(null),u=x(!1),p=st({email:"",password:""}),f=O(()=>a.query.invite_code),g=st({email:[{required:!0,message:t("emailValidator.requiredWarn"),trigger:"blur"},{type:"email",message:t("emailValidator.formatWarn"),trigger:"blur"}],password:[{required:!0,message:t("passwordValidator.requiredWarn"),trigger:"blur"}]});$e(i,m=>{m&&m.length&&(p.email=m[0].email,p.password=m[0].password)});function y(m){return T(this,null,function*(){ge.success(t("signInPage.submitSuccessMsg"));const E=a.query.shareId;if(E)yield n.replace({name:"share",params:{id:E}});else if(m){const{value:P}=Pn.RECALL_SIGN_IN.find(S=>S.key===m);yield n.replace({name:"upload",query:Z(A({},a.query),{from:P})})}else yield r()})}const w=m=>T(this,null,function*(){m.preventDefault();try{yield l.value.validate(),u.value=!0;const E=yield Sr(p);if(yield s.fetchUserInfo(),!hn){yield y(E.recall_type);return}i.value.find(S=>S.email===p.email)?(o(Al(p)),y(E.recall_type)):Gt.confirm("",t("signInPage.rememberPassword.msg"),{customClass:"remember-message-box",confirmButtonText:t("yesBtn"),cancelButtonText:t("noBtn"),showClose:!1,showCancelButton:!0,closeOnClickModal:!0}).then(function(){o(Al(p)),y(E.recall_type)}).catch(function(){y(E.recall_type)})}finally{u.value=!1}});return(m,E)=>{const P=rt("router-link");return h(),b("div",fx,[c("div",hx,[v(d(he),{type:"primary",plain:"",onClick:E[0]||(E[0]=S=>d(n).push({name:"signUp",query:A({},d(a).query)}))},{default:k(()=>[Q(_(m.$t("signUp")),1)]),_:1})]),c("div",_x,[c("div",gx,[c("p",null,_(m.$t("signInPage.title")),1),c("p",mx,[Q(_(m.$t("signInPage.subtitle1"))+" ",1),v(P,{to:{name:"signUp",query:A({},d(a).query)}},{default:k(()=>[Q(_(m.$t("signInPage.subtitle2")),1)]),_:1},8,["to"])])]),v(d(pn),{ref_key:"$formRef",ref:l,class:"form","label-position":"top",model:p,rules:g,size:"large"},{default:k(()=>[v(d(Ue),{label:m.$t("email"),prop:"email"},{default:k(()=>[v(d(Ye),{modelValue:p.email,"onUpdate:modelValue":E[1]||(E[1]=S=>p.email=S),name:"email",autocomplete:"new-email",placeholder:m.$t("emailValidator.placeholder"),onKeypress:Ne(be(w,["prevent"]),["enter"])},null,8,["modelValue","placeholder","onKeypress"])]),_:1},8,["label"]),v(d(Ue),{label:m.$t("password"),prop:"password"},{default:k(()=>[v(d(Ye),{modelValue:p.password,"onUpdate:modelValue":E[2]||(E[2]=S=>p.password=S),name:"password",type:"password",autocomplete:"new-password",placeholder:m.$t("passwordValidator.placeholder"),"show-password":"",onKeypress:Ne(w,["enter"])},null,8,["modelValue","placeholder","onKeypress"])]),_:1},8,["label"]),v(d(Ue),null,{default:k(()=>[v(d(he),{type:"primary",loading:u.value,onClick:be(w,["prevent"])},{default:k(()=>[Q(_(m.$t("continueBtn")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"]),c("div",yx,[v(P,{to:{name:"resetPassword",query:Z(A({},d(a).query),{email:encodeURIComponent(p.email)})}},{default:k(()=>[Q(_(m.$t("resetPasswordPage.title")),1)]),_:1},8,["to"])]),v(Bd,{"invite-code":f.value},null,8,["invite-code"])])])}}},bx=se(vx,[["__scopeId","data-v-c943f256"]]);const wx=()=>{const e=x(1),t=Oe(),{t:n}=ye(),a=st({email:"",password:"",repeatPassword:"",emailVerCode:""}),s=Ui(a),i=st(A({email:[{required:!0,message:n("emailValidator.requiredWarn"),trigger:"blur"},{type:"email",message:n("emailValidator.formatWarn"),trigger:"blur"}],emailVerCode:[{required:!0,len:6,message:n("signUpPage.emailVerificationCodeInvalidText"),trigger:"blur"}]},s));return{$step:e,formState:a,formRules:i,sendEmailCode:()=>T(void 0,null,function*(){yield Ru({email:a.email,code_type:so.PASSWORD_RESET})}),validateEmail:()=>T(void 0,null,function*(){yield Du({code:a.emailVerCode,email:a.email,code_type:so.PASSWORD_RESET}),e.value=2}),confirmResetPassword:()=>T(void 0,null,function*(){yield f_({email:a.email,password:a.password,code:a.emailVerCode,code_type:so.PASSWORD_RESET});const u={email:a.email,password:a.password};return yield Sr(u),yield t.fetchUserInfo(),u})}};const Ex={class:"forget-password sign-container"},Px={class:"header"},kx={class:"main"},Sx={class:"top-content"},Ax={key:0,class:"desc"},Tx={key:1,class:"desc"},Cx={__name:"ResetPassword",setup(e){const{t}=ye(),n=At(),a=dt(),{redirectAfterSignIn:s}=Vr(),i=x(!1),o=x(null),r=x(!1),l=x(!1),{$countdownCount:u,$isCountdownUnfinished:p,startCountdownSeconds:f}=Lr(),{formState:g,formRules:y,sendEmailCode:w,validateEmail:m,confirmResetPassword:E,$step:P}=wx(),{$rememberedUser:S,savePassword:D}=Gd(),C=O(()=>p.value?`${t("resendBtn")}(${u.value})`:t("signUpPage.emailRegainBtnTextWhenUsable")),$=O(()=>P.value===1),G=O(()=>P.value===2),U=I=>{P.value=I},F=O(()=>at.hasDiscord?"resetPasswordPage.alertPartHead1":"resetPasswordPage.alertPartHead2");It(()=>T(this,null,function*(){g.email=decodeURIComponent(n.query.email||"");const{email:I,emailVerCode:R}=Mu(Ke.FROM_RESET_PASSWORD,{});g.email=I||"",R?(g.emailVerCode=R,yield Y(!1).then(()=>{U(2)}).catch(()=>{U(1)})):U(1)})),ms(()=>{ge.closeAll(),Bu(Ke.FROM_RESET_PASSWORD)});const B=()=>T(this,null,function*(){yield o.value.validate();try{i.value=!0;const I=yield E();hn&&S.value.find(V=>V.email===g.email)&&D(I),ge.success(t("resetPasswordPage.submitSuccessMsg")),yield s()}catch(I){throw a.replace({name:"resetPassword"}),I}finally{i.value=!1}}),W=()=>T(this,null,function*(){try{yield o.value.validateField("email"),l.value=!0,yield w(),ge.success({message:t("resetPasswordPage.submitWarnMsg",{email:g.email.toLowerCase()})}),f()}finally{l.value=!1}}),Y=(I=!0)=>T(this,null,function*(){I&&(yield o.value.validate());try{i.value=!0,yield m(I),Io(Ke.FROM_RESET_PASSWORD,{email:g.email,emailVerCode:g.emailVerCode})}finally{i.value=!1}});return(I,R)=>{const V=rt("i18n-t");return h(),b("div",Ex,[c("div",Px,[v(d(he),{type:"primary",plain:"",onClick:R[0]||(R[0]=q=>d(a).push({name:"signIn",query:A({},d(n).query)}))},{default:k(()=>[Q(_(I.$t("signIn")),1)]),_:1})]),c("div",kx,[c("div",Sx,[c("p",null,_(I.$t("resetPasswordPage.title")),1),$.value?(h(),b("p",Ax,_(I.$t("resetPasswordPage.subtitle")),1)):N("",!0),G.value?(h(),b("p",Tx,_(I.$t("resetPasswordPage.enterPassword",{email:d(g).email})),1)):N("",!0)]),v(d(pn),{ref_key:"$formRef",ref:o,class:"form","label-position":"top",size:"large",disabled:r.value,model:d(g),rules:d(y)},{default:k(()=>[$.value?(h(),b(K,{key:0},[v(d(Ue),{label:I.$t("email"),prop:"email"},{default:k(()=>[v(d(Ye),{modelValue:d(g).email,"onUpdate:modelValue":R[1]||(R[1]=q=>d(g).email=q),name:"email",autocomplete:"new-email",placeholder:I.$t("emailValidator.placeholder"),onKeypress:Ne(be(B,["prevent"]),["enter"])},null,8,["modelValue","placeholder","onKeypress"])]),_:1},8,["label"]),v(d(Ue),{label:I.$t("signUpPage.emailVerificationCodeLabel"),prop:"emailVerCode"},{default:k(()=>[v(d(Ye),{modelValue:d(g).emailVerCode,"onUpdate:modelValue":R[2]||(R[2]=q=>d(g).emailVerCode=q),maxlength:6,placeholder:I.$t("signUpPage.emailVerificationCodePlaceholder")},{append:k(()=>[v(d(he),{class:"email-ver-regain-btn",type:"primary",disabled:d(p),loading:l.value,onClick:be(W,["stop"])},{default:k(()=>[Q(_(C.value),1)]),_:1},8,["disabled","loading","onClick"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),v(d(Ue),null,{default:k(()=>[v(d(he),{loading:i.value,type:"primary",onClick:be(Y,["prevent"])},{default:k(()=>[Q(_(I.$t("continueBtn")),1)]),_:1},8,["loading","onClick"])]),_:1})],64)):N("",!0),G.value?(h(),b(K,{key:1},[v(d(Ue),{label:I.$t("password"),prop:"password"},{default:k(()=>[v(d(Ye),{modelValue:d(g).password,"onUpdate:modelValue":R[3]||(R[3]=q=>d(g).password=q),type:"password",name:"password",autocomplete:"new-password","show-password":"",placeholder:I.$t("passwordValidator.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),v(d(Ue),{prop:"repeatPassword"},{default:k(()=>[v(d(Ye),{modelValue:d(g).repeatPassword,"onUpdate:modelValue":R[4]||(R[4]=q=>d(g).repeatPassword=q),type:"password",name:"password",autocomplete:"new-password","show-password":"",placeholder:I.$t("passwordValidator.repwdPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),v(d(Ue),null,{default:k(()=>[v(d(he),{loading:i.value,type:"primary",onClick:be(B,["prevent"])},{default:k(()=>[Q(_(I.$t("submitBtn")),1)]),_:1},8,["loading","onClick"])]),_:1})],64)):N("",!0)]),_:1},8,["disabled","model","rules"]),$.value?(h(),M(d(To),{key:0,center:"",closable:!1,type:"warning"},{default:k(()=>[v(V,{tag:"span",keypath:F.value,scope:"global"},{link:k(()=>[v(d(In),{type:"primary",href:d(Dt).DISCORD,target:"_blank",rel:"noopener noreferrer"},{default:k(()=>[Q(_(I.$t("discord")),1)]),_:1},8,["href"])]),_:1},8,["keypath"])]),_:1})):N("",!0)])])}}},xx=se(Cx,[["__scopeId","data-v-0af749f4"]]);const Ix={class:"not-found"},$x={__name:"FileNotFound",setup(e){return(t,n)=>{const a=rt("router-link");return h(),b("div",Ix,[c("div",null,[v(te,{name:"404",size:174})]),c("div",null,_(t.$t("notFound.tips")),1),v(a,{class:"go-home",to:"/",replace:""},{default:k(()=>[Q(_(t.$t("notFound.backHome")),1)]),_:1})])}}},Rx=se($x,[["__scopeId","data-v-646fe42f"]]);const Dx=e=>(vt("data-v-518f1c84"),e=e(),bt(),e),Nx={class:"not-found"},Ox=Dx(()=>c("h3",null,"404",-1)),Lx={__name:"NotFound",setup(e){return(t,n)=>{const a=rt("router-link");return h(),b("div",Nx,[c("div",null,[v(te,{name:"404",size:174})]),c("div",null,[Ox,c("p",null,_(t.$t("notFound.text")),1)]),v(a,{class:"go-home",to:"/",replace:""},{default:k(()=>[Q(_(t.$t("notFound.backHome")),1)]),_:1})])}}},Ux=se(Lx,[["__scopeId","data-v-518f1c84"]]),Mx="https://cdn.pdppt.com/chatdoc/assets/welcome-bg-4dc5c53a.png";const Bx={class:"introduction"},Fx={class:"title"},Gx={class:"sub-title"},zx={class:"introduce-list"},Hx={class:"introduce-item"},Yx={class:"introduce-item"},Wx={class:"introduce-item"},Vx={class:"operation"},qx={__name:"Introduction",props:{title:{type:String,default:""}},setup(e){return(t,n)=>(h(),b("div",Bx,[c("div",Fx,_(e.title),1),c("div",Gx,_(t.$t("chatdocApi.introduce")),1),c("ul",zx,[c("li",Hx,_(t.$t("chatdocApi.introduce1")),1),c("li",Yx,_(t.$t("chatdocApi.introduce2")),1),c("li",Wx,_(t.$t("chatdocApi.introduce3")),1)]),c("div",Vx,[kt(t.$slots,"operation",{},void 0,!0)])]))}},zd=se(qx,[["__scopeId","data-v-defe714a"]]);const jx=e=>(vt("data-v-692695ff"),e=e(),bt(),e),Kx={class:"welcome-panel"},Qx=jx(()=>c("img",{class:"bg-image",crossorigin:"anonymous",src:Mx,alt:""},null,-1)),Xx={__name:"WelcomePanel",setup(e){const t=dt(),n=()=>{t.push({name:"signIn",query:{redirect:"apiHome"}})};return(a,s)=>(h(),b(K,null,[c("div",Kx,[v(zd,{title:a.$t("chatdocApi.title")},{operation:k(()=>[v(d(he),{size:"large",type:"primary",plain:"",onClick:n},{default:k(()=>[Q(_(a.$t("chatdocApi.signIn")),1)]),_:1})]),_:1},8,["title"]),Qx]),v(Yr,{source:d(xt).API},null,8,["source"])],64))}},Jx=se(Xx,[["__scopeId","data-v-692695ff"]]),Zx="https://cdn.pdppt.com/chatdoc/assets/overview-bg-06a6392a.png";const eI=e=>(vt("data-v-0fd16e4c"),e=e(),bt(),e),tI={class:"overview-panel"},nI={class:"menu-list"},aI={class:"title"},sI={class:"overview-content"},iI={class:"title"},oI={class:"sub-title"},rI=eI(()=>c("img",{class:"bg-image",crossorigin:"anonymous",src:Zx,alt:""},null,-1)),lI={__name:"OverviewPanel",setup(e){const t=dt(),n=At(),a=yn(),{t:s}=ye(),i=O(()=>[{name:s("chatdocApi.overview.introduction"),list:[{name:s("chatdocApi.overview.apiOverview"),to:"apiOverview"},{name:s("upgrade.priceLabel"),desc:s("chatdocApi.overview.priceDesc"),to:"pricing"}]},{name:s("chatdocApi.overview.user"),list:[{name:s("chatdocApi.overview.apiKeys"),desc:s(a.isExpired?"chatdocApi.subscription":"chatdocApi.neverExposeTips"),to:"apiKeys"},{name:s("settings.usage.title"),desc:s("chatdocApi.overview.usageDesc"),to:"usage"},{name:s("chatdocApi.overview.apiPackage"),desc:s("chatdocApi.overview.apiPackageDesc"),to:"apiPackage"},{name:s("billing.title"),desc:s("chatdocApi.overview.billingHistoryDesc"),to:"billingHistory"}]}]),o=O(()=>{const l=[];return i.value.forEach(u=>{l.push(...u.list)}),l}),r=O(()=>o.value.find(l=>l.to===n.name));return $e(()=>n.name,l=>{l==="apiHome"&&t.replace({name:"apiOverview"})},{immediate:!0}),(l,u)=>{const p=rt("router-link"),f=rt("router-view");return h(),b("div",tI,[c("div",nI,[(h(!0),b(K,null,ke(i.value,(g,y)=>(h(),b("div",{key:y,class:"menu-content"},[c("div",aI,_(g.name),1),(h(!0),b(K,null,ke(g.list,w=>(h(),b("div",{key:w.type,class:"menu-item"},[v(p,{to:{name:w.to}},{default:k(()=>[Q(_(w.name),1)]),_:2},1032,["to"])]))),128))]))),128))]),c("div",sI,[d(n).name!=="apiOverview"&&r.value?(h(),b(K,{key:0},[c("div",iI,_(r.value.name),1),c("div",oI,_(r.value.desc),1)],64)):N("",!0),v(f,null,{default:k(({Component:g})=>[(h(),M(gu,{include:"Pricing"},[(h(),M(va(g)))],1024))]),_:1}),v(Yr,{source:d(xt).API},null,8,["source"])]),rI])}}},cI=se(lI,[["__scopeId","data-v-0fd16e4c"]]);const uI={class:"api-home"},dI={__name:"ApiHome",setup(e){const t=Oe(),n=yn();return(()=>{t.isLogin&&n.getSummary()})(),(s,i)=>(h(),b("div",uI,[d(t).isLogin?(h(),M(cI,{key:1})):(h(),M(Jx,{key:0}))]))}},pI=se(dI,[["__scopeId","data-v-100fc352"]]),fI={__name:"ApiOverview",setup(e){const t=dt(),n=()=>{t.push({name:"pricing"})};return(a,s)=>(h(),M(zd,{title:a.$t("chatdocApi.overview.apiOverview")},{operation:k(()=>[v(d(he),{size:"large",type:"primary",plain:"",onClick:n},{default:k(()=>[Q(_(a.$t("chatdocApi.subscriptionBtn")),1)]),_:1})]),_:1},8,["title"]))}};const Bi=()=>{const e=yn(),{t}=ye(),n=x([]),a=x([]),s=w=>w.replace("API - ",""),i=w=>[J.API_PAGE_PACKAGE,J.API_LITE_PAGE_PACKAGE,J.API_BASIC_PAGE_PACKAGE,J.API_QUESTION_PACKAGE].includes(w)?1e3:1,o=w=>i(w)*100,r=w=>{const m={text:"",color:""};return w.isApiLitePkg?(m.text=t("tags.lite"),m.color="var(--el-text-color-green)"):w.isApiBasicPkg?(m.text=t("tags.basic"),m.color="var(--el-color-primary)"):w.isApiElitePkg&&(m.text=t("tags.elite"),m.color="var(--el-text-color-pink)"),m},l=w=>[J.API_PAGE_AND_QUESTION_PACKAGE,J.API_BASIC_PAGE_AND_QUESTION_PACKAGE,J.API_LITE_PAGE_AND_QUESTION_PACKAGE,J.API_PAGE_PACKAGE,J.API_BASIC_PAGE_PACKAGE,J.API_LITE_PAGE_PACKAGE,J.API_QUESTION_PACKAGE].findIndex(E=>E===w);return{$packageList:n,$userPackageList:a,initPackageList:()=>T(void 0,null,function*(){e.packageList.length||(yield e.getApiPackages());const w=jf(e.packageList.map(m=>{const{alias:E,goods_id:P}=m;return Z(A({},m),{count:i(P),maxCount:o(P),step:i(P),packageTitle:s(E),order:l(P),tagInfo:r(m)})}),"order");n.value=[{title:t("chatdocApi.pricing.pageAndQuestion.title"),desc:t("chatdocApi.pricing.pageAndQuestion.desc"),type:nn.PAGE_AND_QUESTION,list:w.filter(m=>m.isApiPageAndQuestionPkg)},{title:t("chatdocApi.pricing.question.title"),desc:t("chatdocApi.pricing.question.desc"),type:nn.QUESTION,list:w.filter(m=>m.isApiQuestionPkg)},{title:t("chatdocApi.pricing.page.title"),desc:t("chatdocApi.pricing.page.desc"),type:nn.PAGE,list:w.filter(m=>m.isApiPagePkg)}]}),initUserPackageList:()=>T(void 0,null,function*(){yield e.getApiUserFilePackages();const w=e.userFilePackageList.map(C=>Z(A({},C),{tagInfo:r(C)}));let{[nn.PAGE]:m,[nn.QUESTION]:E,[nn.LITE_PAGE]:P,[nn.BASIC_PAGE]:S}=su(w,"type");const D=(C=[])=>C.sort(($,G)=>$.created_at-G.created_at).map(($,G)=>{let U="";return $.isApiPagePkg?U=t("chatdocApi.apiPagePackageItem"):$.isApiQuestionPkg&&(U=t("chatdocApi.apiQuestionPackageItem")),Z(A({},$),{title:`${U} ${G+1}`})});a.value=[...D(m),...D(E),...D(P),...D(S)].sort((C,$)=>C.created_at-$.created_at)}),handleInput:({item:w,index:m,packageIndex:E},P)=>{const{step:S}=w;n.value[E].list[m].updateCount=Math.ceil(P/S)*S},handleUpdate:({item:w,index:m,packageIndex:E})=>{let P=w.updateCount;P>w.maxCount?P=w.maxCount:P<=0&&(P=w.step),n.value[E].list[m].count=P},handleChange:({index:w,packageIndex:m},E)=>{n.value[m].list[w].count=E},getPackageStep:i,getTagInfo:r}};const hI={class:"api-addition-package-item"},_I={key:0,class:"header-tag-wrap"},gI={class:"top"},mI={class:"content"},yI={class:"content-item"},vI={key:0,class:"content-item tip-item"},bI={class:"tip"},wI={class:"content-item set-count-wrapper"},EI={key:1,class:"content-item help-item"},PI={class:"content-item"},kI={class:"operation"},SI={__name:"ApiAdditionPackageItem",props:{item:{type:Object,default:()=>({})}},emits:["input","update","change","subscribe"],setup(e,{emit:t}){const n=e,{t:a}=ye(),{getPackageStep:s}=Bi(),i=O(()=>({special:n.item.isApiBasicPkg&&(n.item.isApiPageAndQuestionPkg||n.item.isApiPagePkg)})),o=O(()=>n.item.isApiElitePkg?a("chatdocApi.pricing.extra.elite"):n.item.isApiBasicPkg?a("chatdocApi.pricing.extra.basic"):n.item.isApiLitePkg?a("chatdocApi.pricing.extra.lite"):""),r=O(()=>n.item.isApiElitePkg||n.item.isApiQuestionPkg),l=O(()=>{const E=(n.item.count||s(n.item.goods_id))*n.item.price;return kn(E)}),u=m=>{const{count:E}=m;return m.isApiPagePkg?a("chatdocApi.pricing.pageText"):m.isApiQuestionPkg?a("chatdocApi.pricing.questionText"):m.isApiPageAndQuestionPkg?a(E===1?"chatdocApi.pricing.packagesText":"chatdocApi.pricing.packagesPluralText"):""},p=m=>{const{goods_id:E}=m,P=s(E),S=`$${Number(m.price)*P}`,D=`${a("chatdocApi.pricing.perText")} ${P===1?"":P}`,C=u(Z(A({},m),{count:1}));return`${S} ${D} ${C}`},f=m=>{t("input",m)},g=()=>{t("update")},y=m=>{t("change",m)},w=m=>{t("subscribe",m)};return(m,E)=>{var P;return h(),b("div",hI,[(P=e.item.tagInfo)!=null&&P.text?(h(),b("div",_I,[v(Wt,{text:e.item.tagInfo.text,color:e.item.tagInfo.color},null,8,["text","color"])])):N("",!0),c("div",gI,_(e.item.packageTitle),1),o.value?(h(),b("div",{key:1,class:_e(["extra",i.value])},_(o.value),3)):N("",!0),c("div",mI,[c("div",yI,_(p(e.item)),1),r.value?(h(),b("div",vI,[v(Wt,{text:m.$t("tags.price")},null,8,["text"]),c("span",bI,_(m.$t("chatdocApi.pricing.priceTip")),1)])):N("",!0),c("div",wI,[c("div",null,_(m.$t("chatdocApi.pricing.selectCountText")),1),v(d(Sh),{"model-value":e.item.count,step:e.item.step,"step-strictly":"",min:e.item.step,max:e.item.maxCount,"controls-position":"right","value-on-clear":e.item.step,onInput:f,onBlur:g,onKeyup:Ne(g,["enter"]),onChange:y},null,8,["model-value","step","min","max","value-on-clear","onKeyup"]),c("div",null,_(u(e.item))+".",1)]),e.item.isApiPageAndQuestionPkg?(h(),b("div",EI,_(m.$t("chatdocApi.pricing.pageAndQuestionHelp")),1)):N("",!0),c("div",PI,_(m.$t("chatdocApi.pricing.totalText",{price:l.value})),1)]),c("div",kI,[v(d(he),{type:"primary",size:"large",onClick:E[0]||(E[0]=S=>w(e.item))},{default:k(()=>[Q(_(m.$t("chatdocApi.pricing.buy")),1)]),_:1})])])}}},AI=se(SI,[["__scopeId","data-v-7fd50cda"]]);const TI={class:"pricing"},CI={class:"title"},xI={class:"text"},II={class:"desc"},$I={class:"package-list"},RI={class:"package-tip"},DI={__name:"Pricing",setup(e){const t=At(),n=dt(),{showUpgradeDialog:a}=Lt(),{$packageList:s,initPackageList:i,handleInput:o,handleUpdate:r,handleChange:l}=Bi(),u=x([]),p=x(!1),f=w=>{a({defaultPackage:w,isChatDocApiMode:!0},"v1")},g=()=>T(this,null,function*(){try{p.value=!0,yield i(),u.value=s.value.map(w=>w.type),y()}finally{p.value=!1}}),y=()=>T(this,null,function*(){if(!s.value.length)return;const{target:w}=t.query;w&&(u.value=[w],yield $r(300),document.querySelector(`.el-collapse-item[data-type="${w}"] .el-collapse-item__header`).scrollIntoViewIfNeeded(),yield n.replace({name:t.name}))});return g(),ii(()=>{y()}),(w,m)=>{const E=Jt("loading");return ct((h(),b("div",TI,[v(d(Ah),{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=P=>u.value=P)},{default:k(()=>[(h(!0),b(K,null,ke(d(s),(P,S)=>(h(),M(d(Th),{key:P.type,name:P.type,"data-type":P.type},{title:k(()=>[c("p",CI,[v(d(ut),{class:_e(["el-collapse-item__arrow is-custom",{"is-active":u.value.includes(P.type)}])},{default:k(()=>[v(te,{name:"price-triangle",margin:"0"})]),_:2},1032,["class"]),c("span",xI,_(P.title),1)]),c("p",II,_(P.desc),1)]),default:k(()=>[c("div",$I,[(h(!0),b(K,null,ke(P.list,(D,C)=>(h(),b("div",{key:C},[v(AI,{item:D,onInput:$=>d(o)({item:D,index:C,packageIndex:S},$),onUpdate:$=>d(r)({item:D,index:C,packageIndex:S}),onChange:$=>d(l)({index:C,packageIndex:S},$),onSubscribe:f},null,8,["item","onInput","onUpdate","onChange"])]))),128))])]),_:2},1032,["name","data-type"]))),128))]),_:1},8,["modelValue"]),c("div",RI,_(w.$t("chatdocApi.pricing.packageTip")),1)])),[[E,p.value]])}}},NI=se(DI,[["__scopeId","data-v-927ad44d"]]);const OI={key:0,class:"sub-title"},LI={class:"api-package"},UI={__name:"ApiPackage",setup(e){const{$userPackageList:t,initUserPackageList:n}=Bi(),a=x(!1);return(()=>T(this,null,function*(){try{a.value=!0,yield n()}finally{a.value=!1}}))(),(i,o)=>{const r=Jt("loading");return h(),b(K,null,[d(t).length?N("",!0):(h(),b("div",OI,_(i.$t("chatdocApi.overview.apiPackageEmptyDesc")),1)),ct((h(),b("div",LI,[c("div",{class:_e(["package-list",{empty:!d(t).length}])},[v(d(Ri),{always:""},{default:k(()=>[(h(!0),b(K,null,ke(d(t),(l,u)=>(h(),M(yd,{key:u,index:u,item:l},null,8,["index","item"]))),128))]),_:1})],2)])),[[r,a.value]])],64)}}},MI=se(UI,[["__scopeId","data-v-f0939fce"]]);const BI={class:"billing"},FI={__name:"Billing",setup(e){const t=Oe(),n=yn(),{getTagInfo:a}=Bi(),s=O(()=>[...n.planList,...n.packageList].map(o=>Z(A({},o),{tagInfo:a(o)})));return It(()=>{n.planList.length||n.getApiPlans(),n.packageList.length||n.getApiPackages()}),(i,o)=>(h(),b("div",BI,[v(bd,{"user-info":{name:d(t).userInfo.name,email:d(t).userInfo.email},"goods-list":s.value,source:d(xt).API},null,8,["user-info","goods-list","source"])]))}},GI=se(FI,[["__scopeId","data-v-79f1755a"]]);const zI={class:"secret-key"},HI={__name:"SecretKeyInput",props:{keyId:{type:[String,Number],default:""},defaultOptions:{type:Object,default:()=>({inputType:"password",inputValue:""})},keyName:{type:String,default:""},showCopy:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!1}},emits:["keyRemoved"],setup(e,{emit:t}){const n=e,{copy:a}=Fr({legacy:!0}),{t:s}=ye();let i=null;const o=x("*".repeat(46)),r=x(1),l=x(),u=x(!1),p=x(!1),f=x(!1),g=x(n.defaultOptions.inputType),y=x(n.defaultOptions.inputValue),w=st({password:""}),m=O(()=>y.value||o.value),E=O(()=>u.value?s("chatdocApi.deleteKey"):s("chatdocApi.enterPassword")),P=Ui(w),S=()=>T(this,null,function*(){f.value=!0,i=Og(),yield i.promise}),D=()=>T(this,null,function*(){yield $r(200),f.value=!1,w.password=""}),C=()=>T(this,null,function*(){y.value&&(yield a(m.value)),ge.success(s("chatdocApi.copied"))}),$=()=>T(this,null,function*(){u.value=!1;try{y.value?g.value="text":yield S()}catch(B){if(B!=="close")throw B}}),G=()=>T(this,null,function*(){u.value=!0;try{yield S(),t("keyRemoved",n.keyId),ge.success(s("chatdocApi.deleteTip",{name:n.keyName}))}catch(B){if(B!=="close")throw B}}),U=()=>T(this,null,function*(){if(!p.value){yield l.value.validate();try{if(p.value=!0,u.value)yield Bb(n.keyId,A({},w));else{const B=yield Mb(n.keyId,A({},w));y.value=B.api_key,g.value="text",r.value++}i.resolve(w.password),D()}finally{p.value=!1}}}),F=()=>T(this,null,function*(){i.reject("close"),l.value.resetFields(),l.value.clearValidate()});return(B,W)=>(h(),b(K,null,[c("div",zI,[(h(),M(d(Ye),{key:r.value,size:"large",value:m.value,readonly:"",type:g.value},{suffix:k(()=>[e.defaultOptions.inputType==="password"?(h(),b(K,{key:0},[g.value==="password"?(h(),b("button",{key:0,class:"reset-button suffix-btn",onClick:$},[v(te,{name:"eye-close",size:24,margin:"0"})])):(h(),b("button",{key:1,class:"reset-button suffix-btn",onClick:W[0]||(W[0]=Y=>g.value="password")},[v(te,{name:"eye-bg",size:24,margin:"0"})]))],64)):N("",!0),e.showDelete?(h(),b("button",{key:1,class:"reset-button suffix-btn",onClick:G},[v(te,{name:"remove",margin:"0",size:24})])):N("",!0),e.showCopy?(h(),b("button",{key:2,class:"reset-button copy-btn",onClick:C},[v(te,{size:24,color:"var(--el-text-color-shallow)",name:"handle-copy"})])):N("",!0)]),_:1},8,["value","type"]))]),v(Xe,{modelValue:f.value,"onUpdate:modelValue":W[3]||(W[3]=Y=>f.value=Y),width:500,title:E.value,onClosed:F},{footer:k(()=>[v(d(he),{type:"primary",loading:p.value,onClick:U},{default:k(()=>[Q(_(B.$t("continueBtn")),1)]),_:1},8,["loading"])]),default:k(()=>[v(d(pn),{ref_key:"$formRef",ref:l,model:w,rules:d(P),"label-position":"top",onSubmit:W[2]||(W[2]=be(()=>{},["prevent"]))},{default:k(()=>[v(d(Ue),{prop:"password",label:"ChatDOC Password:"},{default:k(()=>[v(d(Ye),{modelValue:w.password,"onUpdate:modelValue":W[1]||(W[1]=Y=>w.password=Y),"show-password":"",placeholder:B.$t("passwordValidator.placeholder"),type:"password",onKeyup:Ne(U,["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64))}},YI=se(HI,[["__scopeId","data-v-4bb27840"]]);const WI={class:"create-api-key"},VI={class:"tips"},qI={__name:"CreateApiKey",emits:["created"],setup(e,{expose:t,emit:n}){const{t:a}=ye(),s=st({api_key_name:""}),i={api_key_name:[{required:!0,message:a("chatdocApi.keyNameWarn",{min:4,max:20}),trigger:"blur"},{min:4,max:20,message:a("chatdocApi.keyNameOverLimitWarn",{min:4,max:20}),trigger:"blur"},{validator:(u,p,f)=>{if(!/^[\w\s^$*[\]{}()?"!@#%&/\\,><':;|~=+.-]+$/.test(p)){f(new Error(a("chatdocApi.errorMsg")));return}f()},trigger:"blur"}]},o=x(),r=x(!1),l=()=>T(this,null,function*(){if(!r.value){yield o.value.validate();try{r.value=!0,yield Ub(A({},s)),n("created")}finally{r.value=!1}}});return t({resetForm:()=>{o.value.resetFields(),o.value.clearValidate()}}),(u,p)=>(h(),b("div",WI,[v(d(pn),{ref_key:"$formRef",ref:o,autocomplete:"off",model:s,rules:i,"label-position":"top",size:"large",onSubmit:p[1]||(p[1]=be(()=>{},["prevent"]))},{default:k(()=>[v(d(Ue),{label:u.$t("chatdocApi.keyName"),prop:"api_key_name"},{default:k(()=>[v(d(Ye),{modelValue:s.api_key_name,"onUpdate:modelValue":p[0]||(p[0]=f=>s.api_key_name=f),placeholder:u.$t("chatdocApi.placeholder"),autocomplete:"new-api_key_name",onKeyup:Ne(be(l,["prevent"]),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1},8,["label"]),v(d(Ue),null,{default:k(()=>[c("div",VI,_(u.$t("chatdocApi.createTips")),1)]),_:1}),v(d(Ue),{style:{"margin-bottom":"0"}},{default:k(()=>[v(d(he),{class:"continue-btn",type:"primary",loading:r.value,onClick:l},{default:k(()=>[Q(_(u.$t("continueBtn")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))}},jI=se(qI,[["__scopeId","data-v-9f63bb16"]]);const KI={class:"api-keys"},QI={key:0},XI={key:1,class:"key-name-wrapper"},JI=["onClick"],ZI={__name:"ApiKeys",setup(e){const t=dt(),n=Oe(),a=yn(),{t:s}=ye(),i=x(),o=x(),r=x(!1),l=x(!1),u=x(!1),p=O(()=>a.apiKeys[0]),f=O(()=>{const S=a.remainingElitePagePkgCount>0||a.remainingLitePagePkgCount>0||a.remainingBasicPagePkgCount>0,D=a.remainingQuestionPkgCount>0;return!S&&D?[{key:En(),text:s("chatdocApi.pkgWarningAlert.withoutPageWithQuestion")},{key:En(),text:s("chatdocApi.pkgWarningAlert.guideBuyPkgText"),command:nn.PAGE}]:S&&!D?[{key:En(),text:s("chatdocApi.pkgWarningAlert.withPageWithoutQuestion")},{key:En(),text:s("chatdocApi.pkgWarningAlert.guideBuyPkgText"),command:nn.QUESTION}]:[]}),g=()=>{n.userInfo.has_password?r.value=!0:l.value=!0},y=()=>{o.value.resetForm(),n.setUserInfo(Z(A({},n.userInfo),{has_password:!0})),r.value=!0,l.value=!1},w=()=>T(this,null,function*(){yield a.getApiKeys()}),m=()=>T(this,null,function*(){i.value.resetForm(),r.value=!1,yield a.getApiKeys()}),E=S=>{const D={};S&&(D.target=S),t.push({name:"pricing",query:D})};return(()=>{try{u.value=!0,a.getApiKeys(),a.getSummary()}finally{u.value=!1}})(),(S,D)=>{const C=Jt("loading");return h(),b(K,null,[ct((h(),b("div",KI,[d(a).isExpired?(h(),b(K,{key:1},[c("div",null,[v(d(he),{size:"large",type:"primary",plain:"",onClick:D[0]||(D[0]=$=>E())},{default:k(()=>[Q(_(S.$t("chatdocApi.subscriptionBtn")),1)]),_:1})]),v(d(To),{type:"warning",class:"pkg-incomplete-alert",closable:!1},{default:k(()=>[Q(_(S.$t("chatdocApi.pricing.packageAlert")),1)]),_:1})],64)):(h(),b(K,{key:0},[d(a).hasApiKey?(h(),b("div",XI,[c("div",null,[c("span",null,_(S.$t("chatdocApi.keyName"))+": ",1),c("strong",null,_(p.value.api_key_name),1)]),(h(),M(YI,{key:p.value.id,"key-id":p.value.id,"key-name":p.value.api_key_name,"show-delete":"",onKeyRemoved:w},null,8,["key-id","key-name"])),f.value.length?(h(),M(d(To),{key:0,type:"warning",class:"pkg-incomplete-alert",closable:!1},{default:k(()=>[(h(!0),b(K,null,ke(f.value,$=>(h(),b("span",{key:$.key,class:"pkg-incomplete-alert-item"},[c("span",{class:_e({"guide-buy-text":!!$.command}),onClick:G=>E($.command)},_($.text),11,JI)]))),128))]),_:1})):N("",!0)])):(h(),b("div",QI,[v(d(he),{size:"large",type:"primary",plain:"",onClick:g},{default:k(()=>[Q(_(S.$t("chatdocApi.createTitle")),1)]),_:1})]))],64))])),[[C,u.value]]),v(Xe,{modelValue:r.value,"onUpdate:modelValue":D[1]||(D[1]=$=>r.value=$),width:660,"show-footer":!1,title:S.$t("chatdocApi.createTitle")},{default:k(()=>[v(jI,{ref_key:"$apiKeyFormRef",ref:i,onCreated:m},null,512)]),_:1},8,["modelValue","title"]),v(Xe,{modelValue:l.value,"onUpdate:modelValue":D[2]||(D[2]=$=>l.value=$),title:S.$t("settings.profile.setPwdTitle"),width:"624","show-footer":!1},{default:k(()=>[v(ed,{ref_key:"$passwordFormRef",ref:o,"has-password":!1,onPasswordAdded:y},null,512)]),_:1},8,["modelValue","title"])],64)}}},e$=se(ZI,[["__scopeId","data-v-cf8011b7"]]),t$=[{path:"/",component:wA,redirect:"upload",meta:{layout:"main"},children:[{name:"upload",path:"upload",component:hC},{name:"chat",path:"chat/:id",component:C1}]},{name:"collectionChat",path:"/collection-chat/:id/:docId?",component:Ud,meta:{layout:"main"}},{name:"share",path:"/share/:id/:docId?",component:OC,meta:{layout:"main"}},{name:"signUp",path:"/sign-up/:org?",component:px,meta:{layout:"white",showLeftLayout:!0}},{name:"signIn",path:"/sign-in",component:bx,meta:{layout:"white",showLeftLayout:!0}},{name:"resetPassword",path:"/reset-password/:token?",component:xx,meta:{layout:"white",showLeftLayout:!0}},{path:"/file-not-found",name:"fileNotFound",component:Rx,meta:{layout:"white",showLeftLayout:!1}},{path:"/api",redirect:{name:"apiHome"},children:[{path:"overview",name:"apiHome",component:pI,meta:{layout:"api"},children:[{path:"",name:"apiOverview",component:fI},{path:"pricing",name:"pricing",component:NI},{path:"usage",name:"usage",component:()=>xa(()=>import("./Usage-6f1c1484.js"),[window.__toAssetUrl("Usage-6f1c1484.js"),window.__toAssetUrl("vendor-1-8c77151e.js"),window.__toAssetUrl("vendor-2-e250ed0d.js"),window.__toAssetUrl("vendor-5-0bcdab6f.js"),window.__toAssetUrl("vendor-4-87e1e3f9.js"),window.__toAssetUrl("Usage-648e8758.css")],import.meta.url)},{path:"api-package",name:"apiPackage",component:MI},{path:"billing-history",name:"billingHistory",component:GI},{path:"api-keys",name:"apiKeys",component:e$}]}]},{path:"/not-found",name:"notFound",component:Ux,meta:{layout:"white",showLeftLayout:!1}},{path:"/:pathMatch(.*)*",redirect:{path:"/not-found"}}],qr=Ch({history:xh(),routes:t$});const jr=typeof window=="undefined";function n$(){this.__data__=[],this.size=0}var a$=n$;function s$(e,t){return e===t||e!==e&&t!==t}var i$=s$,o$=i$;function r$(e,t){for(var n=e.length;n--;)if(o$(e[n][0],t))return n;return-1}var Fi=r$,l$=Fi,c$=Array.prototype,u$=c$.splice;function d$(e){var t=this.__data__,n=l$(t,e);if(n<0)return!1;var a=t.length-1;return n==a?t.pop():u$.call(t,n,1),--this.size,!0}var p$=d$,f$=Fi;function h$(e){var t=this.__data__,n=f$(t,e);return n<0?void 0:t[n][1]}var _$=h$,g$=Fi;function m$(e){return g$(this.__data__,e)>-1}var y$=m$,v$=Fi;function b$(e,t){var n=this.__data__,a=v$(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}var w$=b$,E$=a$,P$=p$,k$=_$,S$=y$,A$=w$;function Da(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Da.prototype.clear=E$;Da.prototype.delete=P$;Da.prototype.get=k$;Da.prototype.has=S$;Da.prototype.set=A$;var Gi=Da,T$=Gi;function C$(){this.__data__=new T$,this.size=0}var x$=C$;function I$(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var $$=I$;function R$(e){return this.__data__.get(e)}var D$=R$;function N$(e){return this.__data__.has(e)}var O$=N$,L$=typeof na=="object"&&na&&na.Object===Object&&na,Hd=L$,U$=Hd,M$=typeof self=="object"&&self&&self.Object===Object&&self,B$=U$||M$||Function("return this")(),vn=B$,F$=vn,G$=F$.Symbol,Kr=G$,Yl=Kr,Yd=Object.prototype,z$=Yd.hasOwnProperty,H$=Yd.toString,Ha=Yl?Yl.toStringTag:void 0;function Y$(e){var t=z$.call(e,Ha),n=e[Ha];try{e[Ha]=void 0;var a=!0}catch(i){}var s=H$.call(e);return a&&(t?e[Ha]=n:delete e[Ha]),s}var W$=Y$,V$=Object.prototype,q$=V$.toString;function j$(e){return q$.call(e)}var K$=j$,Wl=Kr,Q$=W$,X$=K$,J$="[object Null]",Z$="[object Undefined]",Vl=Wl?Wl.toStringTag:void 0;function eR(e){return e==null?e===void 0?Z$:J$:Vl&&Vl in Object(e)?Q$(e):X$(e)}var Qr=eR;function tR(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Wd=tR,nR=Qr,aR=Wd,sR="[object AsyncFunction]",iR="[object Function]",oR="[object GeneratorFunction]",rR="[object Proxy]";function lR(e){if(!aR(e))return!1;var t=nR(e);return t==iR||t==oR||t==sR||t==rR}var cR=lR,uR=vn,dR=uR["__core-js_shared__"],pR=dR,go=pR,ql=function(){var e=/[^.]+$/.exec(go&&go.keys&&go.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function fR(e){return!!ql&&ql in e}var hR=fR,_R=Function.prototype,gR=_R.toString;function mR(e){if(e!=null){try{return gR.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Vd=mR,yR=cR,vR=hR,bR=Wd,wR=Vd,ER=/[\\^$.*+?()[\]{}|]/g,PR=/^\[object .+?Constructor\]$/,kR=Function.prototype,SR=Object.prototype,AR=kR.toString,TR=SR.hasOwnProperty,CR=RegExp("^"+AR.call(TR).replace(ER,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xR(e){if(!bR(e)||vR(e))return!1;var t=yR(e)?CR:PR;return t.test(wR(e))}var IR=xR;function $R(e,t){return e==null?void 0:e[t]}var RR=$R,DR=IR,NR=RR;function OR(e,t){var n=NR(e,t);return DR(n)?n:void 0}var Na=OR,LR=Na,UR=vn,MR=LR(UR,"Map"),Xr=MR,BR=Na,FR=BR(Object,"create"),zi=FR,jl=zi;function GR(){this.__data__=jl?jl(null):{},this.size=0}var zR=GR;function HR(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var YR=HR,WR=zi,VR="__lodash_hash_undefined__",qR=Object.prototype,jR=qR.hasOwnProperty;function KR(e){var t=this.__data__;if(WR){var n=t[e];return n===VR?void 0:n}return jR.call(t,e)?t[e]:void 0}var QR=KR,XR=zi,JR=Object.prototype,ZR=JR.hasOwnProperty;function eD(e){var t=this.__data__;return XR?t[e]!==void 0:ZR.call(t,e)}var tD=eD,nD=zi,aD="__lodash_hash_undefined__";function sD(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nD&&t===void 0?aD:t,this}var iD=sD,oD=zR,rD=YR,lD=QR,cD=tD,uD=iD;function Oa(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Oa.prototype.clear=oD;Oa.prototype.delete=rD;Oa.prototype.get=lD;Oa.prototype.has=cD;Oa.prototype.set=uD;var dD=Oa,Kl=dD,pD=Gi,fD=Xr;function hD(){this.size=0,this.__data__={hash:new Kl,map:new(fD||pD),string:new Kl}}var _D=hD;function gD(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var mD=gD,yD=mD;function vD(e,t){var n=e.__data__;return yD(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Hi=vD,bD=Hi;function wD(e){var t=bD(this,e).delete(e);return this.size-=t?1:0,t}var ED=wD,PD=Hi;function kD(e){return PD(this,e).get(e)}var SD=kD,AD=Hi;function TD(e){return AD(this,e).has(e)}var CD=TD,xD=Hi;function ID(e,t){var n=xD(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}var $D=ID,RD=_D,DD=ED,ND=SD,OD=CD,LD=$D;function La(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}La.prototype.clear=RD;La.prototype.delete=DD;La.prototype.get=ND;La.prototype.has=OD;La.prototype.set=LD;var qd=La,UD=Gi,MD=Xr,BD=qd,FD=200;function GD(e,t){var n=this.__data__;if(n instanceof UD){var a=n.__data__;if(!MD||a.length<FD-1)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new BD(a)}return n.set(e,t),this.size=n.size,this}var zD=GD,HD=Gi,YD=x$,WD=$$,VD=D$,qD=O$,jD=zD;function bs(e){var t=this.__data__=new HD(e);this.size=t.size}bs.prototype.clear=YD;bs.prototype.delete=WD;bs.prototype.get=VD;bs.prototype.has=qD;bs.prototype.set=jD;var KD="__lodash_hash_undefined__";function QD(e){return this.__data__.set(e,KD),this}var XD=QD;function JD(e){return this.__data__.has(e)}var ZD=JD,eN=qd,tN=XD,nN=ZD;function Lo(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new eN;++t<n;)this.add(e[t])}Lo.prototype.add=Lo.prototype.push=tN;Lo.prototype.has=nN;var aN=vn;aN.Uint8Array;var Ql=Kr,Xl=Ql?Ql.prototype:void 0;Xl&&Xl.valueOf;function sN(e){return e!=null&&typeof e=="object"}var jd=sN,iN=Qr,oN=jd,rN="[object Arguments]";function lN(e){return oN(e)&&iN(e)==rN}var cN=lN,Jl=cN,uN=jd,Kd=Object.prototype,dN=Kd.hasOwnProperty,pN=Kd.propertyIsEnumerable;Jl(function(){return arguments}());var _i={exports:{}};function fN(){return!1}var hN=fN;_i.exports;(function(e,t){var n=vn,a=hN,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,r=o?n.Buffer:void 0,l=r?r.isBuffer:void 0,u=l||a;e.exports=u})(_i,_i.exports);_i.exports;var gi={exports:{}};gi.exports;(function(e,t){var n=Hd,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&n.process,r=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch(u){}}();e.exports=r})(gi,gi.exports);var _N=gi.exports,Zl=_N;Zl&&Zl.isTypedArray;var gN=Na,mN=vn,yN=gN(mN,"DataView"),vN=yN,bN=Na,wN=vn,EN=bN(wN,"Promise"),PN=EN,kN=Na,SN=vn,AN=kN(SN,"Set"),TN=AN,CN=Na,xN=vn,IN=CN(xN,"WeakMap"),$N=IN,Uo=vN,Mo=Xr,Bo=PN,Fo=TN,Go=$N,Qd=Qr,Ua=Vd,ec="[object Map]",RN="[object Object]",tc="[object Promise]",nc="[object Set]",ac="[object WeakMap]",sc="[object DataView]",DN=Ua(Uo),NN=Ua(Mo),ON=Ua(Bo),LN=Ua(Fo),UN=Ua(Go),Xn=Qd;(Uo&&Xn(new Uo(new ArrayBuffer(1)))!=sc||Mo&&Xn(new Mo)!=ec||Bo&&Xn(Bo.resolve())!=tc||Fo&&Xn(new Fo)!=nc||Go&&Xn(new Go)!=ac)&&(Xn=function(e){var t=Qd(e),n=t==RN?e.constructor:void 0,a=n?Ua(n):"";if(a)switch(a){case DN:return sc;case NN:return ec;case ON:return tc;case LN:return nc;case UN:return ac}return t});const mo=function(e,t){if(!jr){if(!e||!t)return null;t=Ih(t),t==="float"&&(t="cssFloat");try{const n=e.style[t];if(n)return n;const a=document.defaultView.getComputedStyle(e,"");return a?a[t]:""}catch(n){return e.style[t]}}},MN=(e,t)=>jr?void 0:(t==null?mo(e,"overflow"):t?mo(e,"overflow-y"):mo(e,"overflow-x")).match(/(scroll|auto|overlay)/),BN=(e,t)=>{if(jr)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(MN(n,t))return n;n=n.parentNode}return n},Qt="ElInfiniteScrollTop",FN=50,GN=200,zN=0,HN={delay:{type:Number,default:GN},distance:{type:Number,default:zN},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Jr=(e,t)=>Object.entries(HN).reduce((n,[a,s])=>{var u,p;const{type:i,default:o}=s,r=e.getAttribute(`infinite-scroll-top-${a}`);let l=(p=(u=t[r])!=null?u:r)!=null?p:o;return l=l==="false"?!1:l,l=i(l),n[a]=Number.isNaN(l)?o:l,n},{}),Xd=e=>{const{observer:t}=e[Qt]||{};t&&(t.disconnect(),delete e[Qt].observer)},YN=(e,t)=>{const{container:n,containerEl:a,instance:s,observer:i,lastScrollTop:o}=e[Qt],{disabled:r,distance:l}=Jr(e,s),{scrollTop:u}=a,p=u-o;if(e[Qt].lastScrollTop=u,i||r||p>0)return;let f=!1;f=u<=l,f&&t.call(s)};function yo(e,t){const{containerEl:n,instance:a}=e[Qt],{disabled:s}=Jr(e,a);s||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?t.call(a):Xd(e))}const WN={mounted(e,t){return T(this,null,function*(){const{instance:n,value:a}=t;yield fn();const{delay:s,immediate:i}=Jr(e,n),o=BN(e,!0),r=o===window?document.documentElement:o,l=kl(YN.bind(null,e,a),s);if(o){if(e[Qt]={instance:n,container:o,containerEl:r,delay:s,cb:a,onScroll:l,lastScrollTop:r.scrollTop},i){const u=new MutationObserver(kl(yo.bind(null,e,a),FN));e[Qt].observer=u,u.observe(e,{childList:!0,subtree:!0}),yo(e,a)}o.addEventListener("scroll",l)}})},unmounted(e){const{container:t,onScroll:n}=e[Qt]||{};t==null||t.removeEventListener("scroll",n),Xd(e)},updated(e){return T(this,null,function*(){if(!e[Qt])yield fn();else{const{containerEl:t,cb:n,observer:a}=e[Qt];t.clientHeight&&a&&yo(e,n)}})}},VN=e=>{[yu,$h].forEach(t=>{e.use(t)}),e.directive("InfiniteScrollTop",WN)},$s=Di?"LLM":"ERNIE Bot",qN={en:{fullStopChar:".",saveBtn:"Save",okBtn:"OK",specifyBtn:"Specify",copyBtn:"Copy",cancelBtn:"Cancel",editBtn:"Edit",deleteBtn:"Delete",submitBtn:"Submit",uploadBtn:"Upload",continueBtn:"Continue",resendBtn:"Resend",skipBtn:"Skip",backBtn:"Back",nextBtn:"Next",closeBtn:"Close",discardBtn:"Discard",yesBtn:"Yes",noBtn:"No",discord:"Discord",current:"Current",joinDiscord:"Join Discord",email:"Email",password:"Password",name:"Name",username:"User Name",monthlyText:"30 days",annualText:"360 days",avatarTypeTips:"Invalid file format, only JPG, JPEG, PNG and WEBP files are accepted.",selectPdf:"Choose a PDF file from the list on the left or upload your own.",uploadTextByHasLogin:"Click or drag and drop to upload.",uploadTextByNotLogin:"Sign in to upload your own files.",recommendQuestionTip:"Ask me anything about the document, or just click one of the options below",recommendCollectionTip:"Ask me anything about the documents, or just click one of the options below",passwordTip:"Please enter the password of this file.",passwordTipAgain:"Password incorrect, you may try again.",toggleFileList:"Toggle file list",PDFPageCount:"Your {type} file has too many pages ({current}) which is larger than our limit ({max}).",PDFNoPage:"Your file has no pages.",needPasswordTip:"Your file is protected by a password so we can't open it.",pdfFileError:"Sorry, but your document seems to be malformed.",chatdocIconHandlerTitle:"Select, Click, Ask!",chatdocAgainTitle:"Ask again with this quote.",signUp:"Sign up",signIn:"Sign in",signOut:"Sign out",signedOut:"Signed out",exceedQuestionLimit:"You have reached the limit count of questions.",copiedTip:"Copied to clipboard.",or:"or",notFound:{tips:"We couldn't find the file you are looking for, please make sure you are using a valid link.",backHome:"Back to home page.",text:"Page Not Found."},doc:{downloadError:"We failed to fetch {docType} from the provided URL.",sizeLimit:"Your file is larger than {max}M so we can't deal with it.",convertError:"File processing failed, please try again later.",tokensLimit:"The content of a single page in a document must not exceed {max} tokens.",tokensLimitOfWord:"The content of the doc, docx, markdown, epub, txt and website must not exceed {max} tokens.",waiting:"Processing the document, please wait",waitingWithDot:"Processing the document, please wait…",htmlContentError:"This website does not have valid content.",tooltip:{formatError:"File format conversion error.",pageLimit:"Over {max} pages limit.",downloadError:"Download error.",sizeLimit:"Over {max}M.",tokensLimit:"Token limit exceeded.",analysisError:"File processing failed.",analyzing:"Analyzing",ocrExceed:"OCR quota exceeded at upload.",reanalyzeLabel:"You can ",reanalyzeText:"reanalyze",needOcr:"This file needs OCR parsing.",needOcrUnlockText:" and Unlock.",pagePackageNotEnoughError:"Document exceeds pages limit.",llmDetectionContainSensitiveContent:"LLM has detected that your input or generated content may contain unsafe or sensitive material."}},fileListUpload:{contentText:`There are currently no 
 documents, please`,handlerText:"click here to upload.",contentTextWithoutHandler:"There are currently no documents."},deleteFileDialog:{title:"Delete Document?",collectionTitle:"Delete Collection?",content:`This document will be deleted forever.
If this file is shared, it will not be available to collaborators.`,collectionContent:"This collection will be deleted forever.",collectionDocContent:"This document will be deleted forever.",deletedTip:"Deleted File",deletedCollectionTip:"Deleted Collection"},reparseFileDialog:{title:"Reanalyze File?",content:"Your pages package purchase has been successfully completed. Would you like to proceed with the reanalysis of the mentioned file?",iconTip:"Reanalyze",reparseCompleteTip:"Reanalysis in progress...",ocrContent:"Reanalyzing this document will consume {count} OCR {pageUnit}. "},editFilename:{successTip:"Edit filename success.",collectionSuccessTip:"Edit collection name success."},share:{title:"Share",public:{title:"Public Collaborative Q&A",desc:"Anyone can publicly available with the link, chatlogs are shared."},personal:{title:"Personal Secure Q&A",desc:"Every visitor will start a new conversation, chatlogs are not shared."},passwordEnabled:"Password enabled",expiryDate:"Expiry date",copyLink:"Copy link",copyLinkAndPwd:"Copy link & password",inviteMsg:"invite you to view",switchLabel:"Share link",copyPwd:"Copy share link password",expire:"Expire",expireDate:"Expire Date",alert:"This content is publicly available to anyone with the link.",successTip:"Update share succeeded.",createdTip:"Shared link created. Click Copy to share.",accessTip:"Access updated.",copyEmptyTip:"Not password.",pwdInputLabel:"Require password",pwdInputPlaceholder:"Please enter password.",expiredOnText:"The sharing link will expire on",iconTip:{normal:"Share",errorFile:"Analysis of this file failed.",errorCollection:"Analysis of this collection failed.",emptyCollection:"Empty collection. Please upload files."},shareExpired:"Page has expired.",collectionPageExpiredWarning:"This page has expired, please refresh the page and try again."},chatView:{toAskYourQuestionText:" to ask your question.",askInTheThread:"Ask related questions in the thread.",threadBack:"Leave thread. Start new chat for unrelated talk.",waitAnalysisText:"Please wait for document analysis results...",answerError:"network error",answerUnknownError:"An unknown error occurred, please try again.",questionPlaceholder:{normal:'Type a question or type "/" to select a prompt.',normalWithoutPrompt:"+ New chat.",normalInThead:"Enter your questions here.",exceedQuestion:"The limit of {count} questions has been reached.",selectedMaterial:"Enter your question here to inquire on selected text.",parsing:"You may take a sip of your coffee while I am working hard on processing the file.",sharedAndNotSignIn:" to ask your question.",membershipExpired:"The paid service has expired.",withoutValidDocs:"No documents are available in the collection.",includeParsingDocs:"Please wait for document analysis results.",chatLoading:"Hold on, answer in progress.",anonymousQuestionExceedAlert:"The number of trials has exceeded the limit, please "},promptIconTitle:"Prompts",sendIconTitle:"Send",settingIconTitle:"Setting"},passwordValidator:{requiredWarn:"Please enter password.",repwdRequiredWarn:"Please enter password again.",overLimitWarn:"The password length needs to be between {min} and {max}.",noMatchWarn:"Passwords do not match.",errorMsg:"Password should contain only ASCII printable chars.",placeholder:"Enter your password.",current:"Current password.",repwdPlaceholder:"Re-enter your password."},emailValidator:{requiredWarn:"Please enter email.",formatWarn:"Invalid email format.",placeholder:"Enter your email."},usernameValidator:{placeholder:"Enter your user name.",requiredWarn:"Please enter user name.",overLimitWarn:"Length should be {min} to {max}."},resetPasswordPage:{title:"Forgot your password?",subtitle:"Enter your email to reset it.",enterPassword:"Enter a new password for your {email} account.",alertPartHead1:`Remember to check your spam folder if you
don't get the email in your inbox. Contact us on
{link} if it doesn't help.`,alertPartHead2:`Remember to check your spam folder if you
don't get the email in your inbox.`,submitWarnMsg:"If a ChatDOC account exists at {email}, an email verification code will be sent.",submitSuccessMsg:"Password changed successfully."},signInPage:{title:"Welcome back to ChatDOC!",subtitle1:"Don't have an account?",subtitle2:"Sign up now",submitSuccessMsg:"Sign in success!",googleLogin:"Sign in with Google",left:{text1:`Chat with documents.
Get instant answers with
cited sources.`,text2:mt?`ChatDOC is a ${$s} based file-reading assistant that can quickly
extract, locate and summarize information from documents.`:`ChatDOC is a ChatGPT-based file-reading assistant that can quickly
extract, locate and summarize information from documents.`},rememberPassword:{msg:"Enhance login convenience by saving email account and password?"}},signUpPage:{title:"Sign up to ChatDOC",title2:"Set Your Password",subtitle:"Already have an account?",agreeAndSignUpMsg:"Agree and sign up",agreeTip:'By clicking "Agree and sign up", you agree to our {policy} and {terms}.',emailTipsContent:{text1:"Verify Your Email",text2:`We've send a verification code to {email},
Check and complete the registration now!`,text3:"Dear {email},",text4:"Please complete the verification in your mailbox.",text5:"Notes:",text6:"The verification code will expire in {days}.",text7:"Check your spam folder if you don't get the email in your inbox.",text8:"Contact us on {discord} / {twitter} / {email} if it doesn't help.",text9:"Contact us on {email} if it doesn't help."},leavePageWarn:"Leaving this page will delete the data you have filled in, do you want to continue?",steps:{step1:"Enter Email",step2:"Verify Email",step3:"Password & Sign in"},invite:{text1:"Hi, Productivity Pioneer",text2:"{userName} invites you to ChatDOC.",text3:"Let’s create an account first."},emailVerificationCodeLabel:"Email verification code",emailVerificationCodePlaceholder:"Enter your verification code.",emailVerificationCodeInvalidText:"Please enter 6 digits.",emailRegainSuccessText:"Verification code sent successfully.",emailRegainBtnTextWhenUsable:"Get code"},uploadPage:{whitelist:{withDiscordMsg:"The URL is not in the {whitelist}. Please download and upload locally, or {discord} to add it to the whitelist.",withoutDiscordMsg:"The URL is not in the {whitelist}. Please download and upload locally.",messageUsMsg:"message us"},pagesText:"pages",ocrPagesText:"OCR pages",ocrText:"OCR",filesText:"files",tokensText:"tokens",questionText:"questions",pdfUnit:"/pdf",tokensUnit:`/doc,docx,markdown,epub,
txt,website`,tokenText:"doc,docx,markdown,epub,txt,website",sizeUnit:"/file",sizePerUnit:"/Per file",pagePerUnit:"/Per page",sizePerUnitWithoutSlash:"Per file",pagePerUnitWithoutSlash:"Per page",filesUnit:"/24 hours",filesMonUnit:"/30 days",filesAnnualUnit:"/360 days",collectionUnit:"/collection",supportText:"Support",unSupportTips:"{upgrade} to support more formats.",supportTips:"Support for images is coming soon.",urlText:"Upload files through URL",websiteText:"Chat with website",urlPlaceholder:{isLogin:"Upload a file by pasting a URL here.",notLogin:"Sign in to upload file with URL."},uploadingTitle:"Uploading the files",fileTypeValidMsg:"'{ext}' file format is not supported.",validUrlMsg:"Please give us a valid URL.",uploadLimit:"Your file slot have been used up.",allFileInvalid:"File doesn't meet requirements. Please check page count, file size, and format.",collectionLimit:"The collection don't have enough file slots.",collectionFilesCountExceedLimit:"There aren't enough file slots left in the collection.",countPerCollection:"The number of documents exceeds {max}.",collection:"Drag and drop folder as collection.",collectionTips:"Chat with the docs in a collection.",ocrTips:"OCR only supports English and Chinese.",newCollection:"New collection",beforeUploadMultiple:"These files will create a new collection for you.",ignoreNonCompliantFilesWarn:"Some non-supported files are silently ignored.",createCollection:{title:"Create collection",placeholder:"Please enter collection name.",requiredValid:"Please enter collection name.",sizeLimitValid:"The password length needs to be between 1 and 80.",regValid:"The name cannot contain special characters."},uploadingText:"Uploading, please wait...",addPagesText:"Add pages",addOcrPagesText:"Add OCR pages",addFilesText:"Add files"},notice:{msg:"Chat with Website Now!",content:"Chat with Website Now!",extra:"* Plain text url is preferable.",free:{subContent:"Now we support uploading website URLs to chat! Upgrade to Pro to enjoy smoother AI chatting instantly!",confirmBtnText:"Get Pro"},pro:{subContent:"Now you can upload website URLs as a Pro user and chat with them without the need for any downloads!",confirmBtnText:"Get Start"}},userMenu:{createdDate:"Created date",expirationDate:"Expiration date",pagesPerFile:"Pages per file",tokensPerFile:"Tokens per file",questionPerDay:"{num} questions per 24H",pages:"pages",files:"files",filePackages:"File packages",filePackageItem:"File package",pagePackages:"Page packages",pagePackageItem:"Page package",ocrPagePackages:"OCR Page packages",ocrPagePackageItem:"OCR Page package",slots:"Slots",free:{fileLabel:"Files",questionLabel:"Questions",filePer:"File slots per 24H",questionPer:"Questions per 24H"},pro:{fileLabel:"File slots per 30D",questionLabel:"Questions per 24H",ocrPagesLabel:"OCR pages per 30D"}},selectTextGuidance:{title:"Select and quote text to ask specifically.",step1:"Select text, you will see the ChatDOC button, click it to quote the text.",step2:"Hover your mouse over a content block, you will see the ChatDOC button after 2 secs, click it to quote the block.",step3:"Double-click on a paragraph, select it in one stroke.",step4:"Double-click also works on tables.",IKnow:"I know"},feedbackDialog:{title:"Provide additional feedback",placeholder:{up:"What do you like about the answer?",down:"What was the issue with the response? How could it be improved?"},saveBtn:"Submit Feedback",reasons:"This is harmful / unsafe,This isn’t true,This isn’t helpful.",feedbackSuccess:"Feedback submitted successfully."},responseLangSetting:{title:"Output language",label:"Output in",mobileName:"Response Language"},fontSizeSetting:{title:"Font size",fontSizes:{maximum:"Maximum",larger:"Large",default:"Default",minimum:"Minimum"}},exportQA:{title:"Export as",mobileName:"Export chat",range:{text:"Range",all:"All",like:"Like"},type:{markdown:"Markdown",html:"HTML",png:"PNG"},toast:{success:"Export task fulfilled!",failed:"Export failed, please retry."},loadingName:"loading...",loading:"Exporting, please wait...",success:"Export succeeded.",limit:"Image incomplete, visit {chatdoc} for full Q&A.",empty:"Generated from {chatdoc}",contentTitle:"ChatDOC",link:Ka,relatedSources:"Related sources",relatedFiles:"Related files"},chatList:{likeIconTitle:"Like",CancelLikeIconTitle:"Cancel like",dislikeIconTitle:"Dislike",CancelDislikeIconTitle:"Cancel dislike",copyableTitle:"Copy",deletableTitle:"Remove",deletablePopconfirmText:"Are you sure you want to remove this question?",deletablePopconfirmConfirmText:"Remove",sourceItemFileDeleted:"The file has been deleted.",deleteDialogConfirmText:"Remove this question?",addPromptIconTitle:"Save prompt",quoteText:"{count} Follow {upUnit}"},collectionFileList:{uploadAlertText:"Chat with docs in the collection.",uploadBtnText:"Upload",uploadBtnTooltip:"Upload files."},website:{button:"Chat",entry:"Chat with website",title:"Chat with the text content of the website.",tips:`Currently, it is mainly suitable for scenarios such as help centers, user manuals, or knowledge Q&A.

For example:
`,placeholder:"Enter a website to chat."},collectionCopy:{copyDocTitle:"Copy the selected files to the collection",copyDocTooltip:"Copy existing files.",existingFiles:"Existing files",availableFileSlots:"Available file slots",selectedFiles:"Selected files",removeAll:"Deselect all"},chatViewFooter:{title:"While getting answers, you want ChatDOC to",questionMode:{relatedTextLabel:"Stick to file",relatedTextTooltip:"Limit responses to current {type}'s information."},stopGeneratingBtnText:"Stop generating",quickInputList:{emptyName:"No custom prompt available. Want to create one now?",emptyContent:"Click or press Enter to create instantly."},promptPlaceholderBar:{title:"Fill in included placeholders:",invalidPlaceholderToast:"The {name} placeholder content is missing."}},fileListSearchable:{placeholder:"Search file name.",noSearchResult:"No results found."},upgrade:{toProButton:"Upgrade to Pro",planButton:"Upgrade plan",expiredButton:"Go to activate",additionPackageButton:"Add it",upgradeTitle:"Upgrade your plan",limitTitle:"Pro Plan File Limit Reached",expiredLimitTitle:"Quota has been used up",freeLimitTitle:"For Pro users only",selectPayTypeTitle:"Please select a payment method",paySuccessTitle:"Upgrade successful",payFailedTitle:"Payment failed",wechatTitle:"WeChat Pay",alipayTitle:"Alipay",paypalTitle:"Paypal",payAlert:"Have you completed the payment?",productNameLabel:"Product name",productNameText:"ChatDOC {alias} Plan {unit}",usernameLabel:"Username",emailLabel:"Email",priceLabel:"Pricing",priceTip:"Valid for limited time: 360 days",payMethodLabel:"Payment method",domesticTip:{default:"* Alipay and WeChat Pay are recommended for Chinese users.",autoRenewalMode:"* Alipay is recommended for Chinese users."},foreignTip:"* If PayPal is unavailable or unsupported in your country, switch your PayPal country/region or reach out on our Discord channel.",qrCodeTip:"Open {payType} and scan the QR code to {scene}.",qrCodeExpiredTip:"The QR code is invalid, click to refresh.",paySuccessTip:"You have successfully upgraded!",payFailedTip:"Payment failed. Please try again or check your order.",payFailedContent:{text1:"We couldn't find your payment information.",text2:"Please refresh the page and try again or contact your payment provider for assistance.",text3:"You can also provide us with feedback on {discord}."},limitContent:{text1:"To continue using our services, choose one of the following:",text2:"1. Purchase an additional file package to supplement your Pro plan.",text3:"2. If auto-renewal is enabled, wait for the Pro plan to reset in 30 days."},expiredLimitContent:"Your quota has been used up. You can upgrade your plan or wait for us to release Pro Plus plan service.",freeLimitContent:'Only Pro users can upload "Doc/Docx/Markdown/ePub/TXT/Website" files.',proBtnText:"Get Pro",proPlusBtnText:"Get Pro Plus",freeProBtnText:"Upgrade",filePackageContent:{content:"Add an additional file package:",option:{opt1:"Valid within 90 days.",opt2:`Once purchased, the file will
remain valid no matter what
your ChatDOC plan is, until it
expires.`}},pagePackageContent:{content:"Add an additional page package:",option:{opt1:`To accommodate your document,
which exceeds {pageCount} pages.`,opt2:"Valid within 90 days.",opt3:`Once purchased, the page will
remain valid no matter what your
ChatDOC plan is, until it expires.`}},ocrPagePackageContent:{content:"Add an additional OCR page package:",option:{opt1:"Valid within 90 days.",opt2:"Once purchased, the OCR page will remain valid no matter what your ChatDOC plan is, until it expires."}},filePackageLabel:"Quota number",autoRenewalTip:"Enable auto-renewal for just  ${price}/30 days.",wechatTip:"* Apologies, but WeChat Pay currently does not support auto-renewal. Please use Alipay or PayPal to get the auto-renewal discount.",getQuotaBonus:"Get Quota Bonus",referFriend:{tabTitle:"Get quota for free",title:"🎁 Enjoy Free 1000-File Uploads by Inviting Friends to ChatDOC!",entryNotice:"🎁 Get more usage quota for free!",textContent1:"Get a 5-file upload quota every time someone signs up using your referral link below (up to a maximum of 1000 extra).",textContent2:"Your friends registered through this link will also get a 3-file upload quota.",textContent3:"If you need even more, you can ",textContent4:"upgrade your account.",referLinkText:"Your personal  referral link",copyText:"Copy link",separatorText:"More ways to invite",inviteTexts:{email:"Send an email",twitter:"Share on Twitter",facebook:"Share on Facebook"},descriptions:{desc1:{text1:"You can view ",text2:"the status of referrals",text3:" or visit our ",text4:"Wiki",text5:" if you have any questions."},desc2:"We'll revoke rewards for users using irregular methods like temporary emails or bot registrations, with severe cases facing account bans."},shareText:mt?`${Ka} - Chat with your documents! Try this amazing AI file-reading tool! Get ${$s} response with cited sources. Use my invitation link to register, we will both receive a bonus:`:`${Ka} - Chat with your documents! Try this amazing AI file-reading tool! Get GPT response with cited sources. Use my invitation link to register, we will both receive a bonus: `},tabPaneTitle:{planForFree:"Get Pro Plan",planForPro:"Upgrade Pro Plan",package:"Extra Packages",refer:"Get Quota For Free"},planCardTitle:"{alias} Plan {days} Days",autoRenewalTag:"Auto-Subscribe",AnnuallyTag:"Save ${money} for you!!",noAnyDeals:"No any deals",planAlertText:{autoRenewalExplainText1:"Service and billing cycle every {days} days, you can cancel auto-subscription anytime.",autoRenewalExplainText2:"Auto-subscribe for uninterrupted access and save ${money} every {days} days for you!",priceExplainText:"The crossed-out price shown on this page is the original price.",withoutAutoRenewalText:"Only {days} days."},paymentMethodText:"Select payment method and buy",buyItNowBtnText:"Buy it now!",returnSelectionBtnText:"Return to Selection"},sendEmailDialog:{title:"Send an email",sendBtn:"Send",placeholder:"Enter email address.",successTip:"Invitation sent successfully to {email} for email registration."},referListDialog:{title:{totalQuotaEarnedLabel:"Total Quota Earned:",totalQuotaEarnedCount:"{count} docs",pageLimitText:"Page limit per file: {count}",upgradeToHigherText:"Upgrade to {count}",expireWarnText:"will reduce to {count} when Pro expires."},listColumnNames:{email:"Email",registerDate:"Register Date",expireDate:"Expire Date",quotaEarned:"Quota Earned"},copyText:"Copy link"},subscription:{title:"Subscription",plan:"Plan",expiration:"Expiration date",autoSubscription:"Auto-subscription",subscribe:"Subscribe",unsubscribe:"Unsubscribe",subscribeSuccessTitle:"Subscribe successful",subscribeSuccess:"Auto-subscription is enabled.",alipaySubscribeTip:"* When a deduction is required, if the balance is insufficient, the subscription will be cancelled within one day.",alipaySubscribeErrorMessage:"Auto-subscription is enabled, but the balance of Alipay account is insufficient.",subscribeError:"Auto-subscription is failed, please try again.",unsubscribeTips:"Would you like to unsubscribe? By unsubscribing, your subscription will not automatically renew upon expiration.",unsubscribeSuccess:"Unsubscribe succeeded.",unsubscribeError:"Unsubscribe failed, please try again.",subscriptionAlert:"Have you enabled auto-subscription in PayPal?",renewalDateLabel:"Next renewal start date",renewalMethodLabel:"Renewal method"},billing:{title:"Billing history",help:"Get billing help",productName:"Plan & Package",orderNo:"Order number",date:"Date",status:"Status",receipt:{title:"Receipt",orderNo:"Order number",payMethod:"Payment method",payNo:"Payment number",userEmail:"User email",userName:"User name",proName:"Product name",date:"Date",expDate:"Expiration date",items:"Items",amount:"Amount",total:"Total",actualPayment:"Actual payment",thank:"We thank you for your support."}},settings:{title:"Settings",profile:{pwdExpository:"Set a unique password to protect your personal ChatDOC account.",setPwdTip:"Your password has been set.",changePwdTip:"Your password has been saved.",pwdError:"Incorrect password.",nameSuccess:"Edit name success.",title:"My profile",accountSecurity:"Account security",setAvatarTitle:"Position and size your new avatar",confirmAvatar:"Set new profile picture",setPwdTitle:"Set a password",changePwdTitle:"Change password"},preference:{title:"Preference",followModeLabel:"ChatDOC button follow mode",successText:"Update preference success",detailedCitationLabel:"Detailed citation",detailedCitationTooltip:"Show the source at the end of each sentence. Requires enabling the 'Stick to file' setting."},usage:{title:"Usage"}},fileListPagination:{noMore:"No more."},tags:{beta:"Beta",saveDiscount:"Save {discount}%",popular:"Popular",discount:"Discount",expired:"Expired",tmpl:"TMPL",price:"Early-Bird Price",elite:"Elite",basic:"Basic",lite:"Lite"},welcomeDialog:{title:"Welcome to ChatDOC 🤖️",tag:"new",welcomeUser:"Welcome, {username}! ",welcomeText:"We're excited to have you on board and you have been rewarded 3-file upload free quota!",inviteFriendQuotaText:"Get up to {count}-file upload quota for free by ",inviteFriendText:"inviting friends.",quotaValidityPeriodTextFront:"These quota expires after 30 days. You can get more quota for free by inviting friends, or",quotaValidityPeriodTextBehind:"to unlock more features.",toUpgradeText:"upgrading to Pro Plan",helpText:"Any questions or concerns? Chat with the ",helpLinkText:"user guide.",happyText:"Happy Chatting!",teamText:"ChatDOC Team"},orgDialog:{title:"Welcome, {getOrgName}’s friend!",tag:"new",welcomeUser:"Hi, {username} 👋",welcomeText:"We’re excited to have you onboard! We have given you 10 files quota and 300 pages quota, as a welcome gift for friend from ",bift:"Beijing Institute Of Fashion Technology.",fanbing:"Fan Bing’s community.",inviteFriendQuotaText:"These quota expires after 30 days. You can get more quota for free by",inviteFriendText:"inviting friends",toUpgradeText:"upgrading to Pro Plan",upgradeTextQuotaText:"to unlock more features. ",mobileToUpgradeText:" upgrade to Pro Plan on the PC version to unlock more features.",happyText:"Happy Chatting!",teamText:"ChatDOC Team"},recallDialog:{title:"Snag your welcome back gift!",tag:"new",giftText:"Happy to see you back! We've got a surprise for you - {quotaCount} files upload quota!",featureTitle:"Cool new features await since your last visit:",footerText:"Ready to boost your experience? Let's dive right in!",features:{share:"Document Sharing",thread:"Thread for context-aware conversations",multiChat:"Multi-file chat",citations:"Powered-up citations with footnotes",docSupport:".doc/.docx/.md format support",mobile:"Supports mobile use"}},filePageExceedDialog:{title:"Document Exceeds {num} Pages",contentText:"Your uploaded {fileUnit} exceeds {num} pages. ",purchaseText:"Please purchase additional page package.",upgradeText:"To unlock the ability to handle larger files, we suggest upgrading to our Pro plan.",confirmBtnText:"Get Page Package",alertPayCountText:"To proceed with parsing this {fileUnit}, you'll need to purchase a package of at least {count} {pageUnit}."},fileOcrPageExceedDialog:{title:"Insufficient OCR page quota",contentTextSingular:"Reanalyzing this document requires {num} OCR pages.",contentTextComplex:"Reanalyzing these documents requires {num} OCR pages.",confirmBtnText:"Get OCR Page Package",alertPayCountText:"You'll need to purchase a package of at least {count} OCR {pageUnit}."},mobile:{home:{documents:"Documents",footerTip:"Learn more from",noDoc:"There are currently no document, please upload.",notLoginTip:"Now, tap and chat with the following documents or {button} to use your own.",signIn:"sign in"},upload:{chooseTip:"Upon detecting simultaneous upload of multiple files, please indicate your preferred approach:",individualFiles:"Individual Files",asACollection:"As a Collection",chooseOptionsTitle:"Choose the upload option",empty:"There are currently no document, please",uploadURL:"Upload from URL",collectionTip:"Chat with the docs in a collection.",btnText:"Upload files",uploadDocTip:"Please upgrade plan on the PC version. Only Pro users can upload Doc/Docx/Markdown/ePub/TXT/Website files.",uploadLimit:"Your file slots have been used up. Please upgrade plan on the PC version.",filePageExceedFree:"The document page count exceeds the limit. Please go to PC version to upgrade Pro.",filePageExceedPro:"The document page count exceeds the limit. Please go to the PC version to purchase additional page package."},referFriend:{title1:"Enjoy Free 1000-File Uploads by",title2:"Inviting Friends to ChatDOC!",gift:"🎁",entryNotice:"Get more usage quota for free! >",textContent1:"Get a 5-file upload quota every time someone signs up using your referral link below (up to a maximum of 1000 extra).",textContent2:"Your friends registered through this link will also get a 3-file upload quota."},requestError:"Request failed, click reload",exportTip:"Please open the webpage in a browser to export the chat."},chatIconFollowModeSetting:{title:"Follow mode",modes:{hoverFollow:"Follow after hover",selectionFollow:"Follow after selection"}},prompt:{recommend:"Recommend",custom:"Custom",emptyText:{recommend:"There are currently no recommend prompts.",custom:"There are currently no custom prompts, please {link}.",mobile:"There are currently no custom prompt, please create on the PC version."},mobileTip:"Please create a custom prompt on the PC version.",emptyTextLink:"click here to create",createBtnText:"Create custom prompt",nameLabel:"Name",namePlaceholder:"Please explain the main focus of this prompt.",nameRequiredWarn:"Please enter name.",promptLabel:"Prompt",promptPlaceholder:"Enter your prompt here. Use {'{'}brackets{'}'} to insert placeholder.",promptRequiredWarn:"Please enter prompt.",customPromptIconTitle:"Custom prompt",deletePromptIconTitle:"Delete Prompt",deletePromptMessage:"Are you sure you want to delete this prompt?",saveSuccess:"Prompt saved successfully!",deleteSuccess:"Prompt delete successfully",toggleUnsavedPromptWarning:{text:"You have unsaved changes. Save them now or discard?",title:"Reminder"},placeholderTitle:"Placeholder",placeholderEmptyAlert:"Improve prompt templates effortlessly with {'{'}brackets{'}'} placeholders!",placeholderTip:{main:"Create an instructional template with variables enclosed in braces {'{'}...{'}'} like product name, target audience, goal, etc. Fill in the variables as labels to apply the template easily.",addition:{nameLimit:"30-character max for prompt placeholders, excess characters auto-removed."}},missingPlaceholderTip:"Missing content{multiUnit}."},pdfToolbar:{searchIconTip:"Search"},chatdocApi:{api:"API",title:"The ChatDOC API",headerTitle:"ChatDOC API",signIn:"Sign in to Get Started",apiKeys:"API keys",subscription:"View our API Plans, purchase as needed, and get API keys.",neverExposeTips:"Please keep your API keys confidential, and do not give them to others.",subscriptionBtn:"Buy Now",headerNav:{overview:"Overview",demo:"Demo",reference:"API Reference",chatdoc:"ChatDOC"},createTitle:"Create New Secret Key",keyName:"Key name",createTips:"Keeping your API key secure is very important! If your key has been compromised or you suspect it has been, please disable and delete it immediately.",introduce:"Welcome to the ChatDOC API! Custom-build your own chatbots today. Our API enables you:",introduce1:"Extract accurate data from PDF/Word files, generate AI responses to any question.",introduce2:"Show the original files alongside the chatbot.",introduce3:"Trace AI responses to specific document sections.",pricing:{planTitle:"ChatDOC API Plan",annuallyTip:"get 60 days for free",pageText:"pages",ocrText:"scanned pages & images",questionText:"questions",packagesText:"package",packagesPluralText:"packages",documentType:"",comingSoonText:"Coming soon, stay tuned",addOnsTitle:"Add-Ons",temporaryTitle:"ChatDOC API Package",perText:"per",selectCountText:"I want ",totalText:"Total: ${price}",planBtnText:"Subscribe",packageBtnText:"Get {type}",buy:"Buy",pageAndQuestion:{title:"PDF & Questions Packages",desc:`Combined packages for documents and questions. Questions section powered by ${mt?$s:"GPT-3.5 Turbo/4K"}. Choose what suits you.`},question:{title:"Question Package",desc:mt?$s:"GPT-3.5 Turbo/4K context"},page:{title:"PDF Pages Packages",desc:"PDF files only. Choose the perfect package to suit your needs!"},extra:{elite:"Elite ChatDOC Document Structure Extraction AI Model - Extracts complex PDF data with precision.",basic:"Same ChatDOC Document Structure Extraction AI Model, and with a slower speed, but budget-friendly.",lite:"Lite ChatDOC Document Structure Extraction AI Model - An economically efficient option that simplifies document processing, optimizing efficiency without significantly compromising quality."},pageAndQuestionHelp:"1 package contains 1000 document pages and 1000 questions.",priceTip:"Price going up soon! Seize the opportunity!",packageTip:"Coming Soon: Markdown, ePub, TXT, Website and OCR for image & scanned pages.",packageAlert:"To access full API functionality, you need both the document pages package and the questions package."},keyNameWarn:"Please enter key name.",keyNameOverLimitWarn:"The key name length needs to be between {min} and {max}.",errorMsg:"Key name should contain only ASCII printable chars.",copied:"Secret key copied!.",placeholder:"Enter your key name.",enterPassword:"Enter your password to get your key",deleteKey:"Delete your key",deleteTip:"{name} has been deleted",releasedTip:"The ChatDOC API has been released",pageLimit:"Pages limit",questionLimit:"Questions limit",pkgWarningAlert:{guideBuyPkgText:"Buy Now !",guideBuyPkgText2:"Get the Document Pages Package.",withPageWithoutQuestion:`Your account only has the PDF Pages Package.
To ask question, please purchase Questions Package.`,withoutPageWithQuestion:`Your account only has the Questions Package.
To parse documents, please purchase PDF or Document Pages Package.`},apiPackages:"Api packages",apiPagePackageItem:"PDF Pages package",apiQuestionPackageItem:"Questions package",overview:{introduction:"INTRODUCTION",user:"USER",apiOverview:"API overview",apiPackage:"API package",apiKeys:"API keys",priceDesc:"To access full API functionality, you need both the document pages package and the questions package.",usageDesc:"Below you'll find a summary of ChatDOC API usage for your accourt. All dates and times are UTC-based, and data may be delayed up to 24 hours.",apiPackageDesc:"The API package page provides a centralized view of your current and past API package subscriptions.",billingHistoryDesc:"The Billing history page allows you to view and download your past invoices and billing statements.",apiPackageEmptyDesc:"You have not subscribed to a paid API package yet."}},userCollect:{title:"Hi, welcome to ChatDOC!",spreadTitle:"Spread the word",tip1:`Let’s begin with a few simple steps to better personalize your experience.
What’s your current role?`,tip2:"Where did you know us?",tip3:`It would be wonderful if you feel like giving us a bit more support! 
We’d really appreciate your upvote. ❤️`,specifyText:"(Please specify)",emptyTip:"Please fill out."},collection:{selectAllDocs:"Select all docs for chat.",unselectAllDocs:"Unselect all docs for chat.",partialTips:"Currently chatting with the selected documents."},fileAbstract:{title:"Abstract",withoutAbstractText:"Abstract preview not available for the current document.",generatingAbstractText:"Generating abstract, please wait..."}}},jN=e=>{const t=Rh({legacy:!1,locale:"en",messages:qN});e.use(t)},Jd=Object.prototype.toString;function Zd(e){switch(Jd.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Rn(e,Error)}}function Ma(e,t){return Jd.call(e)===`[object ${t}]`}function ep(e){return Ma(e,"ErrorEvent")}function ic(e){return Ma(e,"DOMError")}function KN(e){return Ma(e,"DOMException")}function $n(e){return Ma(e,"String")}function tp(e){return e===null||typeof e!="object"&&typeof e!="function"}function ba(e){return Ma(e,"Object")}function Zr(e){return typeof Event!="undefined"&&Rn(e,Event)}function QN(e){return typeof Element!="undefined"&&Rn(e,Element)}function XN(e){return Ma(e,"RegExp")}function el(e){return!!(e&&e.then&&typeof e.then=="function")}function JN(e){return ba(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function np(e){return typeof e=="number"&&e!==e}function Rn(e,t){try{return e instanceof t}catch(n){return!1}}function Rs(e){return e&&e.Math==Math?e:void 0}const Nt=typeof globalThis=="object"&&Rs(globalThis)||typeof window=="object"&&Rs(window)||typeof self=="object"&&Rs(self)||typeof global=="object"&&Rs(global)||function(){return this}()||{};function ws(){return Nt}function tl(e,t,n){const a=n||Nt,s=a.__SENTRY__=a.__SENTRY__||{};return s[e]||(s[e]=t())}const Js=ws(),ZN=80;function Vn(e,t={}){try{let n=e;const a=5,s=[];let i=0,o=0;const r=" > ",l=r.length;let u;const p=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||ZN;for(;n&&i++<a&&(u=eO(n,p),!(u==="html"||i>1&&o+s.length*l+u.length>=f));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(r)}catch(n){return"<unknown>"}}function eO(e,t){const n=e,a=[];let s,i,o,r,l;if(!n||!n.tagName)return"";a.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter(f=>n.getAttribute(f)).map(f=>[f,n.getAttribute(f)]):null;if(u&&u.length)u.forEach(f=>{a.push(`[${f[0]}="${f[1]}"]`)});else if(n.id&&a.push(`#${n.id}`),s=n.className,s&&$n(s))for(i=s.split(/\s+/),l=0;l<i.length;l++)a.push(`.${i[l]}`);const p=["aria-label","type","name","title","alt"];for(l=0;l<p.length;l++)o=p[l],r=n.getAttribute(o),r&&a.push(`[${o}="${r}"]`);return a.join("")}function tO(){try{return Js.document.location.href}catch(e){return""}}function nO(e){return Js.document&&Js.document.querySelector?Js.document.querySelector(e):null}class Ct extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}const aO=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function sO(e){return e==="http"||e==="https"}function Yi(e,t=!1){const{host:n,path:a,pass:s,port:i,projectId:o,protocol:r,publicKey:l}=e;return`${r}://${l}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${a&&`${a}/`}${o}`}function iO(e){const t=aO.exec(e);if(!t)throw new Ct(`Invalid Sentry Dsn: ${e}`);const[n,a,s="",i,o="",r]=t.slice(1);let l="",u=r;const p=u.split("/");if(p.length>1&&(l=p.slice(0,-1).join("/"),u=p.pop()),u){const f=u.match(/^\d+/);f&&(u=f[0])}return ap({host:i,pass:s,path:l,projectId:u,port:o,protocol:n,publicKey:a})}function ap(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function oO(e){if(!(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__))return;const{port:t,projectId:n,protocol:a}=e;if(["protocol","publicKey","host","projectId"].forEach(i=>{if(!e[i])throw new Ct(`Invalid Sentry Dsn: ${i} missing`)}),!n.match(/^\d+$/))throw new Ct(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!sO(a))throw new Ct(`Invalid Sentry Dsn: Invalid protocol ${a}`);if(t&&isNaN(parseInt(t,10)))throw new Ct(`Invalid Sentry Dsn: Invalid port ${t}`);return!0}function rO(e){const t=typeof e=="string"?iO(e):ap(e);return oO(t),t}const lO="Sentry Logger ",mi=["debug","info","warn","error","log","assert","trace"];function sp(e){if(!("console"in Nt))return e();const t=Nt.console,n={};mi.forEach(a=>{const s=t[a]&&t[a].__sentry_original__;a in t&&s&&(n[a]=t[a],t[a]=s)});try{return e()}finally{Object.keys(n).forEach(a=>{t[a]=n[a]})}}function oc(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__?mi.forEach(n=>{t[n]=(...a)=>{e&&sp(()=>{Nt.console[n](`${lO}[${n}]:`,...a)})}}):mi.forEach(n=>{t[n]=()=>{}}),t}let H;typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__?H=tl("logger",oc):H=oc();function Za(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function rc(e,t){if(!Array.isArray(e))return"";const n=[];for(let a=0;a<e.length;a++){const s=e[a];try{n.push(String(s))}catch(i){n.push("[value cannot be serialized]")}}return n.join(t)}function cO(e,t,n=!1){return $n(e)?XN(t)?t.test(e):$n(t)?n?e===t:e.includes(t):!1:!1}function Ba(e,t=[],n=!1){return t.some(a=>cO(e,a,n))}function St(e,t,n){if(!(t in e))return;const a=e[t],s=n(a);if(typeof s=="function")try{ip(s,a)}catch(i){}e[t]=s}function nl(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function ip(e,t){const n=t.prototype||{};e.prototype=t.prototype=n,nl(e,"__sentry_original__",t)}function al(e){return e.__sentry_original__}function uO(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function op(e){if(Zd(e))return A({message:e.message,name:e.name,stack:e.stack},cc(e));if(Zr(e)){const t=A({type:e.type,target:lc(e.target),currentTarget:lc(e.currentTarget)},cc(e));return typeof CustomEvent!="undefined"&&Rn(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function lc(e){try{return QN(e)?Vn(e):Object.prototype.toString.call(e)}catch(t){return"<unknown>"}}function cc(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function dO(e,t=40){const n=Object.keys(op(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Za(n[0],t);for(let a=n.length;a>0;a--){const s=n.slice(0,a).join(", ");if(!(s.length>t))return a===n.length?s:Za(s,t)}return""}function Xt(e){return zo(e,new Map)}function zo(e,t){if(ba(e)){const n=t.get(e);if(n!==void 0)return n;const a={};t.set(e,a);for(const s of Object.keys(e))typeof e[s]!="undefined"&&(a[s]=zo(e[s],t));return a}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const a=[];return t.set(e,a),e.forEach(s=>{a.push(zo(s,t))}),a}return e}const rp=50,uc=/\(error: (.*)\)/;function lp(...e){const t=e.sort((n,a)=>n[0]-a[0]).map(n=>n[1]);return(n,a=0)=>{const s=[],i=n.split(`
`);for(let o=a;o<i.length;o++){const r=i[o];if(r.length>1024)continue;const l=uc.test(r)?r.replace(uc,"$1"):r;if(!l.match(/\S*Error: /)){for(const u of t){const p=u(l);if(p){s.push(p);break}}if(s.length>=rp)break}}return fO(s)}}function pO(e){return Array.isArray(e)?lp(...e):e}function fO(e){if(!e.length)return[];const t=e.slice(0,rp),n=t[t.length-1].function;n&&/sentryWrapped/.test(n)&&t.pop(),t.reverse();const a=t[t.length-1].function;return a&&/captureMessage|captureException/.test(a)&&t.pop(),t.map(s=>Z(A({},s),{filename:s.filename||t[t.length-1].filename,function:s.function||"?"}))}const vo="<anonymous>";function Dn(e){try{return!e||typeof e!="function"?vo:e.name||vo}catch(t){return vo}}const Ho=ws();function cp(){if(!("fetch"in Ho))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Yo(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function hO(){if(!cp())return!1;if(Yo(Ho.fetch))return!0;let e=!1;const t=Ho.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Yo(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}const Ds=ws();function _O(){const e=Ds.chrome,t=e&&e.app&&e.app.runtime,n="history"in Ds&&!!Ds.history.pushState&&!!Ds.history.replaceState;return!t&&n}const Qe=ws(),Sn="__sentry_xhr_v2__",es={},dc={};function gO(e){if(!dc[e])switch(dc[e]=!0,e){case"console":mO();break;case"dom":SO();break;case"xhr":bO();break;case"fetch":yO();break;case"history":wO();break;case"error":AO();break;case"unhandledrejection":TO();break;default:(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("unknown instrumentation type:",e);return}}function Pt(e,t){es[e]=es[e]||[],es[e].push(t),gO(e)}function Vt(e,t){if(!(!e||!es[e]))for(const n of es[e]||[])try{n(t)}catch(a){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Dn(n)}
Error:`,a)}}function mO(){"console"in Qe&&mi.forEach(function(e){e in Qe.console&&St(Qe.console,e,function(t){return function(...n){Vt("console",{args:n,level:e}),t&&t.apply(Qe.console,n)}})})}function yO(){hO()&&St(Qe,"fetch",function(e){return function(...t){const{method:n,url:a}=vO(t),s={args:t,fetchData:{method:n,url:a},startTimestamp:Date.now()};return Vt("fetch",A({},s)),e.apply(Qe,t).then(i=>(Vt("fetch",Z(A({},s),{endTimestamp:Date.now(),response:i})),i),i=>{throw Vt("fetch",Z(A({},s),{endTimestamp:Date.now(),error:i})),i})}})}function Wo(e,t){return!!e&&typeof e=="object"&&!!e[t]}function pc(e){return typeof e=="string"?e:e?Wo(e,"url")?e.url:e.toString?e.toString():"":""}function vO(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,a]=e;return{url:pc(n),method:Wo(a,"method")?String(a.method).toUpperCase():"GET"}}const t=e[0];return{url:pc(t),method:Wo(t,"method")?String(t.method).toUpperCase():"GET"}}function bO(){if(!("XMLHttpRequest"in Qe))return;const e=XMLHttpRequest.prototype;St(e,"open",function(t){return function(...n){const a=n[1],s=this[Sn]={method:$n(n[0])?n[0].toUpperCase():n[0],url:n[1],request_headers:{}};$n(a)&&s.method==="POST"&&a.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const o=this[Sn];if(o&&this.readyState===4){try{o.status_code=this.status}catch(r){}Vt("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?St(this,"onreadystatechange",function(o){return function(...r){return i(),o.apply(this,r)}}):this.addEventListener("readystatechange",i),St(this,"setRequestHeader",function(o){return function(...r){const[l,u]=r,p=this[Sn];return p&&(p.request_headers[l.toLowerCase()]=u),o.apply(this,r)}}),t.apply(this,n)}}),St(e,"send",function(t){return function(...n){const a=this[Sn];return a&&n[0]!==void 0&&(a.body=n[0]),Vt("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),t.apply(this,n)}})}let Ns;function wO(){if(!_O())return;const e=Qe.onpopstate;Qe.onpopstate=function(...n){const a=Qe.location.href,s=Ns;if(Ns=a,Vt("history",{from:s,to:a}),e)try{return e.apply(this,n)}catch(i){}};function t(n){return function(...a){const s=a.length>2?a[2]:void 0;if(s){const i=Ns,o=String(s);Ns=o,Vt("history",{from:i,to:o})}return n.apply(this,a)}}St(Qe.history,"pushState",t),St(Qe.history,"replaceState",t)}const EO=1e3;let Os,Ls;function PO(e,t){if(!e||e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(n){}return!1}function kO(e){if(e.type!=="keypress")return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)return!1}catch(t){}return!0}function fc(e,t=!1){return n=>{if(!n||Ls===n||kO(n))return;const a=n.type==="keypress"?"input":n.type;Os===void 0?(e({event:n,name:a,global:t}),Ls=n):PO(Ls,n)&&(e({event:n,name:a,global:t}),Ls=n),clearTimeout(Os),Os=Qe.setTimeout(()=>{Os=void 0},EO)}}function SO(){if(!("document"in Qe))return;const e=Vt.bind(null,"dom"),t=fc(e,!0);Qe.document.addEventListener("click",t,!1),Qe.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const a=Qe[n]&&Qe[n].prototype;!a||!a.hasOwnProperty||!a.hasOwnProperty("addEventListener")||(St(a,"addEventListener",function(s){return function(i,o,r){if(i==="click"||i=="keypress")try{const l=this,u=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},p=u[i]=u[i]||{refCount:0};if(!p.handler){const f=fc(e);p.handler=f,s.call(this,i,f,r)}p.refCount++}catch(l){}return s.call(this,i,o,r)}}),St(a,"removeEventListener",function(s){return function(i,o,r){if(i==="click"||i=="keypress")try{const l=this,u=l.__sentry_instrumentation_handlers__||{},p=u[i];p&&(p.refCount--,p.refCount<=0&&(s.call(this,i,p.handler,r),p.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete l.__sentry_instrumentation_handlers__)}catch(l){}return s.call(this,i,o,r)}}))})}let Us=null;function AO(){Us=Qe.onerror,Qe.onerror=function(e,t,n,a,s){return Vt("error",{column:a,error:s,line:n,msg:e,url:t}),Us&&!Us.__SENTRY_LOADER__?Us.apply(this,arguments):!1},Qe.onerror.__SENTRY_INSTRUMENTED__=!0}let Ms=null;function TO(){Ms=Qe.onunhandledrejection,Qe.onunhandledrejection=function(e){return Vt("unhandledrejection",e),Ms&&!Ms.__SENTRY_LOADER__?Ms.apply(this,arguments):!0},Qe.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function CO(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(s){if(e)return t.has(s)?!0:(t.add(s),!1);for(let i=0;i<t.length;i++)if(t[i]===s)return!0;return t.push(s),!1}function a(s){if(e)t.delete(s);else for(let i=0;i<t.length;i++)if(t[i]===s){t.splice(i,1);break}}return[n,a]}function dn(){const e=Nt,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,a=>(a^(n()&15)>>a/4).toString(16))}function up(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function wn(e){const{message:t,event_id:n}=e;if(t)return t;const a=up(e);return a?a.type&&a.value?`${a.type}: ${a.value}`:a.type||a.value||n||"<unknown>":n||"<unknown>"}function Vo(e,t,n){const a=e.exception=e.exception||{},s=a.values=a.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function rs(e,t){const n=up(e);if(!n)return;const a={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism=A(A(A({},a),s),t),t&&"data"in t){const i=A(A({},s&&s.data),t.data);n.mechanism.data=i}}function hc(e){if(e&&e.__sentry_captured__)return!0;try{nl(e,"__sentry_captured__",!0)}catch(t){}return!1}function sl(e){return Array.isArray(e)?e:[e]}function xO(){return typeof __SENTRY_BROWSER_BUNDLE__!="undefined"&&!!__SENTRY_BROWSER_BUNDLE__}function IO(){return"npm"}function dp(){return!xO()&&Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]"}function $O(e,t){return e.require(t)}function jt(e,t=100,n=1/0){try{return qo("",e,t,n)}catch(a){return{ERROR:`**non-serializable** (${a})`}}}function pp(e,t=3,n=100*1024){const a=jt(e,t);return OO(a)>n?pp(e,t-1,n):a}function qo(e,t,n=1/0,a=1/0,s=CO()){const[i,o]=s;if(t==null||["number","boolean","string"].includes(typeof t)&&!np(t))return t;const r=RO(e,t);if(!r.startsWith("[object "))return r;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return r.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const y=u.toJSON();return qo("",y,l-1,a,s)}catch(y){}const p=Array.isArray(t)?[]:{};let f=0;const g=op(t);for(const y in g){if(!Object.prototype.hasOwnProperty.call(g,y))continue;if(f>=a){p[y]="[MaxProperties ~]";break}const w=g[y];p[y]=qo(y,w,l-1,a,s),f++}return o(t),p}function RO(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global!="undefined"&&t===global)return"[Global]";if(typeof window!="undefined"&&t===window)return"[Window]";if(typeof document!="undefined"&&t===document)return"[Document]";if(JN(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${Dn(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=DO(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function DO(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function NO(e){return~-encodeURI(e).split(/%..|./).length}function OO(e){return NO(JSON.stringify(e))}var an;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const a=2;e[e.REJECTED=a]="REJECTED"})(an||(an={}));function qn(e){return new $t(t=>{t(e)})}function yi(e){return new $t((t,n)=>{n(e)})}class $t{__init(){this._state=an.PENDING}__init2(){this._handlers=[]}constructor(t){$t.prototype.__init.call(this),$t.prototype.__init2.call(this),$t.prototype.__init3.call(this),$t.prototype.__init4.call(this),$t.prototype.__init5.call(this),$t.prototype.__init6.call(this);try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new $t((a,s)=>{this._handlers.push([!1,i=>{if(!t)a(i);else try{a(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{a(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new $t((n,a)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){a(s);return}n(s)})})}__init3(){this._resolve=t=>{this._setResult(an.RESOLVED,t)}}__init4(){this._reject=t=>{this._setResult(an.REJECTED,t)}}__init5(){this._setResult=(t,n)=>{if(this._state===an.PENDING){if(el(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===an.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===an.RESOLVED&&n[1](this._value),this._state===an.REJECTED&&n[2](this._value),n[0]=!0)})}}}function LO(e){const t=[];function n(){return e===void 0||t.length<e}function a(o){return t.splice(t.indexOf(o),1)[0]}function s(o){if(!n())return yi(new Ct("Not adding Promise because buffer limit was reached."));const r=o();return t.indexOf(r)===-1&&t.push(r),r.then(()=>a(r)).then(null,()=>a(r).then(null,()=>{})),r}function i(o){return new $t((r,l)=>{let u=t.length;if(!u)return r(!0);const p=setTimeout(()=>{o&&o>0&&r(!1)},o);t.forEach(f=>{qn(f).then(()=>{--u||(clearTimeout(p),r(!0))},l)})})}return{$:t,add:s,drain:i}}function bo(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",a=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:a,relative:t[5]+n+a}}const UO=["fatal","error","warning","log","info","debug"];function MO(e){return e==="warn"?"warning":UO.includes(e)?e:"log"}const fp=ws(),jo={nowSeconds:()=>Date.now()/1e3};function BO(){const{performance:e}=fp;if(!e||!e.now)return;const t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}function FO(){try{return $O(module,"perf_hooks").performance}catch(e){return}}const wo=dp()?FO():BO(),_c=wo===void 0?jo:{nowSeconds:()=>(wo.timeOrigin+wo.now())/1e3},Wi=jo.nowSeconds.bind(jo),Nn=_c.nowSeconds.bind(_c),_n=(()=>{const{performance:e}=fp;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),a=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-a):t,i=s<t,o=e.timing&&e.timing.navigationStart,l=typeof o=="number"?Math.abs(o+n-a):t,u=l<t;return i||u?s<=l?e.timeOrigin:o:a})(),GO=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function zO(e){const t=e.match(GO);if(!e||!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Fa(e,t=[]){return[e,t]}function HO(e,t){const[n,a]=e;return[n,[...a,t]]}function gc(e,t){const n=e[1];for(const a of n){const s=a[0].type;if(t(a,s))return!0}return!1}function Ko(e,t){return(t||new TextEncoder).encode(e)}function YO(e,t){const[n,a]=e;let s=JSON.stringify(n);function i(o){typeof s=="string"?s=typeof o=="string"?s+o:[Ko(s,t),o]:s.push(typeof o=="string"?Ko(o,t):o)}for(const o of a){const[r,l]=o;if(i(`
${JSON.stringify(r)}
`),typeof l=="string"||l instanceof Uint8Array)i(l);else{let u;try{u=JSON.stringify(l)}catch(p){u=JSON.stringify(jt(l))}i(u)}}return typeof s=="string"?s:WO(s)}function WO(e){const t=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(t);let a=0;for(const s of e)n.set(s,a),a+=s.length;return n}function VO(e,t){const n=typeof e.data=="string"?Ko(e.data,t):e.data;return[Xt({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const qO={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function mc(e){return qO[e]}function il(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function hp(e,t,n,a){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return A(A(A({event_id:e.event_id,sent_at:new Date().toISOString()},t&&{sdk:t}),!!n&&{dsn:Yi(a)}),s&&{trace:Xt(A({},s))})}function jO(e,t,n){const a=[{type:"client_report"},{timestamp:n||Wi(),discarded_events:e}];return Fa(t?{dsn:t}:{},[a])}const KO=60*1e3;function QO(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const a=Date.parse(`${e}`);return isNaN(a)?KO:a-t}function XO(e,t){return e[t]||e.all||0}function JO(e,t,n=Date.now()){return XO(e,t)>n}function ZO(e,{statusCode:t,headers:n},a=Date.now()){const s=A({},e),i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const r of i.trim().split(",")){const[l,u]=r.split(":",2),p=parseInt(l,10),f=(isNaN(p)?60:p)*1e3;if(!u)s.all=a+f;else for(const g of u.split(";"))s[g]=a+f}else o?s.all=a+QO(o,a):t===429&&(s.all=a+60*1e3);return s}const Qo="baggage",_p="sentry-",eL=/^sentry-/,tL=8192;function nL(e){if(!$n(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((a,s)=>{const i=yc(s);return A(A({},a),i)},{});else{if(!e)return;t=yc(e)}const n=Object.entries(t).reduce((a,[s,i])=>{if(s.match(eL)){const o=s.slice(_p.length);a[o]=i}return a},{});if(Object.keys(n).length>0)return n}function gp(e){const t=Object.entries(e).reduce((n,[a,s])=>(s&&(n[`${_p}${a}`]=s),n),{});return aL(t)}function yc(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,a])=>(t[n]=a,t),{})}function aL(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,a],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(a)}`,o=s===0?i:`${t},${i}`;return o.length>tL?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Not adding key: ${n} with val: ${a} to baggage header due to exceeding baggage size limits.`),t):o},"")}const ol="production";function sL(e){const t=Nn(),n={sid:dn(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>oL(n)};return e&&wa(n,e),n}function wa(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Nn(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:dn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function iL(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),wa(e,n)}function oL(e){return Xt({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const rL=100;class Yn{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(t){const n=new Yn;return t&&(n._breadcrumbs=[...t._breadcrumbs],n._tags=A({},t._tags),n._extra=A({},t._extra),n._contexts=A({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=[...t._eventProcessors],n._requestSession=t._requestSession,n._attachments=[...t._attachments],n._sdkProcessingMetadata=A({},t._sdkProcessingMetadata)),n}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&wa(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags=A(A({},this._tags),t),this._notifyScopeListeners(),this}setTag(t,n){return this._tags=Z(A({},this._tags),{[t]:n}),this._notifyScopeListeners(),this}setExtras(t){return this._extra=A(A({},this._extra),t),this._notifyScopeListeners(),this}setExtra(t,n){return this._extra=Z(A({},this._extra),{[t]:n}),this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const n=t(this);return n instanceof Yn?n:this}return t instanceof Yn?(this._tags=A(A({},this._tags),t._tags),this._extra=A(A({},this._extra),t._extra),this._contexts=A(A({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):ba(t)&&(t=t,this._tags=A(A({},this._tags),t.tags),this._extra=A(A({},this._extra),t.extra),this._contexts=A(A({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(t,n){const a=typeof n=="number"?n:rL;if(a<=0)return this;const s=A({timestamp:Wi()},t);return this._breadcrumbs=[...this._breadcrumbs,s].slice(-a),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,n={}){if(this._extra&&Object.keys(this._extra).length&&(t.extra=A(A({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=A(A({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=A(A({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=A(A({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=A({trace:this._span.getTraceContext()},t.contexts);const a=this._span.transaction;if(a){t.sdkProcessingMetadata=A({dynamicSamplingContext:a.getDynamicSamplingContext()},t.sdkProcessingMetadata);const s=a.name;s&&(t.tags=A({transaction:s},t.tags))}}return this._applyFingerprint(t),t.breadcrumbs=[...t.breadcrumbs||[],...this._breadcrumbs],t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata=A(A({},t.sdkProcessingMetadata),this._sdkProcessingMetadata),this._notifyEventProcessors([...mp(),...this._eventProcessors],t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=A(A({},this._sdkProcessingMetadata),t),this}_notifyEventProcessors(t,n,a,s=0){return new $t((i,o)=>{const r=t[s];if(n===null||typeof r!="function")i(n);else{const l=r(A({},n),a);(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&r.id&&l===null&&H.log(`Event processor "${r.id}" dropped event`),el(l)?l.then(u=>this._notifyEventProcessors(t,u,a,s+1).then(i)).then(null,o):this._notifyEventProcessors(t,l,a,s+1).then(i).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?sl(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function mp(){return tl("globalEventProcessors",()=>[])}function Vi(e){mp().push(e)}const yp=4,lL=100;class vp{constructor(t,n=new Yn,a=yp){this._version=a,this._stack=[{scope:n}],t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=Yn.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();try{t(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const a=this._lastEventId=n&&n.event_id?n.event_id:dn(),s=new Error("Sentry syntheticException");return this._withClient((i,o)=>{i.captureException(t,Z(A({originalException:t,syntheticException:s},n),{event_id:a}),o)}),a}captureMessage(t,n,a){const s=this._lastEventId=a&&a.event_id?a.event_id:dn(),i=new Error(t);return this._withClient((o,r)=>{o.captureMessage(t,n,Z(A({originalException:t,syntheticException:i},a),{event_id:s}),r)}),s}captureEvent(t,n){const a=n&&n.event_id?n.event_id:dn();return t.type||(this._lastEventId=a),this._withClient((s,i)=>{s.captureEvent(t,Z(A({},n),{event_id:a}),i)}),a}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:a,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=lL}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const r=Wi(),l=A({timestamp:r},t),u=i?sp(()=>i(l,n)):l;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),a.addBreadcrumb(u,o))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n)}configureScope(t){const{scope:n,client:a}=this.getStackTop();a&&t(n)}run(t){const n=vc(this);try{t(this)}finally{vc(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch(a){return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const a=this._callExtensionMethod("startTransaction",t,n);return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&!a&&console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),a}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,a=n.getSession();a&&iL(a),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:a}=this.getStackTop(),{release:s,environment:i=ol}=a&&a.getOptions()||{},{userAgent:o}=Nt.navigator||{},r=sL(A(A({release:s,environment:i,user:n.getUser()},o&&{userAgent:o}),t)),l=n.getSession&&n.getSession();return l&&l.status==="ok"&&wa(l,{status:"exited"}),this.endSession(),n.setSession(r),r}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),a=t.getSession();a&&n&&n.captureSession&&n.captureSession(a)}_withClient(t){const{scope:n,client:a}=this.getStackTop();a&&t(a,n)}_callExtensionMethod(t,...n){const s=Es().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[t]=="function")return s.extensions[t].apply(this,n);(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function Es(){return Nt.__SENTRY__=Nt.__SENTRY__||{extensions:{},hub:void 0},Nt}function vc(e){const t=Es(),n=Xo(t);return bp(t,e),n}function Se(){const e=Es();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return cL(e)}function cL(e=Es()){return(!uL(e)||Xo(e).isOlderThan(yp))&&bp(e,new vp),Xo(e)}function uL(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Xo(e){return tl("hub",()=>new vp,e)}function bp(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function qi(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=Se().getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Ps(e){return(e||Se()).getScope().getTransaction()}let bc=!1;function dL(){bc||(bc=!0,Pt("error",Jo),Pt("unhandledrejection",Jo))}function Jo(){const e=Ps();if(e){const t="internal_error";(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}Jo.tag="sentry_tracingErrorCallback";class ji{__init(){this.spans=[]}constructor(t=1e3){ji.prototype.__init.call(this),this._maxlen=t}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class sn{__init2(){this.traceId=dn()}__init3(){this.spanId=dn().substring(16)}__init4(){this.startTimestamp=Nn()}__init5(){this.tags={}}__init6(){this.data={}}__init7(){this.instrumenter="sentry"}constructor(t){if(sn.prototype.__init2.call(this),sn.prototype.__init3.call(this),sn.prototype.__init4.call(this),sn.prototype.__init5.call(this),sn.prototype.__init6.call(this),sn.prototype.__init7.call(this),!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp),t.instrumenter&&(this.instrumenter=t.instrumenter)}startChild(t){const n=new sn(Z(A({},t),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&n.transaction){const a=t&&t.op||"< unknown op >",s=n.transaction.name||"< unknown name >",i=n.transaction.spanId,o=`[Tracing] Starting '${a}' span on transaction '${s}' (${i}).`;n.transaction.metadata.spanMetadata[n.spanId]={logMessage:o},H.log(o)}return n}setTag(t,n){return this.tags=Z(A({},this.tags),{[t]:n}),this}setData(t,n){return this.data=Z(A({},this.data),{[t]:n}),this}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t));const n=pL(t);return n!=="unknown_error"&&this.setStatus(n),this}isSuccess(){return this.status==="ok"}finish(t){if((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:n}=this.transaction.metadata.spanMetadata[this.spanId];n&&H.log(n.replace("Starting","Finishing"))}this.endTimestamp=typeof t=="number"?t:Nn()}toTraceparent(){let t="";return this.sampled!==void 0&&(t=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${t}`}toContext(){return Xt({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=t.data||{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=t.spanId||this.spanId,this.startTimestamp=t.startTimestamp||this.startTimestamp,this.status=t.status,this.tags=t.tags||{},this.traceId=t.traceId||this.traceId,this}getTraceContext(){return Xt({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return Xt({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}function pL(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}class fa extends sn{__init(){this._measurements={}}__init2(){this._contexts={}}__init3(){this._frozenDynamicSamplingContext=void 0}constructor(t,n){super(t),fa.prototype.__init.call(this),fa.prototype.__init2.call(this),fa.prototype.__init3.call(this),this._hub=n||Se(),this._name=t.name||"",this.metadata=Z(A({source:"custom"},t.metadata),{spanMetadata:{}}),this._trimEnd=t.trimEnd,this.transaction=this;const a=this.metadata.dynamicSamplingContext;a&&(this._frozenDynamicSamplingContext=A({},a))}get name(){return this._name}set name(t){this.setName(t)}setName(t,n="custom"){this._name=t,this.metadata.source=n}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new ji(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,a=""){this._measurements[t]={value:n,unit:a}}setMetadata(t){this.metadata=A(A({},this.metadata),t)}finish(t){if(this.endTimestamp!==void 0)return;this.name||((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this.sampled!==!0){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const a=this.spanRecorder?this.spanRecorder.spans.filter(r=>r!==this&&r.endTimestamp):[];this._trimEnd&&a.length>0&&(this.endTimestamp=a.reduce((r,l)=>r.endTimestamp&&l.endTimestamp?r.endTimestamp>l.endTimestamp?r:l:r).endTimestamp);const s=this.metadata,i=A({contexts:Z(A({},this._contexts),{trace:this.getTraceContext()}),spans:a,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:Z(A({},s),{dynamicSamplingContext:this.getDynamicSamplingContext()})},s.source&&{transaction_info:{source:s.source}});return Object.keys(this._measurements).length>0&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),i.measurements=this._measurements),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(i)}toContext(){const t=super.toContext();return Xt(Z(A({},t),{name:this.name,trimEnd:this._trimEnd}))}updateWithContext(t){return super.updateWithContext(t),this.name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const t=this._hub||Se(),n=t&&t.getClient();if(!n)return{};const{environment:a,release:s}=n.getOptions()||{},{publicKey:i}=n.getDsn()||{},o=this.metadata.sampleRate,r=o!==void 0?o.toString():void 0,{segment:l}=t.getScope().getUser()||{},u=this.metadata.source,p=u&&u!=="url"?this.name:void 0,f=Xt({environment:a||ol,release:s,transaction:p,user_segment:l,public_key:i,trace_id:this.traceId,sample_rate:r});return n.emit&&n.emit("createDsc",f),f}setHub(t){this._hub=t}}const Zs={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},fL="finishReason",Jn=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class hL extends ji{constructor(t,n,a,s){super(s),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=a}add(t){t.spanId!==this.transactionSpanId&&(t.finish=n=>{t.endTimestamp=typeof n=="number"?n:Nn(),this._popActivity(t.spanId)},t.endTimestamp===void 0&&this._pushActivity(t.spanId)),super.add(t)}}class bn extends fa{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._idleTimeoutCanceledPermanently=!1}__init5(){this._beforeFinishCallbacks=[]}__init6(){this._finishReason=Jn[4]}constructor(t,n,a=Zs.idleTimeout,s=Zs.finalTimeout,i=Zs.heartbeatInterval,o=!1){super(t,n),this._idleHub=n,this._idleTimeout=a,this._finalTimeout=s,this._heartbeatInterval=i,this._onScope=o,bn.prototype.__init.call(this),bn.prototype.__init2.call(this),bn.prototype.__init3.call(this),bn.prototype.__init4.call(this),bn.prototype.__init5.call(this),bn.prototype.__init6.call(this),o&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),n.configureScope(r=>r.setSpan(this))),this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Jn[3],this.finish())},this._finalTimeout)}finish(t=Nn()){if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setTag(fL,this._finishReason),this.spanRecorder){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] finishing IdleTransaction",new Date(t*1e3).toISOString(),this.op);for(const n of this._beforeFinishCallbacks)n(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(n=>{if(n.spanId===this.spanId)return!0;n.endTimestamp||(n.endTimestamp=t,n.setStatus("cancelled"),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(n,void 0,2)));const a=n.startTimestamp<t;return a||(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(n,void 0,2)),a}),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] flushing IdleTransaction")}else(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] No active IdleTransaction");if(this._onScope){const n=this._idleHub.getScope();n.getTransaction()===this&&n.setSpan(void 0)}return super.finish(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},a=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new hL(n,a,this.spanId,t),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Jn[5],this.finish(t)))}setFinishReason(t){this._finishReason=t}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Jn[1],this.finish(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] popActivity ${t}`),delete this.activities[t],(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=Nn();this._idleTimeoutCanceledPermanently?(this._finishReason=Jn[5],this.finish(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Jn[0],this.finish()):this._pingHeartbeat()}_pingHeartbeat(){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function _L(){const t=this.getScope().getSpan();return t?{"sentry-trace":t.toTraceparent()}:{}}function wp(e,t,n){if(!qi(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let a;return typeof t.tracesSampler=="function"?(a=t.tracesSampler(n),e.setMetadata({sampleRate:Number(a)})):n.parentSampled!==void 0?a=n.parentSampled:typeof t.tracesSampleRate!="undefined"?(a=t.tracesSampleRate,e.setMetadata({sampleRate:Number(a)})):(a=1,e.setMetadata({sampleRate:a})),gL(a)?a?(e.sampled=Math.random()<a,e.sampled?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(a)})`),e)):((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function gL(e){return np(e)||!(typeof e=="number"||typeof e=="boolean")?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function mL(e,t){const n=this.getClient(),a=n&&n.getOptions()||{},s=a.instrumenter||"sentry",i=e.instrumenter||"sentry";s!==i&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let o=new fa(e,this);return o=wp(o,a,A({parentSampled:e.parentSampled,transactionContext:e},t)),o.sampled&&o.initSpanRecorder(a._experiments&&a._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function wc(e,t,n,a,s,i,o){const r=e.getClient(),l=r&&r.getOptions()||{};let u=new bn(t,e,n,a,o,s);return u=wp(u,l,A({parentSampled:t.parentSampled,transactionContext:t},i)),u.sampled&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),r&&r.emit&&r.emit("startTransaction",u),u}function yL(){const e=Es();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=mL),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=_L),dL())}function Ki(e,t){return Se().captureException(e,{captureContext:t})}function vL(e){Se().addBreadcrumb(e)}function bL(e,t){Se().setContext(e,t)}function wL(e){Se().withScope(e)}const EL="7";function PL(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function kL(e){return`${PL(e)}${e.projectId}/envelope/`}function SL(e,t){return uO(A({sentry_key:e.publicKey,sentry_version:EL},t&&{sentry_client:`${t.name}/${t.version}`}))}function AL(e,t={}){const n=typeof t=="string"?t:t.tunnel,a=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${kL(e)}?${SL(e,a)}`}function TL(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function CL(e,t,n,a){const s=il(n),i=A(A({sent_at:new Date().toISOString()},s&&{sdk:s}),!!a&&{dsn:Yi(t)}),o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e];return Fa(i,[o])}function xL(e,t,n,a){const s=il(n),i=e.type&&e.type!=="replay_event"?e.type:"event";TL(e,n&&n.sdk);const o=hp(e,s,a,t);return delete e.sdkProcessingMetadata,Fa(o,[[{type:i},e]])}const Ec=[];function IL(e){const t={};return e.forEach(n=>{const{name:a}=n,s=t[a];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[a]=n)}),Object.keys(t).map(n=>t[n])}function $L(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let a;Array.isArray(n)?a=[...t,...n]:typeof n=="function"?a=sl(n(t)):a=t;const s=IL(a),i=DL(s,o=>o.name==="Debug");if(i!==-1){const[o]=s.splice(i,1);s.push(o)}return s}function RL(e){const t={};return e.forEach(n=>{n&&Ep(n,t)}),t}function Ep(e,t){t[e.name]=e,Ec.indexOf(e.name)===-1&&(e.setupOnce(Vi,Se),Ec.push(e.name),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`Integration installed: ${e.name}`))}function DL(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function Pp(e,t,n,a){const{normalizeDepth:s=3,normalizeMaxBreadth:i=1e3}=e,o=Z(A({},t),{event_id:t.event_id||n.event_id||dn(),timestamp:t.timestamp||Wi()}),r=n.integrations||e.integrations.map(p=>p.name);NL(o,e),LL(o,r),t.type===void 0&&OL(o,e.stackParser);let l=a;n.captureContext&&(l=Yn.clone(l).update(n.captureContext));let u=qn(o);if(l){if(l.getAttachments){const p=[...n.attachments||[],...l.getAttachments()];p.length&&(n.attachments=p)}u=l.applyToEvent(o,n)}return u.then(p=>typeof s=="number"&&s>0?UL(p,s,i):p)}function NL(e,t){const{environment:n,release:a,dist:s,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:ol),e.release===void 0&&a!==void 0&&(e.release=a),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=Za(e.message,i));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Za(o.value,i));const r=e.request;r&&r.url&&(r.url=Za(r.url,i))}const Pc=new WeakMap;function OL(e,t){const n=Nt._sentryDebugIds;if(!n)return;let a;const s=Pc.get(t);s?a=s:(a=new Map,Pc.set(t,a));const i=Object.keys(n).reduce((l,u)=>{let p;const f=a.get(u);f?p=f:(p=t(u),a.set(u,p));for(let g=p.length-1;g>=0;g--){const y=p[g];if(y.filename){l[y.filename]=n[u];break}}return l},{}),o=new Set;try{e.exception.values.forEach(l=>{l.stacktrace.frames.forEach(u=>{u.filename&&o.add(u.filename)})})}catch(l){}e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;o.forEach(l=>{i[l]&&r.push({type:"sourcemap",code_file:l,debug_id:i[l]})})}function LL(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function UL(e,t,n){if(!e)return null;const a=A(A(A(A(A({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>A(A({},s),s.data&&{data:jt(s.data,t,n)}))}),e.user&&{user:jt(e.user,t,n)}),e.contexts&&{contexts:jt(e.contexts,t,n)}),e.extra&&{extra:jt(e.extra,t,n)});return e.contexts&&e.contexts.trace&&a.contexts&&(a.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(a.contexts.trace.data=jt(e.contexts.trace.data,t,n))),e.spans&&(a.spans=e.spans.map(s=>(s.data&&(s.data=jt(s.data,t,n)),s))),a}const kc="Not capturing exception because it's already been captured.";class Mn{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(t){if(Mn.prototype.__init.call(this),Mn.prototype.__init2.call(this),Mn.prototype.__init3.call(this),Mn.prototype.__init4.call(this),Mn.prototype.__init5.call(this),this._options=t,t.dsn){this._dsn=rO(t.dsn);const n=AL(this._dsn,t);this._transport=t.transport(Z(A({recordDroppedEvent:this.recordDroppedEvent.bind(this)},t.transportOptions),{url:n}))}else(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("No DSN provided, client will not do anything.")}captureException(t,n,a){if(hc(t)){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(kc);return}let s=n&&n.event_id;return this._process(this.eventFromException(t,n).then(i=>this._captureEvent(i,n,a)).then(i=>{s=i})),s}captureMessage(t,n,a,s){let i=a&&a.event_id;const o=tp(t)?this.eventFromMessage(String(t),n,a):this.eventFromException(t,a);return this._process(o.then(r=>this._captureEvent(r,a,s)).then(r=>{i=r})),i}captureEvent(t,n,a){if(n&&n.originalException&&hc(n.originalException)){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(kc);return}let s=n&&n.event_id;return this._process(this._captureEvent(t,n,a).then(i=>{s=i})),s}captureSession(t){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("SDK not enabled, will not capture session.");return}typeof t.release!="string"?(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),wa(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?this._isClientDoneProcessing(t).then(a=>n.flush(t).then(s=>a&&s)):qn(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,n))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=RL(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(n){return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){Ep(t,this._integrations)}sendEvent(t,n={}){if(this._dsn){let a=xL(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])a=HO(a,VO(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(a);s&&s.then(i=>this.emit("afterSendEvent",t,i),null)}}sendSession(t){if(this._dsn){const n=CL(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}}recordDroppedEvent(t,n,a){if(this._options.sendClientReports){const s=`${t}:${n}`;(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`Adding outcome: "${s}"`),this._outcomes[s]=this._outcomes[s]+1||1}}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(a=>a(...n))}_updateSessionFromEvent(t,n){let a=!1,s=!1;const i=n.exception&&n.exception.values;if(i){s=!0;for(const l of i){const u=l.mechanism;if(u&&u.handled===!1){a=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&a)&&(wa(t,Z(A({},a&&{status:"crashed"}),{errors:t.errors||Number(s||a)})),this.captureSession(t))}_isClientDoneProcessing(t){return new $t(n=>{let a=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(a+=s,t&&a>=t&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(t,n,a){const s=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i.length>0&&(n.integrations=i),Pp(s,t,n,a)}_captureEvent(t,n={},a){return this._processEvent(t,n,a).then(s=>s.event_id,s=>{if(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__){const i=s;i.logLevel==="log"?H.log(i.message):H.warn(i)}})}_processEvent(t,n,a){const s=this.getOptions(),{sampleRate:i}=s;if(!this._isEnabled())return yi(new Ct("SDK not enabled, will not capture event.","log"));const o=Sp(t),r=kp(t),l=t.type||"error",u=`before send for type \`${l}\``;if(r&&typeof i=="number"&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",t),yi(new Ct(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const p=l==="replay_event"?"replay":l;return this._prepareEvent(t,n,a).then(f=>{if(f===null)throw this.recordDroppedEvent("event_processor",p,t),new Ct("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return f;const y=BL(s,f,n);return ML(y,u)}).then(f=>{if(f===null)throw this.recordDroppedEvent("before_send",p,t),new Ct(`${u} returned \`null\`, will not send event.`,"log");const g=a&&a.getSession();!o&&g&&this._updateSessionFromEvent(g,f);const y=f.transaction_info;if(o&&y&&f.transaction!==t.transaction){const w="custom";f.transaction_info=Z(A({},y),{source:w})}return this.sendEvent(f,n),f}).then(null,f=>{throw f instanceof Ct?f:(this.captureException(f,{data:{__sentry__:!0},originalException:f}),new Ct(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${f}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",t),this._transport.send(t).then(null,n=>{(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("Error while sending event:",n)});(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[a,s]=n.split(":");return{reason:a,category:s,quantity:t[n]}})}}function ML(e,t){const n=`${t} must return \`null\` or a valid event.`;if(el(e))return e.then(a=>{if(!ba(a)&&a!==null)throw new Ct(n);return a},a=>{throw new Ct(`${t} rejected with ${a}`)});if(!ba(e)&&e!==null)throw new Ct(n);return e}function BL(e,t,n){const{beforeSend:a,beforeSendTransaction:s}=e;return kp(t)&&a?a(t,n):Sp(t)&&s?s(t,n):t}function kp(e){return e.type===void 0}function Sp(e){return e.type==="transaction"}function FL(e,t){t.debug===!0&&(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__?H.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=Se();n.getScope().update(t.initialScope);const s=new e(t);n.bindClient(s)}const GL=30;function Ap(e,t,n=LO(e.bufferSize||GL)){let a={};const s=o=>n.drain(o);function i(o){const r=[];if(gc(o,(f,g)=>{const y=mc(g);if(JO(a,y)){const w=Sc(f,g);e.recordDroppedEvent("ratelimit_backoff",y,w)}else r.push(f)}),r.length===0)return qn();const l=Fa(o[0],r),u=f=>{gc(l,(g,y)=>{const w=Sc(g,y);e.recordDroppedEvent(f,mc(y),w)})},p=()=>t({body:YO(l,e.textEncoder)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),a=ZO(a,f),f),f=>{throw u("network_error"),f});return n.add(p).then(f=>f,f=>{if(f instanceof Ct)return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("Skipped sending event because buffer is full."),u("queue_overflow"),qn();throw f})}return i.__sentry__baseTransport__=!0,{send:i,flush:s}}function Sc(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}const vi="7.51.2";let Ac;class ls{constructor(){ls.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=ls.id}setupOnce(){Ac=Function.prototype.toString;try{Function.prototype.toString=function(...t){const n=al(this)||this;return Ac.apply(n,t)}}catch(t){}}}ls.__initStatic();const zL=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class ha{static __initStatic(){this.id="InboundFilters"}__init(){this.name=ha.id}constructor(t={}){this._options=t,ha.prototype.__init.call(this)}setupOnce(t,n){const a=s=>{const i=n();if(i){const o=i.getIntegration(ha);if(o){const r=i.getClient(),l=r?r.getOptions():{},u=HL(o._options,l);return YL(s,u)?null:s}}return s};a.id=this.name,t(a)}}ha.__initStatic();function HL(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...zL],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function YL(e,t){return t.ignoreInternal&&QL(e)?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Event dropped due to being internal Sentry Error.
Event: ${wn(e)}`),!0):WL(e,t.ignoreErrors)?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${wn(e)}`),!0):VL(e,t.ignoreTransactions)?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${wn(e)}`),!0):qL(e,t.denyUrls)?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${wn(e)}.
Url: ${bi(e)}`),!0):jL(e,t.allowUrls)?!1:((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${wn(e)}.
Url: ${bi(e)}`),!0)}function WL(e,t){return e.type||!t||!t.length?!1:KL(e).some(n=>Ba(n,t))}function VL(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?Ba(n,t):!1}function qL(e,t){if(!t||!t.length)return!1;const n=bi(e);return n?Ba(n,t):!1}function jL(e,t){if(!t||!t.length)return!0;const n=bi(e);return n?Ba(n,t):!0}function KL(e){if(e.message)return[e.message];if(e.exception)try{const{type:t="",value:n=""}=e.exception.values&&e.exception.values[0]||{};return[`${n}`,`${t}: ${n}`]}catch(t){return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error(`Cannot extract message for event ${wn(e)}`),[]}return[]}function QL(e){try{return e.exception.values[0].type==="SentryError"}catch(t){}return!1}function XL(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function bi(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(n){}return t?XL(t):null}catch(t){return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error(`Cannot extract url for event ${wn(e)}`),null}}const De=Nt;let Zo=0;function Tp(){return Zo>0}function JL(){Zo++,setTimeout(()=>{Zo--})}function Ea(e,t={},n){if(typeof e!="function")return e;try{const s=e.__sentry_wrapped__;if(s)return s;if(al(e))return e}catch(s){return e}const a=function(){const s=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const i=s.map(o=>Ea(o,t));return e.apply(this,i)}catch(i){throw JL(),wL(o=>{o.addEventProcessor(r=>(t.mechanism&&(Vo(r,void 0,void 0),rs(r,t.mechanism)),r.extra=Z(A({},r.extra),{arguments:s}),r)),Ki(i)}),i}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s])}catch(s){}ip(a,e),nl(e,"__sentry_wrapped__",a);try{Object.getOwnPropertyDescriptor(a,"name").configurable&&Object.defineProperty(a,"name",{get(){return e.name}})}catch(s){}return a}function Cp(e,t){const n=rl(e,t),a={type:t&&t.name,value:nU(t)};return n.length&&(a.stacktrace={frames:n}),a.type===void 0&&a.value===""&&(a.value="Unrecoverable error caught"),a}function ZL(e,t,n,a){const i=Se().getClient(),o=i&&i.getOptions().normalizeDepth,r={exception:{values:[{type:Zr(t)?t.constructor.name:a?"UnhandledRejection":"Error",value:`Non-Error ${a?"promise rejection":"exception"} captured with keys: ${dO(t)}`}]},extra:{__serialized__:pp(t,o)}};if(n){const l=rl(e,n);l.length&&(r.exception.values[0].stacktrace={frames:l})}return r}function Eo(e,t){return{exception:{values:[Cp(e,t)]}}}function rl(e,t){const n=t.stacktrace||t.stack||"",a=tU(t);try{return e(n,a)}catch(s){}return[]}const eU=/Minified React error #\d+;/i;function tU(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(eU.test(e.message))return 1}return 0}function nU(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function aU(e,t,n,a){const s=n&&n.syntheticException||void 0,i=ll(e,t,s,a);return rs(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),qn(i)}function sU(e,t,n="info",a,s){const i=a&&a.syntheticException||void 0,o=er(e,t,i,s);return o.level=n,a&&a.event_id&&(o.event_id=a.event_id),qn(o)}function ll(e,t,n,a,s){let i;if(ep(t)&&t.error)return Eo(e,t.error);if(ic(t)||KN(t)){const o=t;if("stack"in t)i=Eo(e,t);else{const r=o.name||(ic(o)?"DOMError":"DOMException"),l=o.message?`${r}: ${o.message}`:r;i=er(e,l,n,a),Vo(i,l)}return"code"in o&&(i.tags=Z(A({},i.tags),{"DOMException.code":`${o.code}`})),i}return Zd(t)?Eo(e,t):ba(t)||Zr(t)?(i=ZL(e,t,n,s),rs(i,{synthetic:!0}),i):(i=er(e,t,n,a),Vo(i,`${t}`,void 0),rs(i,{synthetic:!0}),i)}function er(e,t,n,a){const s={message:t};if(a&&n){const i=rl(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]})}return s}const Bs=1024,xp="Breadcrumbs";class cs{static __initStatic(){this.id=xp}__init(){this.name=cs.id}constructor(t){cs.prototype.__init.call(this),this.options=A({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}setupOnce(){this.options.console&&Pt("console",oU),this.options.dom&&Pt("dom",iU(this.options.dom)),this.options.xhr&&Pt("xhr",rU),this.options.fetch&&Pt("fetch",lU),this.options.history&&Pt("history",cU)}addSentryBreadcrumb(t){this.options.sentry&&Se().addBreadcrumb({category:`sentry.${t.type==="transaction"?"transaction":"event"}`,event_id:t.event_id,level:t.level,message:wn(t)},{event:t})}}cs.__initStatic();function iU(e){function t(n){let a,s=typeof e=="object"?e.serializeAttribute:void 0,i=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;i&&i>Bs&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`\`dom.maxStringLength\` cannot exceed ${Bs}, but a value of ${i} was configured. Sentry will use ${Bs} instead.`),i=Bs),typeof s=="string"&&(s=[s]);try{const o=n.event;a=uU(o)?Vn(o.target,{keyAttrs:s,maxStringLength:i}):Vn(o,{keyAttrs:s,maxStringLength:i})}catch(o){a="<unknown>"}a.length!==0&&Se().addBreadcrumb({category:`ui.${n.name}`,message:a},{event:n.event,name:n.name,global:n.global})}return t}function oU(e){for(let n=0;n<e.args.length;n++)if(e.args[n]==="ref=Ref<"){e.args[n+1]="viewRef";break}const t={category:"console",data:{arguments:e.args,logger:"console"},level:MO(e.level),message:rc(e.args," ")};if(e.level==="assert")if(e.args[0]===!1)t.message=`Assertion failed: ${rc(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1);else return;Se().addBreadcrumb(t,{input:e.args,level:e.level})}function rU(e){const{startTimestamp:t,endTimestamp:n}=e,a=e.xhr[Sn];if(!t||!n||!a)return;const{method:s,url:i,status_code:o,body:r}=a,l={method:s,url:i,status_code:o},u={xhr:e.xhr,input:r,startTimestamp:t,endTimestamp:n};Se().addBreadcrumb({category:"xhr",data:l,type:"http"},u)}function lU(e){const{startTimestamp:t,endTimestamp:n}=e;if(n&&!(e.fetchData.url.match(/sentry_key/)&&e.fetchData.method==="POST"))if(e.error){const a=e.fetchData,s={data:e.error,input:e.args,startTimestamp:t,endTimestamp:n};Se().addBreadcrumb({category:"fetch",data:a,level:"error",type:"http"},s)}else{const a=Z(A({},e.fetchData),{status_code:e.response&&e.response.status}),s={input:e.args,response:e.response,startTimestamp:t,endTimestamp:n};Se().addBreadcrumb({category:"fetch",data:a,type:"http"},s)}}function cU(e){let t=e.from,n=e.to;const a=bo(De.location.href);let s=bo(t);const i=bo(n);s.path||(s=a),a.protocol===i.protocol&&a.host===i.host&&(n=i.relative),a.protocol===s.protocol&&a.host===s.host&&(t=s.relative),Se().addBreadcrumb({category:"navigation",data:{from:t,to:n}})}function uU(e){return e&&!!e.target}function dU(e,{metadata:t,tunnel:n,dsn:a}){const s=A(A({event_id:e.event_id,sent_at:new Date().toISOString()},t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}}),!!n&&!!a&&{dsn:Yi(a)}),i=pU(e);return Fa(s,[i])}function pU(e){return[{type:"user_report"},e]}class fU extends Mn{constructor(t){const n=De.SENTRY_SDK_SOURCE||IO();t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:vi}],version:vi},super(t),t.sendClientReports&&De.document&&De.document.addEventListener("visibilitychange",()=>{De.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return aU(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",a){return sU(this._options.stackParser,t,n,a,this._options.attachStacktrace)}sendEvent(t,n){const a=this.getIntegrationById(xp);a&&a.addSentryBreadcrumb&&a.addSentryBreadcrumb(t),super.sendEvent(t,n)}captureUserFeedback(t){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("SDK not enabled, will not capture user feedback.");return}const n=dU(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,a){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,a)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("Sending outcomes:",t);const n=jO(t,this._options.tunnel&&Yi(this._dsn));this._sendEnvelope(n)}}let Va;function hU(){if(Va)return Va;if(Yo(De.fetch))return Va=De.fetch.bind(De);const e=De.document;let t=De.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const a=n.contentWindow;a&&a.fetch&&(t=a.fetch),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return Va=t.bind(De)}function _U(){Va=void 0}function gU(e,t=hU()){let n=0,a=0;function s(i){const o=i.body.length;n+=o,a++;const r=A({body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&a<15},e.fetchOptions);try{return t(e.url,r).then(l=>(n-=o,a--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return _U(),n-=o,a--,yi(l)}}return Ap(e,s)}const mU=4;function yU(e){function t(n){return new $t((a,s)=>{const i=new XMLHttpRequest;i.onerror=s,i.onreadystatechange=()=>{i.readyState===mU&&a({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",e.url);for(const o in e.headers)Object.prototype.hasOwnProperty.call(e.headers,o)&&i.setRequestHeader(o,e.headers[o]);i.send(n.body)})}return Ap(e,t)}const Qi="?",vU=30,bU=40,wU=50;function cl(e,t,n,a){const s={filename:e,function:t,in_app:!0};return n!==void 0&&(s.lineno=n),a!==void 0&&(s.colno=a),s}const EU=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,PU=/\((\S*)(?::(\d+))(?::(\d+))\)/,kU=e=>{const t=EU.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const i=PU.exec(t[2]);i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3])}const[a,s]=Ip(t[1]||Qi,t[2]);return cl(s,a,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},SU=[vU,kU],AU=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,TU=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,CU=e=>{const t=AU.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=TU.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let a=t[3],s=t[1]||Qi;return[s,a]=Ip(s,a),cl(a,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},xU=[wU,CU],IU=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,$U=e=>{const t=IU.exec(e);return t?cl(t[2],t[1]||Qi,+t[3],t[4]?+t[4]:void 0):void 0},RU=[bU,$U],DU=[SU,xU,RU],NU=lp(...DU),Ip=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,a=e.indexOf("safari-web-extension")!==-1;return n||a?[e.indexOf("@")!==-1?e.split("@")[0]:Qi,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class xn{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=xn.id}__init2(){this._installFunc={onerror:OU,onunhandledrejection:LU}}constructor(t){xn.prototype.__init.call(this),xn.prototype.__init2.call(this),this._options=A({onerror:!0,onunhandledrejection:!0},t)}setupOnce(){Error.stackTraceLimit=50;const t=this._options;for(const n in t){const a=this._installFunc[n];a&&t[n]&&(BU(n),a(),this._installFunc[n]=void 0)}}}xn.__initStatic();function OU(){Pt("error",e=>{const[t,n,a]=Dp();if(!t.getIntegration(xn))return;const{msg:s,url:i,line:o,column:r,error:l}=e;if(Tp()||l&&l.__sentry_own_request__)return;const u=l===void 0&&$n(s)?MU(s,i,o,r):$p(ll(n,l||s,void 0,a,!1),i,o,r);u.level="error",Rp(t,l,u,"onerror")})}function LU(){Pt("unhandledrejection",e=>{const[t,n,a]=Dp();if(!t.getIntegration(xn))return;let s=e;try{"reason"in e?s=e.reason:"detail"in e&&"reason"in e.detail&&(s=e.detail.reason)}catch(o){}if(Tp()||s&&s.__sentry_own_request__)return!0;const i=tp(s)?UU(s):ll(n,s,void 0,a,!0);i.level="error",Rp(t,s,i,"onunhandledrejection")})}function UU(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function MU(e,t,n,a){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=ep(e)?e.message:e,o="Error";const r=i.match(s);return r&&(o=r[1],i=r[2]),$p({exception:{values:[{type:o,value:i}]}},t,n,a)}function $p(e,t,n,a){const s=e.exception=e.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},r=o.stacktrace=o.stacktrace||{},l=r.frames=r.frames||[],u=isNaN(parseInt(a,10))?void 0:a,p=isNaN(parseInt(n,10))?void 0:n,f=$n(t)&&t.length>0?t:tO();return l.length===0&&l.push({colno:u,filename:f,function:"?",in_app:!0,lineno:p}),e}function BU(e){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`Global Handler attached: ${e}`)}function Rp(e,t,n,a){rs(n,{handled:!1,type:a}),e.captureEvent(n,{originalException:t})}function Dp(){const e=Se(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}const FU=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class us{static __initStatic(){this.id="TryCatch"}__init(){this.name=us.id}constructor(t){us.prototype.__init.call(this),this._options=A({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}setupOnce(){this._options.setTimeout&&St(De,"setTimeout",Tc),this._options.setInterval&&St(De,"setInterval",Tc),this._options.requestAnimationFrame&&St(De,"requestAnimationFrame",GU),this._options.XMLHttpRequest&&"XMLHttpRequest"in De&&St(XMLHttpRequest.prototype,"send",zU);const t=this._options.eventTarget;t&&(Array.isArray(t)?t:FU).forEach(HU)}}us.__initStatic();function Tc(e){return function(...t){const n=t[0];return t[0]=Ea(n,{mechanism:{data:{function:Dn(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function GU(e){return function(t){return e.apply(this,[Ea(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Dn(e)},handled:!0,type:"instrument"}})])}}function zU(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&St(n,s,function(i){const o={mechanism:{data:{function:s,handler:Dn(i)},handled:!0,type:"instrument"}},r=al(i);return r&&(o.mechanism.data.handler=Dn(r)),Ea(i,o)})}),e.apply(this,t)}}function HU(e){const t=De,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(St(n,"addEventListener",function(a){return function(s,i,o){try{typeof i.handleEvent=="function"&&(i.handleEvent=Ea(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Dn(i),target:e},handled:!0,type:"instrument"}}))}catch(r){}return a.apply(this,[s,Ea(i,{mechanism:{data:{function:"addEventListener",handler:Dn(i),target:e},handled:!0,type:"instrument"}}),o])}}),St(n,"removeEventListener",function(a){return function(s,i,o){const r=i;try{const l=r&&r.__sentry_wrapped__;l&&a.call(this,s,l,o)}catch(l){}return a.call(this,s,r,o)}}))}const YU="cause",WU=5;class _a{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=_a.id}constructor(t={}){_a.prototype.__init.call(this),this._key=t.key||YU,this._limit=t.limit||WU}setupOnce(){const t=Se().getClient();t&&Vi((n,a)=>{const s=Se().getIntegration(_a);return s?VU(t.getOptions().stackParser,s._key,s._limit,n,a):n})}}_a.__initStatic();function VU(e,t,n,a,s){if(!a.exception||!a.exception.values||!s||!Rn(s.originalException,Error))return a;const i=Np(e,n,s.originalException,t);return a.exception.values=[...i,...a.exception.values],a}function Np(e,t,n,a,s=[]){if(!Rn(n[a],Error)||s.length+1>=t)return s;const i=Cp(e,n[a]);return Np(e,t,n[a],a,[i,...s])}class ga{constructor(){ga.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=ga.id}setupOnce(){Vi(t=>{if(Se().getIntegration(ga)){if(!De.navigator&&!De.location&&!De.document)return t;const n=t.request&&t.request.url||De.location&&De.location.href,{referrer:a}=De.document||{},{userAgent:s}=De.navigator||{},i=A(A(A({},t.request&&t.request.headers),a&&{Referer:a}),s&&{"User-Agent":s}),o=Z(A(A({},t.request),n&&{url:n}),{headers:i});return Z(A({},t),{request:o})}return t})}}ga.__initStatic();class ma{constructor(){ma.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=ma.id}setupOnce(t,n){const a=s=>{if(s.type)return s;const i=n().getIntegration(ma);if(i){try{if(qU(s,i._previousEvent))return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(o){return i._previousEvent=s}return i._previousEvent=s}return s};a.id=this.name,t(a)}}ma.__initStatic();function qU(e,t){return t?!!(jU(e,t)||KU(e,t)):!1}function jU(e,t){const n=e.message,a=t.message;return!(!n&&!a||n&&!a||!n&&a||n!==a||!Lp(e,t)||!Op(e,t))}function KU(e,t){const n=Cc(t),a=Cc(e);return!(!n||!a||n.type!==a.type||n.value!==a.value||!Lp(e,t)||!Op(e,t))}function Op(e,t){let n=xc(e),a=xc(t);if(!n&&!a)return!0;if(n&&!a||!n&&a||(n=n,a=a,a.length!==n.length))return!1;for(let s=0;s<a.length;s++){const i=a[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Lp(e,t){let n=e.fingerprint,a=t.fingerprint;if(!n&&!a)return!0;if(n&&!a||!n&&a)return!1;n=n,a=a;try{return n.join("")===a.join("")}catch(s){return!1}}function Cc(e){return e.exception&&e.exception.values&&e.exception.values[0]}function xc(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(n){return}}const QU=[new ha,new ls,new us,new cs,new xn,new _a,new ma,new ga];function XU(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=QU),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),De.SENTRY_RELEASE&&De.SENTRY_RELEASE.id&&(e.release=De.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t=Z(A({},e),{stackParser:pO(e.stackParser||NU),integrations:$L(e),transport:e.transport||(cp()?gU:yU)});FL(fU,t),e.autoSessionTracking&&JU()}function Ic(e){e.startSession({ignoreDuration:!0}),e.captureSession()}function JU(){if(typeof De.document=="undefined"){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}const e=Se();e.captureSession&&(Ic(e),Pt("history",({from:t,to:n})=>{t===void 0||t===n||Ic(Se())}))}const Ve=Nt,ul="sentryReplaySession",ZU="replay_event",dl="Unable to send Replay",e2=3e5,t2=9e5,n2=36e5,a2=5e3,s2=5500,i2=6e4,o2=5e3,r2=3,Fs=15e4,Gs=5e3;var yt;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(yt||(yt={}));function l2(e){return e.nodeType===e.ELEMENT_NODE}function ts(e){const t=e==null?void 0:e.host;return!!(t&&t.shadowRoot&&t.shadowRoot===e)}function Up({maskInputOptions:e,tagName:t,type:n}){t.toLowerCase()==="option"&&(t="select");const a=typeof n=="string"?n.toLowerCase():void 0;return e[t.toLowerCase()]||a&&e[a]||a==="password"||t==="input"&&!n&&e.text}function c2({tagName:e,type:t,maskInputOptions:n,maskInputSelector:a}){return a||Up({maskInputOptions:n,tagName:e,type:t})}function ds({input:e,maskInputSelector:t,unmaskInputSelector:n,maskInputOptions:a,tagName:s,type:i,value:o,maskInputFn:r}){let l=o||"";return n&&e.matches(n)||(e.hasAttribute("data-rr-is-password")&&(i="password"),(Up({maskInputOptions:a,tagName:s,type:i})||t&&e.matches(t))&&(r?l=r(l):l="*".repeat(l.length))),l}const $c="__rrweb_original__";function u2(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let a=0;a<e.width;a+=n)for(let s=0;s<e.height;s+=n){const i=t.getImageData,o=$c in i?i[$c]:i;if(new Uint32Array(o.call(t,a,s,Math.min(n,e.width-a),Math.min(n,e.height-s)).data.buffer).some(l=>l!==0))return!1}return!0}function Mp(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?t.toLowerCase():null}function tr(e,t,n){return typeof n=="string"&&n.toLowerCase(),t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}let d2=1;const p2=new RegExp("[^a-z0-9-_:]"),ps=-2;function Bp(e){return e?e.replace(/[\S]/g,"*"):""}function f2(){return d2++}function h2(e){if(e instanceof HTMLFormElement)return"form";const t=e.tagName.toLowerCase().trim();return p2.test(t)?"div":t}function nr(e){try{const t=e.rules||e.cssRules;return t?Array.from(t).map(_2).join(""):null}catch(t){return null}}function _2(e){let t=e.cssText;if(g2(e))try{t=nr(e.styleSheet)||t}catch(n){}return Fp(t)}function Fp(e){if(e.indexOf(":")>-1){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}return e}function g2(e){return"styleSheet"in e}function m2(e){return e.cssRules?Array.from(e.cssRules).map(t=>t.cssText?Fp(t.cssText):"").join(""):""}function y2(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Zn,Rc;const v2=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,b2=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,w2=/^(data:)([^,]*),(.*)/i;function ei(e,t){return(e||"").replace(v2,(n,a,s,i,o,r)=>{const l=s||o||r,u=a||i||"";if(!l)return n;if(!b2.test(l))return`url(${u}${l}${u})`;if(w2.test(l))return`url(${u}${l}${u})`;if(l[0]==="/")return`url(${u}${y2(t)+l}${u})`;const p=t.split("/"),f=l.split("/");p.pop();for(const g of f)g!=="."&&(g===".."?p.pop():p.push(g));return`url(${u}${p.join("/")}${u})`})}const E2=/^[^ \t\n\r\u000c]+/,P2=/^[, \t\n\r\u000c]+/;function k2(e,t){if(t.trim()==="")return t;let n=0;function a(i){let o,r=i.exec(t.substring(n));return r?(o=r[0],n+=o.length,o):""}let s=[];for(;a(P2),!(n>=t.length);){let i=a(E2);if(i.slice(-1)===",")i=sa(e,i.substring(0,i.length-1)),s.push(i);else{let o="";i=sa(e,i);let r=!1;for(;;){let l=t.charAt(n);if(l===""){s.push((i+o).trim());break}else if(r)l===")"&&(r=!1);else if(l===","){n+=1,s.push((i+o).trim());break}else l==="("&&(r=!0);o+=l,n+=1}}}return s.join(", ")}function sa(e,t){if(!t||t.trim()==="")return t;const n=e.createElement("a");return n.href=t,n.href}function S2(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function ar(){const e=document.createElement("a");return e.href="",e.href}function Gp(e,t,n,a,s,i,o,r){if(!s)return s;const l=a.toLowerCase(),u=n.toLowerCase();return l==="src"||l==="href"||l==="xlink:href"&&s[0]!=="#"||l==="background"&&(u==="table"||u==="td"||u==="th")?sa(e,s):l==="srcset"?k2(e,s):l==="style"?ei(s,ar()):u==="object"&&l==="data"?sa(e,s):i&&A2(t,l,u,o)?r?r(s):Bp(s):s}function A2(e,t,n,a){return a&&e.matches(a)?!1:["placeholder","title","aria-label"].indexOf(t)>-1||n==="input"&&t==="value"&&e.hasAttribute("type")&&["submit","button"].indexOf(e.getAttribute("type").toLowerCase())>-1}function T2(e,t,n,a){if(a&&e.matches(a))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=0;s<e.classList.length;s++){const i=e.classList[s];if(t.test(i))return!0}return n?e.matches(n):!1}function wi(e,t,n,a,s){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return wi(e.parentNode,t,n,a,s);if(a&&(e.matches(a)||e.closest(a)))return!1;if(s)return!0;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let i=0;i<e.classList.length;i++){const o=e.classList[i];if(t.test(o))return!0}return n&&e.matches(n)?!0:wi(e.parentNode,t,n,a,s)}function C2(e,t,n){const a=e.contentWindow;if(!a)return;let s=!1,i;try{i=a.document.readyState}catch(r){return}if(i!=="complete"){const r=setTimeout(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{clearTimeout(r),s=!0,t()});return}const o="about:blank";if(a.location.href!==o||e.src===o||e.src===""){setTimeout(t,0);return}e.addEventListener("load",t)}function x2(e,t){var n;const{doc:a,blockClass:s,blockSelector:i,unblockSelector:o,maskTextClass:r,maskTextSelector:l,unmaskTextSelector:u,inlineStylesheet:p,maskInputSelector:f,unmaskInputSelector:g,maskAllText:y,maskInputOptions:w={},maskTextFn:m,maskInputFn:E,dataURLOptions:P={},inlineImages:S,recordCanvas:D,keepIframeSrcFn:C}=t;let $;if(a.__sn){const G=a.__sn.id;$=G===1?void 0:G}switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:yt.Document,childNodes:[],compatMode:e.compatMode,rootId:$}:{type:yt.Document,childNodes:[],rootId:$};case e.DOCUMENT_TYPE_NODE:return{type:yt.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:$};case e.ELEMENT_NODE:const G=T2(e,s,i,o),U=h2(e);let F={};for(const{name:R,value:V}of Array.from(e.attributes))R2(U,R)||(F[R]=Gp(a,e,U,R,V,y,u,m));if(U==="link"&&p){const R=Array.from(a.styleSheets).find(q=>q.href===e.href);let V=null;R&&(V=nr(R)),V&&(delete F.rel,delete F.href,F._cssText=ei(V,R.href))}if(U==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const R=nr(e.sheet);R&&(F._cssText=ei(R,ar()))}if(U==="input"||U==="textarea"||U==="select"||U==="option"){const R=e,V=Mp(R),q=tr(R,U.toUpperCase(),V),ne=e.checked;V!=="submit"&&V!=="button"&&q&&(F.value=ds({input:R,type:V,tagName:U,value:q,maskInputSelector:f,unmaskInputSelector:g,maskInputOptions:w,maskInputFn:E})),ne&&(F.checked=ne)}if(U==="option"&&(e.selected&&!w.select?F.selected=!0:delete F.selected),U==="canvas"&&D){if(e.__context==="2d")u2(e)||(F.rr_dataURL=e.toDataURL(P.type,P.quality));else if(!("__context"in e)){const R=e.toDataURL(P.type,P.quality),V=document.createElement("canvas");V.width=e.width,V.height=e.height;const q=V.toDataURL(P.type,P.quality);R!==q&&(F.rr_dataURL=R)}}if(U==="img"&&S){Zn||(Zn=a.createElement("canvas"),Rc=Zn.getContext("2d"));const R=e,V=R.crossOrigin;R.crossOrigin="anonymous";const q=()=>{try{Zn.width=R.naturalWidth,Zn.height=R.naturalHeight,Rc.drawImage(R,0,0),F.rr_dataURL=Zn.toDataURL(P.type,P.quality)}catch(ne){console.warn(`Cannot inline img src=${R.currentSrc}! Error: ${ne}`)}V?F.crossOrigin=V:delete F.crossOrigin};R.complete&&R.naturalWidth!==0?q():R.onload=q}if((U==="audio"||U==="video")&&(F.rr_mediaState=e.paused?"paused":"played",F.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(F.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(F.rr_scrollTop=e.scrollTop),G){const{width:R,height:V}=e.getBoundingClientRect();F={class:F.class,rr_width:`${R}px`,rr_height:`${V}px`}}return U==="iframe"&&!C(F.src)&&(e.contentDocument||(F.rr_src=F.src),delete F.src),{type:yt.Element,tagName:U,attributes:F,childNodes:[],isSVG:S2(e)||void 0,needBlock:G,rootId:$};case e.TEXT_NODE:const B=e.parentNode&&e.parentNode.tagName;let W=e.textContent;const Y=B==="STYLE"?!0:void 0,I=B==="SCRIPT"?!0:void 0;if(Y&&W){try{e.nextSibling||e.previousSibling||!((n=e.parentNode.sheet)===null||n===void 0)&&n.cssRules&&(W=m2(e.parentNode.sheet))}catch(R){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${R}`,e)}W=ei(W,ar())}if(I&&(W="SCRIPT_PLACEHOLDER"),B==="TEXTAREA"&&W)W="";else if(B==="OPTION"&&W){const R=e.parentNode;W=ds({input:R,type:null,tagName:B,value:W,maskInputSelector:f,unmaskInputSelector:g,maskInputOptions:w,maskInputFn:E})}else!Y&&!I&&wi(e,r,l,u,y)&&W&&(W=m?m(W):Bp(W));return{type:yt.Text,textContent:W||"",isStyle:Y,rootId:$};case e.CDATA_SECTION_NODE:return{type:yt.CDATA,textContent:"",rootId:$};case e.COMMENT_NODE:return{type:yt.Comment,textContent:e.textContent||"",rootId:$};default:return!1}}function ze(e){return e==null?"":e.toLowerCase()}function I2(e,t){if(t.comment&&e.type===yt.Comment)return!0;if(e.type===yt.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(ze(e.attributes.name).match(/^msapplication-tile(image|color)$/)||ze(e.attributes.name)==="application-name"||ze(e.attributes.rel)==="icon"||ze(e.attributes.rel)==="apple-touch-icon"||ze(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&ze(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ze(e.attributes.property).match(/^(og|twitter|fb):/)||ze(e.attributes.name).match(/^(og|twitter):/)||ze(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(ze(e.attributes.name)==="robots"||ze(e.attributes.name)==="googlebot"||ze(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(ze(e.attributes.name)==="author"||ze(e.attributes.name)==="generator"||ze(e.attributes.name)==="framework"||ze(e.attributes.name)==="publisher"||ze(e.attributes.name)==="progid"||ze(e.attributes.property).match(/^article:/)||ze(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(ze(e.attributes.name)==="google-site-verification"||ze(e.attributes.name)==="yandex-verification"||ze(e.attributes.name)==="csrf-token"||ze(e.attributes.name)==="p:domain_verify"||ze(e.attributes.name)==="verify-v1"||ze(e.attributes.name)==="verification"||ze(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function ns(e,t){const{doc:n,map:a,blockClass:s,blockSelector:i,unblockSelector:o,maskTextClass:r,maskTextSelector:l,unmaskTextSelector:u,skipChild:p=!1,inlineStylesheet:f=!0,maskInputSelector:g,unmaskInputSelector:y,maskAllText:w,maskInputOptions:m={},maskTextFn:E,maskInputFn:P,slimDOMOptions:S,dataURLOptions:D={},inlineImages:C=!1,recordCanvas:$=!1,onSerialize:G,onIframeLoad:U,iframeLoadTimeout:F=5e3,keepIframeSrcFn:B=()=>!1}=t;let{preserveWhiteSpace:W=!0}=t;const Y=x2(e,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,maskTextClass:r,maskTextSelector:l,unmaskTextSelector:u,inlineStylesheet:f,maskInputSelector:g,unmaskInputSelector:y,maskAllText:w,maskInputOptions:m,maskTextFn:E,maskInputFn:P,dataURLOptions:D,inlineImages:C,recordCanvas:$,keepIframeSrcFn:B});if(!Y)return console.warn(e,"not serialized"),null;let I;"__sn"in e?I=e.__sn.id:I2(Y,S)||!W&&Y.type===yt.Text&&!Y.isStyle&&!Y.textContent.replace(/^\s+|\s+$/gm,"").length?I=ps:I=f2();const R=Object.assign(Y,{id:I});if(e.__sn=R,I===ps)return null;a[I]=e,G&&G(e);let V=!p;if(R.type===yt.Element&&(V=V&&!R.needBlock,delete R.needBlock,e.shadowRoot&&(R.isShadowHost=!0)),(R.type===yt.Document||R.type===yt.Element)&&V){S.headWhitespace&&Y.type===yt.Element&&Y.tagName==="head"&&(W=!1);const q={doc:n,map:a,blockClass:s,blockSelector:i,unblockSelector:o,maskTextClass:r,maskTextSelector:l,unmaskTextSelector:u,skipChild:p,inlineStylesheet:f,maskInputSelector:g,unmaskInputSelector:y,maskAllText:w,maskInputOptions:m,maskTextFn:E,maskInputFn:P,slimDOMOptions:S,dataURLOptions:D,inlineImages:C,recordCanvas:$,preserveWhiteSpace:W,onSerialize:G,onIframeLoad:U,iframeLoadTimeout:F,keepIframeSrcFn:B};for(const ne of Array.from(e.childNodes)){const ae=ns(ne,q);ae&&R.childNodes.push(ae)}if(l2(e)&&e.shadowRoot)for(const ne of Array.from(e.shadowRoot.childNodes)){const ae=ns(ne,q);ae&&(ae.isShadow=!0,R.childNodes.push(ae))}}return e.parentNode&&ts(e.parentNode)&&(R.isShadow=!0),R.type===yt.Element&&R.tagName==="iframe"&&C2(e,()=>{const q=e.contentDocument;if(q&&U){const ne=ns(q,{doc:q,map:a,blockClass:s,blockSelector:i,unblockSelector:o,maskTextClass:r,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:f,maskInputSelector:g,unmaskInputSelector:y,maskAllText:w,maskInputOptions:m,maskTextFn:E,maskInputFn:P,slimDOMOptions:S,dataURLOptions:D,inlineImages:C,recordCanvas:$,preserveWhiteSpace:W,onSerialize:G,onIframeLoad:U,iframeLoadTimeout:F,keepIframeSrcFn:B});ne&&U(e,ne)}},F),R}function $2(e,t){const{blockClass:n="rr-block",blockSelector:a=null,unblockSelector:s=null,maskTextClass:i="rr-mask",maskTextSelector:o=null,unmaskTextSelector:r=null,inlineStylesheet:l=!0,inlineImages:u=!1,recordCanvas:p=!1,maskInputSelector:f=null,unmaskInputSelector:g=null,maskAllText:y=!1,maskAllInputs:w=!1,maskTextFn:m,maskInputFn:E,slimDOM:P=!1,dataURLOptions:S,preserveWhiteSpace:D,onSerialize:C,onIframeLoad:$,iframeLoadTimeout:G,keepIframeSrcFn:U=()=>!1}=t||{},F={};return[ns(e,{doc:e,map:F,blockClass:n,blockSelector:a,unblockSelector:s,maskTextClass:i,maskTextSelector:o,unmaskTextSelector:r,skipChild:!1,inlineStylesheet:l,maskInputSelector:f,unmaskInputSelector:g,maskAllText:y,maskInputOptions:w===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:w===!1?{}:w,maskTextFn:m,maskInputFn:E,slimDOMOptions:P===!0||P==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:P==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:P===!1?{}:P,dataURLOptions:S,inlineImages:u,recordCanvas:p,preserveWhiteSpace:D,onSerialize:C,onIframeLoad:$,iframeLoadTimeout:G,keepIframeSrcFn:U}),F]}function R2(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}var He;(function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"})(He||(He={}));var Et;(function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"})(Et||(Et={}));var Ei;(function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"})(Ei||(Ei={}));var Pa;(function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"})(Pa||(Pa={}));var Dc;(function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"})(Dc||(Dc={}));var Nc;(function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"})(Nc||(Nc={}));function Ft(e,t,n=document){const a={capture:!0,passive:!0};return n.addEventListener(e,t,a),()=>n.removeEventListener(e,t,a)}function D2(){return{map:{},getId(e){return!e||!e.__sn?-1:e.__sn.id},getNode(e){return this.map[e]||null},removeNodeFromMap(e){const t=e.__sn&&e.__sn.id;delete this.map[t],e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))},has(e){return this.map.hasOwnProperty(e)},reset(){this.map={}}}}const ta=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Oc={map:{},getId(){return console.error(ta),-1},getNode(){return console.error(ta),null},removeNodeFromMap(){console.error(ta)},has(){return console.error(ta),!1},reset(){console.error(ta)}};typeof window!="undefined"&&window.Proxy&&window.Reflect&&(Oc=new Proxy(Oc,{get(e,t,n){return t==="map"&&console.error(ta),Reflect.get(e,t,n)}}));function fs(e,t,n={}){let a=null,s=0;return function(i){let o=Date.now();!s&&n.leading===!1&&(s=o);let r=t-(o-s),l=this,u=arguments;r<=0||r>t?(a&&(clearTimeout(a),a=null),s=o,e.apply(l,u)):!a&&n.trailing!==!1&&(a=setTimeout(()=>{s=n.leading===!1?0:Date.now(),a=null,e.apply(l,u)},r))}}function Xi(e,t,n,a,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,a?n:{set(o){setTimeout(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Xi(e,t,i||{},!0)}function ka(e,t,n){try{if(!(t in e))return()=>{};const a=e[t],s=n(a);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:a}})),e[t]=s,()=>{e[t]=a}}catch(a){return()=>{}}}function zp(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Hp(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Rt(e,t,n,a){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){let s=!1;const i=a&&e.matches(a);return typeof t=="string"?e.closest!==void 0?s=!i&&e.closest("."+t)!==null:s=!i&&e.classList.contains(t):!i&&e.classList.forEach(o=>{t.test(o)&&(s=!0)}),!s&&n&&(s=e.matches(n)),!i&&s||Rt(e.parentNode,t,n,a)}return e.nodeType===e.TEXT_NODE,Rt(e.parentNode,t,n,a)}function Po(e){return"__sn"in e?e.__sn.id===ps:!1}function Yp(e,t){if(ts(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Yp(e.parentNode,t):!0:!0}function Wp(e){return!!e.changedTouches}function N2(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(n){if(!(0 in arguments))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Vp(e){return"__sn"in e?e.__sn.type===yt.Element&&e.__sn.tagName==="iframe":!1}function qp(e){return!!(e!=null&&e.shadowRoot)}function Lc(e){return"__ln"in e}class O2{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let a=0;a<t;a++)n=(n==null?void 0:n.next)||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Lc(t.previousSibling)){const a=t.previousSibling.__ln.next;n.next=a,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,a&&(a.previous=n)}else if(t.nextSibling&&Lc(t.nextSibling)&&t.nextSibling.__ln.previous){const a=t.nextSibling.__ln.previous;n.previous=a,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,a&&(a.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next&&(n.next.previous=n.previous)):(this.head=n.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}const Uc=(e,t)=>`${e}@${t}`;function Mc(e){return"__sn"in e}class L2{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new O2,a=r=>{let l=r,u=ps;for(;u===ps;)l=l&&l.nextSibling,u=l&&this.mirror.getId(l);return u},s=r=>{var l,u,p,f,g;const y=r.getRootNode?(l=r.getRootNode())===null||l===void 0?void 0:l.host:null;let w=y;for(;!((p=(u=w==null?void 0:w.getRootNode)===null||u===void 0?void 0:u.call(w))===null||p===void 0)&&p.host;)w=((g=(f=w==null?void 0:w.getRootNode)===null||f===void 0?void 0:f.call(w))===null||g===void 0?void 0:g.host)||null;const m=!this.doc.contains(r)&&(!w||!this.doc.contains(w));if(!r.parentNode||m)return;const E=ts(r.parentNode)?this.mirror.getId(y):this.mirror.getId(r.parentNode),P=a(r);if(E===-1||P===-1)return n.addNode(r);let S=ns(r,{doc:this.doc,map:this.mirror.map,blockClass:this.blockClass,blockSelector:this.blockSelector,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,maskInputSelector:this.maskInputSelector,unmaskInputSelector:this.unmaskInputSelector,skipChild:!0,inlineStylesheet:this.inlineStylesheet,maskAllText:this.maskAllText,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:D=>{Vp(D)&&this.iframeManager.addIframe(D),qp(r)&&this.shadowDomManager.addShadowRoot(r.shadowRoot,document)},onIframeLoad:(D,C)=>{this.iframeManager.attachIframe(D,C),this.shadowDomManager.observeAttachShadow(D)}});S&&t.push({parentId:E,nextId:P,node:S})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const r of this.movedSet)ir(this.removes,r,this.mirror)&&!this.movedSet.has(r.parentNode)||s(r);for(const r of this.addedSet)!or(this.droppedSet,r)&&!ir(this.removes,r,this.mirror)||or(this.movedSet,r)?s(r):this.droppedSet.add(r);let i=null;for(;n.length;){let r=null;if(i){const l=this.mirror.getId(i.value.parentNode),u=a(i.value);l!==-1&&u!==-1&&(r=i)}if(!r)for(let l=n.length-1;l>=0;l--){const u=n.get(l);if(u){const p=this.mirror.getId(u.value.parentNode),f=a(u.value);if(p!==-1&&f!==-1){r=u;break}}}if(!r){for(;n.head;)n.removeNode(n.head.value);break}i=r.previous,n.removeNode(r.value),s(r.value)}const o={texts:this.texts.map(r=>({id:this.mirror.getId(r.node),value:r.value})).filter(r=>this.mirror.has(r.id)),attributes:this.attributes.map(r=>({id:this.mirror.getId(r.node),attributes:r.attributes})).filter(r=>this.mirror.has(r.id)),removes:this.removes,adds:t};!o.texts.length&&!o.attributes.length&&!o.removes.length&&!o.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(o))},this.processMutation=t=>{if(!Po(t.target))switch(t.type){case"characterData":{const n=t.target.textContent;!Rt(t.target,this.blockClass,this.blockSelector,this.unblockSelector)&&n!==t.oldValue&&this.texts.push({value:wi(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let a=n.getAttribute(t.attributeName);if(t.attributeName==="value"&&(a=ds({input:n,maskInputSelector:this.maskInputSelector,unmaskInputSelector:this.unmaskInputSelector,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:n.getAttribute("type"),value:a,maskInputFn:this.maskInputFn})),Rt(t.target,this.blockClass,this.blockSelector,this.unblockSelector)||a===t.oldValue)return;let s=this.attributes.find(i=>i.node===t.target);if(s||(s={node:t.target,attributes:{}},this.attributes.push(s)),t.attributeName==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),t.attributeName==="style"){const i=this.doc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue),(s.attributes.style===void 0||s.attributes.style===null)&&(s.attributes.style={});try{const o=s.attributes.style;for(const r of Array.from(n.style)){const l=n.style.getPropertyValue(r),u=n.style.getPropertyPriority(r);(l!==i.style.getPropertyValue(r)||u!==i.style.getPropertyPriority(r))&&(u===""?o[r]=l:o[r]=[l,u])}for(const r of Array.from(i.style))n.style.getPropertyValue(r)===""&&(o[r]=!1)}catch(o){console.warn("[rrweb] Error when parsing update to style attribute:",o)}}else{const i=t.target;s.attributes[t.attributeName]=Gp(this.doc,i,i.tagName,t.attributeName,a,this.maskAllText,this.unmaskTextSelector,this.maskTextFn)}break}case"childList":{t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const a=this.mirror.getId(n),s=ts(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Rt(t.target,this.blockClass,this.blockSelector,this.unblockSelector)||Po(n)||(this.addedSet.has(n)?(sr(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&a===-1||Yp(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Uc(a,s)]?sr(this.movedSet,n):this.removes.push({parentId:s,id:a,isShadow:ts(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!(n&&Rt(n,this.blockClass,this.blockSelector,this.unblockSelector))){if(Mc(t)){if(Po(t))return;this.movedSet.add(t);let a=null;n&&Mc(n)&&(a=n.__sn.id),a&&(this.movedMap[Uc(t.__sn.id,a)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Rt(t,this.blockClass,this.blockSelector,this.unblockSelector)||t.childNodes.forEach(a=>this.genAdds(a))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskTextClass","maskTextSelector","unmaskTextSelector","maskInputSelector","unmaskInputSelector","inlineStylesheet","maskAllText","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function sr(e,t){e.delete(t),t.childNodes.forEach(n=>sr(e,n))}function ir(e,t,n){const{parentNode:a}=t;if(!a)return!1;const s=n.getId(a);return e.some(i=>i.id===s)?!0:ir(e,a,n)}function or(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:or(e,n):!1}const xe=e=>(...n)=>{try{return e(...n)}catch(a){try{a.__rrweb__=!0}catch(s){}throw a}},Bn=[];function ks(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(t){}return e&&e.target}function jp(e,t){var n,a;const s=new L2;Bn.push(s),s.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const o=(a=(n=window==null?void 0:window.Zone)===null||n===void 0?void 0:n.__symbol__)===null||a===void 0?void 0:a.call(n,"MutationObserver");o&&window[o]&&(i=window[o]);const r=new i(xe(l=>{e.onMutation&&e.onMutation(l)===!1||s.processMutations(l)}));return r.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function U2({mousemoveCb:e,sampling:t,doc:n,mirror:a}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],r;const l=fs(f=>{const g=Date.now()-r;xe(e)(o.map(y=>(y.timeOffset-=g,y)),f),o=[],r=null},i),u=fs(f=>{const g=ks(f),{clientX:y,clientY:w}=Wp(f)?f.changedTouches[0]:f;r||(r=Date.now()),o.push({x:y,y:w,id:a.getId(g),timeOffset:Date.now()-r}),l(typeof DragEvent!="undefined"&&f instanceof DragEvent?Et.Drag:f instanceof MouseEvent?Et.MouseMove:Et.TouchMove)},s,{trailing:!1}),p=[Ft("mousemove",xe(u),n),Ft("touchmove",xe(u),n),Ft("drag",xe(u),n)];return xe(()=>{p.forEach(f=>f())})}function M2({mouseInteractionCb:e,doc:t,mirror:n,blockClass:a,blockSelector:s,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const r=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,l=[],u=p=>f=>{const g=ks(f);if(Rt(g,a,s,i))return;const y=Wp(f)?f.changedTouches[0]:f;if(!y)return;const w=n.getId(g),{clientX:m,clientY:E}=y;xe(e)({type:Ei[p],id:w,x:m,y:E})};return Object.keys(Ei).filter(p=>Number.isNaN(Number(p))&&!p.endsWith("_Departed")&&r[p]!==!1).forEach(p=>{const f=p.toLowerCase(),g=xe(u(p));l.push(Ft(f,g,t))}),xe(()=>{l.forEach(p=>p())})}function Kp({scrollCb:e,doc:t,mirror:n,blockClass:a,blockSelector:s,unblockSelector:i,sampling:o}){const r=fs(l=>{const u=ks(l);if(!u||Rt(u,a,s,i))return;const p=n.getId(u);if(u===t){const f=t.scrollingElement||t.documentElement;xe(e)({id:p,x:f.scrollLeft,y:f.scrollTop})}else xe(e)({id:p,x:u.scrollLeft,y:u.scrollTop})},o.scroll||100);return Ft("scroll",xe(r),t)}function B2({viewportResizeCb:e}){let t=-1,n=-1;const a=fs(()=>{const s=zp(),i=Hp();(t!==s||n!==i)&&(xe(e)({width:Number(i),height:Number(s)}),t=s,n=i)},200);return Ft("resize",xe(a),window)}function Bc(e,t){const n=Object.assign({},e);return t||delete n.userTriggered,n}const F2=["INPUT","TEXTAREA","SELECT"],Fc=new WeakMap;function G2({inputCb:e,doc:t,mirror:n,blockClass:a,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:r,maskInputSelector:l,unmaskInputSelector:u,maskInputOptions:p,maskInputFn:f,sampling:g,userTriggeredOnInput:y}){function w(C){let $=ks(C);const G=$&&$.tagName,U=C.isTrusted;if(G==="OPTION"&&($=$.parentElement),!$||!G||F2.indexOf(G)<0||Rt($,a,s,i))return;const F=$,B=Mp(F);if(F.classList.contains(o)||r&&F.matches(r))return;let W=tr(F,G,B),Y=!1;(B==="radio"||B==="checkbox")&&(Y=$.checked),c2({maskInputOptions:p,maskInputSelector:l,tagName:G,type:B})&&(W=ds({input:F,maskInputOptions:p,maskInputSelector:l,unmaskInputSelector:u,tagName:G,type:B,value:W,maskInputFn:f})),m($,xe(Bc)({text:W,isChecked:Y,userTriggered:U},y));const I=$.name;B==="radio"&&I&&Y&&t.querySelectorAll(`input[type="radio"][name="${I}"]`).forEach(R=>{if(R!==$){const V=ds({input:R,maskInputOptions:p,maskInputSelector:l,unmaskInputSelector:u,tagName:G,type:B,value:tr(R,G,B),maskInputFn:f});m(R,xe(Bc)({text:V,isChecked:!Y,userTriggered:!1},y))}})}function m(C,$){const G=Fc.get(C);if(!G||G.text!==$.text||G.isChecked!==$.isChecked){Fc.set(C,$);const U=n.getId(C);e(Object.assign(Object.assign({},$),{id:U}))}}const P=(g.input==="last"?["change"]:["input","change"]).map(C=>Ft(C,xe(w),t)),S=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),D=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return S&&S.set&&P.push(...D.map(C=>Xi(C[0],C[1],{set(){xe(w)({target:this})}}))),xe(()=>{P.forEach(C=>C())})}function Pi(e){const t=[];function n(a,s){if(zs("CSSGroupingRule")&&a.parentRule instanceof CSSGroupingRule||zs("CSSMediaRule")&&a.parentRule instanceof CSSMediaRule||zs("CSSSupportsRule")&&a.parentRule instanceof CSSSupportsRule||zs("CSSConditionRule")&&a.parentRule instanceof CSSConditionRule){const o=Array.from(a.parentRule.cssRules).indexOf(a);s.unshift(o)}else{const o=Array.from(a.parentStyleSheet.cssRules).indexOf(a);s.unshift(o)}return s}return n(e,t)}function z2({styleSheetRuleCb:e,mirror:t},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const a=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:xe((r,l,u)=>{const[p,f]=u,g=t.getId(l.ownerNode);return g!==-1&&e({id:g,adds:[{rule:p,index:f}]}),r.apply(l,u)})});const s=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:xe((r,l,u)=>{const[p]=u,f=t.getId(l.ownerNode);return f!==-1&&e({id:f,removes:[{index:p}]}),r.apply(l,u)})});const i={};Hs("CSSGroupingRule")?i.CSSGroupingRule=n.CSSGroupingRule:(Hs("CSSMediaRule")&&(i.CSSMediaRule=n.CSSMediaRule),Hs("CSSConditionRule")&&(i.CSSConditionRule=n.CSSConditionRule),Hs("CSSSupportsRule")&&(i.CSSSupportsRule=n.CSSSupportsRule));const o={};return Object.entries(i).forEach(([r,l])=>{o[r]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(o[r].insertRule,{apply:xe((u,p,f)=>{const[g,y]=f,w=t.getId(p.parentStyleSheet.ownerNode);return w!==-1&&e({id:w,adds:[{rule:g,index:[...Pi(p),y||0]}]}),u.apply(p,f)})}),l.prototype.deleteRule=new Proxy(o[r].deleteRule,{apply:xe((u,p,f)=>{const[g]=f,y=t.getId(p.parentStyleSheet.ownerNode);return y!==-1&&e({id:y,removes:[{index:[...Pi(p),g]}]}),u.apply(p,f)})})}),xe(()=>{n.CSSStyleSheet.prototype.insertRule=a,n.CSSStyleSheet.prototype.deleteRule=s,Object.entries(i).forEach(([r,l])=>{l.prototype.insertRule=o[r].insertRule,l.prototype.deleteRule=o[r].deleteRule})})}function H2({styleDeclarationCb:e,mirror:t},{win:n}){const a=n.CSSStyleDeclaration.prototype.setProperty;n.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:xe((i,o,r)=>{var l,u;const[p,f,g]=r,y=t.getId((u=(l=o.parentRule)===null||l===void 0?void 0:l.parentStyleSheet)===null||u===void 0?void 0:u.ownerNode);return y!==-1&&e({id:y,set:{property:p,value:f,priority:g},index:Pi(o.parentRule)}),i.apply(o,r)})});const s=n.CSSStyleDeclaration.prototype.removeProperty;return n.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:xe((i,o,r)=>{var l,u;const[p]=r,f=t.getId((u=(l=o.parentRule)===null||l===void 0?void 0:l.parentStyleSheet)===null||u===void 0?void 0:u.ownerNode);return f!==-1&&e({id:f,remove:{property:p},index:Pi(o.parentRule)}),i.apply(o,r)})}),xe(()=>{n.CSSStyleDeclaration.prototype.setProperty=a,n.CSSStyleDeclaration.prototype.removeProperty=s})}function Y2({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:a,mirror:s,sampling:i}){const o=l=>fs(xe(u=>{const p=ks(u);if(!p||Rt(p,t,n,a))return;const{currentTime:f,volume:g,muted:y}=p;e({type:l,id:s.getId(p),currentTime:f,volume:g,muted:y})}),i.media||500),r=[Ft("play",o(0)),Ft("pause",o(1)),Ft("seeked",o(2)),Ft("volumechange",o(3))];return xe(()=>{r.forEach(l=>l())})}function W2({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const a=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(l,u,p){const f=new i(l,u,p);return s.set(f,{family:l,buffer:typeof u!="string",descriptors:p,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),f};const o=ka(t.fonts,"add",function(r){return function(l){return setTimeout(()=>{const u=s.get(l);u&&(e(u),s.delete(l))},0),r.apply(this,[l])}});return a.push(()=>{n.FontFace=i}),a.push(o),xe(()=>{a.forEach(r=>r())})}function V2(e,t){const{mutationCb:n,mousemoveCb:a,mouseInteractionCb:s,scrollCb:i,viewportResizeCb:o,inputCb:r,mediaInteractionCb:l,styleSheetRuleCb:u,styleDeclarationCb:p,canvasMutationCb:f,fontCb:g}=e;e.mutationCb=(...y)=>{t.mutation&&t.mutation(...y),n(...y)},e.mousemoveCb=(...y)=>{t.mousemove&&t.mousemove(...y),a(...y)},e.mouseInteractionCb=(...y)=>{t.mouseInteraction&&t.mouseInteraction(...y),s(...y)},e.scrollCb=(...y)=>{t.scroll&&t.scroll(...y),i(...y)},e.viewportResizeCb=(...y)=>{t.viewportResize&&t.viewportResize(...y),o(...y)},e.inputCb=(...y)=>{t.input&&t.input(...y),r(...y)},e.mediaInteractionCb=(...y)=>{t.mediaInteaction&&t.mediaInteaction(...y),l(...y)},e.styleSheetRuleCb=(...y)=>{t.styleSheetRule&&t.styleSheetRule(...y),u(...y)},e.styleDeclarationCb=(...y)=>{t.styleDeclaration&&t.styleDeclaration(...y),p(...y)},e.canvasMutationCb=(...y)=>{t.canvasMutation&&t.canvasMutation(...y),f(...y)},e.fontCb=(...y)=>{t.font&&t.font(...y),g(...y)}}function q2(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};V2(e,t);const a=jp(e,e.doc),s=U2(e),i=M2(e),o=Kp(e),r=B2(e),l=G2(e),u=Y2(e),p=z2(e,{win:n}),f=H2(e,{win:n}),g=e.collectFonts?W2(e):()=>{},y=[];for(const w of e.plugins)y.push(w.observer(w.callback,n,w.options));return xe(()=>{Bn.forEach(w=>w.reset()),a.disconnect(),s(),i(),o(),r(),l(),u();try{p(),f()}catch(w){}g(),y.forEach(w=>w())})}function zs(e){return typeof window[e]!="undefined"}function Hs(e){return!!(typeof window[e]!="undefined"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class j2{constructor(t){this.iframes=new WeakMap,this.mutationCb=t.mutationCb}addIframe(t){this.iframes.set(t,!0)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var a;this.mutationCb({adds:[{parentId:t.__sn.id,nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(a=this.loadListener)===null||a===void 0||a.call(this,t)}}class K2{constructor(t){this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;const n=this;this.restorePatches.push(ka(HTMLElement.prototype,"attachShadow",function(a){return function(){const s=a.apply(this,arguments);return this.shadowRoot&&n.addShadowRoot(this.shadowRoot,this.ownerDocument),s}}))}addShadowRoot(t,n){jp(Object.assign(Object.assign({},this.bypassOptions),{doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),Kp(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))}observeAttachShadow(t){if(t.contentWindow){const n=this;this.restorePatches.push(ka(t.contentWindow.HTMLElement.prototype,"attachShadow",function(a){return function(){const s=a.apply(this,arguments);return this.shadowRoot&&n.addShadowRoot(this.shadowRoot,t.contentDocument),s}}))}}reset(){this.restorePatches.forEach(t=>t())}}function Q2(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]]);return n}function X2(e,t,n,a,s,i){const o=[],r=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const l of r)try{if(typeof t.CanvasRenderingContext2D.prototype[l]!="function")continue;const u=ka(t.CanvasRenderingContext2D.prototype,l,function(p){return function(...f){return Rt(this.canvas,n,s,a)||setTimeout(()=>{const g=[...f];if(l==="drawImage"&&g[0]&&g[0]instanceof HTMLCanvasElement){const y=g[0],w=y.getContext("2d");let m=w==null?void 0:w.getImageData(0,0,y.width,y.height),E=m==null?void 0:m.data;g[0]=JSON.stringify(E)}e(this.canvas,{type:Pa["2D"],property:l,args:g})},0),p.apply(this,f)}});o.push(u)}catch(u){const p=Xi(t.CanvasRenderingContext2D.prototype,l,{set(f){e(this.canvas,{type:Pa["2D"],property:l,args:[f],setter:!0})}});o.push(p)}return()=>{o.forEach(l=>l())}}function J2(e,t,n,a){const s=[];try{const i=ka(e.HTMLCanvasElement.prototype,"getContext",function(o){return function(r,...l){return Rt(this,t,n,a)||"__context"in this||(this.__context=r),o.apply(this,[r,...l])}});s.push(i)}catch(i){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach(i=>i())}}var ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z2=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(var Ys=0;Ys<ia.length;Ys++)Z2[ia.charCodeAt(Ys)]=Ys;var eM=function(e){var t=new Uint8Array(e),n,a=t.length,s="";for(n=0;n<a;n+=3)s+=ia[t[n]>>2],s+=ia[(t[n]&3)<<4|t[n+1]>>4],s+=ia[(t[n+1]&15)<<2|t[n+2]>>6],s+=ia[t[n+2]&63];return a%3===2?s=s.substring(0,s.length-1)+"=":a%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const Gc=new Map;function tM(e,t){let n=Gc.get(e);return n||(n=new Map,Gc.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const Qp=(e,t,n)=>{if(!e||!(Xp(e,t)||typeof e=="object"))return;const a=e.constructor.name,s=tM(n,a);let i=s.indexOf(e);return i===-1&&(i=s.length,s.push(e)),i};function ti(e,t,n){if(e instanceof Array)return e.map(a=>ti(a,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const a=e.constructor.name,s=eM(e);return{rr_type:a,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[ti(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const a=e.constructor.name,{src:s}=e;return{rr_type:a,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[ti(e.data,t,n),e.width,e.height]};if(Xp(e,t)||typeof e=="object"){const a=e.constructor.name,s=Qp(e,t,n);return{rr_type:a,index:s}}}}return e}const nM=(e,t,n)=>[...e].map(a=>ti(a,t,n)),Xp=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function zc(e,t,n,a,s,i,o,r){const l=[],u=Object.getOwnPropertyNames(e);for(const p of u)try{if(typeof e[p]!="function")continue;const f=ka(e,p,function(g){return function(...y){const w=g.apply(this,y);if(Qp(w,r,e),!Rt(this.canvas,a,i,s)){const m=o.getId(this.canvas),E=nM([...y],r,e),P={type:t,property:p,args:E};n(this.canvas,P)}return w}});l.push(f)}catch(f){const g=Xi(e,p,{set(y){n(this.canvas,{type:t,property:p,args:[y],setter:!0})}});l.push(g)}return l}function aM(e,t,n,a,s,i){const o=[];return o.push(...zc(t.WebGLRenderingContext.prototype,Pa.WebGL,e,n,a,s,i,t)),typeof t.WebGL2RenderingContext!="undefined"&&o.push(...zc(t.WebGL2RenderingContext.prototype,Pa.WebGL2,e,n,a,s,i,t)),()=>{o.forEach(r=>r())}}class sM{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(n,a){(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(n)||this.pendingCanvasMutations.set(n,[]),this.pendingCanvasMutations.get(n).push(a)},this.mutationCb=t.mutationCb,this.mirror=t.mirror,t.recordCanvas===!0&&this.initCanvasMutationObserver(t.win,t.blockClass,t.blockSelector,t.unblockSelector)}initCanvasMutationObserver(t,n,a,s){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=J2(t,n,s,a),o=X2(this.processMutation.bind(this),t,n,s,a,this.mirror),r=aM(this.processMutation.bind(this),t,n,s,a,this.mirror);this.resetObservers=()=>{i(),o(),r()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const a=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,a)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const a=this.pendingCanvasMutations.get(t);if(!a||n===-1)return;const s=a.map(o=>Q2(o,["type"])),{type:i}=a[0];this.mutationCb({id:n,type:i,commands:s}),this.pendingCanvasMutations.delete(t)}}function wt(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let ft,as;const qa=D2();function jn(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:a,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:r="rr-ignore",ignoreSelector:l=null,maskTextClass:u="rr-mask",maskTextSelector:p=null,maskInputSelector:f=null,unmaskTextSelector:g=null,unmaskInputSelector:y=null,inlineStylesheet:w=!0,maskAllText:m=!1,maskAllInputs:E,maskInputOptions:P,slimDOMOptions:S,maskInputFn:D,maskTextFn:C,hooks:$,packFn:G,sampling:U={},mousemoveWait:F,recordCanvas:B=!1,userTriggeredOnInput:W=!1,collectFonts:Y=!1,inlineImages:I=!1,plugins:R,keepIframeSrcFn:V=()=>!1,onMutation:q}=e;if(!t)throw new Error("emit function is required");F!==void 0&&U.mousemove===void 0&&(U.mousemove=F);const ne=E===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:P!==void 0?P:{},ae=S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:S==="all",headMetaDescKeywords:S==="all"}:S||{};N2();let Re,Ae=0;const oe=z=>{for(const ue of R||[])ue.eventProcessor&&(z=ue.eventProcessor(z));return G&&(z=G(z)),z};ft=(z,ue)=>{var ve;if(!((ve=Bn[0])===null||ve===void 0)&&ve.isFrozen()&&z.type!==He.FullSnapshot&&!(z.type===He.IncrementalSnapshot&&z.data.source===Et.Mutation)&&Bn.forEach(fe=>fe.unfreeze()),t(oe(z),ue),z.type===He.FullSnapshot)Re=z,Ae=0;else if(z.type===He.IncrementalSnapshot){if(z.data.source===Et.Mutation&&z.data.isAttachIframe)return;Ae++;const fe=a&&Ae>=a,pe=n&&z.timestamp-Re.timestamp>n;(fe||pe)&&as(!0)}};const de=z=>{ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.Mutation},z)}))},we=z=>ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.Scroll},z)})),it=z=>ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.CanvasMutation},z)})),Te=new j2({mutationCb:de}),gt=new sM({recordCanvas:B,mutationCb:it,win:window,blockClass:s,blockSelector:i,unblockSelector:o,mirror:qa}),pt=new K2({mutationCb:de,scrollCb:we,bypassOptions:{onMutation:q,blockClass:s,blockSelector:i,unblockSelector:o,maskTextClass:u,maskTextSelector:p,unmaskTextSelector:g,maskInputSelector:f,unmaskInputSelector:y,inlineStylesheet:w,maskAllText:m,maskInputOptions:ne,maskTextFn:C,maskInputFn:D,recordCanvas:B,inlineImages:I,sampling:U,slimDOMOptions:ae,iframeManager:Te,canvasManager:gt},mirror:qa});as=(z=!1)=>{var ue,ve,fe,pe;ft(wt({type:He.Meta,data:{href:window.location.href,width:Hp(),height:zp()}}),z),Bn.forEach(X=>X.lock());const[ee,L]=$2(document,{blockClass:s,blockSelector:i,unblockSelector:o,maskTextClass:u,maskTextSelector:p,unmaskTextSelector:g,maskInputSelector:f,unmaskInputSelector:y,inlineStylesheet:w,maskAllText:m,maskAllInputs:ne,maskTextFn:C,slimDOM:ae,recordCanvas:B,inlineImages:I,onSerialize:X=>{Vp(X)&&Te.addIframe(X),qp(X)&&pt.addShadowRoot(X.shadowRoot,document)},onIframeLoad:(X,ie)=>{Te.attachIframe(X,ie),pt.observeAttachShadow(X)},keepIframeSrcFn:V});if(!ee)return console.warn("Failed to snapshot the document");qa.map=L,ft(wt({type:He.FullSnapshot,data:{node:ee,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:(document==null?void 0:document.documentElement.scrollLeft)||((ve=(ue=document==null?void 0:document.body)===null||ue===void 0?void 0:ue.parentElement)===null||ve===void 0?void 0:ve.scrollLeft)||(document==null?void 0:document.body.scrollLeft)||0,top:window.pageYOffset!==void 0?window.pageYOffset:(document==null?void 0:document.documentElement.scrollTop)||((pe=(fe=document==null?void 0:document.body)===null||fe===void 0?void 0:fe.parentElement)===null||pe===void 0?void 0:pe.scrollTop)||(document==null?void 0:document.body.scrollTop)||0}}})),Bn.forEach(X=>X.unlock())};try{const z=[];z.push(Ft("DOMContentLoaded",()=>{ft(wt({type:He.DomContentLoaded,data:{}}))}));const ue=fe=>{var pe;return xe(q2)({onMutation:q,mutationCb:de,mousemoveCb:(ee,L)=>ft(wt({type:He.IncrementalSnapshot,data:{source:L,positions:ee}})),mouseInteractionCb:ee=>ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.MouseInteraction},ee)})),scrollCb:we,viewportResizeCb:ee=>ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.ViewportResize},ee)})),inputCb:ee=>ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.Input},ee)})),mediaInteractionCb:ee=>ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.MediaInteraction},ee)})),styleSheetRuleCb:ee=>ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.StyleSheetRule},ee)})),styleDeclarationCb:ee=>ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.StyleDeclaration},ee)})),canvasMutationCb:it,fontCb:ee=>ft(wt({type:He.IncrementalSnapshot,data:Object.assign({source:Et.Font},ee)})),blockClass:s,ignoreClass:r,ignoreSelector:l,maskTextClass:u,maskTextSelector:p,unmaskTextSelector:g,maskInputSelector:f,unmaskInputSelector:y,maskInputOptions:ne,inlineStylesheet:w,sampling:U,recordCanvas:B,inlineImages:I,userTriggeredOnInput:W,collectFonts:Y,doc:fe,maskAllText:m,maskInputFn:D,maskTextFn:C,blockSelector:i,unblockSelector:o,slimDOMOptions:ae,mirror:qa,iframeManager:Te,shadowDomManager:pt,canvasManager:gt,plugins:((pe=R==null?void 0:R.filter(ee=>ee.observer))===null||pe===void 0?void 0:pe.map(ee=>({observer:ee.observer,options:ee.options,callback:L=>ft(wt({type:He.Plugin,data:{plugin:ee.name,payload:L}}))})))||[]},$)};Te.addLoadListener(fe=>{try{z.push(ue(fe.contentDocument))}catch(pe){console.warn(pe)}});const ve=()=>{as(),z.push(ue(document))};return document.readyState==="interactive"||document.readyState==="complete"?ve():z.push(Ft("load",()=>{ft(wt({type:He.Load,data:{}})),ve()},window)),()=>{z.forEach(fe=>fe())}}catch(z){console.warn(z)}}jn.addCustomEvent=(e,t)=>{if(!ft)throw new Error("please add custom event after start recording");ft(wt({type:He.Custom,data:{tag:e,payload:t}}))};jn.freezePage=()=>{Bn.forEach(e=>e.freeze())};jn.takeFullSnapshot=e=>{if(!as)throw new Error("please take full snapshot after start recording");as(e)};jn.mirror=qa;const iM=["name","type","startTime","transferSize","duration"];function Hc(e){return function(t){return iM.every(n=>e[n]===t[n])}}function oM(e,t){const[n,a,s]=e.reduce((l,u)=>(u.entryType==="navigation"?l[0].push(u):u.entryType==="largest-contentful-paint"?l[1].push(u):l[2].push(u),l),[[],[],[]]),i=[],o=[];let r=a.length?a[a.length-1]:void 0;return t.forEach(l=>{if(l.entryType==="largest-contentful-paint"){(!r||r.startTime<l.startTime)&&(r=l);return}if(l.entryType==="navigation"){const u=l;l.duration>0&&!n.find(Hc(u))&&!o.find(Hc(u))&&o.push(u);return}i.push(l)}),[...r?[r]:[],...n,...s,...i,...o].sort((l,u)=>l.startTime-u.startTime)}function rM(e){const t=a=>{const s=oM(e.performanceEvents,a.getEntries());e.performanceEvents=s},n=new PerformanceObserver(t);return["element","event","first-input","largest-contentful-paint","layout-shift","longtask","navigation","paint","resource"].forEach(a=>{try{n.observe({type:a,buffered:!0})}catch(s){}}),n}const lM=`/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */
function t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const r=new Array(60);t(r);const o=new Array(512);t(o);const l=new Array(256);t(l);const h=new Array(29);t(h);const d=new Array(30);function _(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let f,c,u;function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(d);const m=t=>t<256?o[t]:o[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},g=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},p=(t,e,a)=>{g(t,a[2*e],a[2*e+1])},k=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},v=(t,e,a)=>{const i=new Array(16);let n,s,r=0;for(n=1;n<=15;n++)r=r+a[n-1]<<1,i[n]=r;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=k(i[e]++,e))}},y=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},x=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},z=(t,e,a,i)=>{const n=2*e,s=2*a;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[a]},A=(t,e,a)=>{const i=t.heap[a];let n=a<<1;for(;n<=t.heap_len&&(n<t.heap_len&&z(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!z(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i},E=(t,i,n)=>{let s,r,o,_,f=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+f++],s+=(255&t.pending_buf[t.sym_buf+f++])<<8,r=t.pending_buf[t.sym_buf+f++],0===s?p(t,r,i):(o=l[r],p(t,o+256+1,i),_=e[o],0!==_&&(r-=h[o],g(t,r,_)),s--,o=m(s),p(t,o,n),_=a[o],0!==_&&(s-=d[o],g(t,s,_)))}while(f<t.sym_next);p(t,256,i)},R=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let r,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<s;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,a[2*l]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)A(t,a,r);l=s;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*l]=a[2*r]+a[2*o],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=l,t.heap[1]=l++,A(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,_,f,c,u,w=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)d=t.heap[h],f=a[2*a[2*d+1]+1]+1,f>l&&(f=l,w++),a[2*d+1]=f,d>i||(t.bl_count[f]++,c=0,d>=o&&(c=r[d-o]),u=a[2*d],t.opt_len+=u*(f+c),s&&(t.static_len+=u*(n[2*d+1]+c)));if(0!==w){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(f=l;0!==f;f--)for(d=t.bl_count[f];0!==d;)_=t.heap[--h],_>i||(a[2*_+1]!==f&&(t.opt_len+=(f-a[2*_+1])*a[2*_],a[2*_+1]=f),d--)}})(t,e),v(a,h,t.bl_count)},Z=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=r,r=e[2*(i+1)+1],++o<l&&n===r||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4))},U=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),i=0;i<=a;i++)if(n=r,r=e[2*(i+1)+1],!(++o<l&&n===r)){if(o<h)do{p(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(p(t,n,t.bl_tree),o--),p(t,16,t.bl_tree),g(t,o-3,2)):o<=10?(p(t,17,t.bl_tree),g(t,o-3,3)):(p(t,18,t.bl_tree),g(t,o-11,7));o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4)}};let S=!1;const D=(t,e,a,i)=>{g(t,0+(i?1:0),3),x(t),b(t,a),b(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a};var T=(t,e,a,i)=>{let o,l,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),R(t,t.l_desc),R(t,t.d_desc),h=(t=>{let e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*n[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=o&&(o=l)):o=l=a+5,a+4<=o&&-1!==e?D(t,e,a,i):4===t.strategy||l===o?(g(t,2+(i?1:0),3),E(t,s,r)):(g(t,4+(i?1:0),3),((t,e,a,i)=>{let s;for(g(t,e-257,5),g(t,a-1,5),g(t,i-4,4),s=0;s<i;s++)g(t,t.bl_tree[2*n[s]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),E(t,t.dyn_ltree,t.dyn_dtree)),y(t),i&&x(t)},O={_tr_init:t=>{S||((()=>{let t,n,w,m,b;const g=new Array(16);for(w=0,m=0;m<28;m++)for(h[m]=w,t=0;t<1<<e[m];t++)l[w++]=m;for(l[w-1]=m,b=0,m=0;m<16;m++)for(d[m]=b,t=0;t<1<<a[m];t++)o[b++]=m;for(b>>=7;m<30;m++)for(d[m]=b<<7,t=0;t<1<<a[m]-7;t++)o[256+b++]=m;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,g[8]++;for(;t<=255;)s[2*t+1]=9,t++,g[9]++;for(;t<=279;)s[2*t+1]=7,t++,g[7]++;for(;t<=287;)s[2*t+1]=8,t++,g[8]++;for(v(s,287,g),t=0;t<30;t++)r[2*t+1]=5,r[2*t]=k(t,5);f=new _(s,e,257,286,15),c=new _(r,a,0,30,15),u=new _(new Array(0),i,0,19,7)})(),S=!0),t.l_desc=new w(t.dyn_ltree,f),t.d_desc=new w(t.dyn_dtree,c),t.bl_desc=new w(t.bl_tree,u),t.bi_buf=0,t.bi_valid=0,y(t)},_tr_stored_block:D,_tr_flush_block:T,_tr_tally:(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(l[a]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{g(t,2,3),p(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,a,i)=>{let n=65535&t|0,s=t>>>16&65535|0,r=0;for(;0!==a;){r=a>2e3?2e3:a,a-=r;do{n=n+e[i++]|0,s=s+n|0}while(--r);n%=65521,s%=65521}return n|s<<16|0};const L=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var N=(t,e,a,i)=>{const n=L,s=i+a;t^=-1;for(let a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t},I={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:C,_tr_stored_block:H,_tr_flush_block:M,_tr_tally:j,_tr_align:K}=O,{Z_NO_FLUSH:P,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:G,Z_FINISH:X,Z_BLOCK:W,Z_OK:q,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:V,Z_BUF_ERROR:$,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:at,Z_RLE:it,Z_FIXED:nt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:rt,Z_DEFLATED:ot}=B,lt=(t,e)=>(t.msg=I[e],e),ht=t=>2*t-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},_t=t=>{let e,a,i,n=t.w_size;e=t.hash_size,i=e;do{a=t.head[--i],t.head[i]=a>=n?a-n:0}while(--e);e=n,i=e;do{a=t.prev[--i],t.prev[i]=a>=n?a-n:0}while(--e)};let ft=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const ct=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},ut=(t,e)=>{M(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ct(t.strm)},wt=(t,e)=>{t.pending_buf[t.pending++]=e},mt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bt=(t,e,a,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),a),1===t.state.wrap?t.adler=F(t.adler,e,n,a):2===t.state.wrap&&(t.adler=N(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)},gt=(t,e)=>{let a,i,n=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,h=t.window,d=t.w_mask,_=t.prev,f=t.strstart+258;let c=h[s+r-1],u=h[s+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+r]===u&&h[a+r-1]===c&&h[a]===h[s]&&h[++a]===h[s+1]){s+=2,a++;do{}while(h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&s<f);if(i=258-(f-s),s=f-258,i>r){if(t.match_start=e,r=i,i>=o)break;c=h[s+r-1],u=h[s+r]}}}while((e=_[e&d])>l&&0!=--n);return r<=t.lookahead?r:t.lookahead},pt=t=>{const e=t.w_size;let a,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),_t(t),i+=e),0===t.strm.avail_in)break;if(a=bt(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=ft(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},kt=(t,e)=>{let a,i,n,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,i=t.strstart-t.block_start,a>i+t.strm.avail_in&&(a=i+t.strm.avail_in),a>n&&(a=n),a<s&&(0===a&&e!==X||e===P||a!==i+t.strm.avail_in))break;r=e===X&&a===i+t.strm.avail_in?1:0,H(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,ct(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(bt(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==P&&e!==X&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(bt(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n,s=n>t.w_size?t.w_size:n,i=t.strstart-t.block_start,(i>=s||(i||e===X)&&e!==P&&0===t.strm.avail_in&&i<=n)&&(a=i>n?n:i,r=e===X&&0===t.strm.avail_in&&a===i?1:0,H(t,t.block_start,a,r),t.block_start+=a,ct(t.strm)),r?3:1)},vt=(t,e)=>{let a,i;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a)),t.match_length>=3)if(i=j(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else i=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2},yt=(t,e)=>{let a,i,n;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=j(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(ut(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=j(t,0,t.window[t.strstart-1]),i&&ut(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=j(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2};function xt(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}const zt=[new xt(0,0,0,0,kt),new xt(4,4,8,4,vt),new xt(4,5,16,8,vt),new xt(4,6,32,32,vt),new xt(4,4,16,16,yt),new xt(8,16,32,32,yt),new xt(8,16,128,128,yt),new xt(8,32,128,256,yt),new xt(32,128,258,1024,yt),new xt(32,258,258,4096,yt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Et=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},Rt=t=>{if(Et(t))return lt(t,Q);t.total_in=t.total_out=0,t.data_type=rt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,C(e),q},Zt=t=>{const e=Rt(t);var a;return e===q&&((a=t.state).window_size=2*a.w_size,dt(a.head),a.max_lazy_match=zt[a.level].max_lazy,a.good_match=zt[a.level].good_length,a.nice_match=zt[a.level].nice_length,a.max_chain_length=zt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},Ut=(t,e,a,i,n,s)=>{if(!t)return Q;let r=1;if(e===tt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||a!==ot||i<8||i>15||e<0||e>9||s<0||s>nt||8===i&&1!==r)return lt(t,Q);8===i&&(i=9);const o=new At;return t.state=o,o.strm=t,o.status=42,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=a,Zt(t)};var St={deflateInit:(t,e)=>Ut(t,e,ot,15,8,st),deflateInit2:Ut,deflateReset:Zt,deflateResetKeep:Rt,deflateSetHeader:(t,e)=>Et(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,q),deflate:(t,e)=>{if(Et(t)||e>W||e<0)return t?lt(t,Q):Q;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===a.status&&e!==X)return lt(t,0===t.avail_out?$:Q);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(ct(t),0===t.avail_out)return a.last_flush=-1,q}else if(0===t.avail_in&&ht(e)<=ht(i)&&e!==X)return lt(t,$);if(666===a.status&&0!==t.avail_in)return lt(t,$);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let e=ot+(a.w_bits-8<<4)<<8,i=-1;if(i=a.strategy>=at||a.level<2?0:a.level<6?1:6===a.level?2:3,e|=i<<6,0!==a.strstart&&(e|=32),e+=31-e%31,mt(a,e),0!==a.strstart&&(mt(a,t.adler>>>16),mt(a,65535&t.adler)),t.adler=1,a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(57===a.status)if(t.adler=0,wt(a,31),wt(a,139),wt(a,8),a.gzhead)wt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),wt(a,255&a.gzhead.time),wt(a,a.gzhead.time>>8&255),wt(a,a.gzhead.time>>16&255),wt(a,a.gzhead.time>>24&255),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(wt(a,255&a.gzhead.extra.length),wt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=N(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,3),a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let n=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=n,ct(t),0!==a.pending)return a.last_flush=-1,q;e=0,i-=n}let n=new Uint8Array(a.gzhead.extra);a.pending_buf.set(n.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(ct(t),0!==a.pending))return a.last_flush=-1,q;wt(a,255&t.adler),wt(a,t.adler>>8&255),t.adler=0}if(a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(0!==t.avail_in||0!==a.lookahead||e!==P&&666!==a.status){let i=0===a.level?kt(a,e):a.strategy===at?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(pt(t),0===t.lookahead)){if(e===P)return 1;break}if(t.match_length=0,a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):a.strategy===it?((t,e)=>{let a,i,n,s;const r=t.window;for(;;){if(t.lookahead<=258){if(pt(t),t.lookahead<=258&&e===P)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=r[n],i===r[++n]&&i===r[++n]&&i===r[++n])){s=t.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<s);t.match_length=258-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=j(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):zt[a.level].func(a,e);if(3!==i&&4!==i||(a.status=666),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),q;if(2===i&&(e===Y?K(a):e!==W&&(H(a,0,0,!1),e===G&&(dt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ct(t),0===t.avail_out))return a.last_flush=-1,q}return e!==X?q:a.wrap<=0?J:(2===a.wrap?(wt(a,255&t.adler),wt(a,t.adler>>8&255),wt(a,t.adler>>16&255),wt(a,t.adler>>24&255),wt(a,255&t.total_in),wt(a,t.total_in>>8&255),wt(a,t.total_in>>16&255),wt(a,t.total_in>>24&255)):(mt(a,t.adler>>>16),mt(a,65535&t.adler)),ct(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?q:J)},deflateEnd:t=>{if(Et(t))return Q;const e=t.state.status;return t.state=null,113===e?lt(t,V):q},deflateSetDictionary:(t,e)=>{let a=e.length;if(Et(t))return Q;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Q;if(1===n&&(t.adler=F(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===n&&(dt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const s=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,pt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=ft(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,pt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=s,i.wrap=n,q},deflateInfo:"pako deflate (from Nodeca project)"};const Dt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Tt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)Dt(a,e)&&(t[e]=a[e])}}return t},Ot=t=>{let e=0;for(let a=0,i=t.length;a<i;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];a.set(n,i),i+=n.length}return a};let Ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ft=!1}const Lt=new Uint8Array(256);for(let t=0;t<256;t++)Lt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Lt[254]=Lt[254]=1;var Nt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,n,s,r=t.length,o=0;for(n=0;n<r;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},It=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,n;const s=new Array(2*a);for(n=0,i=0;i<a;){let e=t[i++];if(e<128){s[n++]=e;continue}let r=Lt[e];if(r>4)s[n++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ft)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a})(s,n)},Bt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+Lt[t[a]]>e?a:e};var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Mt,Z_SYNC_FLUSH:jt,Z_FULL_FLUSH:Kt,Z_FINISH:Pt,Z_OK:Yt,Z_STREAM_END:Gt,Z_DEFAULT_COMPRESSION:Xt,Z_DEFAULT_STRATEGY:Wt,Z_DEFLATED:qt}=B;function Jt(t){this.options=Tt({level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=St.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Yt)throw new Error(I[a]);if(e.header&&St.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Nt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=St.deflateSetDictionary(this.strm,t),a!==Yt)throw new Error(I[a]);this._dict_set=!0}}function Qt(t,e){const a=new Jt(e);if(a.push(t,!0),a.err)throw a.msg||I[a.err];return a.result}Jt.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Pt:Mt,"string"==typeof t?a.input=Nt(t):"[object ArrayBuffer]"===Ht.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s===jt||s===Kt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(n=St.deflate(a,s),n===Gt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=St.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Yt;if(0!==a.avail_out){if(s>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===Yt&&(this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vt={Deflate:Jt,deflate:Qt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Qt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Qt(t,e)},constants:B};var $t=function(t,e){let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,i=a+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),r=n+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,_=E.window,f=E.hold,c=E.bits,u=E.lencode,w=E.distcode,m=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;t:do{c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=u[f&m];e:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,0===p)A[n++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=u[(65535&g)+(f&(1<<p)-1)];continue e}if(32&p){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=16209;break t}k=65535&g,p&=15,p&&(c<p&&(f+=z[a++]<<c,c+=8),k+=f&(1<<p)-1,f>>>=p,c-=p),c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=w[f&b];a:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,!(16&p)){if(0==(64&p)){g=w[(65535&g)+(f&(1<<p)-1)];continue a}t.msg="invalid distance code",E.mode=16209;break t}if(v=65535&g,p&=15,c<p&&(f+=z[a++]<<c,c+=8,c<p&&(f+=z[a++]<<c,c+=8)),v+=f&(1<<p)-1,v>o){t.msg="invalid distance too far back",E.mode=16209;break t}if(f>>>=p,c-=p,p=n-s,v>p){if(p=v-p,p>h&&E.sane){t.msg="invalid distance too far back",E.mode=16209;break t}if(y=0,x=_,0===d){if(y+=l-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}else if(d<p){if(y+=l+d-p,p-=d,p<k){k-=p;do{A[n++]=_[y++]}while(--p);if(y=0,d<k){p=d,k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}}else if(y+=d-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}for(;k>2;)A[n++]=x[y++],A[n++]=x[y++],A[n++]=x[y++],k-=3;k&&(A[n++]=x[y++],k>1&&(A[n++]=x[y++]))}else{y=n-v;do{A[n++]=A[y++],A[n++]=A[y++],A[n++]=A[y++],k-=3}while(k>2);k&&(A[n++]=A[y++],k>1&&(A[n++]=A[y++]))}break}}break}}while(a<i&&n<r);k=c>>3,a-=k,c-=k<<3,f&=(1<<c)-1,t.next_in=a,t.next_out=n,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=n<r?r-n+257:257-(n-r),E.hold=f,E.bits=c};const te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ee=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,a,i,n,s,r,o)=>{const l=o.bits;let h,d,_,f,c,u,w=0,m=0,b=0,g=0,p=0,k=0,v=0,y=0,x=0,z=0,A=null;const E=new Uint16Array(16),R=new Uint16Array(16);let Z,U,S,D=null;for(w=0;w<=15;w++)E[w]=0;for(m=0;m<i;m++)E[e[a+m]]++;for(p=l,g=15;g>=1&&0===E[g];g--);if(p>g&&(p=g),0===g)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(b=1;b<g&&0===E[b];b++);for(p<b&&(p=b),y=1,w=1;w<=15;w++)if(y<<=1,y-=E[w],y<0)return-1;if(y>0&&(0===t||1!==g))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+E[w];for(m=0;m<i;m++)0!==e[a+m]&&(r[R[e[a+m]]++]=m);if(0===t?(A=D=r,u=20):1===t?(A=te,D=ee,u=257):(A=ae,D=ie,u=0),z=0,m=0,w=b,c=s,k=p,v=0,_=-1,x=1<<p,f=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){Z=w-v,r[m]+1<u?(U=0,S=r[m]):r[m]>=u?(U=D[r[m]-u],S=A[r[m]-u]):(U=96,S=0),h=1<<w-v,d=1<<k,b=d;do{d-=h,n[c+(z>>v)+d]=Z<<24|U<<16|S|0}while(0!==d);for(h=1<<w-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,m++,0==--E[w]){if(w===g)break;w=e[a+r[m]]}if(w>p&&(z&f)!==_){for(0===v&&(v=p),c+=b,k=w-v,y=1<<k;k+v<g&&(y-=E[k+v],!(y<=0));)k++,y<<=1;if(x+=1<<k,1===t&&x>852||2===t&&x>592)return 1;_=z&f,n[_]=p<<24|k<<16|c-s|0}}return 0!==z&&(n[c+z]=w-v<<24|64<<16|0),o.bits=p,0};const{Z_FINISH:se,Z_BLOCK:re,Z_TREES:oe,Z_OK:le,Z_STREAM_END:he,Z_NEED_DICT:de,Z_STREAM_ERROR:_e,Z_DATA_ERROR:fe,Z_MEM_ERROR:ce,Z_BUF_ERROR:ue,Z_DEFLATED:we}=B,me=16209,be=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ge(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pe=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<16180||e.mode>16211?1:0},ke=t=>{if(pe(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=16180,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,le},ve=t=>{if(pe(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ke(t)},ye=(t,e)=>{let a;if(pe(t))return _e;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,ve(t))},xe=(t,e)=>{if(!t)return _e;const a=new ge;t.state=a,a.strm=t,a.window=null,a.mode=16180;const i=ye(t,e);return i!==le&&(t.state=null),i};let ze,Ae,Ee=!0;const Re=t=>{if(Ee){ze=new Int32Array(512),Ae=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,ze,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,Ae,0,t.work,{bits:5}),Ee=!1}t.lencode=ze,t.lenbits=9,t.distcode=Ae,t.distbits=5},Ze=(t,e,a,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(a-s.wsize,a),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(a-i,a-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(a-i,a),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var Ue={inflateReset:ve,inflateReset2:ye,inflateResetKeep:ke,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z=0;const A=new Uint8Array(4);let E,R;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pe(t)||!t.output||!t.input&&0!==t.avail_in)return _e;a=t.state,16191===a.mode&&(a.mode=16192),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,_=o,f=l,x=le;t:for(;;)switch(a.mode){case 16180:if(0===a.wrap){a.mode=16192;break}for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(2&a.wrap&&35615===h){0===a.wbits&&(a.wbits=15),a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0),h=0,d=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=me;break}if((15&h)!==we){t.msg="unknown compression method",a.mode=me;break}if(h>>>=4,d-=4,y=8+(15&h),0===a.wbits&&(a.wbits=y),y>15||y>a.wbits){t.msg="invalid window size",a.mode=me;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&h?16189:16191,h=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==we){t.msg="unknown compression method",a.mode=me;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=me;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=N(a.check,A,4,0)),h=0,d=0,a.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16184;case 16184:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(c=a.length,c>o&&(c=o),c&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(s,s+c),y)),512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,a.length-=c),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=me;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}t.adler=a.check=be(h),h=0,d=0,a.mode=16190;case 16190:if(0===a.havedict)return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,de;t.adler=a.check=1,a.mode=16191;case 16191:if(e===re||e===oe)break t;case 16192:if(a.last){h>>>=7&d,d-=7&d,a.mode=16206;break}for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}switch(a.last=1&h,h>>>=1,d-=1,3&h){case 0:a.mode=16193;break;case 1:if(Re(a),a.mode=16199,e===oe){h>>>=2,d-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=me}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=me;break}if(a.length=65535&h,h=0,d=0,a.mode=16194,e===oe)break t;case 16194:a.mode=16195;case 16195:if(c=a.length,c){if(c>o&&(c=o),c>l&&(c=l),0===c)break t;n.set(i.subarray(s,s+c),r),o-=c,s+=c,l-=c,r+=c,a.length-=c;break}a.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=me;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.lens[Z[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[Z[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=ne(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=me;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(g<16)h>>>=m,d-=m,a.lens[a.have++]=g;else{if(16===g){for(R=m+2;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(h>>>=m,d-=m,0===a.have){t.msg="invalid bit length repeat",a.mode=me;break}y=a.lens[a.have-1],c=3+(3&h),h>>>=2,d-=2}else if(17===g){for(R=m+3;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=3+(7&h),h>>>=3,d-=3}else{for(R=m+7;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=11+(127&h),h>>>=7,d-=7}if(a.have+c>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=me;break}for(;c--;)a.lens[a.have++]=y}}if(a.mode===me)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=me;break}if(a.lenbits=9,E={bits:a.lenbits},x=ne(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=me;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=ne(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=me;break}if(a.mode=16199,e===oe)break t;case 16199:a.mode=16200;case 16200:if(o>=6&&l>=258){t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,$t(t,f),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,16191===a.mode&&(a.back=-1);break}for(a.back=0;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(b&&0==(240&b)){for(p=m,k=b,v=g;z=a.lencode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,a.length=g,0===b){a.mode=16205;break}if(32&b){a.back=-1,a.mode=16191;break}if(64&b){t.msg="invalid literal/length code",a.mode=me;break}a.extra=15&b,a.mode=16201;case 16201:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;z=a.distcode[h&(1<<a.distbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(0==(240&b)){for(p=m,k=b,v=g;z=a.distcode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,64&b){t.msg="invalid distance code",a.mode=me;break}a.offset=g,a.extra=15&b,a.mode=16203;case 16203:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=me;break}a.mode=16204;case 16204:if(0===l)break t;if(c=f-l,a.offset>c){if(c=a.offset-c,c>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=me;break}c>a.wnext?(c-=a.wnext,u=a.wsize-c):u=a.wnext-c,c>a.length&&(c=a.length),w=a.window}else w=n,u=r-a.offset,c=a.length;c>l&&(c=l),l-=c,a.length-=c;do{n[r++]=w[u++]}while(--c);0===a.length&&(a.mode=16200);break;case 16205:if(0===l)break t;n[r++]=a.length,l--,a.mode=16200;break;case 16206:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[s++]<<d,d+=8}if(f-=l,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,r-f):F(a.check,n,f,r-f)),f=l,4&a.wrap&&(a.flags?h:be(h))!==a.check){t.msg="incorrect data check",a.mode=me;break}h=0,d=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=me;break}h=0,d=0}a.mode=16208;case 16208:x=he;break t;case me:x=fe;break t;case 16210:return ce;default:return _e}return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||f!==t.avail_out&&a.mode<me&&(a.mode<16206||e!==se))&&Ze(t,t.output,t.next_out,f-t.avail_out),_-=t.avail_in,f-=t.avail_out,t.total_in+=_,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,t.next_out-f):F(a.check,n,f,t.next_out-f)),t.data_type=a.bits+(a.last?64:0)+(16191===a.mode?128:0)+(16199===a.mode||16194===a.mode?256:0),(0===_&&0===f||e===se)&&x===le&&(x=ue),x},inflateEnd:t=>{if(pe(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,le},inflateGetHeader:(t,e)=>{if(pe(t))return _e;const a=t.state;return 0==(2&a.wrap)?_e:(a.head=e,e.done=!1,le)},inflateSetDictionary:(t,e)=>{const a=e.length;let i,n,s;return pe(t)?_e:(i=t.state,0!==i.wrap&&16190!==i.mode?_e:16190===i.mode&&(n=1,n=F(n,e,a,0),n!==i.check)?fe:(s=Ze(t,e,a,a),s?(i.mode=16210,ce):(i.havedict=1,le)))},inflateInfo:"pako inflate (from Nodeca project)"};var Se=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const De=Object.prototype.toString,{Z_NO_FLUSH:Te,Z_FINISH:Oe,Z_OK:Fe,Z_STREAM_END:Le,Z_NEED_DICT:Ne,Z_STREAM_ERROR:Ie,Z_DATA_ERROR:Be,Z_MEM_ERROR:Ce}=B;function He(t){this.options=Tt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=Ue.inflateInit2(this.strm,e.windowBits);if(a!==Fe)throw new Error(I[a]);if(this.header=new Se,Ue.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Nt(e.dictionary):"[object ArrayBuffer]"===De.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Ue.inflateSetDictionary(this.strm,e.dictionary),a!==Fe)))throw new Error(I[a])}He.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Oe:Te,"[object ArrayBuffer]"===De.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),s=Ue.inflate(a,r),s===Ne&&n&&(s=Ue.inflateSetDictionary(a,n),s===Fe?s=Ue.inflate(a,r):s===Be&&(s=Ne));a.avail_in>0&&s===Le&&a.state.wrap>0&&0!==t[a.next_in];)Ue.inflateReset(a),s=Ue.inflate(a,r);switch(s){case Ie:case Be:case Ne:case Ce:return this.onEnd(s),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||s===Le))if("string"===this.options.to){let t=Bt(a.output,a.next_out),e=a.next_out-t,n=It(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(s!==Fe||0!==o){if(s===Le)return s=Ue.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},He.prototype.onData=function(t){this.chunks.push(t)},He.prototype.onEnd=function(t){t===Fe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const{Deflate:Me,deflate:je,deflateRaw:Ke,gzip:Pe}=Vt;var Ye=Me,Ge=je,Xe=B;const We=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const e=this._hasEvents?",":"";this.deflate.push(e+t,Xe.Z_SYNC_FLUSH),this._hasEvents=!0}finish(){if(this.deflate.push("]",Xe.Z_FINISH),this.deflate.err)throw this.deflate.err;const t=this.deflate.result;return this._init(),t}_init(){this._hasEvents=!1,this.deflate=new Ye,this.deflate.push("[",Xe.Z_NO_FLUSH)}},qe={clear:()=>{We.clear()},addEvent:t=>We.addEvent(t),finish:()=>We.finish(),compress:t=>function(t){return Ge(t)}(t)};addEventListener("message",(function(t){const e=t.data.method,a=t.data.id,i=t.data.arg;if(e in qe&&"function"==typeof qe[e])try{const t=qe[e](i);postMessage({id:a,method:e,success:!0,response:t})}catch(t){postMessage({id:a,method:e,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});`;function cM(){const e=new Blob([lM]);return URL.createObjectURL(e)}function pl(e){return e>9999999999?e:e*1e3}class Jp{constructor(){this.events=[]}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}addEvent(t){return T(this,null,function*(){this.events.push(t)})}finish(){return new Promise(t=>{const n=this.events;this.events=[],t(JSON.stringify(n))})}clear(){this.events=[]}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?pl(t):null}}class uM{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:a})=>{a.success?t():n()},{once:!0}),this._worker.addEventListener("error",a=>{n(a)},{once:!0})}),this._ensureReadyPromise)}destroy(){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const a=this._getAndIncrementId();return new Promise((s,i)=>{const o=({data:r})=>{const l=r;if(l.method===t&&l.id===a){if(this._worker.removeEventListener("message",o),!l.success){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("[Replay]",l.response),i(new Error("Error in compression worker"));return}s(l.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:a,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class dM{constructor(t){this._worker=new uM(t),this._earliestTimestamp=null}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=pl(t.timestamp);return(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n),this._sendEventToWorker(t)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._worker.postMessage("clear")}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",JSON.stringify(t))}_finishRequest(){return T(this,null,function*(){const t=yield this._worker.postMessage("finish");return this._earliestTimestamp=null,t})}}class pM{constructor(t){this._fallback=new Jp,this._compression=new dM(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}finish(){return T(this,null,function*(){return yield this.ensureWorkerIsLoaded(),this._used.finish()})}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}_ensureWorkerIsLoaded(){return T(this,null,function*(){try{yield this._compression.ensureReady()}catch(t){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Replay] Failed to load the compression worker, falling back to simple buffer");return}yield this._switchToCompressionWorker()})}_switchToCompressionWorker(){return T(this,null,function*(){const{events:t}=this._fallback,n=[];for(const a of t)n.push(this._compression.addEvent(a));this._used=this._compression;try{yield Promise.all(n)}catch(a){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("[Replay] Failed to add events when switching buffers.",a)}})}}function fM({useCompression:e}){if(e&&window.Worker)try{const t=cM();(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Replay] Using compression worker");const n=new Worker(t);return new pM(n)}catch(t){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Replay] Failed to create compression worker")}return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Replay] Using simple buffer"),new Jp}function hM(e){_M(),e.session=void 0}function _M(){if("sessionStorage"in Ve)try{Ve.sessionStorage.removeItem(ul)}catch(t){}}function rr(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Zp(e,t,n=+new Date){return rr(e.started,t.maxSessionLife,n)||rr(e.lastActivity,t.sessionIdleExpire,n)}function ef(e){return e===void 0?!1:Math.random()<e}function fl(e){if("sessionStorage"in Ve)try{Ve.sessionStorage.setItem(ul,JSON.stringify(e))}catch(n){}}function hl(e){const t=Date.now(),n=e.id||dn(),a=e.started||t,s=e.lastActivity||t,i=e.segmentId||0,o=e.sampled;return{id:n,started:a,lastActivity:s,segmentId:i,sampled:o,shouldRefresh:!0}}function gM(e,t){return ef(e)?"session":t?"buffer":!1}function mM({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1}){const a=gM(e,t),s=hl({sampled:a});return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Replay] Creating new session: ${s.id}`),n&&fl(s),s}function yM(){if(!("sessionStorage"in Ve))return null;try{const t=Ve.sessionStorage.getItem(ul);if(!t)return null;const n=JSON.parse(t);return hl(n)}catch(t){return null}}function ko({timeouts:e,currentSession:t,stickySession:n,sessionSampleRate:a,allowBuffering:s}){const i=t||n&&yM();if(i)if(Zp(i,e))if(i.shouldRefresh)(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Replay] Session has expired");else return{type:"new",session:hl({sampled:!1})};else return{type:"saved",session:i};return{type:"new",session:mM({stickySession:n,sessionSampleRate:a,allowBuffering:s})}}function Ss(e,t,n){return T(this,null,function*(){if(!e.eventBuffer||e.isPaused()||pl(t.timestamp)+e.timeouts.sessionIdlePause<Date.now())return null;try{return n&&e.eventBuffer.clear(),yield e.eventBuffer.addEvent(t)}catch(s){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error(s),yield e.stop("addEvent");const i=Se().getClient();i&&i.recordDroppedEvent("internal_sdk_error","replay")}})}function ki(e){return!e.type}function lr(e){return e.type==="transaction"}function vM(e){return e.type==="replay_event"}function tf(e){const t=bM();return(n,a)=>{if(!ki(n)&&!lr(n))return;const s=a&&a.statusCode;if(!(t&&(!s||s<200||s>=300))){if(lr(n)&&n.contexts&&n.contexts.trace&&n.contexts.trace.trace_id){e.getContext().traceIds.add(n.contexts.trace.trace_id);return}ki(n)&&(n.event_id&&e.getContext().errorIds.add(n.event_id),e.recordingMode==="buffer"&&n.tags&&n.tags.replayId&&setTimeout(()=>{e.sendBufferedReplayOrFlush()}))}}}function bM(){const e=Se().getClient();if(!e)return!1;const t=e.getTransport();return t&&t.send.__sentry__baseTransport__||!1}var Si;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(Si||(Si={}));function Wn(e){return A({timestamp:Date.now()/1e3,type:"default"},e)}function nf(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(Ss(e,{type:He.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:jt(t,10,1e3)}}),t.category==="console")))}const wM=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid"]);function EM(e){const t={};for(const n in e)if(wM.has(n)){let a=n;(n==="data-testid"||n==="data-test-id")&&(a="testId"),t[a]=e[n]}return t}const PM=e=>t=>{if(!e.isEnabled())return;const n=kM(t);n&&nf(e,n)};function kM(e){let t,n;const a=e.name==="click";try{n=a?AM(e.event):af(e.event),t=Vn(n,{maxStringLength:200})}catch(i){t="<unknown>"}const s=n&&"__sn"in n&&n.__sn.type===Si.Element?n.__sn:null;return Wn({category:`ui.${e.name}`,message:t,data:s?{nodeId:s.id,node:{id:s.id,tagName:s.tagName,textContent:n?Array.from(n.childNodes).map(i=>"__sn"in i&&i.__sn.type===Si.Text&&i.__sn.textContent).filter(Boolean).map(i=>i.trim()).join(""):"",attributes:EM(s.attributes)}}:{}})}function af(e){return TM(e)?e.target:e}const SM="button,a";function AM(e){const t=af(e);return!t||!(t instanceof Element)?t:t.closest(SM)||t}function TM(e){return!!e.target}function CM(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:t.originalException&&t.originalException.__rrweb__?!0:e.exception.values.some(n=>!n.stacktrace||!n.stacktrace.frames||!n.stacktrace.frames.length?!1:n.stacktrace.frames.some(a=>a.filename&&a.filename.includes("/rrweb/src/")))}function xM(e,t){return e.recordingMode!=="buffer"||t.message===dl||!t.exception||t.type?!1:ef(e.getOptions().errorSampleRate)}function IM(e,t=!1){const n=t?tf(e):void 0;return(a,s)=>{if(vM(a))return delete a.breadcrumbs,a;if(!ki(a)&&!lr(a))return a;if(CM(a,s)&&!e.getOptions()._experiments.captureExceptions)return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Replay] Ignoring error from rrweb internals",a),null;if((xM(e,a)||e.recordingMode==="session")&&(a.tags=Z(A({},a.tags),{replayId:e.getSessionId()})),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&e.getOptions()._experiments.traceInternals&&ki(a)){const r=RM(a);$M({message:`Tagging event (${a.event_id}) - ${a.message} - ${r.type}: ${r.value}`})}return n&&n(a,{statusCode:200}),a}}function $M(e){const i=e,{category:t,level:n,message:a}=i,s=Ga(i,["category","level","message"]);vL(A({category:t||"console",level:n||"debug",message:`[debug]: ${a}`},s))}function RM(e){return A({type:"Unknown",value:"n/a"},e.exception&&e.exception.values&&e.exception.values[0])}function Ji(e,t){return t.map(({type:n,start:a,end:s,name:i,data:o})=>Ss(e,{type:He.Custom,timestamp:a,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:a,endTimestamp:s,data:o}}}))}function DM(e){const{from:t,to:n}=e,a=Date.now()/1e3;return{type:"navigation.push",start:a,end:a,name:n,data:{previous:t}}}function NM(e){return t=>{if(!e.isEnabled())return;const n=DM(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Ji(e,[n]),!1)))}}function OM(e,t){return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&e.getOptions()._experiments.traceInternals?!1:LM(t)}function LM(e){const t=Se().getClient(),n=t&&t.getDsn();return n?e.includes(n.host):!1}function Zi(e,t){e.isEnabled()&&t!==null&&(OM(e,t.name)||e.addUpdate(()=>(Ji(e,[t]),!0)))}function UM(e){const{startTimestamp:t,endTimestamp:n,fetchData:a,response:s}=e;if(!n)return null;const{method:i,url:o}=a;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:o,data:{method:i,statusCode:s&&s.status}}}function MM(e){return t=>{if(!e.isEnabled())return;const n=UM(t);Zi(e,n)}}function BM(e){const{startTimestamp:t,endTimestamp:n,xhr:a}=e,s=a[Sn];if(!t||!n||!s)return null;const{method:i,url:o,status_code:r}=s;return o===void 0?null:{type:"resource.xhr",name:o,start:t/1e3,end:n/1e3,data:{method:i,statusCode:r}}}function FM(e){return t=>{if(!e.isEnabled())return;const n=BM(t);Zi(e,n)}}const An=10,_l=11,cr=12,gn=13,ur=14,Sa=15,ln=20,zt=21,dr=22,Aa=23,sf=["true","false","null"];function GM(e,t){if(!t.length)return e;let n=e;const a=t.length-1,s=t[a];n=zM(n,s);for(let i=a;i>=0;i--)switch(t[i]){case An:n=`${n}}`;break;case ln:n=`${n}]`;break}return n}function zM(e,t){switch(t){case An:return`${e}"~~":"~~"`;case _l:return`${e}:"~~"`;case cr:return`${e}~~":"~~"`;case gn:return WM(e);case ur:return`${e}~~"`;case Sa:return`${e},"~~":"~~"`;case ln:return`${e}"~~"`;case zt:return HM(e);case dr:return`${e}~~"`;case Aa:return`${e},"~~"`}return e}function HM(e){const t=YM(e);if(t>-1){const n=e.slice(t+1);return sf.includes(n.trim())?`${e},"~~"`:`${e.slice(0,t+1)}"~~"`}return e}function YM(e){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n===","||n==="[")return t}return-1}function WM(e){const t=e.lastIndexOf(":"),n=e.slice(t+1);return sf.includes(n.trim())?`${e},"~~":"~~"`:`${e.slice(0,t+1)}"~~"`}function VM(e){const t=[];for(let n=0;n<e.length;n++)qM(t,e,n);return t}function qM(e,t,n){const a=e[e.length-1],s=t[n];if(!/\s/.test(s)){if(s==='"'&&!of(t,n)){jM(e,a);return}switch(s){case"{":KM(e,a);break;case"[":QM(e,a);break;case":":XM(e,a);break;case",":JM(e,a);break;case"}":ZM(e,a);break;case"]":eB(e,a);break}}}function jM(e,t){if(t===ur){e.pop(),e.push(Sa);return}if(t===dr){e.pop(),e.push(Aa);return}if(t===gn){e.push(ur);return}if(t===zt){e.push(dr);return}if(t===An){e.push(cr);return}if(t===cr){e.pop(),e.push(_l);return}}function KM(e,t){if(!t){e.push(An);return}if(t===gn){e.push(An);return}if(t===zt&&e.push(An),t===ln){e.push(An);return}}function QM(e,t){if(!t){e.push(ln),e.push(zt);return}if(t===gn){e.push(ln),e.push(zt);return}if(t===zt&&(e.push(ln),e.push(zt)),t===ln){e.push(ln),e.push(zt);return}}function XM(e,t){t===_l&&(e.pop(),e.push(gn))}function JM(e,t){if(t===gn){e.pop();return}if(t===Sa){e.pop(),e.pop();return}if(t!==zt&&t===Aa){e.pop();return}}function ZM(e,t){t===An&&e.pop(),t===gn&&(e.pop(),e.pop()),t===Sa&&(e.pop(),e.pop(),e.pop()),e[e.length-1]===gn&&e.push(Sa),e[e.length-1]===zt&&e.push(Aa)}function eB(e,t){t===ln&&e.pop(),t===zt&&(e.pop(),e.pop()),t===Aa&&(e.pop(),e.pop(),e.pop()),e[e.length-1]===gn&&e.push(Sa),e[e.length-1]===zt&&e.push(Aa)}function of(e,t){return e[t-1]==="\\"&&!of(e,t-1)}function rf(e){const t=VM(e);return GM(e,t)}function Ai(e,t){if(e)try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=df(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(n){}}function lf(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function cf(e){if(typeof e=="string")return e;if(e instanceof URLSearchParams)return e.toString();if(e instanceof FormData)return df(e)}function uf(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:a,url:s,method:i,statusCode:o,request:r,response:l}=t;return{type:e,start:n/1e3,end:a/1e3,name:s,data:Xt({method:i,statusCode:o,request:r,response:l})}}function hs(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Tn(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const a={headers:e,size:t},{body:s,warnings:i}=tB(n);return a.body=s,i.length>0&&(a._meta={warnings:i}),a}function pr(e,t){return Object.keys(e).reduce((n,a)=>{const s=a.toLowerCase();return t.includes(s)&&e[a]&&(n[s]=e[a]),n},{})}function df(e){return new URLSearchParams(e).toString()}function tB(e){if(!e||typeof e!="string")return{body:e,warnings:[]};const t=e.length>Fs;if(nB(e))try{const n=t?rf(e.slice(0,Fs)):e;return{body:JSON.parse(n),warnings:t?["JSON_TRUNCATED"]:[]}}catch(n){return{body:t?`${e.slice(0,Fs)}…`:e,warnings:t?["INVALID_JSON","TEXT_TRUNCATED"]:["INVALID_JSON"]}}return{body:t?`${e.slice(0,Fs)}…`:e,warnings:t?["TEXT_TRUNCATED"]:[]}}function nB(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function pf(e,t){return Ba(e,t)}function aB(e,t,n){return T(this,null,function*(){try{const a=yield iB(e,t,n),s=uf("resource.fetch",a);Zi(n.replay,s)}catch(a){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("[Replay] Failed to capture fetch breadcrumb",a)}})}function sB(e,t,n){const{input:a,response:s}=t,i=ff(a),o=Ai(i,n.textEncoder),r=s?lf(s.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),r!==void 0&&(e.data.response_body_size=r)}function iB(e,t,n){return T(this,null,function*(){const{startTimestamp:a,endTimestamp:s}=t,{url:i,method:o,status_code:r=0,request_body_size:l,response_body_size:u}=e.data,p=pf(i,n.networkDetailAllowUrls),f=p?oB(n,t.input,l):hs(l),g=yield rB(p,n,t.response,u);return{startTimestamp:a,endTimestamp:s,url:i,method:o,statusCode:r,request:f,response:g}})}function oB({networkCaptureBodies:e,networkRequestHeaders:t},n,a){const s=cB(n,t);if(!e)return Tn(s,a,void 0);const i=ff(n),o=cf(i);return Tn(s,a,o)}function rB(o,r,l,u){return T(this,arguments,function*(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:a},s,i){if(!e&&i!==void 0)return hs(i);const p=hf(s.headers,a);if(!t&&i!==void 0)return Tn(p,i,void 0);try{const f=s.clone(),g=yield lB(f),y=g&&g.length&&i===void 0?Ai(g,n):i;return e?t?Tn(p,y,g):Tn(p,y,void 0):hs(y)}catch(f){return Tn(p,i,void 0)}})}function lB(e){return T(this,null,function*(){try{return yield e.text()}catch(t){return}})}function ff(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function hf(e,t){const n={};return t.forEach(a=>{e.get(a)&&(n[a]=e.get(a))}),n}function cB(e,t){return e.length===1&&typeof e[0]!="string"?Yc(e[0],t):e.length===2?Yc(e[1],t):{}}function Yc(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?hf(n,t):Array.isArray(n)?{}:pr(n,t):{}}function uB(e,t,n){return T(this,null,function*(){try{const a=pB(e,t,n),s=uf("resource.xhr",a);Zi(n.replay,s)}catch(a){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("[Replay] Failed to capture fetch breadcrumb",a)}})}function dB(e,t,n){const{xhr:a,input:s}=t,i=Ai(s,n.textEncoder),o=a.getResponseHeader("content-length")?lf(a.getResponseHeader("content-length")):Ai(a.response,n.textEncoder);i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}function pB(e,t,n){const{startTimestamp:a,endTimestamp:s,input:i,xhr:o}=t,{url:r,method:l,status_code:u=0,request_body_size:p,response_body_size:f}=e.data;if(!r)return null;if(!pf(r,n.networkDetailAllowUrls)){const P=hs(p),S=hs(f);return{startTimestamp:a,endTimestamp:s,url:r,method:l,statusCode:u,request:P,response:S}}const g=o[Sn],y=g?pr(g.request_headers,n.networkRequestHeaders):{},w=pr(fB(o),n.networkResponseHeaders),m=Tn(y,p,n.networkCaptureBodies?cf(i):void 0),E=Tn(w,f,n.networkCaptureBodies?t.xhr.responseText:void 0);return{startTimestamp:a,endTimestamp:s,url:r,method:l,statusCode:u,request:m,response:E}}function fB(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,a)=>{const[s,i]=a.split(": ");return n[s.toLowerCase()]=i,n},{}):{}}function hB(e){const t=Se().getClient();try{const n=new TextEncoder,{networkDetailAllowUrls:a,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o}=e.getOptions(),r={replay:e,textEncoder:n,networkDetailAllowUrls:a,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o};t&&t.on?t.on("beforeAddBreadcrumb",(l,u)=>_B(r,l,u)):(Pt("fetch",MM(e)),Pt("xhr",FM(e)))}catch(n){}}function _B(e,t,n){if(t.data)try{gB(t)&&yB(n)&&(dB(t,n,e),uB(t,n,e)),mB(t)&&vB(n)&&(sB(t,n,e),aB(t,n,e))}catch(a){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("Error when enriching network breadcrumb")}}function gB(e){return e.category==="xhr"}function mB(e){return e.category==="fetch"}function yB(e){return e&&e.xhr}function vB(e){return e&&e.response}let Wc=null;const bB=e=>t=>{if(!e.isEnabled())return;const n=wB(t);n&&nf(e,n)};function wB(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();return Wc===t||!t||(Wc=t,t.category&&(["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")))?null:t.category==="console"?EB(t):Wn(t)}function EB(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return Wn(e);let n=!1;const a=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>Gs?(n=!0,`${s.slice(0,Gs)}…`):s;if(typeof s=="object")try{const i=jt(s,7),o=JSON.stringify(i);if(o.length>Gs){const r=rf(o.slice(0,Gs)),l=JSON.parse(r);return n=!0,l}return i}catch(i){}return s});return Wn(Z(A({},e),{data:A(Z(A({},e.data),{arguments:a}),n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{})}))}function PB(e){const t=Se().getScope(),n=Se().getClient();t&&t.addScopeListener(bB(e)),Pt("dom",PM(e)),Pt("history",NM(e)),hB(e),Vi(IM(e,!Vc(n))),Vc(n)&&(n.on("afterSendEvent",tf(e)),n.on("createDsc",a=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&(a.replay_id=s)}))}function Vc(e){return!!(e&&e.on)}function kB(e){return T(this,null,function*(){try{return Promise.all(Ji(e,[SB(Ve.performance.memory)]))}catch(t){return[]}})}function SB(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:a}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:a}}}}const qc={resource:IB,paint:CB,navigation:xB,"largest-contentful-paint":$B};function AB(e){return e.map(TB).filter(Boolean)}function TB(e){return qc[e.entryType]===void 0?null:qc[e.entryType](e)}function Ta(e){return((_n||Ve.performance.timeOrigin)+e)/1e3}function CB(e){const{duration:t,entryType:n,name:a,startTime:s}=e,i=Ta(s);return{type:n,name:a,start:i,end:i+t,data:void 0}}function xB(e){const{entryType:t,name:n,decodedBodySize:a,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:r,domContentLoadedEventEnd:l,domInteractive:u,loadEventStart:p,loadEventEnd:f,redirectCount:g,startTime:y,transferSize:w,type:m}=e;return s===0?null:{type:`${t}.${m}`,start:Ta(y),end:Ta(i),name:n,data:{size:w,decodedBodySize:a,encodedBodySize:o,duration:s,domInteractive:u,domContentLoadedEventStart:r,domContentLoadedEventEnd:l,loadEventStart:p,loadEventEnd:f,domComplete:i,redirectCount:g}}}function IB(e){const{entryType:t,initiatorType:n,name:a,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:r,responseStatus:l,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Ta(i),end:Ta(s),name:a,data:{size:u,statusCode:l,decodedBodySize:o,encodedBodySize:r}}}function $B(e){const{entryType:t,startTime:n,size:a}=e;let s=0;if(Ve.performance){const r=Ve.performance.getEntriesByType("navigation")[0];s=r&&r.activationStart||0}const i=Math.max(n-s,0),o=Ta(s)+i/1e3;return{type:t,name:t,start:o,end:o,data:{value:i,size:a,nodeId:jn.mirror.getId(e.element)}}}function RB(e,t,n){let a,s,i;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function r(){return l(),a=e(),a}function l(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function u(){return s!==void 0||i!==void 0?r():a}function p(){return s&&clearTimeout(s),s=setTimeout(r,t),o&&i===void 0&&(i=setTimeout(r,o)),a}return p.cancel=l,p.flush=u,p}var fr;(function(e){e[e.DomContentLoaded=0]="DomContentLoaded";const n=1;e[e.Load=n]="Load";const a=2;e[e.FullSnapshot=a]="FullSnapshot";const s=3;e[e.IncrementalSnapshot=s]="IncrementalSnapshot";const i=4;e[e.Meta=i]="Meta";const o=5;e[e.Custom=o]="Custom";const r=6;e[e.Plugin=r]="Plugin"})(fr||(fr={}));function DB(e){let t=!1;return(n,a)=>{if(!e.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("[Replay] Received replay event after session expired.");return}const s=a||!t;t=!0,e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),Ss(e,n,s),!s)return!1;if(OB(e,s),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){const i=e.eventBuffer.getEarliestTimestamp();i&&(e.session.started=i,e.getOptions().stickySession&&fl(e.session))}return e.recordingMode==="session"&&e.flushImmediate(),!0})}}function NB(e){const t=e.getOptions();return{type:fr.Custom,timestamp:Date.now(),data:{tag:"options",payload:{sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function OB(e,t){return!t||!e.session||e.session.segmentId!==0?Promise.resolve(null):Ss(e,NB(e),!1)}function LB(e,t,n,a){return Fa(hp(e,il(e),a,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function UB({recordingData:e,headers:t}){let n;const a=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${a}${e}`;else{const i=new TextEncoder().encode(a);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}function MB(s){return T(this,arguments,function*({client:e,scope:t,replayId:n,event:a}){const i=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,o=yield Pp(e.getOptions(),a,{event_id:n,integrations:i},t);if(!o)return null;o.platform=o.platform||"javascript";const r=e.getSdkMetadata&&e.getSdkMetadata(),{name:l,version:u}=r&&r.sdk||{};return o.sdk=Z(A({},o.sdk),{name:l||"sentry.javascript.unknown",version:u||"0.0.0"}),o})}function BB(o){return T(this,arguments,function*({recordingData:e,replayId:t,segmentId:n,eventContext:a,timestamp:s,session:i}){const r=UB({recordingData:e,headers:{segment_id:n}}),{urls:l,errorIds:u,traceIds:p,initialTimestamp:f}=a,g=Se(),y=g.getClient(),w=g.getScope(),m=y&&y.getTransport(),E=y&&y.getDsn();if(!y||!w||!m||!E||!i.sampled)return;const P={type:ZU,replay_start_timestamp:f/1e3,timestamp:s/1e3,error_ids:u,trace_ids:p,urls:l,replay_id:t,segment_id:n,replay_type:i.sampled},S=yield MB({scope:w,client:y,replayId:t,event:P});if(!S){y.recordDroppedEvent("event_processor","replay",P),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("An event processor returned `null`, will not send event.");return}const D=LB(S,r,E,y.getOptions().tunnel);let C;try{C=yield m.send(D)}catch($){const G=new Error(dl);try{G.cause=$}catch(U){}throw G}if(!C)return C;if(typeof C.statusCode=="number"&&(C.statusCode<200||C.statusCode>=300))throw new _f(C.statusCode);return C})}class _f extends Error{constructor(t){super(`Transport returned status code ${t}`)}}function gf(n){return T(this,arguments,function*(e,t={count:0,interval:o2}){const{recordingData:a,options:s}=e;if(a.length)try{return yield BB(e),!0}catch(i){if(i instanceof _f)throw i;if(bL("Replays",{_retryCount:t.count}),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&s._experiments&&s._experiments.captureExceptions&&Ki(i),t.count>=r2){const o=new Error(`${dl} - max retries exceeded`);try{o.cause=i}catch(r){}throw o}return t.interval*=++t.count,yield new Promise((o,r)=>{setTimeout(()=>T(this,null,function*(){try{yield gf(e,t),o(!0)}catch(l){r(l)}}),t.interval)})}})}class lt{__init(){this.eventBuffer=null}__init2(){this.performanceEvents=[]}__init3(){this.recordingMode="session"}__init4(){this.timeouts={sessionIdlePause:e2,sessionIdleExpire:t2,maxSessionLife:n2}}__init5(){this._performanceObserver=null}__init6(){this._flushLock=null}__init7(){this._lastActivity=Date.now()}__init8(){this._isEnabled=!1}__init9(){this._isPaused=!1}__init10(){this._hasInitializedCoreListeners=!1}__init11(){this._stopRecording=null}__init12(){this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""}}constructor({options:t,recordingOptions:n}){lt.prototype.__init.call(this),lt.prototype.__init2.call(this),lt.prototype.__init3.call(this),lt.prototype.__init4.call(this),lt.prototype.__init5.call(this),lt.prototype.__init6.call(this),lt.prototype.__init7.call(this),lt.prototype.__init8.call(this),lt.prototype.__init9.call(this),lt.prototype.__init10.call(this),lt.prototype.__init11.call(this),lt.prototype.__init12.call(this),lt.prototype.__init13.call(this),lt.prototype.__init14.call(this),lt.prototype.__init15.call(this),lt.prototype.__init16.call(this),lt.prototype.__init17.call(this),lt.prototype.__init18.call(this),this._recordingOptions=n,this._options=t,this._debouncedFlush=RB(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay})}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}initializeSampling(){const{errorSampleRate:t,sessionSampleRate:n}=this._options;if(!(t<=0&&n<=0||!this._loadAndCheckSession())){if(!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled&&this.session.sampled!=="session"&&(this.recordingMode="buffer"),this._initializeRecording()}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");const t=this.session&&this.session.id,{session:n}=ko({timeouts:this.timeouts,stickySession:!!this._options.stickySession,currentSession:this.session,sessionSampleRate:1,allowBuffering:!1});n.previousSessionId=t,this.session=n,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");const t=this.session&&this.session.id,{session:n}=ko({timeouts:this.timeouts,stickySession:!!this._options.stickySession,currentSession:this.session,sessionSampleRate:0,allowBuffering:!0});n.previousSessionId=t,this.session=n,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{this._stopRecording=jn(Z(A(A({},this._recordingOptions),this.recordingMode==="buffer"&&{checkoutEveryNms:i2}),{emit:DB(this),onMutation:this._onMutationHandler}))}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}stop(t){return T(this,null,function*(){if(this._isEnabled)try{if(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__){const n=`[Replay] Stopping Replay${t?` triggered by ${t}`:""}`;(this.getOptions()._experiments.traceInternals?console.warn:H.log)(n)}this._isEnabled=!1,this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),yield this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,hM(this)}catch(n){this._handleException(n)}})}pause(){this._isPaused=!0,this.stopRecording()}resume(){this._loadAndCheckSession()&&(this._isPaused=!1,this.startRecording())}sendBufferedReplayOrFlush(){return T(this,arguments,function*({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();yield this.flushImmediate();const n=this.stopRecording();!t||!n||(this.recordingMode="session",this.session&&(this.session.shouldRefresh=!1,this._maybeSaveSession()),this.startRecording())})}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._loadAndCheckSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){const t=this.getSessionId();if(this._lastActivity&&rr(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return this._loadAndCheckSession()?t!==this.getSessionId()?(this._triggerFullSnapshot(),!1):!0:void 0}setInitialState(){const t=`${Ve.location.pathname}${Ve.location.hash}${Ve.location.search}`,n=`${Ve.location.origin}${t}`;this.performanceEvents=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=fM({useCompression:this._options.useCompression}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this.startRecording()}_handleException(t){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("[Replay]",t),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&this._options._experiments&&this._options._experiments.captureExceptions&&Ki(t)}_loadAndCheckSession(){const{type:t,session:n}=ko({timeouts:this.timeouts,stickySession:!!this._options.stickySession,currentSession:this.session,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:this._options.errorSampleRate>0});t==="new"&&this.setInitialState();const a=this.getSessionId();return n.id!==a&&(n.previousSessionId=a),this.session=n,this.session.sampled?!0:(this.stop("session unsampled"),!1)}_addListeners(){try{Ve.document.addEventListener("visibilitychange",this._handleVisibilityChange),Ve.addEventListener("blur",this._handleWindowBlur),Ve.addEventListener("focus",this._handleWindowFocus),Ve.addEventListener("keydown",this._handleKeyboardEvent),this._hasInitializedCoreListeners||(PB(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}"PerformanceObserver"in Ve&&(this._performanceObserver=rM(this))}_removeListeners(){try{Ve.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Ve.removeEventListener("blur",this._handleWindowBlur),Ve.removeEventListener("focus",this._handleWindowFocus),Ve.removeEventListener("keydown",this._handleKeyboardEvent),this._performanceObserver&&(this._performanceObserver.disconnect(),this._performanceObserver=null)}catch(t){this._handleException(t)}}__init13(){this._handleVisibilityChange=()=>{Ve.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init14(){this._handleWindowBlur=()=>{const t=Wn({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init15(){this._handleWindowFocus=()=>{const t=Wn({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init16(){this._handleKeyboardEvent=()=>{this.triggerUserActivity()}}_doChangeToBackgroundTasks(t){if(!this.session)return;const n=Zp(this.session,this.timeouts);t&&!n&&this._createCustomBreadcrumb(t),this._conditionalFlush()}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Replay] Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_triggerFullSnapshot(t=!0){try{(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Replay] Taking full rrweb snapshot"),jn.takeFullSnapshot(t)}catch(n){this._handleException(n)}}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{Ss(this,{type:He.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){const t=[...this.performanceEvents];return this.performanceEvents=[],Promise.all(Ji(this,AB(t)))}_conditionalFlush(){this.recordingMode!=="buffer"&&this.flushImmediate()}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||t.segmentId)return;const a=n.getEarliestTimestamp();a&&a<this._context.initialTimestamp&&(this._context.initialTimestamp=a)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}_runFlush(){return T(this,null,function*(){if(!this.session||!this.eventBuffer){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("[Replay] No session or eventBuffer found to flush.");return}if(yield this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(yield kB(this),!!this.eventBuffer))try{this._updateInitialTimestampFromEventBuffer();const t=yield this.eventBuffer.finish(),n=this.session.id,a=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession(),yield gf({replayId:n,recordingData:t,segmentId:s,eventContext:a,session:this.session,options:this.getOptions(),timestamp:Date.now()})}catch(t){this._handleException(t),this.stop("sendReplay");const n=Se().getClient();n&&n.recordDroppedEvent("send_error","replay")}})}__init17(){this._flush=(...n)=>T(this,[...n],function*({force:t=!1}={}){if(!(!this._isEnabled&&!t)){if(!this.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error("[Replay] No session found to flush.");return}if(this._debouncedFlush.cancel(),!this._flushLock){this._flushLock=this._runFlush(),yield this._flushLock,this._flushLock=null;return}try{yield this._flushLock}catch(a){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.error(a)}finally{this._debouncedFlush()}}})}_maybeSaveSession(){this.session&&this._options.stickySession&&fl(this.session)}__init18(){this._onMutationHandler=t=>{const n=t.length,a=this._options._experiments.mutationLimit||0,s=this._options._experiments.mutationBreadcrumbLimit||1e3,i=a&&n>a;if(n>s||i){const o=Wn({category:"replay.mutations",data:{count:n}});this._createCustomBreadcrumb(o)}return i?(this._triggerFullSnapshot(!1),!1):!0}}}function Ya(e,t,n,a){const s=typeof a=="string"?a.split(","):[],i=[...e,...s,...t];return typeof n!="undefined"&&(typeof n=="string"&&i.push(`.${n}`),console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")),i.join(",")}function FB({mask:e,unmask:t,block:n,unblock:a,ignore:s,blockClass:i,blockSelector:o,maskTextClass:r,maskTextSelector:l,ignoreClass:u}){const p=['base[href="/"]'],f=Ya(e,[".sentry-mask","[data-sentry-mask]"],r,l),g=Ya(t,[".sentry-unmask","[data-sentry-unmask]"]),y={maskTextSelector:f,unmaskTextSelector:g,maskInputSelector:f,unmaskInputSelector:g,blockSelector:Ya(n,[".sentry-block","[data-sentry-block]",...p],i,o),unblockSelector:Ya(a,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Ya(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return i instanceof RegExp&&(y.blockClass=i),r instanceof RegExp&&(y.maskTextClass=r),y}function jc(){return typeof window!="undefined"&&(!dp()||GB())}function GB(){return typeof process!="undefined"&&process.type==="renderer"}const Kc='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',zB=["content-length","content-type","accept"];let Qc=!1;class _s{static __initStatic(){this.id="Replay"}__init(){this.name=_s.id}constructor({flushMinDelay:t=a2,flushMaxDelay:n=s2,stickySession:a=!0,useCompression:s=!0,_experiments:i={},sessionSampleRate:o,errorSampleRate:r,maskAllText:l=!0,maskAllInputs:u=!0,blockAllMedia:p=!0,networkDetailAllowUrls:f=[],networkCaptureBodies:g=!0,networkRequestHeaders:y=[],networkResponseHeaders:w=[],mask:m=[],unmask:E=[],block:P=[],unblock:S=[],ignore:D=[],maskFn:C,blockClass:$,blockSelector:G,maskInputOptions:U,maskTextClass:F,maskTextSelector:B,ignoreClass:W}={}){if(_s.prototype.__init.call(this),this._recordingOptions=Z(A({maskAllInputs:u,maskAllText:l,maskInputOptions:Z(A({},U||{}),{password:!0}),maskTextFn:C,maskInputFn:C},FB({mask:m,unmask:E,block:P,unblock:S,ignore:D,blockClass:$,blockSelector:G,maskTextClass:F,maskTextSelector:B,ignoreClass:W})),{slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0}),this._initialOptions={flushMinDelay:t,flushMaxDelay:n,stickySession:a,sessionSampleRate:o,errorSampleRate:r,useCompression:s,blockAllMedia:p,maskAllInputs:u,maskAllText:l,networkDetailAllowUrls:f,networkCaptureBodies:g,networkRequestHeaders:Xc(y),networkResponseHeaders:Xc(w),_experiments:i},typeof o=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${o} })`),this._initialOptions.sessionSampleRate=o),typeof r=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${r} })`),this._initialOptions.errorSampleRate=r),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Kc}`:Kc),this._isInitialized&&jc())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Qc}set _isInitialized(t){Qc=t}setupOnce(){jc()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop():Promise.resolve()}flush(t){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(t)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&this._replay.initializeSampling()}_setup(){const t=HB(this._initialOptions);this._replay=new lt({options:t,recordingOptions:this._recordingOptions})}}_s.__initStatic();function HB(e){const t=Se().getClient(),n=t&&t.getOptions(),a=A({sessionSampleRate:0,errorSampleRate:0},Xt(e));return n?(e.sessionSampleRate==null&&e.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set."),typeof n.replaysSessionSampleRate=="number"&&(a.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(a.errorSampleRate=n.replaysOnErrorSampleRate),a):(console.warn("SDK client is not available."),a)}function Xc(e){return[...zB,...e.map(t=>t.toLowerCase())]}const Ge=Nt;function YB(){Ge&&Ge.document?Ge.document.addEventListener("visibilitychange",()=>{const e=Ps();if(Ge.document.hidden&&e){const t="cancelled";(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.finish()}}):(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const gl=(e,t,n)=>{let a,s;return i=>{t.value>=0&&(i||n)&&(s=t.value-(a||0),(s||a===void 0)&&(a=t.value,t.delta=s,e(t)))}},WB=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,VB=()=>{const e=Ge.performance.timing,t=Ge.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const a in e)a!=="navigationStart"&&a!=="toJSON"&&(n[a]=Math.max(e[a]-e.navigationStart,0));return n},mf=()=>Ge.__WEB_VITALS_POLYFILL__?Ge.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||VB()):Ge.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],yf=()=>{const e=mf();return e&&e.activationStart||0},ml=(e,t)=>{const n=mf();let a="navigate";return n&&(Ge.document.prerendering||yf()>0?a="prerender":a=n.type.replace(/_/g,"-")),{name:e,value:typeof t=="undefined"?-1:t,rating:"good",delta:0,entries:[],id:WB(),navigationType:a}},As=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const a=new PerformanceObserver(s=>{t(s.getEntries())});return a.observe(Object.assign({type:e,buffered:!0},n||{})),a}}catch(a){}},eo=(e,t)=>{const n=a=>{(a.type==="pagehide"||Ge.document.visibilityState==="hidden")&&(e(a),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},qB=e=>{const t=ml("CLS",0);let n,a=0,s=[];const i=r=>{r.forEach(l=>{if(!l.hadRecentInput){const u=s[0],p=s[s.length-1];a&&s.length!==0&&l.startTime-p.startTime<1e3&&l.startTime-u.startTime<5e3?(a+=l.value,s.push(l)):(a=l.value,s=[l]),a>t.value&&(t.value=a,t.entries=s,n&&n())}})},o=As("layout-shift",i);if(o){n=gl(e,t);const r=()=>{i(o.takeRecords()),n(!0)};return eo(r),r}};let ni=-1;const jB=()=>Ge.document.visibilityState==="hidden"&&!Ge.document.prerendering?0:1/0,KB=()=>{eo(({timeStamp:e})=>{ni=e},!0)},yl=()=>(ni<0&&(ni=jB(),KB()),{get firstHiddenTime(){return ni}}),QB=e=>{const t=yl(),n=ml("FID");let a;const s=r=>{r.startTime<t.firstHiddenTime&&(n.value=r.processingStart-r.startTime,n.entries.push(r),a(!0))},i=r=>{r.forEach(s)},o=As("first-input",i);a=gl(e,n),o&&eo(()=>{i(o.takeRecords()),o.disconnect()},!0)},Jc={},XB=e=>{const t=yl(),n=ml("LCP");let a;const s=o=>{const r=o[o.length-1];if(r){const l=Math.max(r.startTime-yf(),0);l<t.firstHiddenTime&&(n.value=l,n.entries=[r],a())}},i=As("largest-contentful-paint",s);if(i){a=gl(e,n);const o=()=>{Jc[n.id]||(s(i.takeRecords()),i.disconnect(),Jc[n.id]=!0,a(!0))};return["keydown","click"].forEach(r=>{addEventListener(r,o,{once:!0,capture:!0})}),eo(o,!0),o}};function So(e){return typeof e=="number"&&isFinite(e)}function Ca(e,a){var s=a,{startTimestamp:t}=s,n=Ga(s,["startTimestamp"]);return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild(A({startTimestamp:t},n))}function ht(e){return e/1e3}function vf(){return Ge&&Ge.addEventListener&&Ge.performance}let Zc=0,et={},qt,ss;function JB(){const e=vf();if(e&&_n){e.mark&&Ge.performance.mark("sentry-tracing-init"),aF();const t=tF(),n=nF();return()=>{t&&t(),n&&n()}}return()=>{}}function ZB(){As("longtask",t=>{for(const n of t){const a=Ps();if(!a)return;const s=ht(_n+n.startTime),i=ht(n.duration);a.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:s,endTimestamp:s+i})}})}function eF(){As("event",t=>{for(const n of t){const a=Ps();if(!a)return;if(n.name==="click"){const s=ht(_n+n.startTime),i=ht(n.duration);a.startChild({description:Vn(n.target),op:`ui.interaction.${n.name}`,startTimestamp:s,endTimestamp:s+i})}}},{durationThreshold:0})}function tF(){return qB(e=>{const t=e.entries.pop();t&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Measurements] Adding CLS"),et.cls={value:e.value,unit:""},ss=t)})}function nF(){return XB(e=>{const t=e.entries.pop();t&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Measurements] Adding LCP"),et.lcp={value:e.value,unit:"millisecond"},qt=t)})}function aF(){QB(e=>{const t=e.entries.pop();if(!t)return;const n=ht(_n),a=ht(t.startTime);(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Measurements] Adding FID"),et.fid={value:e.value,unit:"millisecond"},et["mark.fid"]={value:n+a,unit:"second"}})}function sF(e){const t=vf();if(!t||!Ge.performance.getEntries||!_n)return;(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Tracing] Adding & adjusting spans using Performance API");const n=ht(_n),a=t.getEntries();let s,i;if(a.slice(Zc).forEach(o=>{const r=ht(o.startTime),l=ht(o.duration);if(!(e.op==="navigation"&&n+r<e.startTimestamp))switch(o.entryType){case"navigation":{oF(e,o,n),s=n+ht(o.responseStart),i=n+ht(o.requestStart);break}case"mark":case"paint":case"measure":{iF(e,o,r,l,n);const u=yl(),p=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&p&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Measurements] Adding FP"),et.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&p&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Measurements] Adding FCP"),et.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{const u=o.name.replace(Ge.location.origin,"");lF(e,o,u,r,l,n);break}}}),Zc=Math.max(a.length-1,0),cF(e),e.op==="pageload"){typeof s=="number"&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Measurements] Adding TTFB"),et.ttfb={value:(s-e.startTimestamp)*1e3,unit:"millisecond"},typeof i=="number"&&i<=s&&(et["ttfb.requestTime"]={value:(s-i)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(r=>{if(!et[r]||n>=e.startTimestamp)return;const l=et[r].value,u=n+ht(l),p=Math.abs((u-e.startTimestamp)*1e3),f=p-l;(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Measurements] Normalized ${r} from ${l} to ${p} (${f})`),et[r].value=p});const o=et["mark.fid"];o&&et.fid&&(Ca(e,{description:"first input delay",endTimestamp:o.value+ht(et.fid.value),op:"ui.action",startTimestamp:o.value}),delete et["mark.fid"]),"fcp"in et||delete et.cls,Object.keys(et).forEach(r=>{e.setMeasurement(r,et[r].value,et[r].unit)}),uF(e)}qt=void 0,ss=void 0,et={}}function iF(e,t,n,a,s){const i=s+n,o=i+a;return Ca(e,{description:t.name,endTimestamp:o,op:t.entryType,startTimestamp:i}),i}function oF(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(a=>{Ws(e,t,a,n)}),Ws(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Ws(e,t,"fetch",n,"cache","domainLookupStart"),Ws(e,t,"domainLookup",n,"DNS"),rF(e,t,n)}function Ws(e,t,n,a,s,i){const o=i?t[i]:t[`${n}End`],r=t[`${n}Start`];!r||!o||Ca(e,{op:"browser",description:s||n,startTimestamp:a+ht(r),endTimestamp:a+ht(o)})}function rF(e,t,n){Ca(e,{op:"browser",description:"request",startTimestamp:n+ht(t.requestStart),endTimestamp:n+ht(t.responseEnd)}),Ca(e,{op:"browser",description:"response",startTimestamp:n+ht(t.responseStart),endTimestamp:n+ht(t.responseEnd)})}function lF(e,t,n,a,s,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const o={};"transferSize"in t&&(o["http.response_transfer_size"]=t.transferSize),"encodedBodySize"in t&&(o["http.response_content_length"]=t.encodedBodySize),"decodedBodySize"in t&&(o["http.decoded_response_content_length"]=t.decodedBodySize),"renderBlockingStatus"in t&&(o["resource.render_blocking_status"]=t.renderBlockingStatus);const r=i+a,l=r+s;Ca(e,{description:n,endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",startTimestamp:r,data:o})}function cF(e){const t=Ge.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),So(n.rtt)&&(et["connection.rtt"]={value:n.rtt,unit:"millisecond"})),So(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),So(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function uF(e){qt&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Measurements] Adding LCP Data"),qt.element&&e.setTag("lcp.element",Vn(qt.element)),qt.id&&e.setTag("lcp.id",qt.id),qt.url&&e.setTag("lcp.url",qt.url.trim().slice(0,200)),e.setTag("lcp.size",qt.size)),ss&&ss.sources&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log("[Measurements] Adding CLS Data"),ss.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,Vn(t.node))))}const hr=["localhost",/^\//],_r={traceFetch:!0,traceXHR:!0,tracingOrigins:hr,tracePropagationTargets:hr};function dF(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:a,tracingOrigins:s,shouldCreateSpanForRequest:i}=A({traceFetch:_r.traceFetch,traceXHR:_r.traceXHR},e),o=typeof i=="function"?i:u=>!0,r=u=>pF(u,a||s),l={};t&&Pt("fetch",u=>{fF(u,o,r,l)}),n&&Pt("xhr",u=>{_F(u,o,r,l)})}function pF(e,t){return Ba(e,t||hr)}function fF(e,t,n,a){if(!qi()||!(e.fetchData&&t(e.fetchData.url)))return;if(e.endTimestamp){const l=e.fetchData.__span;if(!l)return;const u=a[l];u&&(e.response?u.setHttpStatus(e.response.status):e.error&&u.setStatus("internal_error"),u.finish(),delete a[l]);return}const s=e.response&&e.response.headers&&e.response.headers.get("content-length"),i=Se().getScope(),o=i&&i.getSpan(),r=o&&o.transaction;if(o&&r){const{method:l,url:u}=e.fetchData,p=o.startChild({data:Z(A({url:u,type:"fetch"},s?{"http.response_content_length":s}:{}),{"http.method":l}),description:`${l} ${u}`,op:"http.client"});e.fetchData.__span=p.spanId,a[p.spanId]=p;const f=e.args[0];e.args[1]=e.args[1]||{};const g=e.args[1];n(e.fetchData.url)&&(g.headers=hF(f,r.getDynamicSamplingContext(),p,g))}}function hF(e,t,n,a){const s=gp(t),i=n.toTraceparent(),o=typeof Request!="undefined"&&Rn(e,Request)?e.headers:a.headers;if(o)if(typeof Headers!="undefined"&&Rn(o,Headers)){const r=new Headers(o);return r.append("sentry-trace",i),s&&r.append(Qo,s),r}else if(Array.isArray(o)){const r=[...o,["sentry-trace",i]];return s&&r.push([Qo,s]),r}else{const r="baggage"in o?o.baggage:void 0,l=[];return Array.isArray(r)?l.push(...r):r&&l.push(r),s&&l.push(s),Z(A({},o),{"sentry-trace":i,baggage:l.length>0?l.join(","):void 0})}else return{"sentry-trace":i,baggage:s}}function _F(e,t,n,a){const s=e.xhr,i=s&&s[Sn];if(!qi()||s&&s.__sentry_own_request__||!(s&&i&&t(i.url)))return;if(e.endTimestamp){const u=s.__sentry_xhr_span_id__;if(!u)return;const p=a[u];p&&(p.setHttpStatus(i.status_code),p.finish(),delete a[u]);return}const o=Se().getScope(),r=o&&o.getSpan(),l=r&&r.transaction;if(r&&l){const u=r.startChild({data:Z(A({},i.data),{type:"xhr","http.method":i.method,url:i.url}),description:`${i.method} ${i.url}`,op:"http.client"});if(s.__sentry_xhr_span_id__=u.spanId,a[s.__sentry_xhr_span_id__]=u,s.setRequestHeader&&n(i.url))try{s.setRequestHeader("sentry-trace",u.toTraceparent());const p=l.getDynamicSamplingContext(),f=gp(p);f&&s.setRequestHeader(Qo,f)}catch(p){}}}function gF(e,t=!0,n=!0){if(!Ge||!Ge.location){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn("Could not initialize routing instrumentation due to invalid location");return}let a=Ge.location.href,s;t&&(s=e({name:Ge.location.pathname,startTimestamp:_n?_n/1e3:void 0,op:"pageload",metadata:{source:"url"}})),n&&Pt("history",({to:i,from:o})=>{if(o===void 0&&a&&a.indexOf(i)!==-1){a=void 0;return}o!==i&&(a=void 0,s&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.finish()),s=e({name:Ge.location.pathname,op:"navigation",metadata:{source:"url"}}))})}const mF="BrowserTracing",yF=A(Z(A({},Zs),{markBackgroundTransactions:!0,routingInstrumentation:gF,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{}}),_r);class vl{__init(){this.name=mF}constructor(t){vl.prototype.__init.call(this),yL(),this.options=A(A({},yF),t),this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=JB(),this.options.enableLongTask&&ZB(),this.options._experiments.enableInteractions&&eF()}setupOnce(t,n){this._getCurrentHub=n;const{routingInstrumentation:a,startTransactionOnLocationChange:s,startTransactionOnPageLoad:i,markBackgroundTransactions:o,traceFetch:r,traceXHR:l,tracePropagationTargets:u,shouldCreateSpanForRequest:p,_experiments:f}=this.options;a(g=>{const y=this._createRouteTransaction(g);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(y,g,n),y},i,s),o&&YB(),f.enableInteractions&&this._registerInteractionListener(),dF({traceFetch:r,traceXHR:l,tracePropagationTargets:u,shouldCreateSpanForRequest:p})}_createRouteTransaction(t){if(!this._getCurrentHub){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}const{beforeNavigate:n,idleTimeout:a,finalTimeout:s,heartbeatInterval:i}=this.options,o=t.op==="pageload",r=o?eu("sentry-trace"):null,l=o?eu("baggage"):null,u=r?zO(r):void 0,p=l?nL(l):void 0,f=Z(A(A({},t),u),{metadata:Z(A({},t.metadata),{dynamicSamplingContext:u&&!p?{}:p}),trimEnd:!0}),g=typeof n=="function"?n(f):f,y=g===void 0?Z(A({},f),{sampled:!1}):g;y.metadata=y.name!==f.name?Z(A({},y.metadata),{source:"custom"}):y.metadata,this._latestRouteName=y.name,this._latestRouteSource=y.metadata&&y.metadata.source,y.sampled===!1&&(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] Will not send ${y.op} transaction because of beforeNavigate.`),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.log(`[Tracing] Starting ${y.op} transaction on scope`);const w=this._getCurrentHub(),{location:m}=Ge,E=wc(w,y,a,s,!0,{location:m},i);return E.registerBeforeFinishCallback(P=>{this._collectWebVitals(),sF(P)}),E}_registerInteractionListener(){let t;const n=()=>{const{idleTimeout:a,finalTimeout:s,heartbeatInterval:i}=this.options,o="ui.action.click",r=Ps();if(r&&r.op&&["navigation","pageload"].includes(r.op)){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.finish(),t=void 0),!this._getCurrentHub){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}const l=this._getCurrentHub(),{location:u}=Ge,p={name:this._latestRouteName,op:o,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};t=wc(l,p,a,s,!0,{location:u},i)};["click"].forEach(a=>{addEventListener(a,n,{once:!1,capture:!0})})}}function eu(e){const t=nO(`meta[name=${e}]`);return t?t.getAttribute("content"):null}const bf=["activate","mount","update"],vF=/(?:^|[-_])(\w)/g,bF=e=>e.replace(vF,t=>t.toUpperCase()).replace(/[-_]/g,""),wF="<Root>",Ao="<Anonymous>",EF=(e,t)=>e.repeat?e.repeat(t):e,is=(e,t)=>{if(!e)return Ao;if(e.$root===e)return wF;if(!e.$options)return Ao;const n=e.$options;let a=n.name||n._componentTag;const s=n.__file;if(!a&&s){const i=s.match(/([^/\\]+)\.vue$/);i&&(a=i[1])}return(a?`<${bF(a)}>`:Ao)+(s&&t!==!1?` at ${s}`:"")},PF=e=>{if(e&&(e._isVue||e.__isVue)&&e.$parent){const t=[];let n=0;for(;e;){if(t.length>0){const s=t[t.length-1];if(s.constructor===e.constructor){n++,e=e.$parent;continue}else n>0&&(t[t.length-1]=[s,n],n=0)}t.push(e),e=e.$parent}return`

found in

${t.map((s,i)=>`${(i===0?"---> ":EF(" ",5+i*2))+(Array.isArray(s)?`${is(s[0])}... (${s[1]} recursive calls)`:is(s))}`).join(`
`)}`}return`

(found in ${is(e)})`},kF=(e,t)=>{const{errorHandler:n,warnHandler:a,silent:s}=e.config;e.config.errorHandler=(i,o,r)=>{const l=is(o,!1),u=o?PF(o):"",p={componentName:l,lifecycleHook:r,trace:u};if(t.attachProps&&o&&(o.$options&&o.$options.propsData?p.propsData=o.$options.propsData:o.$props&&(p.propsData=o.$props)),setTimeout(()=>{Se().withScope(f=>{f.setContext("vue",p),Se().captureException(i)})}),typeof n=="function"&&n.call(e,i,o,r),t.logErrors){const f=typeof console!="undefined",g=`Error in ${r}: "${i&&i.toString()}"`;a?a.call(null,g,o,u):f&&!s&&console.error(`[Vue warn]: ${g}${u}`)}}},tu="ui.vue",SF={activate:["activated","deactivated"],create:["beforeCreate","created"],destroy:["beforeDestroy","destroyed"],mount:["beforeMount","mounted"],update:["beforeUpdate","updated"]};function gr(){const e=Se().getScope();return e&&e.getTransaction()}function AF(e,t,n){e.$_sentryRootSpanTimer&&clearTimeout(e.$_sentryRootSpanTimer),e.$_sentryRootSpanTimer=setTimeout(()=>{e.$root&&e.$root.$_sentryRootSpan&&(e.$root.$_sentryRootSpan.finish(t),e.$root.$_sentryRootSpan=void 0)},n)}const TF=e=>{const t=(e.hooks||[]).concat(bf).filter((a,s,i)=>i.indexOf(a)===s),n={};for(const a of t){const s=SF[a];if(!s){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&H.warn(`Unknown hook: ${a}`);continue}for(const i of s)n[i]=function(){const o=this.$root===this;if(o){const u=gr();u&&(this.$_sentryRootSpan=this.$_sentryRootSpan||u.startChild({description:"Application Render",op:`${tu}.render`}))}const r=is(this,!1),l=Array.isArray(e.trackComponents)?e.trackComponents.indexOf(r)>-1:e.trackComponents;if(!(!o&&!l))if(this.$_sentrySpans=this.$_sentrySpans||{},i==s[0]){const u=this.$root&&this.$root.$_sentryRootSpan||gr();if(u){const p=this.$_sentrySpans[a];p&&!p.endTimestamp&&p.finish(),this.$_sentrySpans[a]=u.startChild({description:`Vue <${r}>`,op:`${tu}.${a}`})}}else{const u=this.$_sentrySpans[a];if(!u)return;u.finish(),AF(this,Nn(),e.timeout)}}}return n},CF=Nt,xF={Vue:CF.Vue,attachProps:!0,logErrors:!0,hooks:bf,timeout:2e3,trackComponents:!1,_metadata:{sdk:{name:"sentry.javascript.vue",packages:[{name:"npm:@sentry/vue",version:vi}],version:vi}}};function IF(e={}){const t=A(A({},xF),e);if(XU(t),!t.Vue&&!t.app){console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured.\nUpdate your `Sentry.init` call with an appropriate config option:\n`app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).");return}t.app?sl(t.app).forEach(a=>nu(a,t)):t.Vue&&nu(t.Vue,t)}const nu=(e,t)=>{const n=e;(n._instance&&n._instance.isMounted)===!0&&console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`."),kF(e,t),qi(t)&&e.mixin(TF(A(A({},t),t.tracingOptions)))};function $F(e,t={}){return(n,a=!0,s=!0)=>{const i={"routing.instrumentation":"vue-router"};a&&De&&De.location&&n({name:De.location.pathname,op:"pageload",tags:i,metadata:{source:"url"}}),e.onError(o=>Ki(o)),e.beforeEach((o,r,l)=>{const u=r.name==null&&r.matched.length===0,p={params:o.params,query:o.query};let f=o.path,g="url";if(o.name&&t.routeLabel!=="path"?(f=o.name.toString(),g="custom"):o.matched[0]&&o.matched[0].path&&(f=o.matched[0].path,g="route"),a&&u){const y=gr();y&&(y.metadata.source!=="custom"&&y.setName(f,g),y.setData("params",p.params),y.setData("query",p.query))}s&&!u&&n({name:f,op:"navigation",tags:i,data:p,metadata:{source:g}}),l()})}}const RF=(e,t)=>{IF({app:e,dsn:"https://79c4bc2d0add44d1b5441bb94b202d7c@o68822.ingest.sentry.io/4505159198244864",integrations:[new vl({routingInstrumentation:$F(t)}),new _s],tracesSampleRate:.2,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1})};qr.beforeEach((e,t)=>T(void 0,null,function*(){const n=Oe();if(Ig(e.name)&&e.name!==t.name&&n.isLogin)return t.name?{name:t.name}:{name:"upload"}}));function DF(e){return e=e.replace('(new Image).src="https://c.clarity.ms/c.gif"}','var imgEl = new Image();imgEl.crossOrigin="anonymous";imgEl.src="https://c.clarity.ms/c.gif"}'),e=e.replace(/t\.src="(https:\/\/www\.clarity\.ms\/s\/\d+\.\d+\.\d+\/clarity\.js)"/,'t.crossOrigin="anonymous";t.src="$1"'),e}(function(e,t,n,a,s,i,o){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)};const r="https://www.clarity.ms/tag/"+s;fetch(r).then(function(l){return T(this,null,function*(){if(l.ok){const u=yield l.text(),p=t.createElement("script");p.innerText=DF(u),p.async=1;const f=t.getElementsByTagName(a)[0];f.parentNode.insertBefore(p,f)}})}).catch(function(){})})(window,document,"clarity","script","gqcd8nncbt");const{confirm:NF,prompt:OF,alert:LF}=Gt,UF={closeOnClickModal:!1,draggable:!0},MF=()=>{Ju()},BF=()=>{Zu()},bl=(e,...t)=>{MF();const n=t[2]||{};switch(t[2]=Z(A(A({},UF),n),{beforeClose(a,s,i){BF(),n.beforeClose?n.beforeClose(a,s,i):i()}}),e){case"alert":return LF(...t);case"confirm":return NF(...t);case"prompt":return OF(...t)}};Gt.confirm=(...e)=>bl("confirm",...e);Gt.prompt=(...e)=>bl("prompt",...e);Gt.alert=(...e)=>bl("alert",...e);const FF=()=>re.get("/config"),GF=e=>{e.use(qr)},zF=()=>T(void 0,null,function*(){const e=Dh(T1);Bh(e);const t=Oe();yield FF(),yield t.fetchUserInfo(),RF(e,qr),VN(e),GF(e),jN(e),e.mount("#app")});zF();Em();setTimeout(()=>{xa(()=>import("./svg-spirit-a5dce7e6.js"),[],import.meta.url)});export{B8 as $,xr as A,Ke as B,Wt as C,$r as D,Un as E,KF as F,Cr as G,Xe as H,QF as I,jh as J,Zh as K,S8 as L,e8 as M,ZF as N,n8 as O,i8 as P,XF as Q,Cn as R,a8 as S,u_ as T,Ra as U,ju as V,Pg as W,lg as X,Pu as Y,cg as Z,se as _,wg as a,Ad as a0,Lt as a1,jF as a2,Ng as a3,at as a4,D8 as a5,R8 as a6,$8 as a7,N8 as a8,qe as a9,$g as aA,d8 as aB,r_ as aC,w8 as aD,W8 as aE,h8 as aF,T8 as aG,Sg as aH,Ag as aI,y8 as aJ,je as aK,di as aL,Zt as aM,Il as aN,Vh as aO,c8 as aP,l8 as aQ,L8 as aR,qF as aS,D_ as aT,Cu as aU,q8 as aV,p8 as aW,f8 as aX,md as aa,F8 as ab,t8 as ac,_S as ad,a_ as ae,P8 as af,t_ as ag,e_ as ah,M8 as ai,O8 as aj,V8 as ak,Li as al,Y8 as am,H8 as an,E8 as ao,Hr as ap,l_ as aq,_8 as ar,m8 as as,en as at,tn as au,o8 as av,C8 as aw,U8 as ax,I8 as ay,Co as az,zr as b,Oe as c,kr as d,A8 as e,te as f,r8 as g,re as h,k8 as i,j1 as j,Fe as k,b8 as l,vd as m,Fr as n,s8 as o,v8 as p,Be as q,kd as r,g8 as s,G8 as t,yn as u,z8 as v,x8 as w,u8 as x,JF as y,zn as z};
